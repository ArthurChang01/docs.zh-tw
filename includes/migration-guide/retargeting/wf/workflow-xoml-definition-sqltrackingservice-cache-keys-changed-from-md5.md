---
ms.openlocfilehash: 47aa67096f8dcd250521d9c34dde97cb2eb368d7
ms.sourcegitcommit: d55e14eb63588830c0ba1ea95a24ce6c57ef8c8c
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/11/2019
ms.locfileid: "67803558"
---
### <a name="workflow-xoml-definition-and-sqltrackingservice-cache-keys-changed-from-md5-to-sha256"></a><span data-ttu-id="7e0e4-101">工作流程 XOML 定義和 SqlTrackingService 快取索引鍵已從 MD5 變更為 SHA256</span><span class="sxs-lookup"><span data-stu-id="7e0e4-101">Workflow XOML definition and SqlTrackingService cache keys changed from MD5 to SHA256</span></span>

|   |   |
|---|---|
|<span data-ttu-id="7e0e4-102">詳細資料</span><span class="sxs-lookup"><span data-stu-id="7e0e4-102">Details</span></span>|<span data-ttu-id="7e0e4-103">工作流程執行階段會保留 XOML 中定義之工作流程定義的快取。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-103">The Workflow Runtime in keeps a cache of workflow definitions defined in XOML.</span></span> <span data-ttu-id="7e0e4-104">SqlTrackingService 也會保留以字串作為索引鍵的快取。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-104">The SqlTrackingService also keeps a cache that is keyed by strings.</span></span> <span data-ttu-id="7e0e4-105">這些快取會依包含總和檢查碼雜湊值的值作為索引鍵。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-105">These caches are keyed by values that include checksum hash value.</span></span> <span data-ttu-id="7e0e4-106">在 .NET Framework 4.7.2 及更早版本中，這個總和檢查碼雜湊會使用 MD5 演算法，它會在啟用 FIPS 的系統上造成問題。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-106">In the .NET Framework 4.7.2 and earlier versions, this checksum hashing used the MD5 algorithm, which caused issues on FIPS-enabled systems.</span></span> <span data-ttu-id="7e0e4-107">從 .NET Framework 4.8 開始，使用的演算法是 SHA256。由於每次啟動工作流程執行階段和 SqlTrackingService 時都會重新計算這些值，此變更不應存在任何相容性問題。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-107">Starting with the .NET Framework 4.8, the algorithm used is SHA256.There shouldn't be an compatability issue with this change because the values are recalculated each time the Workflow Runtime and SqlTrackingService is started.</span></span> <span data-ttu-id="7e0e4-108">不過，如有需要，我們也提供可讓客戶還原回使用舊版雜湊演算法的方式。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-108">However, we have provided quirks to allow customers to revert back to usage of the legacy hashing algorithm, if necessary.</span></span>|
|<span data-ttu-id="7e0e4-109">建議</span><span class="sxs-lookup"><span data-stu-id="7e0e4-109">Suggestion</span></span>|<span data-ttu-id="7e0e4-110">如果這項變更在執行工作流程時會造成問題，請嘗試設定其中一個 <code>AppContext</code> 參數 (或兩者)：</span><span class="sxs-lookup"><span data-stu-id="7e0e4-110">If this change presents a problem when executing workflows, try setting one or both of the <code>AppContext</code> switches:</span></span><ul><li><span data-ttu-id="7e0e4-111">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot; 設為 True。</span><span class="sxs-lookup"><span data-stu-id="7e0e4-111">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot; to true.</span></span></li><li><span data-ttu-id="7e0e4-112">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot; 設為 True.</span><span class="sxs-lookup"><span data-stu-id="7e0e4-112">&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot; to true.</span></span></li></ul><span data-ttu-id="7e0e4-113">程式碼：</span><span class="sxs-lookup"><span data-stu-id="7e0e4-113">In code:</span></span><pre><code class="lang-csharp">System.AppContext.SetSwitch(&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey&quot;, true);&#13;&#10;System.AppContext.SetSwitch(&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKey&quot;, true);&#13;&#10;</code></pre><span data-ttu-id="7e0e4-114">或在組態檔中 (必須位於建立 <xref:System.Workflow.Runtime.WorkflowRuntime> 物件之應用程式的組態檔中)：</span><span class="sxs-lookup"><span data-stu-id="7e0e4-114">Or in the configuration file (this needs to be in the config file for the application that is creating the <xref:System.Workflow.Runtime.WorkflowRuntime> object):</span></span><pre><code class="lang-xml">&lt;configuration&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Workflow.Runtime.UseLegacyHashForWorkflowDefinitionDispenserCacheKey=true&quot; /&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Workflow.Runtime.UseLegacyHashForSqlTrackingCacheKeytrue&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>|
|<span data-ttu-id="7e0e4-115">範圍</span><span class="sxs-lookup"><span data-stu-id="7e0e4-115">Scope</span></span>|<span data-ttu-id="7e0e4-116">次要</span><span class="sxs-lookup"><span data-stu-id="7e0e4-116">Minor</span></span>|
|<span data-ttu-id="7e0e4-117">版本</span><span class="sxs-lookup"><span data-stu-id="7e0e4-117">Version</span></span>|<span data-ttu-id="7e0e4-118">4.8</span><span class="sxs-lookup"><span data-stu-id="7e0e4-118">4.8</span></span>|
|<span data-ttu-id="7e0e4-119">類型</span><span class="sxs-lookup"><span data-stu-id="7e0e4-119">Type</span></span>|<span data-ttu-id="7e0e4-120">正在重定目標</span><span class="sxs-lookup"><span data-stu-id="7e0e4-120">Retargeting</span></span>|

