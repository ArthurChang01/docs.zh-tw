---
ms.openlocfilehash: f1a1eab471d46f018a8e0d0cf787d487cf67c11e
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/18/2019
ms.locfileid: "59774009"
---
### <a name="contextmenustripsourcecontrol-property-contains-a-valid-control-in-the-case-of-nested-toolstripmenuitems"></a><span data-ttu-id="e1e74-101">在巢狀 ToolStripMenuItems 的情況下，ContextMenuStrip.SourceControl 屬性包含有效的控制項</span><span class="sxs-lookup"><span data-stu-id="e1e74-101">ContextMenuStrip.SourceControl property contains a valid control in the case of nested ToolStripMenuItems</span></span>

|   |   |
|---|---|
|<span data-ttu-id="e1e74-102">詳細資料</span><span class="sxs-lookup"><span data-stu-id="e1e74-102">Details</span></span>|<span data-ttu-id="e1e74-103">在 .NET Framework 4.7.1 和舊版本中，當使用者從巢狀 <xref:System.Windows.Forms.ToolStripMenuItem> 控制項開啟功能表時，<xref:System.Windows.Forms.ContextMenuStrip.SourceControl?displayProperty=nameWithType> 屬性會誤傳回 null。</span><span class="sxs-lookup"><span data-stu-id="e1e74-103">In the .NET Framework 4.7.1 and previous versions, the <xref:System.Windows.Forms.ContextMenuStrip.SourceControl?displayProperty=nameWithType> property incorrectly returns null when the user opens the menu from nested <xref:System.Windows.Forms.ToolStripMenuItem> controls.</span></span> <span data-ttu-id="e1e74-104">在 .NET Framework 4.7.2 和更新版本中，一律會將 <xref:System.Windows.Forms.ContextMenuStrip.SourceControl> 屬性設定為實際的來源控制項。</span><span class="sxs-lookup"><span data-stu-id="e1e74-104">In the .NET Framework 4.7.2 and later, <xref:System.Windows.Forms.ContextMenuStrip.SourceControl> property is always set to the actual source control.</span></span>|
|<span data-ttu-id="e1e74-105">建議</span><span class="sxs-lookup"><span data-stu-id="e1e74-105">Suggestion</span></span>|<span data-ttu-id="e1e74-106"><strong>如何選擇使用或不使用這些變更</strong>為了讓應用程式能受益於這些變更，您必須在 .NET Framework 4.7.2 或更新版本上執行應用程式。</span><span class="sxs-lookup"><span data-stu-id="e1e74-106"><strong>How to opt in or out of these changes</strong>In order for an application to benefit from these changes, it must run on the .NET Framework 4.7.2 or later.</span></span> <span data-ttu-id="e1e74-107">應用程式可以用下列任一種方式受益於這些變更：</span><span class="sxs-lookup"><span data-stu-id="e1e74-107">The application can benefit from these changes in either of the following ways:</span></span><ul><li><span data-ttu-id="e1e74-108">以 .NET Framework 4.7.2 為目標。</span><span class="sxs-lookup"><span data-stu-id="e1e74-108">It targets the .NET Framework 4.7.2.</span></span> <span data-ttu-id="e1e74-109">在以 .NET Framework 4.7.2 或更新版本為目標的 Windows Forms 應用程式上，預設會啟用這項變更。</span><span class="sxs-lookup"><span data-stu-id="e1e74-109">This change is enabled by default on Windows Forms applications that target the .NET Framework 4.7.2 or later.</span></span></li><li><span data-ttu-id="e1e74-110">以 .NET Framework 4.7.1 或舊版為目標，並選擇不使用舊版協助工具行為；方法為在 app.config 檔的 <code>&lt;runtime&gt;</code> 區段中新增下列 [AppContext 參數](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md)，並將其設定為 <code>false</code>，如下範例所示。</span><span class="sxs-lookup"><span data-stu-id="e1e74-110">It targets the .NET Framework 4.7.1 or an earlier version and opts out of the legacy accessibility behaviors by adding the following [AppContext Switch](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) to the <code>&lt;runtime&gt;</code> section of the app.config file and setting it to <code>false</code>, as the following example shows.</span></span></li></ul><pre><code class="lang-xml">&lt;runtime&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.System.Windows.Forms.UseLegacyContextMenuStripSourceControlValue=false&quot;/&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;</code></pre><span data-ttu-id="e1e74-111">如果應用程式是以 .NET Framework 4.7.2 或更新版本為目標，而您想要保留舊版的行為，則可以明確將此 AppContext 參數設為 <code>true</code>，選擇使用舊版的來源控制項。</span><span class="sxs-lookup"><span data-stu-id="e1e74-111">Applications that target the .NET Framework 4.7.2 or later, and want to preserve the legacy behavior can opt in to the use of the legacy source control value by explicitly setting this AppContext switch to <code>true</code>.</span></span>|
|<span data-ttu-id="e1e74-112">範圍</span><span class="sxs-lookup"><span data-stu-id="e1e74-112">Scope</span></span>|<span data-ttu-id="e1e74-113">Edge</span><span class="sxs-lookup"><span data-stu-id="e1e74-113">Edge</span></span>|
|<span data-ttu-id="e1e74-114">版本</span><span class="sxs-lookup"><span data-stu-id="e1e74-114">Version</span></span>|<span data-ttu-id="e1e74-115">4.7.2</span><span class="sxs-lookup"><span data-stu-id="e1e74-115">4.7.2</span></span>|
|<span data-ttu-id="e1e74-116">類型</span><span class="sxs-lookup"><span data-stu-id="e1e74-116">Type</span></span>|<span data-ttu-id="e1e74-117">正在重定目標</span><span class="sxs-lookup"><span data-stu-id="e1e74-117">Retargeting</span></span>|
|<span data-ttu-id="e1e74-118">受影響的 API</span><span class="sxs-lookup"><span data-stu-id="e1e74-118">Affected APIs</span></span>|<ul><li><xref:System.Windows.Forms.ContextMenuStrip.SourceControl?displayProperty=nameWithType></li></ul>|
