---
title: 執行緒 (C#)
ms.custom: ''
ms.date: 07/20/2015
ms.prod: .net
ms.reviewer: ''
ms.suite: ''
ms.technology:
- devlang-csharp
ms.topic: article
ms.assetid: 236d157d-37c0-4ee8-89fc-721e6c596325
caps.latest.revision: 4
author: BillWagner
ms.author: wiwagn
ms.openlocfilehash: 661208662c022b2a3b9c5daae6b0425e46ea6501
ms.sourcegitcommit: 685143b62385500f59bc36274b8adb191f573a16
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/09/2017
---
# <a name="threading-c"></a><span data-ttu-id="69d9c-102">執行緒 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-102">Threading (C#)</span></span>
<span data-ttu-id="69d9c-103">C# 程式可以透過執行緒執行並行處理，讓您可以一次執行多項作業。</span><span class="sxs-lookup"><span data-stu-id="69d9c-103">Threading enables your C# program to perform concurrent processing so that you can do more than one operation at a time.</span></span> <span data-ttu-id="69d9c-104">例如，您可以使用執行緒監視使用者的輸入、執行背景工作，以及處理同時的輸入資料流。</span><span class="sxs-lookup"><span data-stu-id="69d9c-104">For example, you can use threading to monitor input from the user, perform background tasks, and handle simultaneous streams of input.</span></span>  
  
 <span data-ttu-id="69d9c-105">執行緒具有下列特性：</span><span class="sxs-lookup"><span data-stu-id="69d9c-105">Threads have the following properties:</span></span>  
  
-   <span data-ttu-id="69d9c-106">執行緒可讓您的程式執行並行處理。</span><span class="sxs-lookup"><span data-stu-id="69d9c-106">Threads enable your program to perform concurrent processing.</span></span>  
  
-   <span data-ttu-id="69d9c-107">.NET Framework <xref:System.Threading> 命名空間讓執行緒更方便使用。</span><span class="sxs-lookup"><span data-stu-id="69d9c-107">The .NET Framework <xref:System.Threading> namespace makes using threads easier.</span></span>  
  
-   <span data-ttu-id="69d9c-108">執行緒會共用應用程式的資源。</span><span class="sxs-lookup"><span data-stu-id="69d9c-108">Threads share the application's resources.</span></span> <span data-ttu-id="69d9c-109">如需詳細資訊，請參閱 [Using Threads and Threading](../../../../../docs/standard/threading/using-threads-and-threading.md) (使用 Thread 與 Threading)。</span><span class="sxs-lookup"><span data-stu-id="69d9c-109">For more information, see [Using Threads and Threading](../../../../../docs/standard/threading/using-threads-and-threading.md).</span></span>  
  
 <span data-ttu-id="69d9c-110">根據預設，C# 程式都有一個執行緒。</span><span class="sxs-lookup"><span data-stu-id="69d9c-110">By default, a C# program has one thread.</span></span> <span data-ttu-id="69d9c-111">但您可以建立輔助執行緒來與主要執行緒一起並行執行程式碼。</span><span class="sxs-lookup"><span data-stu-id="69d9c-111">However, auxiliary threads can be created and used to execute code in parallel with the primary thread.</span></span> <span data-ttu-id="69d9c-112">這些執行緒通常稱為*背景工作執行緒*。</span><span class="sxs-lookup"><span data-stu-id="69d9c-112">These threads are often called *worker threads*.</span></span>  
  
 <span data-ttu-id="69d9c-113">背景工作執行緒可用於執行耗時或時間要求嚴格的工作，但不會佔用主要執行緒。</span><span class="sxs-lookup"><span data-stu-id="69d9c-113">Worker threads can be used to perform time-consuming or time-critical tasks without tying up the primary thread.</span></span> <span data-ttu-id="69d9c-114">例如，伺服器應用程式中通常會使用背景工作執行緒來滿足傳入的要求，而且無須等待前一個要求完成就能達成。</span><span class="sxs-lookup"><span data-stu-id="69d9c-114">For example, worker threads are often used in server applications to fulfill incoming requests without waiting for the previous request to be completed.</span></span> <span data-ttu-id="69d9c-115">背景工作執行緒在桌面應用程式中也可用於執行「背景」工作，讓驅動使用者介面項目的主要執行緒能夠持續回應使用者動作。</span><span class="sxs-lookup"><span data-stu-id="69d9c-115">Worker threads are also used to perform "background" tasks in desktop applications so that the main thread--which drives user interface elements--remains responsive to user actions.</span></span>  
  
 <span data-ttu-id="69d9c-116">執行緒可以解決輸送量與回應性的問題，但也可能會引發資源共用的問題，像是死結及競爭狀況。</span><span class="sxs-lookup"><span data-stu-id="69d9c-116">Threading solves problems with throughput and responsiveness, but it can also introduce resource-sharing issues such as deadlocks and race conditions.</span></span> <span data-ttu-id="69d9c-117">多執行緒最適合需要不同資源的工作，例如檔案控制及網路連線。</span><span class="sxs-lookup"><span data-stu-id="69d9c-117">Multiple threads are best for tasks that require different resources such as file handles and network connections.</span></span> <span data-ttu-id="69d9c-118">為單一資源指派多個執行緒除可能會導致同步問題之外，還可能經常因為等候其他執行緒戰勝使用多執行的目標而造成執行緒受阻無法執行。</span><span class="sxs-lookup"><span data-stu-id="69d9c-118">Assigning multiple threads to a single resource is likely to cause synchronization issues, and having threads frequently blocked when waiting for other threads defeats the purpose of using multiple threads.</span></span>  
  
 <span data-ttu-id="69d9c-119">常見的策略是使用背景工作處理序來執行耗時或時間要求嚴格，但又不需要太多其他執行緒所用之資源的工作。</span><span class="sxs-lookup"><span data-stu-id="69d9c-119">A common strategy is to use worker threads to perform time-consuming or time-critical tasks that do not require many of the resources used by other threads.</span></span> <span data-ttu-id="69d9c-120">當然，您程式中的一些資源仍須能夠讓多執行緒存取。</span><span class="sxs-lookup"><span data-stu-id="69d9c-120">Naturally, some resources in your program must be accessed by multiple threads.</span></span> <span data-ttu-id="69d9c-121">對於這些情況，<xref:System.Threading>命名空間提供了一些類別可用於同步執行緒。</span><span class="sxs-lookup"><span data-stu-id="69d9c-121">For these cases, the <xref:System.Threading> namespace provides classes for synchronizing threads.</span></span> <span data-ttu-id="69d9c-122">這些類別包括 <xref:System.Threading.Mutex>、<xref:System.Threading.Monitor>、<xref:System.Threading.Interlocked>、<xref:System.Threading.AutoResetEvent> 及 <xref:System.Threading.ManualResetEvent>。</span><span class="sxs-lookup"><span data-stu-id="69d9c-122">These classes include <xref:System.Threading.Mutex>, <xref:System.Threading.Monitor>, <xref:System.Threading.Interlocked>, <xref:System.Threading.AutoResetEvent>, and <xref:System.Threading.ManualResetEvent>.</span></span>  
  
 <span data-ttu-id="69d9c-123">您可以其中一些類別來同步多執行緒的活動，但有一些執行緒的支援則來自 C# 語言。</span><span class="sxs-lookup"><span data-stu-id="69d9c-123">You can use some or all these classes to synchronize the activities of multiple threads, but some support for threading is supported by the C# language.</span></span> <span data-ttu-id="69d9c-124">例如 [Lock 陳述式](../../../../csharp/language-reference/keywords/lock-statement.md)可以透過隱含使用<xref:System.Threading.Monitor>來提供同步功能。</span><span class="sxs-lookup"><span data-stu-id="69d9c-124">For example, the [Lock Statement](../../../../csharp/language-reference/keywords/lock-statement.md) provides synchronization features through implicit use of <xref:System.Threading.Monitor>.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="69d9c-125">自 [!INCLUDE[net_v40_long](~/includes/net-v40-long-md.md)] 起，多執行緒程式設計因為 <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> 及 <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> 類別、[平行 LINQ (PLINQ)](https://msdn.microsoft.com/library/dd460688)、<xref:System.Collections.Concurrent?displayProperty=nameWithType> 命名空間中的新並行集合類別，以及以工作 (而非執行緒) 概念為基礎的新程式設計模型而獲得大幅簡化。</span><span class="sxs-lookup"><span data-stu-id="69d9c-125">Beginning with the [!INCLUDE[net_v40_long](~/includes/net-v40-long-md.md)], multithreaded programming is greatly simplified with the <xref:System.Threading.Tasks.Parallel?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Task?displayProperty=nameWithType> classes, [Parallel LINQ (PLINQ)](https://msdn.microsoft.com/library/dd460688), new concurrent collection classes in the <xref:System.Collections.Concurrent?displayProperty=nameWithType> namespace, and a new programming model that is based on the concept of tasks rather than threads.</span></span> <span data-ttu-id="69d9c-126">如需詳細資訊，請參閱[平行程式設計](../../../../../docs/standard/parallel-programming/index.md)。</span><span class="sxs-lookup"><span data-stu-id="69d9c-126">For more information, see [Parallel Programming](../../../../../docs/standard/parallel-programming/index.md).</span></span>  
  
## <a name="related-topics"></a><span data-ttu-id="69d9c-127">相關主題</span><span class="sxs-lookup"><span data-stu-id="69d9c-127">Related Topics</span></span>  
  
|<span data-ttu-id="69d9c-128">標題</span><span class="sxs-lookup"><span data-stu-id="69d9c-128">Title</span></span>|<span data-ttu-id="69d9c-129">說明</span><span class="sxs-lookup"><span data-stu-id="69d9c-129">Description</span></span>|  
|-----------|-----------------|  
|[<span data-ttu-id="69d9c-130">多執行緒應用程式 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-130">Multithreaded Applications (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/multithreaded-applications.md)|<span data-ttu-id="69d9c-131">說明如何建立及使用執行緒。</span><span class="sxs-lookup"><span data-stu-id="69d9c-131">Describes how to create and use threads.</span></span>|  
|[<span data-ttu-id="69d9c-132">多執行緒程序的參數和傳回值 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-132">Parameters and Return Values for Multithreaded Procedures (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/parameters-and-return-values-for-multithreaded-procedures.md)|<span data-ttu-id="69d9c-133">說明多執行緒應用程式如何傳遞及傳回參數。</span><span class="sxs-lookup"><span data-stu-id="69d9c-133">Describes how to pass and return parameters with multithreaded applications.</span></span>|  
|[<span data-ttu-id="69d9c-134">逐步解說：BackgroundWorker 元件的多執行緒 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-134">Walkthrough: Multithreading with the BackgroundWorker Component (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/walkthrough-multithreading-with-the-backgroundworker-component.md)|<span data-ttu-id="69d9c-135">示範如何建立簡單的多執行緒應用程式。</span><span class="sxs-lookup"><span data-stu-id="69d9c-135">Shows how to create a simple multithreaded application.</span></span>|  
|[<span data-ttu-id="69d9c-136">執行緒同步處理 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-136">Thread Synchronization (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-synchronization.md)|<span data-ttu-id="69d9c-137">說明如何控制執行緒的互動。</span><span class="sxs-lookup"><span data-stu-id="69d9c-137">Describes how to control the interactions of threads.</span></span>|  
|[<span data-ttu-id="69d9c-138">執行緒計時器 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-138">Thread Timers (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-timers.md)|<span data-ttu-id="69d9c-139">說明如何定期對個別的執行緒執行程序。</span><span class="sxs-lookup"><span data-stu-id="69d9c-139">Describes how to run procedures on separate threads at fixed intervals.</span></span>|  
|[<span data-ttu-id="69d9c-140">執行緒集區 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-140">Thread Pooling (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/thread-pooling.md)|<span data-ttu-id="69d9c-141">說明如何使用系統管理的背景工作執行緒集區。</span><span class="sxs-lookup"><span data-stu-id="69d9c-141">Describes how to use a pool of worker threads that are managed by the system.</span></span>|  
|[<span data-ttu-id="69d9c-142">如何：使用執行緒集區 (C#)</span><span class="sxs-lookup"><span data-stu-id="69d9c-142">How to: Use a Thread Pool (C#)</span></span>](../../../../csharp/programming-guide/concepts/threading/how-to-use-a-thread-pool.md)|<span data-ttu-id="69d9c-143">示範如何同步執行緒集區中多執行緒的使用。</span><span class="sxs-lookup"><span data-stu-id="69d9c-143">Demonstrates synchronized use of multiple threads in the thread pool.</span></span>|  
|[<span data-ttu-id="69d9c-144">執行緒處理</span><span class="sxs-lookup"><span data-stu-id="69d9c-144">Threading</span></span>](../../../../../docs/standard/threading/index.md)|<span data-ttu-id="69d9c-145">說明如何在.NET Framework 中實作執行緒。</span><span class="sxs-lookup"><span data-stu-id="69d9c-145">Describes how to implement threading in the .NET Framework.</span></span>|
