---
title: 泛型的優點 (C# 程式設計手冊)
ms.date: 07/20/2015
helpviewer_keywords:
- generics [C#], benefits
ms.assetid: 80f037cd-9ea7-48be-bfc1-219bfb2d4277
ms.openlocfilehash: bd0a133c6ce1a9623bfe8598d1dc786c44e6eaad
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/04/2018
---
# <a name="benefits-of-generics-c-programming-guide"></a><span data-ttu-id="00770-102">泛型的優點 (C# 程式設計手冊)</span><span class="sxs-lookup"><span data-stu-id="00770-102">Benefits of Generics (C# Programming Guide)</span></span>
<span data-ttu-id="00770-103">泛型提供舊版 Common Language Runtime 限制的解決方案，以及透過在通用基底類型 <xref:System.Object> 間來回轉換達成一般化的 C# 語言。</span><span class="sxs-lookup"><span data-stu-id="00770-103">Generics provide the solution to a limitation in earlier versions of the common language runtime and the C# language in which generalization is accomplished by casting types to and from the universal base type <xref:System.Object>.</span></span> <span data-ttu-id="00770-104">您可以藉由建立泛型類別，在編譯時期建立類型安全的集合。</span><span class="sxs-lookup"><span data-stu-id="00770-104">By creating a generic class, you can create a collection that is type-safe at compile-time.</span></span>  
  
 <span data-ttu-id="00770-105">您可撰寫簡短的程式，使用 .NET 類別庫的 <xref:System.Collections.ArrayList> 集合類別，示範非泛型集合類別的使用限制。</span><span class="sxs-lookup"><span data-stu-id="00770-105">The limitations of using non-generic collection classes can be demonstrated by writing a short program that uses the <xref:System.Collections.ArrayList> collection class from the .NET class library.</span></span> <span data-ttu-id="00770-106"><xref:System.Collections.ArrayList> 類別的執行個體可以儲存任何參考或實值型別。</span><span class="sxs-lookup"><span data-stu-id="00770-106">An instance of the <xref:System.Collections.ArrayList> class can store any reference or value type.</span></span>  
  
 [!code-csharp[csProgGuideGenerics#4](../../../csharp/programming-guide/generics/codesnippet/CSharp/benefits-of-generics_1.cs)]  
  
 <span data-ttu-id="00770-107">但這種便利要付出成本。</span><span class="sxs-lookup"><span data-stu-id="00770-107">But this convenience comes at a cost.</span></span> <span data-ttu-id="00770-108">任何新增至 <xref:System.Collections.ArrayList> 的參考或實值型別，都會以隱含方式向上轉換成 <xref:System.Object>。</span><span class="sxs-lookup"><span data-stu-id="00770-108">Any reference or value type that is added to an <xref:System.Collections.ArrayList> is implicitly upcast to <xref:System.Object>.</span></span> <span data-ttu-id="00770-109">如果項目是實值型別，它們在新增至清單時必須為 boxed，擷取時為 unboxed。</span><span class="sxs-lookup"><span data-stu-id="00770-109">If the items are value types, they must be boxed when they are added to the list, and unboxed when they are retrieved.</span></span> <span data-ttu-id="00770-110">轉換和 boxing 與 unboxing 作業會降低效能。boxing 和 unboxing 在必須重複處理大型集合的案例中，有極其顯著的效果。</span><span class="sxs-lookup"><span data-stu-id="00770-110">Both the casting and the boxing and unboxing operations decrease performance; the effect of boxing and unboxing can be very significant in scenarios where you must iterate over large collections.</span></span>  
  
 <span data-ttu-id="00770-111">另一個限制是缺乏編譯時期類型檢查，因為 <xref:System.Collections.ArrayList> 會將所有一切轉換成 <xref:System.Object>，在編譯時期，沒有任何方法可以防止用戶端程式碼執行類似這樣的作業：</span><span class="sxs-lookup"><span data-stu-id="00770-111">The other limitation is lack of compile-time type checking; because an <xref:System.Collections.ArrayList> casts everything to <xref:System.Object>, there is no way at compile-time to prevent client code from doing something such as this:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#5](../../../csharp/programming-guide/generics/codesnippet/CSharp/benefits-of-generics_2.cs)]  
  
 <span data-ttu-id="00770-112">雖然完全可以接受且有時是刻意的，但在建立異質集合時，將字串和 `ints` 合併到單一 <xref:System.Collections.ArrayList> 更可能是程式設計錯誤，而且在執行階段之前不會偵測到這個錯誤。</span><span class="sxs-lookup"><span data-stu-id="00770-112">Although perfectly acceptable and sometimes intentional if you are creating a heterogeneous collection, combining strings and `ints` in a single <xref:System.Collections.ArrayList> is more likely to be a programming error, and this error will not be detected until runtime.</span></span>  
  
 <span data-ttu-id="00770-113">在 1.0 版和 1.1 版的 C# 語言中，您只能撰寫自己的特定類型集合，避免 .NET Framework 基底類別庫集合類別中的通用程式碼危害。</span><span class="sxs-lookup"><span data-stu-id="00770-113">In versions 1.0 and 1.1 of the C# language, you could avoid the dangers of generalized code in the .NET Framework base class library collection classes only by writing your own type specific collections.</span></span> <span data-ttu-id="00770-114">當然，因為這種類別不能供多個資料類型重複使用，所以沒有一般化的優點，而且必須為要儲存的每個類型重新撰寫類別。</span><span class="sxs-lookup"><span data-stu-id="00770-114">Of course, because such a class is not reusable for more than one data type, you lose the benefits of generalization, and you have to rewrite the class for each type that will be stored.</span></span>  
  
 <span data-ttu-id="00770-115"><xref:System.Collections.ArrayList> 和其他相似類別真正需要的，是能有一種方法，讓用戶端程式碼在每個執行個體上指定它們打算使用的特定資料類型。</span><span class="sxs-lookup"><span data-stu-id="00770-115">What <xref:System.Collections.ArrayList> and other similar classes really need is a way for client code to specify, on a per-instance basis, the particular data type that they intend to use.</span></span> <span data-ttu-id="00770-116">這會消除向上轉換成 <xref:System.Object> 的需要，也可能會讓編譯器進行類型檢查。</span><span class="sxs-lookup"><span data-stu-id="00770-116">That would eliminate the need for the upcast to <xref:System.Object> and would also make it possible for the compiler to do type checking.</span></span> <span data-ttu-id="00770-117">換句話說，<xref:System.Collections.ArrayList> 需要型別參數。</span><span class="sxs-lookup"><span data-stu-id="00770-117">In other words, <xref:System.Collections.ArrayList> needs a type parameter.</span></span> <span data-ttu-id="00770-118">這正是泛型所提供的。</span><span class="sxs-lookup"><span data-stu-id="00770-118">That is exactly what generics provide.</span></span> <span data-ttu-id="00770-119">在泛型 <xref:System.Collections.Generic.List%601> 集合的 <xref:System.Collections.Generic> 命名空間中，將項目新增至集合的相同作業看起來像這樣：</span><span class="sxs-lookup"><span data-stu-id="00770-119">In the generic <xref:System.Collections.Generic.List%601> collection, in the <xref:System.Collections.Generic> namespace, the same operation of adding items to the collection resembles this:</span></span>  
  
 [!code-csharp[csProgGuideGenerics#6](../../../csharp/programming-guide/generics/codesnippet/CSharp/benefits-of-generics_3.cs)]  
  
 <span data-ttu-id="00770-120">對用戶端程式碼而言，相較於 <xref:System.Collections.ArrayList>，唯一以 <xref:System.Collections.Generic.List%601> 新增的語法是宣告和具現化中的型別引數。</span><span class="sxs-lookup"><span data-stu-id="00770-120">For client code, the only added syntax with <xref:System.Collections.Generic.List%601> compared to <xref:System.Collections.ArrayList> is the type argument in the declaration and instantiation.</span></span> <span data-ttu-id="00770-121">以略增加編碼複雜性為代價，您就可以建立比 <xref:System.Collections.ArrayList> 更安全、更快的清單，尤其是當清單項目為實值型別時。</span><span class="sxs-lookup"><span data-stu-id="00770-121">In return for this slightly more coding complexity, you can create a list that is not only safer than <xref:System.Collections.ArrayList>, but also significantly faster, especially when the list items are value types.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="00770-122">請參閱</span><span class="sxs-lookup"><span data-stu-id="00770-122">See Also</span></span>  
 <xref:System.Collections.Generic>  
 [<span data-ttu-id="00770-123">C# 程式設計指南</span><span class="sxs-lookup"><span data-stu-id="00770-123">C# Programming Guide</span></span>](../../../csharp/programming-guide/index.md)  
 [<span data-ttu-id="00770-124">泛型簡介</span><span class="sxs-lookup"><span data-stu-id="00770-124">Introduction to Generics</span></span>](../../../csharp/programming-guide/generics/introduction-to-generics.md)  
 [<span data-ttu-id="00770-125">Boxing 和 Unboxing</span><span class="sxs-lookup"><span data-stu-id="00770-125">Boxing and Unboxing</span></span>](../../../csharp/programming-guide/types/boxing-and-unboxing.md)  
 [<span data-ttu-id="00770-126">何時使用泛型集合</span><span class="sxs-lookup"><span data-stu-id="00770-126">When to Use Generic Collections</span></span>](../../../standard/collections/when-to-use-generic-collections.md)  
 [<span data-ttu-id="00770-127">集合方針</span><span class="sxs-lookup"><span data-stu-id="00770-127">Guidelines for Collections</span></span>](../../../standard/design-guidelines/guidelines-for-collections.md)   
