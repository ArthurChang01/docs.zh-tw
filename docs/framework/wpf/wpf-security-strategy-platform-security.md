---
title: WPF 安全性策略 – 平台安全性
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- platform security model [WPF]
- Common Language Runtime (CLR) security features
- operating system security model [WPF]
- Internet Explorer security features [WPF]
- Security-Critical method
- CLR security features [WPF]
- security model [WPF]
- security model [WPF], platform
- WPF [WPF], about security model
- Windows Presentation Foundation [WPF], about security model
- security model [WPF], operating system
ms.assetid: 2a39a054-3e2a-4659-bcb7-8bcea490ba31
ms.openlocfilehash: 65725851cb413e28ceff0d1c9c4b62b76c4fff18
ms.sourcegitcommit: 10736f243dd2296212e677e207102c463e5f143e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/06/2019
ms.locfileid: "68817878"
---
# <a name="wpf-security-strategy---platform-security"></a><span data-ttu-id="a6a49-102">WPF 安全性策略 – 平台安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-102">WPF Security Strategy - Platform Security</span></span>
<span data-ttu-id="a6a49-103">雖然 Windows Presentation Foundation (WPF) 提供各種安全性服務, 但它也會利用基礎平臺的安全性功能, 其中包括作業系統、CLR 和 Internet Explorer。</span><span class="sxs-lookup"><span data-stu-id="a6a49-103">While Windows Presentation Foundation (WPF) provides a variety of security services, it also leverages the security features of the underlying platform, which includes the operating system, the CLR, and Internet Explorer.</span></span> <span data-ttu-id="a6a49-104">這三層安全性功能一起為 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 提供了強大、深入防禦的安全性模型，即使其中一層失敗，還有兩層可以幫忙把關，如下圖所示：</span><span class="sxs-lookup"><span data-stu-id="a6a49-104">These layers combine to provide [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] a strong, defense-in-depth security model that attempts to avoid any single point of failure, as shown in the following figure:</span></span>  
  
 ![顯示 WPF 安全性模型的圖表。](./media/wpf-security-strategy-platform-security/windows-presentation-foundation-security.png)  
  
 <span data-ttu-id="a6a49-106">本主題的其餘部分會針對每一層安全性功能當中，與 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 特別有關的功能進行討論。</span><span class="sxs-lookup"><span data-stu-id="a6a49-106">The remainder of this topic discusses the features in each of these layers that pertain to [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] specifically.</span></span>  

<a name="Operating_System_Security"></a>   
## <a name="operating-system-security"></a><span data-ttu-id="a6a49-107">作業系統安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-107">Operating System Security</span></span>  
 <span data-ttu-id="a6a49-108">          [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 需要的最低作業系統層級是 [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="a6a49-108">The minimum level of operating system that is required by [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] is [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)].</span></span> <span data-ttu-id="a6a49-109">的核心[!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)]提供數項安全性功能, 可構成所有 Windows 應用程式的安全性基礎, 包括以[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]為基礎的。</span><span class="sxs-lookup"><span data-stu-id="a6a49-109">The core of [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)] provides several security features that form the security foundation for all Windows applications, including those built with [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)].</span></span> [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] <span data-ttu-id="a6a49-110">加入 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 的安全性功能，並做進一步擴充。</span><span class="sxs-lookup"><span data-stu-id="a6a49-110">incorporates the security features of [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] and extends them further.</span></span> <span data-ttu-id="a6a49-111">本主題會詳細討論這些對 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 至為重要的安全性功能，以及 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 如何整合這些功能來提供進一步的深入防禦。</span><span class="sxs-lookup"><span data-stu-id="a6a49-111">This topic discusses the breadth of these security features that are important to [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)], as well as how [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] integrates with them to provide further defense-in-depth.</span></span>  
  
<a name="Microsoft_Windows_XP_Service_Pack_2__SP2_"></a>   
### <a name="microsoft-windows-xp-service-pack-2-sp2"></a><span data-ttu-id="a6a49-112">Microsoft Windows XP Service Pack 2 (SP2)</span><span class="sxs-lookup"><span data-stu-id="a6a49-112">Microsoft Windows XP Service Pack 2 (SP2)</span></span>  
 <span data-ttu-id="a6a49-113">除了一般的審查和強化的 Windows, 我們還會在本主題中討論[!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)]三項主要功能:</span><span class="sxs-lookup"><span data-stu-id="a6a49-113">In addition to a general review and strengthening of Windows, there are three key features from [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)] that we will discuss in this topic:</span></span>  
  
- <span data-ttu-id="a6a49-114">/GS 編譯</span><span class="sxs-lookup"><span data-stu-id="a6a49-114">/GS compilation</span></span>  
  
- [!INCLUDE[TLA#tla_win_update](../../../includes/tlasharptla-win-update-md.md)]<span data-ttu-id="a6a49-115">.</span><span class="sxs-lookup"><span data-stu-id="a6a49-115">.</span></span>  
  
#### <a name="gs-compilation"></a><span data-ttu-id="a6a49-116">/GS 編譯</span><span class="sxs-lookup"><span data-stu-id="a6a49-116">/GS Compilation</span></span>  
 [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)]<span data-ttu-id="a6a49-117">藉由重新編譯許多核心系統程式庫 (包括所有[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]相依性, 例如 CLR) 來提供保護, 以協助減輕緩衝區溢位。</span><span class="sxs-lookup"><span data-stu-id="a6a49-117">provides protection by recompiling many core system libraries, including all of the [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] dependencies such as the CLR, to help mitigate buffer overruns.</span></span> <span data-ttu-id="a6a49-118">搭配 C/C++ 命令列編譯器使用 /GS 參數即可達成這個目的。</span><span class="sxs-lookup"><span data-stu-id="a6a49-118">This is achieved by using the /GS parameter with the C/C++ command-line compiler.</span></span> <span data-ttu-id="a6a49-119">雖然這樣做應該能夠明確避免發生緩衝區滿溢的情況，但是 /GS 編譯還提供一個深入防禦範例，可防止無意中或惡意利用緩衝區滿溢所造成的潛在弱點遭到攻擊。</span><span class="sxs-lookup"><span data-stu-id="a6a49-119">Although buffer overruns should be explicitly avoided, /GS compilation provides an example of a defense-in-depth against potential vulnerabilities that are inadvertently or maliciously created by them.</span></span>  
  
 <span data-ttu-id="a6a49-120">在過去，緩衝區滿溢一直是造成許多重大安全性攻擊的原因。</span><span class="sxs-lookup"><span data-stu-id="a6a49-120">Historically, buffer overruns have been the cause of many high-impact security exploits.</span></span> <span data-ttu-id="a6a49-121">當攻擊者利用程式碼弱點，插入將緩衝區寫爆的惡意程式碼時，就會發生緩衝區滿溢的情況。</span><span class="sxs-lookup"><span data-stu-id="a6a49-121">A buffer overrun occurs when an attacker takes advantage of a code vulnerability that allows the injection of malicious code that writes past the boundaries of a buffer.</span></span> <span data-ttu-id="a6a49-122">這會讓攻擊者有機會透過覆寫函式的傳回位址，來劫持執行該程式碼的處理序，以執行攻擊者的程式碼。</span><span class="sxs-lookup"><span data-stu-id="a6a49-122">This then allows an attacker to hijack the process in which the code is executing by overwriting the return address of a function to cause the execution of the attacker's code.</span></span> <span data-ttu-id="a6a49-123">結果是，惡意程式碼可以利用與被劫持的處理序相同的權限來執行任意程式碼。</span><span class="sxs-lookup"><span data-stu-id="a6a49-123">The result is malicious code that executes arbitrary code with the same privileges as the hijacked process.</span></span>  
  
 <span data-ttu-id="a6a49-124">整體而言，/GS 編譯器旗標會針對具有本機字串緩衝區的函式，插入一種特殊的安全性 Cookie 來保護該函式的傳回位址，因此可防止發生一些可能的緩衝區滿溢情況。</span><span class="sxs-lookup"><span data-stu-id="a6a49-124">At a high level, the /GS compiler flag protects against some potential buffer overruns by injecting a special security cookie to protect the return address of a function that has local string buffers.</span></span> <span data-ttu-id="a6a49-125">在函式傳回之後，安全性 Cookie 會與其原先的值做比較。</span><span class="sxs-lookup"><span data-stu-id="a6a49-125">After a function returns, the security cookie is compared with its previous value.</span></span> <span data-ttu-id="a6a49-126">如果這個值已變更，則可能發生緩衝區滿溢的情況，而且會停止處理序並顯示錯誤狀況。</span><span class="sxs-lookup"><span data-stu-id="a6a49-126">If the value has changed, a buffer overrun may have occurred and the process is stopped with an error condition.</span></span> <span data-ttu-id="a6a49-127">停止處理序可防止執行可能惡意的程式碼。</span><span class="sxs-lookup"><span data-stu-id="a6a49-127">Stopping the process prevents the execution of potentially malicious code.</span></span> <span data-ttu-id="a6a49-128">如需詳細資訊, 請參閱[/gs (緩衝區安全性檢查)](/cpp/build/reference/gs-buffer-security-check) 。</span><span class="sxs-lookup"><span data-stu-id="a6a49-128">See [/GS (Buffer Security Check)](/cpp/build/reference/gs-buffer-security-check) for more details.</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="a6a49-129">會利用 /GS 旗標進行編譯，可為 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 應用程式提供多一層的防禦。</span><span class="sxs-lookup"><span data-stu-id="a6a49-129">is compiled with the /GS flag to add yet another layer of defense to [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
#### <a name="microsoft-windows-update-enhancements"></a><span data-ttu-id="a6a49-130">Microsoft Windows Update 增強功能</span><span class="sxs-lookup"><span data-stu-id="a6a49-130">Microsoft Windows Update Enhancements</span></span>  
 [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)] <span data-ttu-id="a6a49-131">中也已增強 [!INCLUDE[TLA#tla_win_update](../../../includes/tlasharptla-win-update-md.md)]，下載和安裝更新的程序將會更簡單。</span><span class="sxs-lookup"><span data-stu-id="a6a49-131">was also improved in [!INCLUDE[TLA2#tla_winxpsp2](../../../includes/tla2sharptla-winxpsp2-md.md)] to simplify the process for downloading and installing updates.</span></span> <span data-ttu-id="a6a49-132">由於這些變更 (特別是安全性更新方面) 可協助確保 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 客戶的系統會更新成最新版本，因此可以大幅提高這些客戶的安全性。</span><span class="sxs-lookup"><span data-stu-id="a6a49-132">These changes significantly enhance security for [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] customers by helping to ensure that their systems are up-to-date, particularly with respect to security updates.</span></span>  
  
<a name="Windows_Vista"></a>   
### <a name="windows-vista"></a><span data-ttu-id="a6a49-133">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="a6a49-133">Windows Vista</span></span>  
 [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] <span data-ttu-id="a6a49-134">上的 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 使用者將會得到這個作業系統額外提供的安全性增強功能，包括「最低權限使用者存取」、程式碼完整性檢查和權限隔離。</span><span class="sxs-lookup"><span data-stu-id="a6a49-134">users on [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] will benefit from the operating system's additional security enhancements, including "Least-Privilege User Access", code integrity checks, and privilege isolation.</span></span>  
  
#### <a name="user-account-control-uac"></a><span data-ttu-id="a6a49-135">使用者帳戶控制 (UAC)</span><span class="sxs-lookup"><span data-stu-id="a6a49-135">User Account Control (UAC)</span></span>  
 <span data-ttu-id="a6a49-136">目前, Windows 使用者通常會以系統管理員許可權執行, 因為許多應用程式都需要它們來進行安裝或執行, 或兩者都有。</span><span class="sxs-lookup"><span data-stu-id="a6a49-136">Today, Windows users tend to run with administrator privileges because many applications require them for either installation or execution, or both.</span></span> <span data-ttu-id="a6a49-137">其中一個例子是，使用者必須能夠將預設應用程式設定寫入至登錄。</span><span class="sxs-lookup"><span data-stu-id="a6a49-137">Being able to write default application settings to the Registry is one example.</span></span>  
  
 <span data-ttu-id="a6a49-138">以系統管理員權限執行，實際上表示應用程式會從具有系統管理員權限的處理序執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-138">Running with administrator privileges really means that applications execute from processes that are granted administrator privileges.</span></span> <span data-ttu-id="a6a49-139">這樣做會有安全性風險，那就是劫持以系統管理員權限執行之處理序的任何惡意程式碼，都會自動繼承這些權限，包括重要系統資源的存取權。</span><span class="sxs-lookup"><span data-stu-id="a6a49-139">The security impact of this is that any malicious code that hijacks a process running with administrator privileges will automatically inherit those privileges, including access to critical system resources.</span></span>  
  
 <span data-ttu-id="a6a49-140">防範這個安全性威脅的方法之一，就是以最少的必要權限執行應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-140">One way to protect against this security threat is to run applications with the least amount of privileges that are required.</span></span> <span data-ttu-id="a6a49-141">這就是所謂的最低權限原則，也是 [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] 作業系統的核心功能。</span><span class="sxs-lookup"><span data-stu-id="a6a49-141">This is known as the principle of least privilege, and is a core feature of the [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] operating system.</span></span> <span data-ttu-id="a6a49-142">這項功能稱為使用者帳戶控制 (UAC)，是由 [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] UAC 以兩種主要的方式加以使用：</span><span class="sxs-lookup"><span data-stu-id="a6a49-142">This feature is called User Account Control (UAC), and is used by [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] UAC in two key ways:</span></span>  
  
- <span data-ttu-id="a6a49-143">讓大多數的應用程式預設以 UAC 權限執行，即使使用者是系統管理員也一樣。只有需要系統管理員權限的應用程式才會以系統管理員權限執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-143">To run most applications with UAC privileges by default, even if the user is an administrator; only applications that need administrator privileges will run with administrator privileges.</span></span> <span data-ttu-id="a6a49-144">若要以系統管理員權限執行，應用程式必須在其應用程式資訊清單中明確標記，或明確標記為安全性原則中的項目。</span><span class="sxs-lookup"><span data-stu-id="a6a49-144">To run with administrative privileges, applications must be explicitly marked in either their application manifest or as an entry in security policy.</span></span>  
  
- <span data-ttu-id="a6a49-145">提供像是虛擬化的相容性解決方案。</span><span class="sxs-lookup"><span data-stu-id="a6a49-145">To provide compatibility solutions like virtualization.</span></span> <span data-ttu-id="a6a49-146">例如，許多應用程式會嘗試寫入限制位置，例如 C:\Program Files。</span><span class="sxs-lookup"><span data-stu-id="a6a49-146">For example, many applications try to write to restricted locations like C:\Program Files.</span></span> <span data-ttu-id="a6a49-147">如果應用程式是以 UAC 執行，則會建立依使用者而定的替代位置，應用程式不需要有系統管理員權限就能寫入至這個位置。</span><span class="sxs-lookup"><span data-stu-id="a6a49-147">For applications executing under UAC, an alternative per-user location exists that does not require administrator privileges to write to.</span></span> <span data-ttu-id="a6a49-148">如果應用程式是以 UAC 執行，則 UAC 會將 C:\Program Files 虛擬化，讓以為寫入至這個位置的應用程式，實際上是寫入至依使用者而定的替代位置。</span><span class="sxs-lookup"><span data-stu-id="a6a49-148">For applications running under UAC, UAC virtualizes C:\Program Files so that applications who think they are writing to it are actually writing to the alternative, per-user location.</span></span> <span data-ttu-id="a6a49-149">這種相容性轉換工作可讓作業系統執行更多應用程式 (之前在 UAC 中執行時，並無法執行這麼多應用程式)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-149">This kind of compatibility work enables the operating system to run many applications that couldn't previously run in UAC.</span></span>  
  
#### <a name="code-integrity-checks"></a><span data-ttu-id="a6a49-150">程式碼完整性檢查</span><span class="sxs-lookup"><span data-stu-id="a6a49-150">Code Integrity Checks</span></span>  
 [!INCLUDE[TLA#tla_longhorn](../../../includes/tlasharptla-longhorn-md.md)] <span data-ttu-id="a6a49-151">加入更深入的程式碼完整性檢查，以協助防止在載入/執行階段將惡意程式插入系統檔案或核心中。</span><span class="sxs-lookup"><span data-stu-id="a6a49-151">incorporates deeper code integrity checks to help prevent malicious code from being injected into system files or into the kernel at load/run time.</span></span> <span data-ttu-id="a6a49-152">這已經超過系統檔案保護範圍。</span><span class="sxs-lookup"><span data-stu-id="a6a49-152">This goes beyond system file protection.</span></span>  
  
<a name="Limited_Rights_Process_for_Browser_Hosted_Applications"></a>   
### <a name="limited-rights-process-for-browser-hosted-applications"></a><span data-ttu-id="a6a49-153">瀏覽器裝載之應用程式的有限權限處理序</span><span class="sxs-lookup"><span data-stu-id="a6a49-153">Limited Rights Process for Browser-Hosted Applications</span></span>  
 <span data-ttu-id="a6a49-154">瀏覽器裝載的 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 應用程式是在網際網路區域沙箱中執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-154">Browser-hosted [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications execute within the Internet zone sandbox.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="a6a49-155">與 Microsoft Internet Explorer 整合可透過其他支援擴充此保護。</span><span class="sxs-lookup"><span data-stu-id="a6a49-155">integration with Microsoft Internet Explorer extends this protection with additional support.</span></span>  
  
 <span data-ttu-id="a6a49-156">由於 [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)] 通常會以網際網路區域權限集合進行沙箱化，所以移除這些權限不但不會破壞 [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)] 的相容性，</span><span class="sxs-lookup"><span data-stu-id="a6a49-156">Since [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)] are generally sandboxed by the Internet zone permission set, removing these privileges does not harm [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)] from a compatibility perspective.</span></span> <span data-ttu-id="a6a49-157">反而可以建立多一層的深層防禦。即使沙箱化的應用程式能夠攻擊其他層級並劫持處理序，處理序仍然只會有有限的權限。</span><span class="sxs-lookup"><span data-stu-id="a6a49-157">Instead, an additional defense-in-depth layer is created; if a sandboxed application is able to exploit other layers and hijack the process, the process will still only have limited privileges.</span></span>  
  
 <span data-ttu-id="a6a49-158">請參閱[使用最低許可權的使用者帳戶](https://docs.microsoft.com/previous-versions/tn-archive/cc700846%28v=technet.10%29)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-158">See [Using a Least-Privileged User Account](https://docs.microsoft.com/previous-versions/tn-archive/cc700846%28v=technet.10%29).</span></span>  
  
<a name="Common_Language_Runtime_Security"></a>   
## <a name="common-language-runtime-security"></a><span data-ttu-id="a6a49-159">Common Language Runtime 安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-159">Common Language Runtime Security</span></span>  
 <span data-ttu-id="a6a49-160">Common language runtime (CLR) 提供一些重要的安全性優點, 包括驗證和驗證、代碼啟用安全性 (CAS) 和安全性關鍵方法。</span><span class="sxs-lookup"><span data-stu-id="a6a49-160">The common language runtime (CLR) offers a number of key security benefits that include validation and verification, Code Access Security (CAS), and the Security Critical Methodology.</span></span>  
  
<a name="Validation_and_Verification"></a>   
### <a name="validation-and-verification"></a><span data-ttu-id="a6a49-161">驗證 (Validation 和 Verification)</span><span class="sxs-lookup"><span data-stu-id="a6a49-161">Validation and Verification</span></span>  
 <span data-ttu-id="a6a49-162">為了提供元件隔離和完整性, CLR 會使用驗證處理常式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-162">To provide assembly isolation and integrity, the CLR uses a process of validation.</span></span> <span data-ttu-id="a6a49-163">CLR 驗證會藉由針對指向元件外部的位址驗證其可移植執行檔 (PE) 檔案格式, 以確保元件隔離。</span><span class="sxs-lookup"><span data-stu-id="a6a49-163">CLR validation ensures that assemblies are isolated by validating their Portable Executable (PE) file format for addresses that point outside the assembly.</span></span> <span data-ttu-id="a6a49-164">CLR 驗證也會驗證內嵌在元件內之中繼資料的完整性。</span><span class="sxs-lookup"><span data-stu-id="a6a49-164">CLR validation also validates the integrity of the metadata that is embedded within an assembly.</span></span>  
  
 <span data-ttu-id="a6a49-165">為確保型別安全, 請協助避免常見的安全性問題 (例如緩衝區溢位), 並透過子進程隔離來啟用沙箱, CLR 安全性會使用驗證的概念。</span><span class="sxs-lookup"><span data-stu-id="a6a49-165">To ensure type safety, help prevent common security issues (e.g. buffer overruns), and enable sandboxing through sub-process isolation, CLR security uses the concept of verification.</span></span>  
  
 <span data-ttu-id="a6a49-166">Managed 應用程式會編譯成 Microsoft 中繼語言 (MSIL)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-166">Managed applications are compiled into Microsoft Intermediate Language (MSIL).</span></span> <span data-ttu-id="a6a49-167">執行 Managed 應用程式中的方法時，應用程式的 MSIL 會透過 Just-In-Time (JIT) 編譯被編譯成機器碼。</span><span class="sxs-lookup"><span data-stu-id="a6a49-167">When methods in a managed application are executed, its MSIL is compiled into native code through Just-In-Time (JIT) compilation.</span></span> <span data-ttu-id="a6a49-168">JIT 編譯包含驗證程序，這個程序會套用許多安全和穩定性規則，以確保程式碼不會：</span><span class="sxs-lookup"><span data-stu-id="a6a49-168">JIT compilation includes a verification process that applies many safety and robustness rules that ensure code does not:</span></span>  
  
- <span data-ttu-id="a6a49-169">違反類型合約</span><span class="sxs-lookup"><span data-stu-id="a6a49-169">Violate type contracts</span></span>  
  
- <span data-ttu-id="a6a49-170">引入緩衝區滿溢</span><span class="sxs-lookup"><span data-stu-id="a6a49-170">Introduce buffer overruns</span></span>  
  
- <span data-ttu-id="a6a49-171">大量存取記憶體</span><span class="sxs-lookup"><span data-stu-id="a6a49-171">Wildly access memory.</span></span>  
  
 <span data-ttu-id="a6a49-172">不符合驗證規則的 Managed 程式碼除非受到信任，否則無法執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-172">Managed code that does not conform to verification rules is not allowed to execute, unless it is considered trusted code.</span></span>  
  
 <span data-ttu-id="a6a49-173">可驗證程式代碼的優點是在 .NET Framework 上[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]建立的主要原因。</span><span class="sxs-lookup"><span data-stu-id="a6a49-173">The advantage of verifiable code is a key reason why [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] builds on the .NET Framework.</span></span> <span data-ttu-id="a6a49-174">只要是使用可驗證程式碼的地方，潛在弱點遭受攻擊的可能性都會大幅降低。</span><span class="sxs-lookup"><span data-stu-id="a6a49-174">To the extent that verifiable code is used, the possibility of exploiting possible vulnerabilities is greatly lowered.</span></span>  
  
<a name="Code_Access_Security"></a>   
### <a name="code-access-security"></a><span data-ttu-id="a6a49-175">程式碼存取安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-175">Code Access Security</span></span>  
 <span data-ttu-id="a6a49-176">用戶端電腦公開了可供 Managed 應用程式存取的各種資源，包括檔案系統、登錄、列印服務、使用者介面、反映和環境變數。</span><span class="sxs-lookup"><span data-stu-id="a6a49-176">A client machine exposes a wide variety of resources that a managed application can have access to, including the file system, the Registry, printing services, the user interface, reflection, and environment variables.</span></span> <span data-ttu-id="a6a49-177">在受控應用程式可以存取用戶端電腦上的任何資源之前, 它必須具有 .NET Framework 的許可權才能執行這項操作。</span><span class="sxs-lookup"><span data-stu-id="a6a49-177">Before a managed application can access any of the resources on a client machine, it must have .NET Framework permission to do so.</span></span> <span data-ttu-id="a6a49-178">CA 中的許可權是的子類別<xref:System.Security.CodeAccessPermission>。CAS 會針對受控應用程式可存取的每個資源, 執行一個子類別。</span><span class="sxs-lookup"><span data-stu-id="a6a49-178">A permission in CAS is a subclass of the <xref:System.Security.CodeAccessPermission>; CAS implements one subclass for each resource that managed applications can access.</span></span>  
  
 <span data-ttu-id="a6a49-179">CA 在啟動執行時授與的一組許可權, 稱為許可權集合, 由應用程式所提供的辨識項來決定。</span><span class="sxs-lookup"><span data-stu-id="a6a49-179">The set of permissions that a managed application is granted by CAS when it starts executing is known as a permission set and is determined by evidence provided by the application.</span></span> <span data-ttu-id="a6a49-180">如果是 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 應用程式，所提供的辨識項就是應用程式啟動的位置 (或區域)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-180">For [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications, the evidence that is provided is the location, or zone, from which the applications are launched.</span></span> <span data-ttu-id="a6a49-181">CA 可識別下欄區域:</span><span class="sxs-lookup"><span data-stu-id="a6a49-181">CAS identifies the following zones:</span></span>  
  
- <span data-ttu-id="a6a49-182">**我的電腦**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-182">**My Computer**.</span></span> <span data-ttu-id="a6a49-183">從用戶端電腦啟動的應用程式 (完全信任)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-183">Applications launched from the client machine (Fully Trusted).</span></span>  
  
- <span data-ttu-id="a6a49-184">**近端內部網路**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-184">**Local Intranet**.</span></span> <span data-ttu-id="a6a49-185">從內部網路啟動的應用程式</span><span class="sxs-lookup"><span data-stu-id="a6a49-185">Applications launched from the intranet.</span></span> <span data-ttu-id="a6a49-186">(部分受信任)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-186">(Somewhat Trusted).</span></span>  
  
- <span data-ttu-id="a6a49-187">**網際網路**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-187">**Internet**.</span></span> <span data-ttu-id="a6a49-188">從網際網路啟動的應用程式</span><span class="sxs-lookup"><span data-stu-id="a6a49-188">Applications launched from the Internet.</span></span> <span data-ttu-id="a6a49-189">(最不受信任)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-189">(Least Trusted).</span></span>  
  
- <span data-ttu-id="a6a49-190">**信任的網站**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-190">**Trusted Sites**.</span></span> <span data-ttu-id="a6a49-191">使用者指定要信任的應用程式</span><span class="sxs-lookup"><span data-stu-id="a6a49-191">Applications identified by a user as being trusted.</span></span> <span data-ttu-id="a6a49-192">(最不受信任)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-192">(Least Trusted).</span></span>  
  
- <span data-ttu-id="a6a49-193">**限制的網站**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-193">**Untrusted Sites**.</span></span> <span data-ttu-id="a6a49-194">使用者指定不要信任的應用程式</span><span class="sxs-lookup"><span data-stu-id="a6a49-194">Applications identified by a user as being untrusted.</span></span> <span data-ttu-id="a6a49-195">(未受信任)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-195">(Untrusted).</span></span>  
  
 <span data-ttu-id="a6a49-196">CA 會針對每個區域提供預先定義的許可權集合, 其中包含符合與每個相關聯之信任層級的許可權。</span><span class="sxs-lookup"><span data-stu-id="a6a49-196">For each of these zones, CAS provides a predefined permission set that includes the permissions which matches the level of trust associated with each.</span></span> <span data-ttu-id="a6a49-197">它們包括：</span><span class="sxs-lookup"><span data-stu-id="a6a49-197">These include:</span></span>  
  
- <span data-ttu-id="a6a49-198">**FullTrust**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-198">**FullTrust**.</span></span> <span data-ttu-id="a6a49-199">針對從**我的電腦**區域啟動的應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-199">For applications launched from the **My Computer** zone.</span></span> <span data-ttu-id="a6a49-200">會授與所有可能的權限。</span><span class="sxs-lookup"><span data-stu-id="a6a49-200">All possible permissions are granted.</span></span>  
  
- <span data-ttu-id="a6a49-201">**LocalIntranet**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-201">**LocalIntranet**.</span></span> <span data-ttu-id="a6a49-202">適用于從近端**內部**網路區域啟動的應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-202">For applications launched from the **Local Intranet** zone.</span></span> <span data-ttu-id="a6a49-203">會授與權限的子集，以提供對用戶端電腦資源的中度存取權，包括隔離儲存區、無限制的 UI 存取權、無限制的檔案對話方塊、有限的反映、對環境變數的有限存取權。</span><span class="sxs-lookup"><span data-stu-id="a6a49-203">A subset of permissions are granted to provide moderate access to a client machine’s resources, including isolated storage, unrestricted UI access, unrestricted file dialogs, limited reflection, limited access to environment variables.</span></span> <span data-ttu-id="a6a49-204">不會提供重要資源 (例如登錄) 的權限。</span><span class="sxs-lookup"><span data-stu-id="a6a49-204">Permissions for critical resources like the Registry are not provided.</span></span>  
  
- <span data-ttu-id="a6a49-205">**Internet**。</span><span class="sxs-lookup"><span data-stu-id="a6a49-205">**Internet**.</span></span> <span data-ttu-id="a6a49-206">適用于從**網際網路**或信任的**網站**區域啟動的應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-206">For applications launched from the **Internet** or **Trusted Sites** zone.</span></span> <span data-ttu-id="a6a49-207">會授與權限的子集，以提供對用戶端電腦資源的有限存取權，包括隔離儲存區、限檔案開啟，以及有限的 UI。</span><span class="sxs-lookup"><span data-stu-id="a6a49-207">A subset of permissions are granted to provided limited access to a client machine’s resources, including isolated storage, file open only, and limited UI.</span></span> <span data-ttu-id="a6a49-208">基本上, 此許可權集合會將應用程式與用戶端電腦隔離。</span><span class="sxs-lookup"><span data-stu-id="a6a49-208">Essentially, this permission set isolates applications from the client machine.</span></span>  
  
 <span data-ttu-id="a6a49-209">識別為來自**不受信任的網站**區域的應用程式完全不會被 ca 授與任何許可權。</span><span class="sxs-lookup"><span data-stu-id="a6a49-209">Applications identified as being from the **Untrusted Sites** zone are granted no permissions by CAS at all.</span></span> <span data-ttu-id="a6a49-210">因此，這些應用程式沒有預先定義的權限集合。</span><span class="sxs-lookup"><span data-stu-id="a6a49-210">Consequently, a predefined permission set does not exist for them.</span></span>  
  
 <span data-ttu-id="a6a49-211">下圖說明區域、許可權集合、許可權和資源之間的關聯性:</span><span class="sxs-lookup"><span data-stu-id="a6a49-211">The following figure illustrates the relationship between zones, permission sets, permissions, and resources:</span></span>  
  
 ![顯示 CAS 許可權集合的圖表。](./media/wpf-security-strategy-platform-security/code-access-security-permissions-relationship.png)  
  
 <span data-ttu-id="a6a49-213">網際網路區域安全性沙箱的限制同樣適用于 XBAP 從系統程式庫 (包括[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]) 匯入的任何程式碼。</span><span class="sxs-lookup"><span data-stu-id="a6a49-213">The restrictions of the Internet zone security sandbox apply equally to any code that an XBAP imports from a system library, including [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="a6a49-214">如此可確保程式碼的每個位元都被鎖定，即使是 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 也一樣。</span><span class="sxs-lookup"><span data-stu-id="a6a49-214">This ensures that every bit of the code is locked down, even [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)].</span></span> <span data-ttu-id="a6a49-215">可惜的是, 若要能夠執行, XBAP 必須執行需要比網際網路區域安全性沙箱所啟用的許可權更多的功能。</span><span class="sxs-lookup"><span data-stu-id="a6a49-215">Unfortunately, to be able to execute, an XBAP needs to execute functionality that requires more permissions than those enabled by the Internet zone security sandbox.</span></span>  
  
 <span data-ttu-id="a6a49-216">請考慮包含下列頁面的 XBAP 應用程式:</span><span class="sxs-lookup"><span data-stu-id="a6a49-216">Consider an XBAP application that includes the following page:</span></span>  
  
 [!code-csharp[WPFPlatformSecuritySnippets#Permission](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFPlatformSecuritySnippets/CSharp/Page1.xaml.cs#permission)]
 [!code-vb[WPFPlatformSecuritySnippets#Permission](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFPlatformSecuritySnippets/VisualBasic/Page1.xaml.vb#permission)]  
  
 <span data-ttu-id="a6a49-217">若要執行這個 XBAP, 基礎[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]程式碼必須執行比呼叫 XBAP 可用的功能更多, 包括:</span><span class="sxs-lookup"><span data-stu-id="a6a49-217">To execute this XBAP, the underlying [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] code must execute more functionality than is available to the calling XBAP, including:</span></span>  
  
- <span data-ttu-id="a6a49-218">建立用於呈現的視窗控制碼 (HWND)</span><span class="sxs-lookup"><span data-stu-id="a6a49-218">Creating a window handle (HWND) for rendering</span></span>  
  
- <span data-ttu-id="a6a49-219">分派訊息</span><span class="sxs-lookup"><span data-stu-id="a6a49-219">Dispatching messages</span></span>  
  
- <span data-ttu-id="a6a49-220">載入新細明體字型</span><span class="sxs-lookup"><span data-stu-id="a6a49-220">Loading the Tahoma font</span></span>  
  
 <span data-ttu-id="a6a49-221">從安全性觀點來看，允許沙箱化應用程式直接存取上述任何作業將會引發十分嚴重的後果。</span><span class="sxs-lookup"><span data-stu-id="a6a49-221">From a security point of view, allowing direct access to any of these operations from the sandboxed application would be catastrophic.</span></span>  
  
 <span data-ttu-id="a6a49-222">好在 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 已經考慮到這種情況，它會允許這些作業以代表沙箱化應用程式的更高權限來執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-222">Fortunately, [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] caters to this situation by allowing these operations to execute with elevated privileges on behalf of the sandboxed application.</span></span> <span data-ttu-id="a6a49-223">雖然所有[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]作業都是針對 XBAP 的應用程式域的有限網際網路區域安全性許可權進行檢查 ( [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]如同其他系統程式庫), 但會被授與包含所有可能許可權的許可權集合。</span><span class="sxs-lookup"><span data-stu-id="a6a49-223">While all [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] operations are checked against the limited Internet zone security permissions of the application domain of the XBAP, [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] (as with other system libraries) is granted a permission set that includes all possible permissions.</span></span>
  
 <span data-ttu-id="a6a49-224">這表示 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 必須得到更高的權限，同時又要避免這些權限受到主應用程式定義域之 [網際網路] 區域權限集合的控制。</span><span class="sxs-lookup"><span data-stu-id="a6a49-224">This requires that [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] receives elevated privileges while preventing those privileges from being governed by the Internet zone permission set of the host application domain.</span></span>  
  
 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="a6a49-225">會使用許可權的**Assert**方法來執行這項工作。</span><span class="sxs-lookup"><span data-stu-id="a6a49-225">does this by using the **Assert** method of a permission.</span></span> <span data-ttu-id="a6a49-226">下列程式碼會顯示這個過程。</span><span class="sxs-lookup"><span data-stu-id="a6a49-226">The following code shows how this happens.</span></span>  
  
 [!code-csharp[WPFPlatformSecuritySnippets#Permission](~/samples/snippets/csharp/VS_Snippets_Wpf/WPFPlatformSecuritySnippets/CSharp/Page1.xaml.cs#permission)]
 [!code-vb[WPFPlatformSecuritySnippets#Permission](~/samples/snippets/visualbasic/VS_Snippets_Wpf/WPFPlatformSecuritySnippets/VisualBasic/Page1.xaml.vb#permission)]  
  
 <span data-ttu-id="a6a49-227">判斷提示基本上會防止所需[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]的無限制許可權受到 XBAP 的網際網路區域許可權所限制。</span><span class="sxs-lookup"><span data-stu-id="a6a49-227">The **Assert** essentially prevents the unlimited permissions required by [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] from being restricted by the Internet zone permissions of the XBAP.</span></span>  
  
 <span data-ttu-id="a6a49-228">從平臺的觀點來[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]看, 會負責正確地使用**assert** ; 不正確使用**assert**可能會讓惡意程式碼提升許可權。</span><span class="sxs-lookup"><span data-stu-id="a6a49-228">From a platform perspective, [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] is responsible for using **Assert** correctly; an incorrect use of **Assert** could enable malicious code to elevate privileges.</span></span> <span data-ttu-id="a6a49-229">因此, 只有在必要時才呼叫**Assert** , 並確保沙箱限制保持不變。</span><span class="sxs-lookup"><span data-stu-id="a6a49-229">Consequently, it is important then to only call **Assert** when needed, and to ensure that sandbox restrictions remain intact.</span></span> <span data-ttu-id="a6a49-230">例如，沙箱化程式碼不可以開啟隨機檔案，但可以使用字型。</span><span class="sxs-lookup"><span data-stu-id="a6a49-230">For example, sandboxed code is not allowed to open random files, but it is allowed to use fonts.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="a6a49-231">可讓沙箱化應用程式藉由呼叫**Assert**來使用字型[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]功能, 並針對來讀取已知的檔案, 以代表沙箱化應用程式來包含這些字體。</span><span class="sxs-lookup"><span data-stu-id="a6a49-231">enables sandboxed applications to use font functionality by calling **Assert**, and for [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] to read files known to contain those fonts on behalf of the sandboxed application.</span></span>  
  
<a name="ClickOnce_Deployment"></a>   
### <a name="clickonce-deployment"></a><span data-ttu-id="a6a49-232">ClickOnce 部署</span><span class="sxs-lookup"><span data-stu-id="a6a49-232">ClickOnce Deployment</span></span>  
 <span data-ttu-id="a6a49-233">Clickonce 是 .NET Framework 隨附的全方位部署技術, 並與[!INCLUDE[TLA#tla_visualstu](../../../includes/tlasharptla-visualstu-md.md)]整合 (如需詳細資訊, 請參閱[ClickOnce 安全性和部署](/visualstudio/deployment/clickonce-security-and-deployment))。</span><span class="sxs-lookup"><span data-stu-id="a6a49-233">ClickOnce is a comprehensive deployment technology that is included with .NET Framework, and integrates with [!INCLUDE[TLA#tla_visualstu](../../../includes/tlasharptla-visualstu-md.md)] (see [ClickOnce security and deployment](/visualstudio/deployment/clickonce-security-and-deployment) for detailed information).</span></span> <span data-ttu-id="a6a49-234">您[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]可以使用 clickonce 來部署獨立應用程式, 而瀏覽器裝載的應用程式則必須使用 clickonce 進行部署。</span><span class="sxs-lookup"><span data-stu-id="a6a49-234">Standalone [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications can be deployed using ClickOnce, while browser-hosted applications must be deployed with ClickOnce.</span></span>  
  
 <span data-ttu-id="a6a49-235">使用 ClickOnce 部署的應用程式會透過代碼啟用安全性 (CAS) 獲得額外的安全性層級;基本上, ClickOnce 部署的應用程式會要求所需的許可權。</span><span class="sxs-lookup"><span data-stu-id="a6a49-235">Applications deployed using ClickOnce are given an additional security layer over Code Access Security (CAS); essentially, ClickOnce deployed applications request the permissions that they need.</span></span> <span data-ttu-id="a6a49-236">只有在所要求的權限不超過應用程式部署來源區域的權限集合時，才會將這些權限授與應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-236">They are granted only those permissions if they do not exceed the set of permissions for the zone from which the application is deployed.</span></span> <span data-ttu-id="a6a49-237">藉由減少許可權的集合, 即使它們少於啟動區域的許可權集合所提供的許可權, 應用程式可以存取的資源數目也會降到最低。</span><span class="sxs-lookup"><span data-stu-id="a6a49-237">By reducing the set of permissions to only those that are needed, even if they are less than those provided by the launch zone's permission set, the number of resources that the application has access to is reduced to a bare minimum.</span></span> <span data-ttu-id="a6a49-238">因此，如果應用程式遭到劫持，用戶端電腦遭到破壞的可能性將會降低。</span><span class="sxs-lookup"><span data-stu-id="a6a49-238">Consequently, if the application is hijacked, the potential for damage to the client machine is reduced.</span></span>  
  
<a name="Security_Critical_Methodology"></a>   
### <a name="security-critical-methodology"></a><span data-ttu-id="a6a49-239">安全性關鍵方法</span><span class="sxs-lookup"><span data-stu-id="a6a49-239">Security-Critical Methodology</span></span>  
 <span data-ttu-id="a6a49-240">針對 XBAP 應用程式使用許可權來啟用網際網路區域沙箱的程式代碼,必須盡可能保持最高的安全性審查和控制程度。[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]</span><span class="sxs-lookup"><span data-stu-id="a6a49-240">The [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] code that uses permissions to enable the Internet zone sandbox for XBAP applications must be held to highest possible degree of security audit and control.</span></span> <span data-ttu-id="a6a49-241">為了協助這項需求, .NET Framework 提供新的支援來管理提升許可權的程式碼。</span><span class="sxs-lookup"><span data-stu-id="a6a49-241">To facilitate this requirement, .NET Framework provides new support for managing code that elevates privilege.</span></span> <span data-ttu-id="a6a49-242">具體而言, CLR 可讓您識別提升許可權的程式碼, 並使用將<xref:System.Security.SecurityCriticalAttribute>其標示為; 任何未<xref:System.Security.SecurityCriticalAttribute>標記的程式碼都會使用此方法*透明化*。</span><span class="sxs-lookup"><span data-stu-id="a6a49-242">Specifically, the CLR enables you to identify code that elevates privilege and mark it with the <xref:System.Security.SecurityCriticalAttribute>; any code not marked with <xref:System.Security.SecurityCriticalAttribute> becomes *transparent* using this methodology.</span></span> <span data-ttu-id="a6a49-243">相反地，未標記為 <xref:System.Security.SecurityCriticalAttribute> 的 Managed 程式碼將無法提高權限。</span><span class="sxs-lookup"><span data-stu-id="a6a49-243">Conversely, managed code that is not marked with <xref:System.Security.SecurityCriticalAttribute> is prevented from elevating privilege.</span></span>  
  
 <span data-ttu-id="a6a49-244">安全性關鍵方法可讓您將提高許可權[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]的程式碼組織成*安全性關鍵核心*, 其餘部分則是透明的。</span><span class="sxs-lookup"><span data-stu-id="a6a49-244">The Security-Critical Methodology allows the organization of [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] code that elevates privilege into *security-critical kernel*, with the remainder being transparent.</span></span> <span data-ttu-id="a6a49-245">隔離安全性關鍵程式碼可讓[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]工程團隊專注于高於標準安全性實務的安全性關鍵核心上的額外安全性分析和原始檔控制 (請參閱[WPF 安全性策略-安全性工程](wpf-security-strategy-security-engineering.md))。</span><span class="sxs-lookup"><span data-stu-id="a6a49-245">Isolating the security-critical code enables the [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] engineering team focus an additional security analysis and source control on the security-critical kernel above and beyond standard security practices (see [WPF Security Strategy - Security Engineering](wpf-security-strategy-security-engineering.md)).</span></span>  
  
 <span data-ttu-id="a6a49-246">請注意, .NET Framework 允許受信任的程式碼擴充 XBAP 網際網路區域沙箱, 方法是允許開發人員撰寫以<xref:System.Security.AllowPartiallyTrustedCallersAttribute> (APTCA) 標記並部署到使用者的全域組件快取 (GAC) 的 managed 元件。</span><span class="sxs-lookup"><span data-stu-id="a6a49-246">Note that .NET Framework permits trusted code to extend the XBAP Internet zone sandbox by allowing developers to write managed assemblies that are marked with <xref:System.Security.AllowPartiallyTrustedCallersAttribute> (APTCA) and deployed to the user's Global Assembly Cache (GAC).</span></span> <span data-ttu-id="a6a49-247">在組件上標記 APTCA 是一項極為敏感的安全性作業，因為這可讓任何程式碼 (包括來自網際網路的惡意程式碼) 呼叫該組件。</span><span class="sxs-lookup"><span data-stu-id="a6a49-247">Marking an assembly with APTCA is a highly sensitive security operation as it allows any code to call that assembly, including malicious code from the Internet.</span></span> <span data-ttu-id="a6a49-248">執行這項操作時請謹慎為之，一定要採取最佳做法，而且使用者必須選擇信任該軟體才能安裝軟體。</span><span class="sxs-lookup"><span data-stu-id="a6a49-248">Extreme caution and best practices must be used when doing this and users must choose to trust that software in order for it to be installed.</span></span>  
  
<a name="Microsoft_Internet_Explorer_Security"></a>   
## <a name="microsoft-internet-explorer-security"></a><span data-ttu-id="a6a49-249">Microsoft Internet Explorer 安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-249">Microsoft Internet Explorer Security</span></span>  
 <span data-ttu-id="a6a49-250">除了減少安全性問題和簡化安全性設定之外, Microsoft Internet Explorer 6 (SP2) 還包含數項安全性增強功能, 可加強使用者[!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)]的安全性。</span><span class="sxs-lookup"><span data-stu-id="a6a49-250">Beyond reducing security issues and simplifying security configuration, Microsoft Internet Explorer 6 (SP2) contains several features that security improvements that enhance security for users of [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)].</span></span> <span data-ttu-id="a6a49-251">這些功能的主要目的是要讓使用者更能掌控自己的瀏覽體驗。</span><span class="sxs-lookup"><span data-stu-id="a6a49-251">The thrust of these features attempts to allow users greater control over their browsing experience.</span></span>  
  
 <span data-ttu-id="a6a49-252">在 IE6 SP2 之前, 使用者可能會受到下列任何一項:</span><span class="sxs-lookup"><span data-stu-id="a6a49-252">Prior to IE6 SP2, users could be subject to any of the following:</span></span>  
  
- <span data-ttu-id="a6a49-253">隨機跳出的快顯視窗。</span><span class="sxs-lookup"><span data-stu-id="a6a49-253">Random popup windows.</span></span>  
  
- <span data-ttu-id="a6a49-254">令人困惑的指令碼重新導向。</span><span class="sxs-lookup"><span data-stu-id="a6a49-254">Confusing script redirection.</span></span>  
  
- <span data-ttu-id="a6a49-255">某些網站上的大量安全性對話方塊。</span><span class="sxs-lookup"><span data-stu-id="a6a49-255">Numerous security dialogs on some Web sites.</span></span>  
  
 <span data-ttu-id="a6a49-256">在某些情況下, 不信任的網站會藉由詐騙安裝[!INCLUDE[TLA#tla_ui](../../../includes/tlasharptla-ui-md.md)]或重複顯示 Microsoft ActiveX 安裝對話方塊來嘗試誘騙使用者, 即使使用者可能已將它取消也一樣。</span><span class="sxs-lookup"><span data-stu-id="a6a49-256">In some cases, untrustworthy Web sites would try to trick users by spoofing installation [!INCLUDE[TLA#tla_ui](../../../includes/tlasharptla-ui-md.md)] or repeatedly showing a Microsoft ActiveX installation dialog box, even though the user may have canceled it.</span></span> <span data-ttu-id="a6a49-257">透過這些手法，許多使用者可能信以為真，做出錯誤決定，因而安裝了間諜軟體應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-257">Using these techniques, it is possible that a significant number of users have been tricked into making poor decisions that resulted with the installation of spyware applications.</span></span>  
  
 <span data-ttu-id="a6a49-258">IE6 SP2 包含數項功能來減輕這些類型的問題, 這會圍繞使用者起始的概念。</span><span class="sxs-lookup"><span data-stu-id="a6a49-258">IE6 SP2 includes several features to mitigate these types of issues, which revolve around the concept of user initiation.</span></span> <span data-ttu-id="a6a49-259">IE6 SP2 會偵測使用者在動作之前按下的連結或頁面專案 (稱為「*使用者初始*」), 並將其視為不同于頁面上的腳本所觸發的類似動作。</span><span class="sxs-lookup"><span data-stu-id="a6a49-259">IE6 SP2 detects when a user has clicked on a link or page element prior to an action, which is known as *user initiation*, and treats it differently than when a similar action is instead triggered by the script on a page.</span></span> <span data-ttu-id="a6a49-260">例如, IE6 SP2 包含快顯封鎖程式, 它會偵測使用者在頁面建立快顯視窗之前, 按一下按鈕的時間。</span><span class="sxs-lookup"><span data-stu-id="a6a49-260">As an example, IE6 SP2 incorporates a **Pop-Up Blocker** that detects when a user clicks a button prior to the page creating a pop-up.</span></span> <span data-ttu-id="a6a49-261">這可讓 IE6 SP2 允許大部分無害的快顯, 同時防止使用者不會要求或不想要的快顯視窗。</span><span class="sxs-lookup"><span data-stu-id="a6a49-261">This enables IE6 SP2 to allow most innocuous pop-ups while preventing pop-ups that users neither ask for nor want.</span></span> <span data-ttu-id="a6a49-262">封鎖的快顯視窗會在新的**資訊**列之下受到攔截, 讓使用者可以手動覆寫區塊並觀看快顯視窗。</span><span class="sxs-lookup"><span data-stu-id="a6a49-262">Blocked pop-ups are trapped under the new **Information Bar**, which allows the user to manually override the block and view the pop-up.</span></span>  
  
 <span data-ttu-id="a6a49-263">同樣地, 也會套用相同的使用者起始邏輯, 以**開啟**/**儲存**安全性提示。</span><span class="sxs-lookup"><span data-stu-id="a6a49-263">The same user-initiation logic is also applied to **Open**/**Save** security prompts.</span></span> <span data-ttu-id="a6a49-264">除非是從先前安裝的控制項升級, 否則 ActiveX 安裝對話方塊一律會在資訊列之下受到攔截。</span><span class="sxs-lookup"><span data-stu-id="a6a49-264">ActiveX installation dialog boxes are always trapped under the Information Bar unless they represent an upgrade from a previously installed control.</span></span> <span data-ttu-id="a6a49-265">這些措施一起為使用者提供了更安全、更受控制的使用者經驗，因為使用者將可擺脫陌生網站為了讓使用者安裝不必要或惡意的軟體，而一再進行的騷擾。</span><span class="sxs-lookup"><span data-stu-id="a6a49-265">These measures combine to give users a safer, more controlled user experience since they are protected against sites which harass them to install either unwanted or malicious software.</span></span>  
  
 <span data-ttu-id="a6a49-266">這些功能也會保護使用 IE6 SP2 流覽網站的客戶, 讓他們能夠下載和安裝[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-266">These features also protect customers who use IE6 SP2 to browse to web sites that allow them to download and install [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span> <span data-ttu-id="a6a49-267">具體而言, 這是因為 IE6 SP2 提供較佳的使用者體驗, 可減少使用者安裝惡意或迂回應用程式的機會, 而不論用來建立它的技術為何[!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)](包括)。</span><span class="sxs-lookup"><span data-stu-id="a6a49-267">In particular, this is because IE6 SP2 offers a better user experience that reduces the chance for users to install malicious or devious applications irrespective of what technology was used to build it, including [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)].</span></span> [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="a6a49-268">使用 ClickOnce 新增至這些保護, 以協助透過網際網路下載其應用程式。</span><span class="sxs-lookup"><span data-stu-id="a6a49-268">adds to these protections by using ClickOnce to facilitate downloading of its applications over the Internet.</span></span> <span data-ttu-id="a6a49-269">由於 [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)] 是在網際網路區域安全性沙箱中執行，因此可順暢地執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-269">Since [!INCLUDE[TLA#tla_winfxwebapp#plural](../../../includes/tlasharptla-winfxwebappsharpplural-md.md)] execute within an Internet zone security sandbox, they can be seamlessly launched.</span></span> <span data-ttu-id="a6a49-270">另一方面，獨立 [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] 應用程式則需要完全信任才能執行。</span><span class="sxs-lookup"><span data-stu-id="a6a49-270">On the other hand, standalone [!INCLUDE[TLA2#tla_wpf](../../../includes/tla2sharptla-wpf-md.md)] applications require full trust to execute.</span></span> <span data-ttu-id="a6a49-271">針對這些應用程式, ClickOnce 會在啟動程式期間顯示安全性對話方塊, 以通知使用應用程式的其他安全性需求。</span><span class="sxs-lookup"><span data-stu-id="a6a49-271">For these applications, ClickOnce will display a security dialog box during the launch process to notify the use of the application's additional security requirements.</span></span> <span data-ttu-id="a6a49-272">不過，這必須由使用者啟始、同時受到使用者啟始的邏輯控制，並且可以取消。</span><span class="sxs-lookup"><span data-stu-id="a6a49-272">However, this must be user-initiated, will also be governed by user initiated logic, and can be canceled.</span></span>  
  
 <span data-ttu-id="a6a49-273">Internet Explorer 7 納入並擴充 IE6 SP2 的安全性功能, 以做為安全性承諾的一部分。</span><span class="sxs-lookup"><span data-stu-id="a6a49-273">Internet Explorer 7 incorporates and extends the security capabilities of IE6 SP2 as part of an ongoing commitment to security.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a6a49-274">另請參閱</span><span class="sxs-lookup"><span data-stu-id="a6a49-274">See also</span></span>

- [<span data-ttu-id="a6a49-275">程式碼存取安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-275">Code Access Security</span></span>](../misc/code-access-security.md)
- [<span data-ttu-id="a6a49-276">安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-276">Security</span></span>](security-wpf.md)
- [<span data-ttu-id="a6a49-277">WPF 部分信任安全性</span><span class="sxs-lookup"><span data-stu-id="a6a49-277">WPF Partial Trust Security</span></span>](wpf-partial-trust-security.md)
- [<span data-ttu-id="a6a49-278">WPF 安全性策略 – 安全性工程</span><span class="sxs-lookup"><span data-stu-id="a6a49-278">WPF Security Strategy - Security Engineering</span></span>](wpf-security-strategy-security-engineering.md)
