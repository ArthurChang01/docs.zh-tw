---
title: 影像處理概觀
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
- cpp
helpviewer_keywords:
- metadata [WPF], images
- displaying images [WPF]
- Imaging API [WPF]
- image metadata [WPF]
- converting images [WPF]
- encoding image formats [WPF]
- format decoding for images [WPF]
- painting with images [WPF]
- stretching images [WPF]
- images [WPF], about imaging
- format encoding for images [WPF]
- cropping images [WPF]
- decoding image formats [WPF]
- rotating images [WPF]
ms.assetid: 72aad87a-e6f3-4937-94cd-a18b7766e990
ms.openlocfilehash: 45214b5f0e6827c36f87a4d45592ff0989c9a877
ms.sourcegitcommit: 5c2176883dc3107445702724a7caa7ac2f6cb0d3
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/03/2019
ms.locfileid: "58890806"
---
# <a name="imaging-overview"></a><span data-ttu-id="7ed27-102">影像處理概觀</span><span class="sxs-lookup"><span data-stu-id="7ed27-102">Imaging Overview</span></span>
<span data-ttu-id="7ed27-103">本主題提供 [!INCLUDE[TLA#tla_wic](../../../../includes/tlasharptla-wic-md.md)] 的簡介。</span><span class="sxs-lookup"><span data-stu-id="7ed27-103">This topic provides an introduction to the [!INCLUDE[TLA#tla_wic](../../../../includes/tlasharptla-wic-md.md)].</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] <span data-ttu-id="7ed27-104">可讓開發人員顯示、 轉換和格式化映像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-104">enables developers to display, transform, and format images.</span></span>  
  
  
<a name="_wpfImaging"></a>   
## <a name="wpf-imaging-component"></a><span data-ttu-id="7ed27-105">WPF 影像處理元件</span><span class="sxs-lookup"><span data-stu-id="7ed27-105">WPF Imaging Component</span></span>  
 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] <span data-ttu-id="7ed27-106">提供顯著的增強功能，在映像中的功能[!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7ed27-106">provides significant enhancements in imaging capabilities within [!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)].</span></span> <span data-ttu-id="7ed27-107">之前的影像處理功能 (例如顯示點陣圖或在通用控制項上使用影像) 要依賴 [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] 或 [!INCLUDE[TLA#tla_gdiplus](../../../../includes/tlasharptla-gdiplus-md.md)] 程式庫運作。</span><span class="sxs-lookup"><span data-stu-id="7ed27-107">Imaging capabilities, such as displaying a bitmap or using an image on a common control were previously reliant upon the [!INCLUDE[TLA#tla_gdi](../../../../includes/tlasharptla-gdi-md.md)] or [!INCLUDE[TLA#tla_gdiplus](../../../../includes/tlasharptla-gdiplus-md.md)] libraries.</span></span> <span data-ttu-id="7ed27-108">這些 [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] 提供基本影像處理功能，但是缺少一些功能，例如支援轉碼器擴充性和高畫質影像支援。</span><span class="sxs-lookup"><span data-stu-id="7ed27-108">These [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] provide baseline imaging functionality, but lack features such as support for codec extensibility and high fidelity image support.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] <span data-ttu-id="7ed27-109">若要克服的缺點設計[!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)]並[!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)]，並提供一組新的[!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]顯示，並使用您的應用程式的映像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-109">is designed to overcome the shortcomings of [!INCLUDE[TLA2#tla_gdi](../../../../includes/tla2sharptla-gdi-md.md)] and [!INCLUDE[TLA2#tla_gdiplus](../../../../includes/tla2sharptla-gdiplus-md.md)] and provide a new set of [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] to display and use images within your applications.</span></span>  
  
 <span data-ttu-id="7ed27-110">有兩種方式可以存取 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]，Managed 元件和 Unmanaged 元件。</span><span class="sxs-lookup"><span data-stu-id="7ed27-110">There are two ways to access the [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], a managed component and an unmanaged component.</span></span> <span data-ttu-id="7ed27-111">Unmanaged 元件提供下列功能。</span><span class="sxs-lookup"><span data-stu-id="7ed27-111">The unmanaged component provides the following features.</span></span>  
  
-   <span data-ttu-id="7ed27-112">新的或專屬影像格式的擴充性模型。</span><span class="sxs-lookup"><span data-stu-id="7ed27-112">Extensibility model for new or proprietary image formats.</span></span>  
  
-   <span data-ttu-id="7ed27-113">[!INCLUDE[TLA#tla_bmp](../../../../includes/tlasharptla-bmp-md.md)]、[!INCLUDE[TLA#tla_jpegorg](../../../../includes/tlasharptla-jpegorg-md.md)]、[!INCLUDE[TLA#tla_png](../../../../includes/tlasharptla-png-md.md)]、[!INCLUDE[TLA#tla_tiff](../../../../includes/tlasharptla-tiff-md.md)]、[!INCLUDE[TLA#tla_wdp](../../../../includes/tlasharptla-wdp-md.md)]、[!INCLUDE[TLA#tla_gif](../../../../includes/tlasharptla-gif-md.md)] 和圖示 (.ico) 等原生影像格式的改善效能及安全性。</span><span class="sxs-lookup"><span data-stu-id="7ed27-113">Improved performance and security on native image formats including [!INCLUDE[TLA#tla_bmp](../../../../includes/tlasharptla-bmp-md.md)], [!INCLUDE[TLA#tla_jpegorg](../../../../includes/tlasharptla-jpegorg-md.md)], [!INCLUDE[TLA#tla_png](../../../../includes/tlasharptla-png-md.md)], [!INCLUDE[TLA#tla_tiff](../../../../includes/tlasharptla-tiff-md.md)], [!INCLUDE[TLA#tla_wdp](../../../../includes/tlasharptla-wdp-md.md)], [!INCLUDE[TLA#tla_gif](../../../../includes/tlasharptla-gif-md.md)], and icon (.ico).</span></span>  
  
-   <span data-ttu-id="7ed27-114">高位元深度影像資料最多可保留每色頻 8 位元 (每像素 32 位元)。</span><span class="sxs-lookup"><span data-stu-id="7ed27-114">Preservation of high bit-depth image data up to 8 bits per channel (32 bits per pixel).</span></span>  
  
-   <span data-ttu-id="7ed27-115">非破壞性的影像縮放、裁剪及旋轉。</span><span class="sxs-lookup"><span data-stu-id="7ed27-115">Nondestructive image scaling, cropping, and rotations.</span></span>  
  
-   <span data-ttu-id="7ed27-116">簡化的色彩管理。</span><span class="sxs-lookup"><span data-stu-id="7ed27-116">Simplified color management.</span></span>  
  
-   <span data-ttu-id="7ed27-117">支援檔案內、專屬中繼資料。</span><span class="sxs-lookup"><span data-stu-id="7ed27-117">Support for in-file, proprietary metadata.</span></span>  
  
-   <span data-ttu-id="7ed27-118">Managed 元件會利用 Unmanaged 基礎結構來提供影像與其他 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 功能 (例如 [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]、動畫和圖形) 的緊密整合。</span><span class="sxs-lookup"><span data-stu-id="7ed27-118">The managed component utilizes the unmanaged infrastructure to provide seamless integration of images with other [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] features such as [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)], animation, and graphics.</span></span> <span data-ttu-id="7ed27-119">受管理的元件也受益於 Windows Presentation Foundation (WPF) 影像轉碼器擴充性模型可讓新映像中的格式自動辨識[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]應用程式。</span><span class="sxs-lookup"><span data-stu-id="7ed27-119">The managed component also benefits from the Windows Presentation Foundation (WPF) imaging codec extensibility model which enables automatic recognition of new image formats in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="7ed27-120">大部分的 managed [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)]位於<xref:System.Windows.Media.Imaging?displayProperty=nameWithType>命名空間，不過幾個重要型別，例如<xref:System.Windows.Media.ImageBrush>並<xref:System.Windows.Media.ImageDrawing>位於<xref:System.Windows.Media?displayProperty=nameWithType>命名空間和<xref:System.Windows.Controls.Image>位於<xref:System.Windows.Controls?displayProperty=nameWithType>命名空間。</span><span class="sxs-lookup"><span data-stu-id="7ed27-120">The majority of the managed [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] reside in the <xref:System.Windows.Media.Imaging?displayProperty=nameWithType> namespace, though several important types, such as <xref:System.Windows.Media.ImageBrush> and <xref:System.Windows.Media.ImageDrawing> reside in the <xref:System.Windows.Media?displayProperty=nameWithType> namespace and <xref:System.Windows.Controls.Image> resides in the <xref:System.Windows.Controls?displayProperty=nameWithType> namespace.</span></span>  
  
 <span data-ttu-id="7ed27-121">本主題提供 Managed 元件的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="7ed27-121">This topic provides additional information about the managed component.</span></span> <span data-ttu-id="7ed27-122">如需 Unmanaged [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] 的詳細資訊，請參閱 [Unmanaged WPF 影像處理元件 (英文)](/windows/desktop/wic/-wic-lh) 文件。</span><span class="sxs-lookup"><span data-stu-id="7ed27-122">For more information on the unmanaged [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] see the [Unmanaged WPF Imaging Component](/windows/desktop/wic/-wic-lh) documentation.</span></span>  
  
<a name="_imageformats"></a>   
## <a name="wpf-image-formats"></a><span data-ttu-id="7ed27-123">WPF 影像格式</span><span class="sxs-lookup"><span data-stu-id="7ed27-123">WPF Image Formats</span></span>  
 <span data-ttu-id="7ed27-124">轉碼器可以用來將特定媒體格式解碼或編碼。</span><span class="sxs-lookup"><span data-stu-id="7ed27-124">A codec is used to decode or encode a specific media format.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] <span data-ttu-id="7ed27-125">包含的轉碼器[!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)]， [!INCLUDE[TLA2#tla_jpeg](../../../../includes/tla2sharptla-jpeg-md.md)]， [!INCLUDE[TLA2#tla_png](../../../../includes/tla2sharptla-png-md.md)]， [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)]， [!INCLUDE[TLA2#tla_wdp](../../../../includes/tla2sharptla-wdp-md.md)]， [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)]，和 ICON 影像格式。</span><span class="sxs-lookup"><span data-stu-id="7ed27-125">includes a codec  for [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)], [!INCLUDE[TLA2#tla_jpeg](../../../../includes/tla2sharptla-jpeg-md.md)], [!INCLUDE[TLA2#tla_png](../../../../includes/tla2sharptla-png-md.md)], [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)], [!INCLUDE[TLA2#tla_wdp](../../../../includes/tla2sharptla-wdp-md.md)], [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)], and ICON image formats.</span></span> <span data-ttu-id="7ed27-126">每個轉碼器都可以讓應用程式解碼和編碼各自的影像格式 (但 ICON 在編碼部分是例外)。</span><span class="sxs-lookup"><span data-stu-id="7ed27-126">Each of these codecs enable applications to decode and, with the exception of ICON, encode their respective image formats.</span></span>  
  
 <xref:System.Windows.Media.Imaging.BitmapSource> <span data-ttu-id="7ed27-127">重要的類別用於解碼和編碼的映像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-127">is an important class used in the decoding and encoding of images.</span></span> <span data-ttu-id="7ed27-128">它是 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 管線的基本建置組塊，代表在特定大小和解析度下的單一固定像素集。</span><span class="sxs-lookup"><span data-stu-id="7ed27-128">It is the basic building block of the [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] pipeline and represents a single, constant set of pixels at a certain size and resolution.</span></span> <span data-ttu-id="7ed27-129">A<xref:System.Windows.Media.Imaging.BitmapSource>可以是多重框架影像中，個別畫面格，或可以執行轉換的結果<xref:System.Windows.Media.Imaging.BitmapSource>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-129">A <xref:System.Windows.Media.Imaging.BitmapSource> can be an individual frame of a multiple frame image, or it can be the result of a transform performed on a <xref:System.Windows.Media.Imaging.BitmapSource>.</span></span> <span data-ttu-id="7ed27-130">它是父項中使用的主要類別的許多[!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]這類映像<xref:System.Windows.Media.Imaging.BitmapFrame>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-130">It is the parent of many of the primary classes used in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] imaging such as <xref:System.Windows.Media.Imaging.BitmapFrame>.</span></span>  
  
 <span data-ttu-id="7ed27-131">A<xref:System.Windows.Media.Imaging.BitmapFrame>用來儲存影像格式的實際點陣圖資料。</span><span class="sxs-lookup"><span data-stu-id="7ed27-131">A <xref:System.Windows.Media.Imaging.BitmapFrame> is used to store the actual bitmap data of an image format.</span></span> <span data-ttu-id="7ed27-132">許多影像格式只支援單一<xref:System.Windows.Media.Imaging.BitmapFrame>，不過這類格式[!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)]和[!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)]支援每個影像的多個框架。</span><span class="sxs-lookup"><span data-stu-id="7ed27-132">Many image formats only support a single <xref:System.Windows.Media.Imaging.BitmapFrame>, although formats such as [!INCLUDE[TLA2#tla_gif](../../../../includes/tla2sharptla-gif-md.md)] and [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] support multiple frames per image.</span></span> <span data-ttu-id="7ed27-133">畫面格會由解碼器作為輸入資料並傳遞至編碼器以建立影像檔。</span><span class="sxs-lookup"><span data-stu-id="7ed27-133">Frames are used by decoders as input data and are passed to encoders to create image files.</span></span>  
  
 <span data-ttu-id="7ed27-134">下列範例示範如何<xref:System.Windows.Media.Imaging.BitmapFrame>從建立<xref:System.Windows.Media.Imaging.BitmapSource>再加入[!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)]映像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-134">The following example demonstrates how a <xref:System.Windows.Media.Imaging.BitmapFrame> is created from a <xref:System.Windows.Media.Imaging.BitmapSource> and then added to a [!INCLUDE[TLA2#tla_tiff](../../../../includes/tla2sharptla-tiff-md.md)] image.</span></span>  
  
 [!code-csharp[BitmapFrameExample#10](~/samples/snippets/csharp/VS_Snippets_Wpf/BitmapFrameExample/CSharp/BitmapFrame.cs#10)]
 [!code-vb[BitmapFrameExample#10](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitmapFrameExample/VB/BitmapFrame.vb#10)]  
  
### <a name="image-format-decoding"></a><span data-ttu-id="7ed27-135">影像格式解碼</span><span class="sxs-lookup"><span data-stu-id="7ed27-135">Image Format Decoding</span></span>  
 <span data-ttu-id="7ed27-136">影像解碼是指將影像格式變成系統可用之影像資料的轉譯作業。</span><span class="sxs-lookup"><span data-stu-id="7ed27-136">Image decoding is the translation of an image format to image data that can be used by the system.</span></span> <span data-ttu-id="7ed27-137">接著可使用影像資料來顯示、處理，或編碼成不同格式。</span><span class="sxs-lookup"><span data-stu-id="7ed27-137">The image data can then be used to display, process, or encode to a different format.</span></span> <span data-ttu-id="7ed27-138">選取的解碼器是根據影像格式而定。</span><span class="sxs-lookup"><span data-stu-id="7ed27-138">Decoder selection is based on the image format.</span></span> <span data-ttu-id="7ed27-139">除非指定特定的解碼器，否則會自動選取轉碼器。</span><span class="sxs-lookup"><span data-stu-id="7ed27-139">Codec selection is automatic unless a specific decoder is specified.</span></span> <span data-ttu-id="7ed27-140">[在 WPF 中顯示影像](#_displayingimages)一節中的範例示範自動解碼。</span><span class="sxs-lookup"><span data-stu-id="7ed27-140">The examples in the [Displaying Images in WPF](#_displayingimages) section demonstrate automatic decoding.</span></span> <span data-ttu-id="7ed27-141">使用 Unmanaged [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 介面開發並向系統註冊的自訂格式解碼器，會自動參與解碼器選取作業。</span><span class="sxs-lookup"><span data-stu-id="7ed27-141">Custom format decoders developed using the unmanaged [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] interfaces and registered with the system automatically participate in decoder selection.</span></span> <span data-ttu-id="7ed27-142">這可讓自訂格式自動在 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 應用程式中顯示。</span><span class="sxs-lookup"><span data-stu-id="7ed27-142">This allows custom formats to be displayed automatically in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="7ed27-143">下列範例示範使用點陣圖解碼器將 [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)] 格式影像解碼。</span><span class="sxs-lookup"><span data-stu-id="7ed27-143">The following example demonstrates the use of a bitmap decoder to decode a [!INCLUDE[TLA2#tla_bmp](../../../../includes/tla2sharptla-bmp-md.md)] format image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#5](~/samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#5)]
 [!code-csharp[BmpBitmapDecoderEncoder#5](~/samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#5)]
 [!code-vb[BmpBitmapDecoderEncoder#5](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#5)]  
  
### <a name="image-format-encoding"></a><span data-ttu-id="7ed27-144">影像格式編碼</span><span class="sxs-lookup"><span data-stu-id="7ed27-144">Image Format Encoding</span></span>  
 <span data-ttu-id="7ed27-145">影像編碼是指將影像資料變成特定影像格式的轉換作業。</span><span class="sxs-lookup"><span data-stu-id="7ed27-145">Image encoding is the translation of image data to a specific image format.</span></span> <span data-ttu-id="7ed27-146">接著可使用已編碼的影像資料建立新的影像檔。</span><span class="sxs-lookup"><span data-stu-id="7ed27-146">The encoded image data can then be used to create new image files.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] <span data-ttu-id="7ed27-147">針對每個上述的影像格式提供編碼器。</span><span class="sxs-lookup"><span data-stu-id="7ed27-147">provides encoders for each of the image formats described above.</span></span>  
  
 <span data-ttu-id="7ed27-148">下列範例示範使用編碼器儲存新建立的點陣圖影像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-148">The following example demonstrates the use of an encoder to save a newly created bitmap image.</span></span>  
  
 [!code-cpp[BmpBitmapDecoderEncoder#3](~/samples/snippets/cpp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CPP/anotherfile.cpp#3)]
 [!code-csharp[BmpBitmapDecoderEncoder#3](~/samples/snippets/csharp/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/CSharp/BitmapFrame.cs#3)]
 [!code-vb[BmpBitmapDecoderEncoder#3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BmpBitmapDecoderEncoder/VB/BitmapFrame.vb#3)]  
  
<a name="_displayingimages"></a>   
## <a name="displaying-images-in-wpf"></a><span data-ttu-id="7ed27-149">在 WPF 中顯示影像</span><span class="sxs-lookup"><span data-stu-id="7ed27-149">Displaying Images in WPF</span></span>  
 <span data-ttu-id="7ed27-150">有數種方式可在 Windows Presentation Foundation (WPF) 應用程式中顯示影像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-150">There are several ways to display an image in a Windows Presentation Foundation (WPF) application.</span></span> <span data-ttu-id="7ed27-151">可以使用顯示映像<xref:System.Windows.Controls.Image>控制項中，使用 visual 繪製<xref:System.Windows.Media.ImageBrush>，或使用繪製<xref:System.Windows.Media.ImageDrawing>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-151">Images can be displayed using an <xref:System.Windows.Controls.Image> control, painted on a visual using an <xref:System.Windows.Media.ImageBrush>, or drawn using an <xref:System.Windows.Media.ImageDrawing>.</span></span>  
  
### <a name="using-the-image-control"></a><span data-ttu-id="7ed27-152">使用影像控制項</span><span class="sxs-lookup"><span data-stu-id="7ed27-152">Using the Image Control</span></span>  
 <xref:System.Windows.Controls.Image> <span data-ttu-id="7ed27-153">是架構元素，而且在應用程式中顯示影像的主要方式。</span><span class="sxs-lookup"><span data-stu-id="7ed27-153">is a framework element and the primary way to display images in applications.</span></span> <span data-ttu-id="7ed27-154">在  [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，<xref:System.Windows.Controls.Image>可以用於兩種方式; 屬性語法或屬性的語法。</span><span class="sxs-lookup"><span data-stu-id="7ed27-154">In [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], <xref:System.Windows.Controls.Image> can be used in two ways; attribute syntax or property syntax.</span></span> <span data-ttu-id="7ed27-155">下列範例顯示如何使用屬性 (Attribute) 語法和屬性 (Property) 標記語法呈現 200 像素寬的影像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-155">The following example shows how to render an image 200 pixels wide using both attribute syntax and property tag syntax.</span></span> <span data-ttu-id="7ed27-156">如需屬性 (Attribute) 語法和屬性 (Property) 語法的詳細資訊，請參閱[相依性屬性概觀](../advanced/dependency-properties-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="7ed27-156">For more information on attribute syntax and property syntax, see [Dependency Properties Overview](../advanced/dependency-properties-overview.md).</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageSimpleExampleInlineMarkup](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml#imagesimpleexampleinlinemarkup)]  
  
 <span data-ttu-id="7ed27-157">許多範例都使用<xref:System.Windows.Media.Imaging.BitmapImage>物件以參考的映像檔。</span><span class="sxs-lookup"><span data-stu-id="7ed27-157">Many of the examples use a <xref:System.Windows.Media.Imaging.BitmapImage> object to reference an image file.</span></span> <xref:System.Windows.Media.Imaging.BitmapImage> <span data-ttu-id="7ed27-158">是特製化<xref:System.Windows.Media.Imaging.BitmapSource>，最適合用於[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]載入，並輕鬆地顯示為影像<xref:System.Windows.Controls.Image.Source%2A>的<xref:System.Windows.Controls.Image>控制項。</span><span class="sxs-lookup"><span data-stu-id="7ed27-158">is a specialized <xref:System.Windows.Media.Imaging.BitmapSource> that is optimized for [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] loading and is an easy way to display images as the <xref:System.Windows.Controls.Image.Source%2A> of an <xref:System.Windows.Controls.Image> control.</span></span>  
  
 <span data-ttu-id="7ed27-159">下列範例示範如何使用程式碼呈現 200 像素寬的影像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-159">The following example shows how to render an image 200 pixels wide using code.</span></span>  
  
> [!NOTE]
>  <xref:System.Windows.Media.Imaging.BitmapImage> <span data-ttu-id="7ed27-160">實作<xref:System.ComponentModel.ISupportInitialize>介面以最佳化多個屬性的初始化。</span><span class="sxs-lookup"><span data-stu-id="7ed27-160">implements the <xref:System.ComponentModel.ISupportInitialize> interface to optimize initialization on multiple properties.</span></span> <span data-ttu-id="7ed27-161">只有在物件初始化期間，才會發生屬性變更。</span><span class="sxs-lookup"><span data-stu-id="7ed27-161">Property changes can only occur during object initialization.</span></span> <span data-ttu-id="7ed27-162">呼叫<xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A>發出信號表示初始化已經開始和<xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A>發出信號表示初始化已完成。</span><span class="sxs-lookup"><span data-stu-id="7ed27-162">Call <xref:System.Windows.Media.Imaging.BitmapImage.BeginInit%2A> to signal that initialization has begun and <xref:System.Windows.Media.Imaging.BitmapImage.EndInit%2A> to signal that initialization has completed.</span></span> <span data-ttu-id="7ed27-163">初始化之後，所做的屬性變更都會被忽略。</span><span class="sxs-lookup"><span data-stu-id="7ed27-163">Once initialized, property changes are ignored.</span></span>  
  
 [!code-csharp[ImageElementExample_snip#ImageSimpleExampleInlineCode1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageSimpleExample.xaml.cs#imagesimpleexampleinlinecode1)]
 [!code-vb[ImageElementExample_snip#ImageSimpleExampleInlineCode1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/ImageSimpleExample.xaml.vb#imagesimpleexampleinlinecode1)]  
  
#### <a name="rotating-converting-and-cropping-images"></a><span data-ttu-id="7ed27-164">旋轉、轉換和裁剪影像</span><span class="sxs-lookup"><span data-stu-id="7ed27-164">Rotating, Converting, and Cropping Images</span></span>  
 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] <span data-ttu-id="7ed27-165">可讓使用者使用的屬性轉換映像<xref:System.Windows.Media.Imaging.BitmapImage>或使用其他<xref:System.Windows.Media.Imaging.BitmapSource>物件，例如<xref:System.Windows.Media.Imaging.CroppedBitmap>或<xref:System.Windows.Media.Imaging.FormatConvertedBitmap>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-165">enables users to transform images by using properties of <xref:System.Windows.Media.Imaging.BitmapImage> or by using additional <xref:System.Windows.Media.Imaging.BitmapSource> objects such as <xref:System.Windows.Media.Imaging.CroppedBitmap> or <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="7ed27-166">這些影像轉換作業可以縮放或旋轉影像、變更影像的像素格式，或裁剪影像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-166">These image transformations can scale or rotate an image, change the pixel format of an image, or crop an image.</span></span>  
  
 <span data-ttu-id="7ed27-167">使用執行影像旋轉<xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A>屬性<xref:System.Windows.Media.Imaging.BitmapImage>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-167">Image rotations are performed using the <xref:System.Windows.Media.Imaging.BitmapImage.Rotation%2A> property of <xref:System.Windows.Media.Imaging.BitmapImage>.</span></span> <span data-ttu-id="7ed27-168">只能以 90 度遞增的角度旋轉。</span><span class="sxs-lookup"><span data-stu-id="7ed27-168">Rotations can only be done in 90 degree increments.</span></span> <span data-ttu-id="7ed27-169">在下列範例中，影像會旋轉 90 度。</span><span class="sxs-lookup"><span data-stu-id="7ed27-169">In the following example, an image is rotated 90 degrees.</span></span>  
  
 [!code-xaml[ImageElementExample#TransformedXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml#transformedxaml2)]  
  
 [!code-csharp[ImageElementExample#TransformedCSharp1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample/CSharp/TransformedImageExample.xaml.cs#transformedcsharp1)]
 [!code-vb[ImageElementExample#TransformedCSharp1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample/VB/TransformedImageExample.xaml.vb#transformedcsharp1)]  
  
 <span data-ttu-id="7ed27-170">將影像轉換成不同的像素格式，例如灰階使用<xref:System.Windows.Media.Imaging.FormatConvertedBitmap>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-170">Converting an image to a different pixel format such as grayscale is done using <xref:System.Windows.Media.Imaging.FormatConvertedBitmap>.</span></span> <span data-ttu-id="7ed27-171">在下列範例中，影像會轉換成<xref:System.Windows.Media.PixelFormats.Gray4%2A>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-171">In the following examples, an image is converted to <xref:System.Windows.Media.PixelFormats.Gray4%2A>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ConvertedXAML2](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml#convertedxaml2)]  
  
 [!code-csharp[ImageElementExample_snip#ConvertedCSharp1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/FormatConvertedExample.xaml.cs#convertedcsharp1)]
 [!code-vb[ImageElementExample_snip#ConvertedCSharp1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/FormatConvertedExample.xaml.vb#convertedcsharp1)]  
  
 <span data-ttu-id="7ed27-172">若要裁剪影像，或是<xref:System.Windows.UIElement.Clip%2A>的屬性<xref:System.Windows.Controls.Image>或<xref:System.Windows.Media.Imaging.CroppedBitmap>可用。</span><span class="sxs-lookup"><span data-stu-id="7ed27-172">To crop an image, either the <xref:System.Windows.UIElement.Clip%2A> property of <xref:System.Windows.Controls.Image> or <xref:System.Windows.Media.Imaging.CroppedBitmap> can be used.</span></span> <span data-ttu-id="7ed27-173">一般而言，如果您只想要顯示的影像，一部分<xref:System.Windows.UIElement.Clip%2A>應該使用。</span><span class="sxs-lookup"><span data-stu-id="7ed27-173">Typically, if you just want to display a portion of an image, <xref:System.Windows.UIElement.Clip%2A> should be used.</span></span> <span data-ttu-id="7ed27-174">如果您需要編碼並儲存裁剪的影像，<xref:System.Windows.Media.Imaging.CroppedBitmap>應該使用。</span><span class="sxs-lookup"><span data-stu-id="7ed27-174">If you need to encode and save a cropped image, the <xref:System.Windows.Media.Imaging.CroppedBitmap> should be used.</span></span> <span data-ttu-id="7ed27-175">在下列範例中，映像會裁剪剪輯屬性使用<xref:System.Windows.Media.EllipseGeometry>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-175">In the following example, an image is cropped using the Clip property using an <xref:System.Windows.Media.EllipseGeometry>.</span></span>  
  
 [!code-xaml[ImageElementExample_snip#CroppedXAMLUsingClip1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml#croppedxamlusingclip1)]  
  
 [!code-csharp[ImageElementExample_snip#CroppedCSharpUsingClip1](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/CroppedImageExample.xaml.cs#croppedcsharpusingclip1)]
 [!code-vb[ImageElementExample_snip#CroppedCSharpUsingClip1](~/samples/snippets/visualbasic/VS_Snippets_Wpf/ImageElementExample_snip/VB/CroppedImageExample.xaml.vb#croppedcsharpusingclip1)]  
  
#### <a name="stretching-images"></a><span data-ttu-id="7ed27-176">縮放影像</span><span class="sxs-lookup"><span data-stu-id="7ed27-176">Stretching Images</span></span>  
 <span data-ttu-id="7ed27-177"><xref:System.Windows.Controls.Image.Stretch%2A>屬性可讓您控制影像如何縮放以填滿容器。</span><span class="sxs-lookup"><span data-stu-id="7ed27-177">The <xref:System.Windows.Controls.Image.Stretch%2A> property controls how an image is stretched to fill its container.</span></span> <span data-ttu-id="7ed27-178"><xref:System.Windows.Controls.Image.Stretch%2A>屬性可以接受下列值所定義<xref:System.Windows.Media.Stretch>列舉型別：</span><span class="sxs-lookup"><span data-stu-id="7ed27-178">The <xref:System.Windows.Controls.Image.Stretch%2A> property accepts the following values, defined by the <xref:System.Windows.Media.Stretch> enumeration:</span></span>  
  
-   <xref:System.Windows.Media.Stretch.None><span data-ttu-id="7ed27-179">:映像不會自動縮放以填滿輸出區域。</span><span class="sxs-lookup"><span data-stu-id="7ed27-179">: The image is not stretched to fill the output area.</span></span> <span data-ttu-id="7ed27-180">如果影像大於輸出區域，會將影像繪製到輸出區域，並裁剪超過的部分。</span><span class="sxs-lookup"><span data-stu-id="7ed27-180">If the image is larger than the output area, the image is drawn to the output area, clipping what does not fit.</span></span>  
  
-   <xref:System.Windows.Media.Stretch.Fill><span data-ttu-id="7ed27-181">:影像會縮放以符合輸出區域。</span><span class="sxs-lookup"><span data-stu-id="7ed27-181">: The image is scaled to fit the output area.</span></span> <span data-ttu-id="7ed27-182">因為影像的高度和寬度是分開縮放，所以可能不會維持影像的原始外觀比例。</span><span class="sxs-lookup"><span data-stu-id="7ed27-182">Because the image height and width are scaled independently, the original aspect ratio of the image might not be preserved.</span></span> <span data-ttu-id="7ed27-183">也就是說，影像可能會變形以完全填滿輸出容器。</span><span class="sxs-lookup"><span data-stu-id="7ed27-183">That is, the image might be warped in order to completely fill the output container.</span></span>  
  
-   <xref:System.Windows.Media.Stretch.Uniform><span data-ttu-id="7ed27-184">:影像會縮放，以完全符合輸出區域。</span><span class="sxs-lookup"><span data-stu-id="7ed27-184">: The image is scaled so that it fits completely within the output area.</span></span> <span data-ttu-id="7ed27-185">會維持影像的外觀比例。</span><span class="sxs-lookup"><span data-stu-id="7ed27-185">The image's aspect ratio is preserved.</span></span>  
  
-   <xref:System.Windows.Media.Stretch.UniformToFill><span data-ttu-id="7ed27-186">:影像會縮放，使它完全填滿輸出區域，同時維持影像的原始外觀比例。</span><span class="sxs-lookup"><span data-stu-id="7ed27-186">: The image is scaled so that it completely fills the output area while preserving the image's original aspect ratio.</span></span>  
  
 <span data-ttu-id="7ed27-187">下列範例適用於每個可用<xref:System.Windows.Media.Stretch>列舉型別的<xref:System.Windows.Controls.Image>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-187">The following example applies each of the available <xref:System.Windows.Media.Stretch> enumerations to an <xref:System.Windows.Controls.Image>.</span></span>  
  
 <span data-ttu-id="7ed27-188">下圖顯示範例的輸出，並且示範不同的影響<xref:System.Windows.Controls.Image.Stretch%2A>設定具有時套用至映像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-188">The following image shows the output from the example and demonstrates the affect the different <xref:System.Windows.Controls.Image.Stretch%2A> settings have when applied to an image.</span></span>  
  
 <span data-ttu-id="7ed27-189">![不同的 TileBrush Stretch 設定](./media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span><span class="sxs-lookup"><span data-stu-id="7ed27-189">![Different TileBrush Stretch settings](./media/img-mmgraphics-stretchenum.jpg "img_mmgraphics_stretchenum")</span></span>  
<span data-ttu-id="7ed27-190">不同的縮放設定</span><span class="sxs-lookup"><span data-stu-id="7ed27-190">Different stretch settings</span></span>  
  
 [!code-xaml[ImageElementExample_snip#ImageStretchExampleWholePage](~/samples/snippets/csharp/VS_Snippets_Wpf/ImageElementExample_snip/CSharp/ImageStretchExample.xaml#imagestretchexamplewholepage)]  
  
### <a name="painting-with-images"></a><span data-ttu-id="7ed27-191">以影像繪製</span><span class="sxs-lookup"><span data-stu-id="7ed27-191">Painting with Images</span></span>  
 <span data-ttu-id="7ed27-192">映像也可以顯示應用程式中使用的繪製<xref:System.Windows.Media.Brush>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-192">Images can also be displayed in an application by painting with a <xref:System.Windows.Media.Brush>.</span></span> <span data-ttu-id="7ed27-193">筆刷可讓您以任何項目 (從簡單的純色到複雜的圖樣和影像集) 繪製 [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] 物件。</span><span class="sxs-lookup"><span data-stu-id="7ed27-193">Brushes enable you to paint [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] objects with anything from simple, solid colors to complex sets of patterns and images.</span></span> <span data-ttu-id="7ed27-194">若要以影像繪製，使用<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-194">To paint with images, use an <xref:System.Windows.Media.ImageBrush>.</span></span> <span data-ttu-id="7ed27-195"><xref:System.Windows.Media.ImageBrush>是一種<xref:System.Windows.Media.TileBrush>，定義其內容以點陣圖影像。</span><span class="sxs-lookup"><span data-stu-id="7ed27-195">An <xref:System.Windows.Media.ImageBrush> is a type of <xref:System.Windows.Media.TileBrush> that defines its content as a bitmap image.</span></span> <span data-ttu-id="7ed27-196"><xref:System.Windows.Media.ImageBrush>會顯示單一的映像，以指定其<xref:System.Windows.Media.ImageBrush.ImageSource%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="7ed27-196">An <xref:System.Windows.Media.ImageBrush> displays a single image, which is specified by its <xref:System.Windows.Media.ImageBrush.ImageSource%2A> property.</span></span> <span data-ttu-id="7ed27-197">您可以控制影像縮放、對齊及並排的方式，以防止扭曲並且創造出圖樣和其他效果。</span><span class="sxs-lookup"><span data-stu-id="7ed27-197">You can control how the image is stretched, aligned, and tiled, enabling you to prevent distortion and produce patterns and other effects.</span></span> <span data-ttu-id="7ed27-198">下圖顯示一些可達到的效果<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-198">The following illustration shows some effects that can be achieved with an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 <span data-ttu-id="7ed27-199">![ImageBrush 輸出範例](./media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span><span class="sxs-lookup"><span data-stu-id="7ed27-199">![ImageBrush output examples](./media/wcpsdk-mmgraphics-imagebrushexamples.gif "wcpsdk_mmgraphics_imagebrushexamples")</span></span>  
<span data-ttu-id="7ed27-200">影像筆刷可以填滿圖形、控制項、文字等等</span><span class="sxs-lookup"><span data-stu-id="7ed27-200">Image brushes can fill shapes, controls, text, and more</span></span>  
  
 <span data-ttu-id="7ed27-201">下列範例示範如何繪製背景影像使用的按鈕之<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-201">The following example demonstrates how to paint the background of a button with an image using an <xref:System.Windows.Media.ImageBrush>.</span></span>  
  
 [!code-xaml[UsingImageBrush#4](~/samples/snippets/csharp/VS_Snippets_Wpf/UsingImageBrush/CS/PaintingWithImages.xaml#4)]  
  
 <span data-ttu-id="7ed27-202">如需詳細資訊<xref:System.Windows.Media.ImageBrush>繪製影像看[使用影像、 繪圖和視覺效果繪製](painting-with-images-drawings-and-visuals.md)。</span><span class="sxs-lookup"><span data-stu-id="7ed27-202">For additional information about <xref:System.Windows.Media.ImageBrush> and painting images see [Painting with Images, Drawings, and Visuals](painting-with-images-drawings-and-visuals.md).</span></span>  
  
<a name="_metadata"></a>   
## <a name="image-metadata"></a><span data-ttu-id="7ed27-203">影像中繼資料</span><span class="sxs-lookup"><span data-stu-id="7ed27-203">Image Metadata</span></span>  
 <span data-ttu-id="7ed27-204">某些影像檔包含描述檔案內容或特性的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="7ed27-204">Some image files contain metadata that describes the content or the characteristics of the file.</span></span> <span data-ttu-id="7ed27-205">例如，大部分數位相機建立的影像，會包含用來擷取影像之相機廠牌與型號的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="7ed27-205">For example, most digital cameras create images that contain metadata about the make and model of the camera used to capture the image.</span></span> <span data-ttu-id="7ed27-206">每種影像格式處理中繼資料的方式也有所不同，但 [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 可針對每種支援的影像格式提供統一的中繼資料儲存及擷取方式。</span><span class="sxs-lookup"><span data-stu-id="7ed27-206">Each image format handles metadata differently but [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] provides a uniform way of storing and retrieving metadata for each supported image format.</span></span>  
  
 <span data-ttu-id="7ed27-207">中繼資料的存取透過提供<xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A>屬性<xref:System.Windows.Media.Imaging.BitmapSource>物件。</span><span class="sxs-lookup"><span data-stu-id="7ed27-207">Access to metadata is provided through the <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> property of a <xref:System.Windows.Media.Imaging.BitmapSource> object.</span></span> <xref:System.Windows.Media.Imaging.BitmapSource.Metadata%2A> <span data-ttu-id="7ed27-208">傳回<xref:System.Windows.Media.Imaging.BitmapMetadata>物件，其中包含映像所包含的所有中繼資料。</span><span class="sxs-lookup"><span data-stu-id="7ed27-208">returns a <xref:System.Windows.Media.Imaging.BitmapMetadata> object that includes all the metadata contained by the image.</span></span> <span data-ttu-id="7ed27-209">此資料可能位於單一的中繼資料結構描述，或不同結構描述的組合中。</span><span class="sxs-lookup"><span data-stu-id="7ed27-209">This data may be in one metadata schema or a combination of different schemes.</span></span> [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] <span data-ttu-id="7ed27-210">支援下列影像中繼資料結構描述： [!INCLUDE[TLA#tla_exif](../../../../includes/tlasharptla-exif-md.md)]，tEXt （PNG 文字型的資料）， [!INCLUDE[TLA#tla_ifd](../../../../includes/tlasharptla-ifd-md.md)]， [!INCLUDE[TLA#tla_iptc](../../../../includes/tlasharptla-iptc-md.md)]，和[!INCLUDE[TLA#tla_xmp](../../../../includes/tlasharptla-xmp-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="7ed27-210">supports the following image metadata schemas: [!INCLUDE[TLA#tla_exif](../../../../includes/tlasharptla-exif-md.md)], tEXt (PNG Textual Data), [!INCLUDE[TLA#tla_ifd](../../../../includes/tlasharptla-ifd-md.md)], [!INCLUDE[TLA#tla_iptc](../../../../includes/tlasharptla-iptc-md.md)], and [!INCLUDE[TLA#tla_xmp](../../../../includes/tlasharptla-xmp-md.md)].</span></span>  
  
 <span data-ttu-id="7ed27-211">為了簡化讀取中繼資料的程序<xref:System.Windows.Media.Imaging.BitmapMetadata>提供數個具名的屬性可輕鬆地存取這類<xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>， <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>，和<xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>。</span><span class="sxs-lookup"><span data-stu-id="7ed27-211">In order to simplify the process of reading metadata, <xref:System.Windows.Media.Imaging.BitmapMetadata> provides several named properties that can be easily accessed such as <xref:System.Windows.Media.Imaging.BitmapMetadata.Author%2A>, <xref:System.Windows.Media.Imaging.BitmapMetadata.Title%2A>, and <xref:System.Windows.Media.Imaging.BitmapMetadata.CameraModel%2A>.</span></span> <span data-ttu-id="7ed27-212">許多具名屬性也可以用於寫入中繼資料。</span><span class="sxs-lookup"><span data-stu-id="7ed27-212">Many of these named properties can also be used to write metadata.</span></span> <span data-ttu-id="7ed27-213">讀取中繼資料的其他支援是由中繼資料查詢讀取器提供。</span><span class="sxs-lookup"><span data-stu-id="7ed27-213">Additional support for reading metadata is provided by the metadata query reader.</span></span> <span data-ttu-id="7ed27-214"><xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A>方法來擷取中繼資料查詢讀取器所提供的字串查詢，例如 *"/ app1/exif /"*。</span><span class="sxs-lookup"><span data-stu-id="7ed27-214">The <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> method is used to retrieve a metadata query reader by providing a string query such as *"/app1/exif/"*.</span></span> <span data-ttu-id="7ed27-215">在下列範例中，<xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A>用來取得文字儲存於 *"/text/description"* 位置。</span><span class="sxs-lookup"><span data-stu-id="7ed27-215">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.GetQuery%2A> is used to obtain the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#GetQuery](~/samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#getquery)]
 [!code-csharp[BitmapMetadata#GetQuery](~/samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#getquery)]
 [!code-vb[BitmapMetadata#GetQuery](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#getquery)]  
  
 <span data-ttu-id="7ed27-216">若要寫入中繼資料，必須使用中繼資料查詢寫入器。</span><span class="sxs-lookup"><span data-stu-id="7ed27-216">To write metadata, a metadata query writer is used.</span></span> <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> <span data-ttu-id="7ed27-217">取得查詢寫入者，並設定所需的值。</span><span class="sxs-lookup"><span data-stu-id="7ed27-217">obtains the query writer and sets the desired value.</span></span> <span data-ttu-id="7ed27-218">在下列範例中，<xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A>用來寫入儲存在文字 *"/text/description"* 位置。</span><span class="sxs-lookup"><span data-stu-id="7ed27-218">In the following example, <xref:System.Windows.Media.Imaging.BitmapMetadata.SetQuery%2A> is used to write the text stored in the *"/Text/Description"* location.</span></span>  
  
 [!code-cpp[BitmapMetadata#SetQuery](~/samples/snippets/cpp/VS_Snippets_Wpf/BitMapMetadata/CPP/BitmapMetadata.cpp#setquery)]
 [!code-csharp[BitmapMetadata#SetQuery](~/samples/snippets/csharp/VS_Snippets_Wpf/BitMapMetadata/CSharp/BitmapMetadata.cs#setquery)]
 [!code-vb[BitmapMetadata#SetQuery](~/samples/snippets/visualbasic/VS_Snippets_Wpf/BitMapMetadata/VB/BitmapMetadata.vb#setquery)]  
  
<a name="_extensibility"></a>   
## <a name="codec-extensibility"></a><span data-ttu-id="7ed27-219">轉碼器擴充性</span><span class="sxs-lookup"><span data-stu-id="7ed27-219">Codec Extensibility</span></span>  
 <span data-ttu-id="7ed27-220">[!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] 的核心功能是新影像轉碼器的擴充性模型。</span><span class="sxs-lookup"><span data-stu-id="7ed27-220">A core feature of [!INCLUDE[TLA2#tla_wic](../../../../includes/tla2sharptla-wic-md.md)] is the extensibility model for new image codecs.</span></span> <span data-ttu-id="7ed27-221">這些 Unmanaged 介面可讓轉碼器開發人員整合轉碼器與 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]，以便 [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] 應用程式可以自動使用新的影像格式。</span><span class="sxs-lookup"><span data-stu-id="7ed27-221">These unmanaged interfaces enable codec developers to integrate codecs with [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] so new image formats can automatically be used by [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] applications.</span></span>  
  
 <span data-ttu-id="7ed27-222">如需擴充性 [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] 的範例，請參閱 [Win32 範例轉碼器 (英文)](https://go.microsoft.com/fwlink/?LinkID=160052)。</span><span class="sxs-lookup"><span data-stu-id="7ed27-222">For a sample of the extensibility [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)], see the [Win32 Sample Codec](https://go.microsoft.com/fwlink/?LinkID=160052).</span></span> <span data-ttu-id="7ed27-223">此範例示範如何針對自訂影像格式建立解碼器和編碼器。</span><span class="sxs-lookup"><span data-stu-id="7ed27-223">This sample demonstrates how to create a decoder and encoder for a custom image format.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7ed27-224">轉碼器必須經過數位簽署，系統才能辨識它。</span><span class="sxs-lookup"><span data-stu-id="7ed27-224">The codec must be digitally signed for the system to recognize it.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7ed27-225">另請參閱</span><span class="sxs-lookup"><span data-stu-id="7ed27-225">See also</span></span>
- <xref:System.Windows.Media.Imaging.BitmapSource>
- <xref:System.Windows.Media.Imaging.BitmapImage>
- <xref:System.Windows.Controls.Image>
- <xref:System.Windows.Media.Imaging.BitmapMetadata>
- [<span data-ttu-id="7ed27-226">2D 圖形和影像</span><span class="sxs-lookup"><span data-stu-id="7ed27-226">2D Graphics and Imaging</span></span>](../advanced/optimizing-performance-2d-graphics-and-imaging.md)
- [<span data-ttu-id="7ed27-227">Win32 範例轉碼器</span><span class="sxs-lookup"><span data-stu-id="7ed27-227">Win32 Sample Codec</span></span>](https://go.microsoft.com/fwlink/?LinkID=160052)
