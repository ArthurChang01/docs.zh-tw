---
title: XAML 資源
ms.date: 03/30/2017
helpviewer_keywords:
- reusing resources [WPF]
- resources [WPF], reusing
- reusing commonly defined objects [WPF]
- XAML [WPF], reusing resources
ms.assetid: 91580b89-a0a8-4889-aecb-fddf8e63175f
ms.openlocfilehash: 0176ebffe82e60671ea66481b7d659004dc31477
ms.sourcegitcommit: 558d78d2a68acd4c95ef23231c8b4e4c7bac3902
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/09/2019
ms.locfileid: "59344919"
---
# <a name="xaml-resources"></a><span data-ttu-id="164ec-102">XAML 資源</span><span class="sxs-lookup"><span data-stu-id="164ec-102">XAML Resources</span></span>
<span data-ttu-id="164ec-103">資源是可在應用程式中不同位置重複使用的物件。</span><span class="sxs-lookup"><span data-stu-id="164ec-103">A resource is an object that can be reused in different places in your application.</span></span> <span data-ttu-id="164ec-104">資源的範例包括筆刷和樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-104">Examples of resources include brushes and styles.</span></span> <span data-ttu-id="164ec-105">本概觀說明如何使用中的資源[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="164ec-105">This overview describes how to use resources in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="164ec-106">您也可以建立及存取資源，使用程式碼，或是交換使用程式碼之間和[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="164ec-106">You can also create and access resources by using code, or interchangeably between code and [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)].</span></span> <span data-ttu-id="164ec-107">如需詳細資訊，請參閱 <<c0> [ 資源和程式碼](resources-and-code.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-107">For more information, see [Resources and Code](resources-and-code.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="164ec-108">本主題中所述的資源檔案為不同的資源檔中所述[WPF 應用程式資源、 內容和資料檔案](../app-development/wpf-application-resource-content-and-data-files.md)也不同於中所述的內嵌或連結資源[管理應用程式資源 (.NET)](/visualstudio/ide/managing-application-resources-dotnet)。</span><span class="sxs-lookup"><span data-stu-id="164ec-108">The resource files described in this topic are different than the resource files described in [WPF Application Resource, Content, and Data Files](../app-development/wpf-application-resource-content-and-data-files.md) and different than the embedded or linked resources described in [Manage Application Resources (.NET)](/visualstudio/ide/managing-application-resources-dotnet).</span></span>  

<a name="usingresources"></a>   
## <a name="using-resources-in-xaml"></a><span data-ttu-id="164ec-109">在 XAML 中使用資源</span><span class="sxs-lookup"><span data-stu-id="164ec-109">Using Resources in XAML</span></span>  
 <span data-ttu-id="164ec-110">下列範例會定義<xref:System.Windows.Media.SolidColorBrush>頁面的根項目上的資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-110">The following example defines a <xref:System.Windows.Media.SolidColorBrush> as a resource on the root element of a page.</span></span> <span data-ttu-id="164ec-111">此範例會參考資源，並使用它來設定屬性的數個子項目，包括<xref:System.Windows.Shapes.Ellipse>，則<xref:System.Windows.Controls.TextBlock>，和<xref:System.Windows.Controls.Button>。</span><span class="sxs-lookup"><span data-stu-id="164ec-111">The example then references the resource and uses it to set properties of several child elements, including an <xref:System.Windows.Shapes.Ellipse>, a <xref:System.Windows.Controls.TextBlock>, and a <xref:System.Windows.Controls.Button>.</span></span>  
  
 [!code-xaml[FEResourceSH_snip#XAML](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page1.xaml#xaml)]  
  
 <span data-ttu-id="164ec-112">每個架構層級項目 (<xref:System.Windows.FrameworkElement>或是<xref:System.Windows.FrameworkContentElement>) 已<xref:System.Windows.FrameworkElement.Resources%2A>屬性，這是包含資源的屬性 (作為<xref:System.Windows.ResourceDictionary>) 資源定義。</span><span class="sxs-lookup"><span data-stu-id="164ec-112">Every framework-level element (<xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>) has a <xref:System.Windows.FrameworkElement.Resources%2A> property, which is the property that contains the resources (as a <xref:System.Windows.ResourceDictionary>) that a resource defines.</span></span> <span data-ttu-id="164ec-113">您可以在任何項目上定義資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-113">You can define resources on any element.</span></span> <span data-ttu-id="164ec-114">不過，資源最常定義於根項目，也就是<xref:System.Windows.Controls.Page>在範例中。</span><span class="sxs-lookup"><span data-stu-id="164ec-114">However, resources are most often defined on the root element, which is <xref:System.Windows.Controls.Page> in the example.</span></span>  
  
 <span data-ttu-id="164ec-115">資源字典中的每個資源都必須有唯一索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-115">Each resource in a resource dictionary must have a unique key.</span></span> <span data-ttu-id="164ec-116">當您在標記中定義的資源時，您將指派到唯一的索引鍵[X:key 指示詞](../../xaml-services/x-key-directive.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-116">When you define resources in markup, you assign the unique key through the [x:Key Directive](../../xaml-services/x-key-directive.md).</span></span> <span data-ttu-id="164ec-117">索引鍵通常是字串；不過，您也可以使用適當的標記延伸，將它設定為其他物件類型。</span><span class="sxs-lookup"><span data-stu-id="164ec-117">Typically, the key is a string; however, you can also set it to other object types by using the appropriate markup extensions.</span></span> <span data-ttu-id="164ec-118">特定的功能區中所使用資源非字串索引鍵[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]，特別是代表樣式、 元件資源和資料樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-118">Nonstring keys for resources are used by certain feature areas in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], notably for styles, component resources, and data styling.</span></span>  
  
 <span data-ttu-id="164ec-119">定義資源之後，您可以使用指定索引鍵名稱的資源標記延伸語法，參考要用於屬性值的資源，例如：</span><span class="sxs-lookup"><span data-stu-id="164ec-119">After you define a resource, you can reference the resource to be used for a property value by using a resource markup extension syntax that specifies the key name, for example:</span></span>  
  
 [!code-xaml[FEResourceSH_snip#KeyNameUsage](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#keynameusage)]  
  
 <span data-ttu-id="164ec-120">在上述範例中，當[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]載入器處理值`{StaticResource MyBrush}`for<xref:System.Windows.Controls.Control.Background%2A>屬性<xref:System.Windows.Controls.Button>，資源查閱邏輯會先檢查資源字典中的<xref:System.Windows.Controls.Button>項目。</span><span class="sxs-lookup"><span data-stu-id="164ec-120">In the preceding example, when the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader processes the value `{StaticResource MyBrush}` for the <xref:System.Windows.Controls.Control.Background%2A> property on <xref:System.Windows.Controls.Button>, the resource lookup logic first checks the resource dictionary for the <xref:System.Windows.Controls.Button> element.</span></span> <span data-ttu-id="164ec-121">如果<xref:System.Windows.Controls.Button>沒有定義資源索引鍵`MyBrush`（它沒有; 其資源集合是空的），查閱會接著檢查的父項目<xref:System.Windows.Controls.Button>，也就是<xref:System.Windows.Controls.Page>。</span><span class="sxs-lookup"><span data-stu-id="164ec-121">If <xref:System.Windows.Controls.Button> does not have a definition of the resource key `MyBrush` (it does not; its resource collection is empty), the lookup next checks the parent element of <xref:System.Windows.Controls.Button>, which is <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="164ec-122">因此，當您定義的資源上<xref:System.Windows.Controls.Page>根項目，邏輯樹狀結構中的所有項目<xref:System.Windows.Controls.Page>可以存取它，並設定任何屬性的值可接受的您可以重複使用相同的資源<xref:System.Type>的資源表示。</span><span class="sxs-lookup"><span data-stu-id="164ec-122">Thus, when you define a resource on the <xref:System.Windows.Controls.Page> root element, all the elements in the logical tree of the <xref:System.Windows.Controls.Page> can access it, and you can reuse the same resource for setting the value of any property that accepts the <xref:System.Type> that the resource represents.</span></span> <span data-ttu-id="164ec-123">在上述範例中，相同`MyBrush`資源設定兩個不同的屬性：<xref:System.Windows.Controls.Control.Background%2A>的<xref:System.Windows.Controls.Button>，而<xref:System.Windows.Shapes.Shape.Fill%2A>的<xref:System.Windows.Shapes.Rectangle>。</span><span class="sxs-lookup"><span data-stu-id="164ec-123">In the previous example, the same `MyBrush` resource sets two different properties: the <xref:System.Windows.Controls.Control.Background%2A> of a <xref:System.Windows.Controls.Button>, and the <xref:System.Windows.Shapes.Shape.Fill%2A> of a <xref:System.Windows.Shapes.Rectangle>.</span></span>  
  
<a name="staticdynamic"></a>   
## <a name="static-and-dynamic-resources"></a><span data-ttu-id="164ec-124">靜態和動態資源</span><span class="sxs-lookup"><span data-stu-id="164ec-124">Static and Dynamic Resources</span></span>  
 <span data-ttu-id="164ec-125">資源可以當做靜態資源或動態資源參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-125">A resource can be referenced as either a static resource or a dynamic resource.</span></span> <span data-ttu-id="164ec-126">這是藉由使用[StaticResource 標記延伸](staticresource-markup-extension.md)或[DynamicResource 標記延伸](dynamicresource-markup-extension.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-126">This is done by using either the [StaticResource Markup Extension](staticresource-markup-extension.md) or the [DynamicResource Markup Extension](dynamicresource-markup-extension.md).</span></span> <span data-ttu-id="164ec-127">標記延伸是一項功能[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，您可以讓標記延伸處理屬性字串，並傳回物件，以指定的物件參考[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]載入器。</span><span class="sxs-lookup"><span data-stu-id="164ec-127">A markup extension is a feature of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] whereby you can specify an object reference by having the markup extension process the attribute string and return the object to a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader.</span></span> <span data-ttu-id="164ec-128">如需標記延伸行為的詳細資訊，請參閱[標記延伸和 WPF XAML](markup-extensions-and-wpf-xaml.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-128">For more information about markup extension behavior, see [Markup Extensions and WPF XAML](markup-extensions-and-wpf-xaml.md).</span></span>  
  
 <span data-ttu-id="164ec-129">當您使用標記延伸時，您通常會提供一或多個字串形式的參數，以供該特定標記延伸處理，而不是在所設定的屬性內容中進行評估。</span><span class="sxs-lookup"><span data-stu-id="164ec-129">When you use a markup extension, you typically provide one or more parameters in string form that are processed by that particular markup extension, rather than being evaluated in the context of the property being set.</span></span> <span data-ttu-id="164ec-130">[StaticResource 標記延伸](staticresource-markup-extension.md)處理按鍵，藉由查閱在所有可用的資源字典中該索引鍵的值。</span><span class="sxs-lookup"><span data-stu-id="164ec-130">The [StaticResource Markup Extension](staticresource-markup-extension.md) processes a key by looking up the value for that key in all available resource dictionaries.</span></span> <span data-ttu-id="164ec-131">這會在載入期間發生，也就是載入程序需要指派接受靜態資源參考的屬性值時。</span><span class="sxs-lookup"><span data-stu-id="164ec-131">This happens during loading, which is the point in time when the loading process needs to assign the property value that takes the static resource reference.</span></span> <span data-ttu-id="164ec-132">[DynamicResource 標記延伸](dynamicresource-markup-extension.md)改為處理程序藉由建立運算式和該運算式的索引鍵會保持未評估直到實際執行應用程式時，此時運算式會評估並提供值。</span><span class="sxs-lookup"><span data-stu-id="164ec-132">The [DynamicResource Markup Extension](dynamicresource-markup-extension.md) instead processes a key by creating an expression, and that expression remains unevaluated until the application is actually run, at which time the expression is evaluated and provides a value.</span></span>  
  
 <span data-ttu-id="164ec-133">當您參考資源時，下列考量可能會影響您使用靜態資源參考或動態資源參考：</span><span class="sxs-lookup"><span data-stu-id="164ec-133">When you reference a resource, the following considerations can influence whether you use a static resource reference or a dynamic resource reference:</span></span>  
  
-   <span data-ttu-id="164ec-134">如何為您的應用程式來建立資源的整體設計 (每頁、 在應用程式，在鬆散[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，在資源專用組件中)。</span><span class="sxs-lookup"><span data-stu-id="164ec-134">The overall design of how you create the resources for your application (per page, in the application, in loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], in a resource only assembly).</span></span>  
  
-   <span data-ttu-id="164ec-135">應用程式功能︰應用程式是否需要即時更新資源？</span><span class="sxs-lookup"><span data-stu-id="164ec-135">The application functionality: is updating resources in real time part of your application requirements?</span></span>  
  
-   <span data-ttu-id="164ec-136">該資源參考型別的相關查閱行為。</span><span class="sxs-lookup"><span data-stu-id="164ec-136">The respective lookup behavior of that resource reference type.</span></span>  
  
-   <span data-ttu-id="164ec-137">特定屬性或資源類型，以及這些類型的原生行為。</span><span class="sxs-lookup"><span data-stu-id="164ec-137">The particular property or resource type, and the native behavior of those types.</span></span>  
  
### <a name="static-resources"></a><span data-ttu-id="164ec-138">靜態資源</span><span class="sxs-lookup"><span data-stu-id="164ec-138">Static Resources</span></span>  
 <span data-ttu-id="164ec-139">靜態資源參考最適用於下列情況：</span><span class="sxs-lookup"><span data-stu-id="164ec-139">Static resource references work best for the following circumstances:</span></span>  
  
-   <span data-ttu-id="164ec-140">應用程式設計將其大部分資源集中到頁面或應用程式層級資源字典中。</span><span class="sxs-lookup"><span data-stu-id="164ec-140">Your application design concentrates most of all of its resources into page or application level resource dictionaries.</span></span> <span data-ttu-id="164ec-141">由於靜態資源參考不會根據執行階段行為 (例如重新載入頁面) 重新評估，因此當根據資源和應用程式設計不需要動態資源參考時，可避免使用大量動態資源參考，藉此提升一些效能。</span><span class="sxs-lookup"><span data-stu-id="164ec-141">Static resource references are not reevaluated based on runtime behaviors such as reloading a page, and therefore there can be some performance benefit to avoiding large numbers of dynamic resource references when they are not necessary per your resource and application design.</span></span>  
  
-   <span data-ttu-id="164ec-142">您要設定不在屬性的值<xref:System.Windows.DependencyObject>或<xref:System.Windows.Freezable>。</span><span class="sxs-lookup"><span data-stu-id="164ec-142">You are setting the value of a property that is not on a <xref:System.Windows.DependencyObject> or a <xref:System.Windows.Freezable>.</span></span>  
  
-   <span data-ttu-id="164ec-143">您要建立編譯成 DLL 並封裝成應用程式一部分或在應用程式之間共用的資源字典。</span><span class="sxs-lookup"><span data-stu-id="164ec-143">You are creating a resource dictionary that will be compiled into a DLL, and packaged as part of the application or shared between applications.</span></span>  
  
-   <span data-ttu-id="164ec-144">您要建立自訂控制項的佈景主題，然後定義用於佈景主題的資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-144">You are creating a theme for a custom control, and are defining resources that are used within the themes.</span></span> <span data-ttu-id="164ec-145">在此情況下，您通常不需要動態資源參考查閱行為，而需要靜態資源參考行為，以便佈景主題可預測並內封查閱。</span><span class="sxs-lookup"><span data-stu-id="164ec-145">For this case, you typically do not want the dynamic resource reference lookup behavior, you instead want the static resource reference behavior so that the lookup is predictable and self-contained to the theme.</span></span> <span data-ttu-id="164ec-146">使用動態資源參考時，甚至是佈景主題內的參考也會在執行階段之前保持未評估，在套用佈景主題時，有些區域項目可能會重新定義佈景主題嘗試參考的索引鍵，而且區域項目將會落在查閱中的佈景主題本身之前。</span><span class="sxs-lookup"><span data-stu-id="164ec-146">With a dynamic resource reference, even a reference within a theme is left unevaluated until runtime, and there is a chance that when the theme is applied, some local element will redefine a key that your theme is trying to reference, and the local element will fall prior to the theme itself in the lookup.</span></span> <span data-ttu-id="164ec-147">如果發生此情況，您的佈景主題將不會如預期般運作。</span><span class="sxs-lookup"><span data-stu-id="164ec-147">If that happens, your theme will not behave in an expected manner.</span></span>  
  
-   <span data-ttu-id="164ec-148">您要使用資源來設定大量相依性屬性。</span><span class="sxs-lookup"><span data-stu-id="164ec-148">You are using resources to set large numbers of dependency properties.</span></span> <span data-ttu-id="164ec-149">相依性屬性具有屬性系統已啟用的有效值快取，因此如果您將值提供給可在載入時評估的相依性屬性，相依性屬性不必檢查是否有重新評估的運算式，而且可能傳回最後一個有效值。</span><span class="sxs-lookup"><span data-stu-id="164ec-149">Dependency properties have effective value caching as enabled by the property system, so if you provide a value for a dependency property that can be evaluated at load time, the dependency property does not have to check for a reevaluated expression and can return the last effective value.</span></span> <span data-ttu-id="164ec-150">這項技術可能會提升效能。</span><span class="sxs-lookup"><span data-stu-id="164ec-150">This technique can be a performance benefit.</span></span>  
  
-   <span data-ttu-id="164ec-151">您想要變更的基礎資源的所有取用者，或您想要使用不同的可寫入執行個體維護每個取用者[x： 共用屬性](../../xaml-services/x-shared-attribute.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-151">You want to change the underlying resource for all consumers, or you want to maintain separate writable instances for each consumer by using the [x:Shared Attribute](../../xaml-services/x-shared-attribute.md).</span></span>  
  
#### <a name="static-resource-lookup-behavior"></a><span data-ttu-id="164ec-152">靜態資源查閱行為</span><span class="sxs-lookup"><span data-stu-id="164ec-152">Static resource lookup behavior</span></span>  
  
1. <span data-ttu-id="164ec-153">查閱程序會檢查設定屬性之項目所定義的資源字典內，是否有要求的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-153">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>  
  
2. <span data-ttu-id="164ec-154">查閱程序接著會在邏輯樹狀結構中，向上周游到父項目及其資源字典。</span><span class="sxs-lookup"><span data-stu-id="164ec-154">The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.</span></span> <span data-ttu-id="164ec-155">這會繼續直到到達根項目。</span><span class="sxs-lookup"><span data-stu-id="164ec-155">This continues until the root element is reached.</span></span>  
  
3. <span data-ttu-id="164ec-156">接下來，會檢查應用程式資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-156">Next, application resources are checked.</span></span> <span data-ttu-id="164ec-157">應用程式資源則由定義資源字典內<xref:System.Windows.Application>物件您[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]應用程式。</span><span class="sxs-lookup"><span data-stu-id="164ec-157">Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span>  
  
 <span data-ttu-id="164ec-158">資源字典內的靜態資源參考必須參考資源參考之前已在語彙上定義的資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-158">Static resource references from within a resource dictionary must reference a resource that has already been defined lexically before the resource reference.</span></span> <span data-ttu-id="164ec-159">靜態資源參考無法解析向前參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-159">Forward references cannot be resolved by a static resource reference.</span></span> <span data-ttu-id="164ec-160">因此，如果您使用靜態資源參考，您必須設計資源字典結構，讓預期要供某個資源使用的所有資源都在每個相關資源字典開頭或附近定義。</span><span class="sxs-lookup"><span data-stu-id="164ec-160">For this reason, if you use static resource references, you must design your resource dictionary structure such that resources intended for by-resource use are defined at or near the beginning of each respective resource dictionary.</span></span>  
  
 <span data-ttu-id="164ec-161">靜態資源查閱可以延伸到佈景主題或系統資源，但這只是因為[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]載入器會延遲要求。</span><span class="sxs-lookup"><span data-stu-id="164ec-161">Static resource lookup can extend into themes, or into system resources, but this is supported only because the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] loader defers the request.</span></span> <span data-ttu-id="164ec-162">為了將頁面載入時的執行階段佈景主題正確套用至應用程式，必須有此延遲。</span><span class="sxs-lookup"><span data-stu-id="164ec-162">The deferral is necessary so that the runtime theme at the time the page loads applies properly to the application.</span></span> <span data-ttu-id="164ec-163">不過，不建議已知只存在於佈景主題中或作為系統資源的索引鍵有靜態資源參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-163">However, static resource references to keys that are known to only exist in themes or as system resources are not recommended.</span></span> <span data-ttu-id="164ec-164">這是因為如果使用者即時變更佈景主題，不會重新評估這類參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-164">This is because such references are not reevaluated if the theme is changed by the user in realtime.</span></span> <span data-ttu-id="164ec-165">當您要求佈景主題或系統資源時，動態資源參考會更可靠。</span><span class="sxs-lookup"><span data-stu-id="164ec-165">A dynamic resource reference is more reliable when you request theme or system resources.</span></span> <span data-ttu-id="164ec-166">但佈景主題項目本身要求另一個資源時則例外。</span><span class="sxs-lookup"><span data-stu-id="164ec-166">The exception is when a theme element itself requests another resource.</span></span> <span data-ttu-id="164ec-167">這些參考應該是靜態資源參考，原因如前所述。</span><span class="sxs-lookup"><span data-stu-id="164ec-167">These references should be static resource references, for the reasons mentioned earlier.</span></span>  
  
 <span data-ttu-id="164ec-168">找不到靜態資源參考時的例外狀況行為會有所不同。</span><span class="sxs-lookup"><span data-stu-id="164ec-168">The exception behavior if a static resource reference is not found varies.</span></span> <span data-ttu-id="164ec-169">如果已延遲資源，則會在執行階段發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="164ec-169">If the resource was deferred, then the exception occurs at runtime.</span></span> <span data-ttu-id="164ec-170">如果未延遲資源，則會在載入時發生例外狀況。</span><span class="sxs-lookup"><span data-stu-id="164ec-170">If the resource was not deferred, the exception occurs at load time.</span></span>  
  
### <a name="dynamic-resources"></a><span data-ttu-id="164ec-171">動態資源</span><span class="sxs-lookup"><span data-stu-id="164ec-171">Dynamic Resources</span></span>  
 <span data-ttu-id="164ec-172">動態資源最適用於下列情況：</span><span class="sxs-lookup"><span data-stu-id="164ec-172">Dynamic resources work best for the following circumstances:</span></span>  
  
-   <span data-ttu-id="164ec-173">資源的值取決於執行階段之後才知道的狀況。</span><span class="sxs-lookup"><span data-stu-id="164ec-173">The value of the resource depends on conditions that are not known until runtime.</span></span> <span data-ttu-id="164ec-174">這包括系統資源或使用者可設定的資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-174">This includes system resources, or resources that are otherwise user settable.</span></span> <span data-ttu-id="164ec-175">例如，您可以建立參考系統屬性的 setter 值所公開之<xref:System.Windows.SystemColors>， <xref:System.Windows.SystemFonts>，或<xref:System.Windows.SystemParameters>。</span><span class="sxs-lookup"><span data-stu-id="164ec-175">For example, you can create setter values that refer to system properties, as exposed by <xref:System.Windows.SystemColors>, <xref:System.Windows.SystemFonts>, or <xref:System.Windows.SystemParameters>.</span></span> <span data-ttu-id="164ec-176">由於這些值最終是來自使用者和作業系統的執行階段環境，因此是真正動態的。</span><span class="sxs-lookup"><span data-stu-id="164ec-176">These values are truly dynamic because they ultimately come from the runtime environment of the user and operating system.</span></span> <span data-ttu-id="164ec-177">您也可能有會變更的應用程式層級佈景主題，其中的頁面層級資源存取也必須擷取該變更。</span><span class="sxs-lookup"><span data-stu-id="164ec-177">You might also have application-level themes that can change, where page-level resource access must also capture the change.</span></span>  
  
-   <span data-ttu-id="164ec-178">您要建立或參考自訂控制項的佈景主題樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-178">You are creating or referencing theme styles for a custom control.</span></span>  
  
-   <span data-ttu-id="164ec-179">您想要調整的內容<xref:System.Windows.ResourceDictionary>應用程式存留期間。</span><span class="sxs-lookup"><span data-stu-id="164ec-179">You intend to adjust the contents of a <xref:System.Windows.ResourceDictionary> during an application lifetime.</span></span>  
  
-   <span data-ttu-id="164ec-180">您有內含相互依存性的複雜資源結構，可能需要向前參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-180">You have a complicated resource structure that has interdependencies, where a forward reference may be required.</span></span> <span data-ttu-id="164ec-181">靜態資源參考不支援向前參考，但動態資源參考則支援，因為資源不需要執行階段之前評估，因此向前參考並不相關的概念。</span><span class="sxs-lookup"><span data-stu-id="164ec-181">Static resource references do not support forward references, but dynamic resource references do support them because the resource does not need to be evaluated until runtime, and forward references are therefore not a relevant concept.</span></span>  
  
-   <span data-ttu-id="164ec-182">您所參考的資源從編譯或工作集的觀點來看特別大，因此當頁面載入時，可能無法立即使用資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-182">You are referencing a resource that is particularly large from the perspective of a compile or working set, and the resource might not be used immediately when the page loads.</span></span> <span data-ttu-id="164ec-183">靜態資源參考一律從載入[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]當頁面載入; 不過，動態資源參考不會載入直到實際使用。</span><span class="sxs-lookup"><span data-stu-id="164ec-183">Static resource references always load from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] when the page loads; however, a dynamic resource reference does not load until it is actually used.</span></span>  
  
-   <span data-ttu-id="164ec-184">您要建立樣式，其中的 setter 值可能來自受到佈景主題或其他使用者設定影響的其他值。</span><span class="sxs-lookup"><span data-stu-id="164ec-184">You are creating a style where setter values might come from other values that are influenced by themes or other user settings.</span></span>  
  
-   <span data-ttu-id="164ec-185">您要將資源套用至可能在應用程式存留期間於邏輯樹狀結構中重設父代的項目。</span><span class="sxs-lookup"><span data-stu-id="164ec-185">You are applying resources to elements that might be reparented in the logical tree during application lifetime.</span></span> <span data-ttu-id="164ec-186">變更父代也可能會變更資源查閱範圍，因此如果您想要根據新範圍重新評估重設父代項目的資源，請一律使用動態資源參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-186">Changing the parent also potentially changes the resource lookup scope, so if you want the resource for a reparented element to be reevaluated based on the new scope, always use a dynamic resource reference.</span></span>  
  
#### <a name="dynamic-resource-lookup-behavior"></a><span data-ttu-id="164ec-187">動態資源查閱行為</span><span class="sxs-lookup"><span data-stu-id="164ec-187">Dynamic resource lookup behavior</span></span>  
 <span data-ttu-id="164ec-188">動態資源參考的資源查閱行為平行程式碼中的查閱行為，如果您呼叫<xref:System.Windows.FrameworkElement.FindResource%2A>或<xref:System.Windows.FrameworkElement.SetResourceReference%2A>。</span><span class="sxs-lookup"><span data-stu-id="164ec-188">Resource lookup behavior for a dynamic resource reference parallels the lookup behavior in your code if you call <xref:System.Windows.FrameworkElement.FindResource%2A> or <xref:System.Windows.FrameworkElement.SetResourceReference%2A>.</span></span>  
  
1. <span data-ttu-id="164ec-189">查閱程序會檢查設定屬性之項目所定義的資源字典內，是否有要求的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-189">The lookup process checks for the requested key within the resource dictionary defined by the element that sets the property.</span></span>  
  
    -   <span data-ttu-id="164ec-190">如果項目定義<xref:System.Windows.FrameworkElement.Style%2A>屬性，<xref:System.Windows.Style.Resources%2A>字典內<xref:System.Windows.Style>已核取。</span><span class="sxs-lookup"><span data-stu-id="164ec-190">If the element defines a <xref:System.Windows.FrameworkElement.Style%2A> property, the <xref:System.Windows.Style.Resources%2A> dictionary within the <xref:System.Windows.Style> is checked.</span></span>  
  
    -   <span data-ttu-id="164ec-191">如果項目定義<xref:System.Windows.Controls.Control.Template%2A>屬性，<xref:System.Windows.FrameworkTemplate.Resources%2A>字典內<xref:System.Windows.FrameworkTemplate>已核取。</span><span class="sxs-lookup"><span data-stu-id="164ec-191">If the element defines a <xref:System.Windows.Controls.Control.Template%2A> property, the <xref:System.Windows.FrameworkTemplate.Resources%2A> dictionary within the <xref:System.Windows.FrameworkTemplate> is checked.</span></span>  
  
2. <span data-ttu-id="164ec-192">查閱程序接著會在邏輯樹狀結構中，向上周游到父項目及其資源字典。</span><span class="sxs-lookup"><span data-stu-id="164ec-192">The lookup process then traverses the logical tree upward, to the parent element and its resource dictionary.</span></span> <span data-ttu-id="164ec-193">這會繼續直到到達根項目。</span><span class="sxs-lookup"><span data-stu-id="164ec-193">This continues until the root element is reached.</span></span>  
  
3. <span data-ttu-id="164ec-194">接下來，會檢查應用程式資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-194">Next, application resources are checked.</span></span> <span data-ttu-id="164ec-195">應用程式資源則由定義資源字典內<xref:System.Windows.Application>物件您[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]應用程式。</span><span class="sxs-lookup"><span data-stu-id="164ec-195">Application resources are those resources within the resource dictionary that is defined by the <xref:System.Windows.Application> object for your [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span>  
  
4. <span data-ttu-id="164ec-196">檢查目前使用中佈景主題的佈景主題資源字典。</span><span class="sxs-lookup"><span data-stu-id="164ec-196">Theme resource dictionary is checked, for the currently active theme.</span></span> <span data-ttu-id="164ec-197">如果佈景主題在執行階段變更，則會重新評估其值。</span><span class="sxs-lookup"><span data-stu-id="164ec-197">If the theme changes at runtime, the value is reevaluated.</span></span>  
  
5. <span data-ttu-id="164ec-198">檢查系統資源。</span><span class="sxs-lookup"><span data-stu-id="164ec-198">System resources are checked.</span></span>  
  
 <span data-ttu-id="164ec-199">例外狀況行為 (如果有的話) 則有所不同：</span><span class="sxs-lookup"><span data-stu-id="164ec-199">Exception behavior (if any) varies:</span></span>  
  
-   <span data-ttu-id="164ec-200">如果所要求資源<xref:System.Windows.FrameworkElement.FindResource%2A>呼叫，並找不到，會引發例外狀況。</span><span class="sxs-lookup"><span data-stu-id="164ec-200">If a resource was requested by a <xref:System.Windows.FrameworkElement.FindResource%2A> call, and was not found, an exception is raised.</span></span>  
  
-   <span data-ttu-id="164ec-201">如果所要求資源<xref:System.Windows.FrameworkElement.TryFindResource%2A>呼叫，並找不到，會引發任何例外狀況，但傳回的值是`null`。</span><span class="sxs-lookup"><span data-stu-id="164ec-201">If a resource was requested by a <xref:System.Windows.FrameworkElement.TryFindResource%2A> call, and was not found, no exception is raised, but the returned value is `null`.</span></span> <span data-ttu-id="164ec-202">如果要設定的屬性不接受`null`，則仍有可能，會引發更深入的例外狀況 （這取決於所設定的個別屬性）。</span><span class="sxs-lookup"><span data-stu-id="164ec-202">If the property being set does not accept `null`, then it is still possible that a deeper exception will be raised (this depends on the individual property being set).</span></span>  
  
-   <span data-ttu-id="164ec-203">如果中的動態資源參考要求資源[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，並找不到，則其行為取決於一般屬性系統中，但一般行為會如同資源所在的層級發生任何屬性設定作業。</span><span class="sxs-lookup"><span data-stu-id="164ec-203">If a resource was requested by a dynamic resource reference in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], and was not found, then the behavior depends on the general property system, but the general behavior is as if no property setting operation occurred at the level where the resource exists.</span></span> <span data-ttu-id="164ec-204">例如，如果您嘗試使用無法評估的資源來設定個別按鈕項目的背景，則沒有值會設定結果，但有效值仍然可能來自屬性系統和值優先順序中的其他參與值。</span><span class="sxs-lookup"><span data-stu-id="164ec-204">For instance, if you attempt to set the background on a an individual button element using a resource that could not be evaluated, then no value set results, but the effective value can still come from other participants in the property system and value precedence.</span></span> <span data-ttu-id="164ec-205">例如，背景值仍然可能來自本機定義的按鈕樣式，或來自佈景主題樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-205">For instance, the background value might still come from a locally defined button style, or from the theme style.</span></span> <span data-ttu-id="164ec-206">針對不是由佈景主題樣式定義的屬性，資源評估失敗後的有效值可能來自屬性中繼資料內的預設值。</span><span class="sxs-lookup"><span data-stu-id="164ec-206">For properties that are not defined by theme styles, the effective value after a failed resource evaluation might come from the default value in the property metadata.</span></span>  
  
#### <a name="restrictions"></a><span data-ttu-id="164ec-207">限制</span><span class="sxs-lookup"><span data-stu-id="164ec-207">Restrictions</span></span>  
 <span data-ttu-id="164ec-208">動態資源參考有一些值得注意的限制。</span><span class="sxs-lookup"><span data-stu-id="164ec-208">Dynamic resource references have some notable restrictions.</span></span> <span data-ttu-id="164ec-209">至少必須符合下列其中一個情況：</span><span class="sxs-lookup"><span data-stu-id="164ec-209">At least one of the following must be true:</span></span>  
  
-   <span data-ttu-id="164ec-210">要設定的屬性必須是屬性上<xref:System.Windows.FrameworkElement>或<xref:System.Windows.FrameworkContentElement>。</span><span class="sxs-lookup"><span data-stu-id="164ec-210">The property being set must be a property on a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement>.</span></span> <span data-ttu-id="164ec-211">屬性都必須受<xref:System.Windows.DependencyProperty>。</span><span class="sxs-lookup"><span data-stu-id="164ec-211">That property must be backed by a <xref:System.Windows.DependencyProperty>.</span></span>  
  
-   <span data-ttu-id="164ec-212">參考中的值是<xref:System.Windows.Style><xref:System.Windows.Setter>。</span><span class="sxs-lookup"><span data-stu-id="164ec-212">The reference is for a value within a <xref:System.Windows.Style><xref:System.Windows.Setter>.</span></span>  
  
-   <span data-ttu-id="164ec-213">所設定的屬性必須是屬性上<xref:System.Windows.Freezable>提供的值為<xref:System.Windows.FrameworkElement>或是<xref:System.Windows.FrameworkContentElement>屬性，或<xref:System.Windows.Setter>值。</span><span class="sxs-lookup"><span data-stu-id="164ec-213">The property being set must be a property on a <xref:System.Windows.Freezable> that is provided as a value of either a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> property, or a <xref:System.Windows.Setter> value.</span></span>  
  
 <span data-ttu-id="164ec-214">由於所設定的屬性必須是<xref:System.Windows.DependencyProperty>或<xref:System.Windows.Freezable>屬性，大部分的屬性變更可以傳播至 UI，因為屬性變更 （變更的動態資源值） 由屬性系統認可。</span><span class="sxs-lookup"><span data-stu-id="164ec-214">Because the property being set must be a <xref:System.Windows.DependencyProperty> or <xref:System.Windows.Freezable> property, most property changes can propagate to UI because a property change (the changed dynamic resource value) is acknowledged by the property system.</span></span> <span data-ttu-id="164ec-215">大多數控制項所包含邏輯，會強制另一個控制項的配置，如果<xref:System.Windows.DependencyProperty>變更和屬性可能會影響版面配置。</span><span class="sxs-lookup"><span data-stu-id="164ec-215">Most controls include logic that will force another layout of a control if a <xref:System.Windows.DependencyProperty> changes and that property might affect layout.</span></span> <span data-ttu-id="164ec-216">然而，並非所有的屬性具有[DynamicResource 標記延伸](dynamicresource-markup-extension.md)做為其值會保證提供的方式，更新在 UI 中的即時值。</span><span class="sxs-lookup"><span data-stu-id="164ec-216">However, not all properties that have a [DynamicResource Markup Extension](dynamicresource-markup-extension.md) as their value are guaranteed to provide the value in such a way that they update in realtime in the UI.</span></span> <span data-ttu-id="164ec-217">該功能仍然可能會依屬性、擁有屬性的類型，甚至是應用程式的邏輯結構而有所不同。</span><span class="sxs-lookup"><span data-stu-id="164ec-217">That functionality still might vary depending on the property, as well as depending on the type that owns the property, or even the logical structure of your application.</span></span>  
  
<a name="stylesimplicitkeys"></a>   
## <a name="styles-datatemplates-and-implicit-keys"></a><span data-ttu-id="164ec-218">樣式、DataTemplate 和隱含索引鍵</span><span class="sxs-lookup"><span data-stu-id="164ec-218">Styles, DataTemplates, and Implicit Keys</span></span>  
 <span data-ttu-id="164ec-219">更早版本，說明所有項目中<xref:System.Windows.ResourceDictionary>必須有索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-219">Earlier, it was stated that all items in a <xref:System.Windows.ResourceDictionary> must have a key.</span></span> <span data-ttu-id="164ec-220">不過，這不表示所有資源都必須都有明確`x:Key`。</span><span class="sxs-lookup"><span data-stu-id="164ec-220">However, that does not mean that all resources must have an explicit `x:Key`.</span></span> <span data-ttu-id="164ec-221">有幾種物件類型會在定義為資源時支援隱含索引鍵，其中索引鍵值會繫結至另一個屬性的值。</span><span class="sxs-lookup"><span data-stu-id="164ec-221">Several object types support an implicit key when defined as a resource, where the key value is tied to the value of another property.</span></span> <span data-ttu-id="164ec-222">這就所謂的隱含索引鍵，而`x:Key`屬性是明確的索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-222">This is known as an implicit key, whereas an `x:Key` attribute is an explicit key.</span></span> <span data-ttu-id="164ec-223">您可以藉由指定明確索引鍵，來覆寫任何隱含索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-223">You can overwrite any implicit key by specifying an explicit key.</span></span>  
  
 <span data-ttu-id="164ec-224">資源的其中一個非常重要的案例是當您定義<xref:System.Windows.Style>。</span><span class="sxs-lookup"><span data-stu-id="164ec-224">One very important scenario for resources is when you define a <xref:System.Windows.Style>.</span></span> <span data-ttu-id="164ec-225">事實上，<xref:System.Windows.Style>幾乎都定義為資源字典中的項目因為樣式原本就是僅供重複使用。</span><span class="sxs-lookup"><span data-stu-id="164ec-225">In fact, a <xref:System.Windows.Style> is almost always defined as an entry in a resource dictionary, because styles are inherently intended for reuse.</span></span> <span data-ttu-id="164ec-226">如需有關樣式的詳細資訊，請參閱 <<c0> [ 設定樣式和範本](../controls/styling-and-templating.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-226">For more information about styles, see [Styling and Templating](../controls/styling-and-templating.md).</span></span>  
  
 <span data-ttu-id="164ec-227">控制項的樣式可以透過隱含索引鍵來建立及參考。</span><span class="sxs-lookup"><span data-stu-id="164ec-227">Styles for controls can be both created with and referenced with an implicit key.</span></span> <span data-ttu-id="164ec-228">定義預設控制項外觀的佈景主題樣式會依賴此隱含索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-228">The theme styles that define the default appearance of a control rely on this implicit key.</span></span> <span data-ttu-id="164ec-229">從要求它的觀點來看，隱含索引鍵是<xref:System.Type>控制項本身。</span><span class="sxs-lookup"><span data-stu-id="164ec-229">The implicit key from the standpoint of requesting it is the <xref:System.Type> of the control itself.</span></span> <span data-ttu-id="164ec-230">從定義資源的觀點來看，隱含索引鍵是<xref:System.Windows.Style.TargetType%2A>的樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-230">The implicit key from the standpoint of defining the resource is the <xref:System.Windows.Style.TargetType%2A> of the style.</span></span> <span data-ttu-id="164ec-231">因此，如果您要建立自訂控制項的佈景主題，建立互動的樣式與現有佈景主題樣式，您不需要指定[X:key 指示詞](../../xaml-services/x-key-directive.md)該<xref:System.Windows.Style>。</span><span class="sxs-lookup"><span data-stu-id="164ec-231">Therefore, if you are creating themes for custom controls, creating styles that interact with existing theme styles, you do not need to specify an [x:Key Directive](../../xaml-services/x-key-directive.md) for that <xref:System.Windows.Style>.</span></span> <span data-ttu-id="164ec-232">此外，如果您想要使用佈景主題樣式，則完全不需要指定任何樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-232">And if you want to use the themed styles, you do not need to specify any style at all.</span></span> <span data-ttu-id="164ec-233">比方說，下列樣式定義的運作方式，即使<xref:System.Windows.Style>有索引鍵，似乎不到資源：</span><span class="sxs-lookup"><span data-stu-id="164ec-233">For instance, the following style definition works, even though the <xref:System.Windows.Style> resource does not appear to have a key:</span></span>  
  
 [!code-xaml[FEResourceSH_snip#ImplicitStyle](~/samples/snippets/csharp/VS_Snippets_Wpf/FEResourceSH_snip/CS/page2.xaml#implicitstyle)]  
  
 <span data-ttu-id="164ec-234">該樣式其實有索引鍵： 隱含索引鍵`typeof(`<xref:System.Windows.Controls.Button>`)`。</span><span class="sxs-lookup"><span data-stu-id="164ec-234">That style really does have a key: the implicit key `typeof(`<xref:System.Windows.Controls.Button>`)`.</span></span> <span data-ttu-id="164ec-235">在標記中，您可以指定<xref:System.Windows.Style.TargetType%2A>直接做為類型名稱 (或您可以選擇性地使用[{x: Type...}](../../xaml-services/x-type-markup-extension.md)</span><span class="sxs-lookup"><span data-stu-id="164ec-235">In markup, you can specify a <xref:System.Windows.Style.TargetType%2A> directly as the type name (or you can optionally use [{x:Type...}](../../xaml-services/x-type-markup-extension.md)</span></span> <span data-ttu-id="164ec-236">要傳回<xref:System.Type>。</span><span class="sxs-lookup"><span data-stu-id="164ec-236">to return a <xref:System.Type>.</span></span>  
  
 <span data-ttu-id="164ec-237">透過所使用的預設佈景主題樣式機制[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]，樣式會套用作為執行階段樣式<xref:System.Windows.Controls.Button>在頁面上，即使<xref:System.Windows.Controls.Button>本身不會嘗試指定其<xref:System.Windows.FrameworkElement.Style%2A>屬性或特定的資源參考的樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-237">Through the default theme style mechanisms used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], that style is applied as the runtime style of a <xref:System.Windows.Controls.Button> on the page, even though the <xref:System.Windows.Controls.Button> itself does not attempt to specify its <xref:System.Windows.FrameworkElement.Style%2A> property or a specific resource reference to the style.</span></span> <span data-ttu-id="164ec-238">稍早在比使用佈景主題字典樣式所具有的相同金鑰的佈景主題字典樣式的查閱序列中找到您頁面中定義的樣式。</span><span class="sxs-lookup"><span data-stu-id="164ec-238">Your style defined in the page is found earlier in the lookup sequence than the theme dictionary style, using the same key that the theme dictionary style has.</span></span> <span data-ttu-id="164ec-239">您可以指定`<Button>Hello</Button>`頁面，並以您定義的樣式中的任何地方<xref:System.Windows.Style.TargetType%2A>的`Button`會套用至該按鈕。</span><span class="sxs-lookup"><span data-stu-id="164ec-239">You could just specify `<Button>Hello</Button>` anywhere in the page, and the style you defined with <xref:System.Windows.Style.TargetType%2A> of `Button` would apply to that button.</span></span> <span data-ttu-id="164ec-240">如果您想，您可以仍然明確樣式的索引鍵具有相同的型別值<xref:System.Windows.Style.TargetType%2A>、 清楚的標記，但為選用。</span><span class="sxs-lookup"><span data-stu-id="164ec-240">If you want, you can still explicitly key the style with the same type value as <xref:System.Windows.Style.TargetType%2A>, for clarity in your markup, but that is optional.</span></span>  
  
 <span data-ttu-id="164ec-241">樣式的隱含索引鍵不會套用在控制項上如果<xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A>已`true`(另請注意，<xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A>可能設定為 control 類別，而不是明確的控制項執行個體上的原生行為的一部分)。</span><span class="sxs-lookup"><span data-stu-id="164ec-241">Implicit keys for styles do not apply on a control if <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> is `true` (also note that <xref:System.Windows.FrameworkElement.OverridesDefaultStyle%2A> might be set as part of native behavior for the control class, rather than explicitly on an instance of the control).</span></span> <span data-ttu-id="164ec-242">此外，為了支援衍生的類別情節的隱含索引鍵，控制項必須覆寫<xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>(提供做為一部分的所有現有控制項[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]這麼做)。</span><span class="sxs-lookup"><span data-stu-id="164ec-242">Also, in order to support implicit keys for derived class scenarios, the control must override <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> (all existing controls provided as part of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] do this).</span></span> <span data-ttu-id="164ec-243">如需樣式、 佈景主題和控制設計的詳細資訊，請參閱[設計可設定樣式控制項的方針](../controls/guidelines-for-designing-stylable-controls.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-243">For more information about styles, themes, and control design, see [Guidelines for Designing Stylable Controls](../controls/guidelines-for-designing-stylable-controls.md).</span></span>  
  
 <xref:System.Windows.DataTemplate> <span data-ttu-id="164ec-244">也有隱含索引鍵。</span><span class="sxs-lookup"><span data-stu-id="164ec-244">also has an implicit key.</span></span> <span data-ttu-id="164ec-245">隱含索引鍵<xref:System.Windows.DataTemplate>是<xref:System.Windows.DataTemplate.DataType%2A>屬性值。</span><span class="sxs-lookup"><span data-stu-id="164ec-245">The implicit key for a <xref:System.Windows.DataTemplate> is the <xref:System.Windows.DataTemplate.DataType%2A> property value.</span></span> <xref:System.Windows.DataTemplate.DataType%2A> <span data-ttu-id="164ec-246">也可以指定為型別名稱，而不是使用明確[{x: Type...}](../../xaml-services/x-type-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="164ec-246">can also be specified as the name of the type rather than explicitly using [{x:Type...}](../../xaml-services/x-type-markup-extension.md).</span></span> <span data-ttu-id="164ec-247">如需詳細資訊，請參閱 <<c0> [ 資料範本化概觀](../data/data-templating-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="164ec-247">For details, see [Data Templating Overview](../data/data-templating-overview.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="164ec-248">另請參閱</span><span class="sxs-lookup"><span data-stu-id="164ec-248">See also</span></span>

- <xref:System.Windows.ResourceDictionary>
- [<span data-ttu-id="164ec-249">應用程式資源</span><span class="sxs-lookup"><span data-stu-id="164ec-249">Application Resources</span></span>](optimizing-performance-application-resources.md)
- [<span data-ttu-id="164ec-250">資源和程式碼</span><span class="sxs-lookup"><span data-stu-id="164ec-250">Resources and Code</span></span>](resources-and-code.md)
- [<span data-ttu-id="164ec-251">定義和參考資源</span><span class="sxs-lookup"><span data-stu-id="164ec-251">Define and Reference a Resource</span></span>](how-to-define-and-reference-a-resource.md)
- [<span data-ttu-id="164ec-252">應用程式管理概觀</span><span class="sxs-lookup"><span data-stu-id="164ec-252">Application Management Overview</span></span>](../app-development/application-management-overview.md)
- [<span data-ttu-id="164ec-253">x:Type 標記延伸</span><span class="sxs-lookup"><span data-stu-id="164ec-253">x:Type Markup Extension</span></span>](../../xaml-services/x-type-markup-extension.md)
- [<span data-ttu-id="164ec-254">StaticResource 標記延伸</span><span class="sxs-lookup"><span data-stu-id="164ec-254">StaticResource Markup Extension</span></span>](staticresource-markup-extension.md)
- [<span data-ttu-id="164ec-255">DynamicResource 標記延伸</span><span class="sxs-lookup"><span data-stu-id="164ec-255">DynamicResource Markup Extension</span></span>](dynamicresource-markup-extension.md)
