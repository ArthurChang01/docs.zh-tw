---
title: 設定控制項中焦點的樣式和 FocusVisualStyle
ms.date: 03/30/2017
helpviewer_keywords:
- keyboard focus [WPF]
- focus [WPF], visual styling
- styles [WPF], focus visual style
ms.assetid: 786ac576-011b-4d72-913b-558deccb9b35
ms.openlocfilehash: 745c2174c54ed072f91a6d5eb3b43d5385e96b90
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/08/2019
ms.locfileid: "59172051"
---
# <a name="styling-for-focus-in-controls-and-focusvisualstyle"></a><span data-ttu-id="1893d-102">設定控制項中焦點的樣式和 FocusVisualStyle</span><span class="sxs-lookup"><span data-stu-id="1893d-102">Styling for Focus in Controls, and FocusVisualStyle</span></span>
[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="1893d-103">提供兩種平行機制，來變更控制項的視覺外觀，當它接收到鍵盤焦點時。</span><span class="sxs-lookup"><span data-stu-id="1893d-103">provides two parallel mechanisms for changing the visual appearance of a control when it receives keyboard focus.</span></span> <span data-ttu-id="1893d-104">第一種機制是使用屬性 setter 屬性，例如<xref:System.Windows.UIElement.IsKeyboardFocused%2A>樣式或範本套用至控制項內。</span><span class="sxs-lookup"><span data-stu-id="1893d-104">The first mechanism is to use property setters for properties such as <xref:System.Windows.UIElement.IsKeyboardFocused%2A> within the style or template that is applied to the control.</span></span> <span data-ttu-id="1893d-105">第二個機制是提供個別的樣式值<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>屬性; 「 焦點視覺化樣式 」 會為繪製控制項，而不是變更控制項或其他 UI 的視覺化樹狀結構上方的提示建立個別的視覺化樹狀結構藉由取代的項目。</span><span class="sxs-lookup"><span data-stu-id="1893d-105">The second mechanism is to provide a separate style as the value of the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property; the "focus visual style" creates a separate visual tree for an adorner that draws on top of the control, rather than changing the visual tree of the control or other UI element by replacing it.</span></span> <span data-ttu-id="1893d-106">本主題將討論每一種機制的適用案例。</span><span class="sxs-lookup"><span data-stu-id="1893d-106">This topic discusses the scenarios where each of these mechanisms is appropriate.</span></span>  

<a name="Purpose"></a>   
## <a name="the-purpose-of-focus-visual-style"></a><span data-ttu-id="1893d-107">焦點視覺化樣式的用途</span><span class="sxs-lookup"><span data-stu-id="1893d-107">The Purpose of Focus Visual Style</span></span>  
 <span data-ttu-id="1893d-108">焦點視覺化樣式功能提供常見的「物件模型」，以介紹根據鍵盤瀏覽至任何 UI 元素的視覺化使用者回饋。</span><span class="sxs-lookup"><span data-stu-id="1893d-108">The focus visual style feature provides a common "object model" for introducing visual user feedback based on keyboard navigation to any UI element.</span></span> <span data-ttu-id="1893d-109">即使不將新的範本套用至控制項，或是知道特定的範本組合，還是能夠達成此目的。</span><span class="sxs-lookup"><span data-stu-id="1893d-109">This is possible without applying a new template to the control, or knowing the specific template composition.</span></span>  
  
 <span data-ttu-id="1893d-110">不過，正因為焦點視覺化樣式功能可以在不知道控制項範本的情況下運作，所以，一定要限制可使用焦點視覺化樣式，針對控制項顯示的視覺化回饋。</span><span class="sxs-lookup"><span data-stu-id="1893d-110">However, precisely because the focus visual style feature works without knowing the control templates, the visual feedback that can be displayed for a control using a focus visual style is necessarily limited.</span></span> <span data-ttu-id="1893d-111">此功能真正的運作方式是，在視覺化樹狀結構上方重疊不同的視覺化樹狀結構 (提示)，如同由控制項透過其範本的轉譯來建立。</span><span class="sxs-lookup"><span data-stu-id="1893d-111">What the feature actually does is to overlay a different visual tree (an adorner) on top of the visual tree as created by a control's rendering through its template.</span></span> <span data-ttu-id="1893d-112">您定義這個個別的視覺化樹狀結構，以填滿的樣式<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="1893d-112">You define this separate visual tree using a style that fills the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> property.</span></span>  
  
<a name="Default"></a>   
## <a name="default-focus-visual-style-behavior"></a><span data-ttu-id="1893d-113">預設的焦點視覺化樣式行為</span><span class="sxs-lookup"><span data-stu-id="1893d-113">Default Focus Visual Style Behavior</span></span>  
 <span data-ttu-id="1893d-114">只有當焦點動作是由鍵盤所起始時，焦點視覺化樣式才會運作。</span><span class="sxs-lookup"><span data-stu-id="1893d-114">Focus visual styles act only when the focus action was initiated by the keyboard.</span></span> <span data-ttu-id="1893d-115">任何的滑鼠動作或程式設計焦點變更，都會停用焦點視覺化樣式的模式。</span><span class="sxs-lookup"><span data-stu-id="1893d-115">Any mouse action or programmatic focus change disables the mode for focus visual styles.</span></span> <span data-ttu-id="1893d-116">如需焦點模式之間差異的詳細資訊，請參閱[焦點概觀](focus-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="1893d-116">For more information about the distinctions between focus modes, see [Focus Overview](focus-overview.md).</span></span>  
  
 <span data-ttu-id="1893d-117">控制項的佈景主題包括預設的焦點視覺化樣式行為，其會成為佈景主題中所有控制項的焦點視覺化樣式。</span><span class="sxs-lookup"><span data-stu-id="1893d-117">The themes for controls include a default focus visual style behavior that becomes the focus visual style for all controls in the theme.</span></span> <span data-ttu-id="1893d-118">此佈景主題樣式由靜態索引鍵的值<xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>。</span><span class="sxs-lookup"><span data-stu-id="1893d-118">This theme style is identified by the value of the static key <xref:System.Windows.SystemParameters.FocusVisualStyleKey%2A>.</span></span> <span data-ttu-id="1893d-119">當您在應用程式層級宣告自己的焦點視覺化樣式時，會取代佈景主題的這個預設樣式行為。</span><span class="sxs-lookup"><span data-stu-id="1893d-119">When you declare your own focus visual style at the application level, you replace this default style behavior from the themes.</span></span> <span data-ttu-id="1893d-120">或者，如果您定義整個佈景主題，則您應該使用這個相同的索引鍵，針對整個佈景主題定義預設行為的樣式。</span><span class="sxs-lookup"><span data-stu-id="1893d-120">Alternatively, if you define the entire theme, then you should use this same key to define the style for the default behavior for your entire theme.</span></span>  
  
 <span data-ttu-id="1893d-121">在佈景主題中，預設的焦點視覺化樣式通常非常簡單。</span><span class="sxs-lookup"><span data-stu-id="1893d-121">In the themes, the default focus visual style is generally very simple.</span></span> <span data-ttu-id="1893d-122">以下是一種概略的方式：</span><span class="sxs-lookup"><span data-stu-id="1893d-122">The following is a rough approximation:</span></span>  
  
```xaml  
<Style x:Key="{x:Static SystemParameters.FocusVisualStyleKey}">  
  <Setter Property="Control.Template">  
    <Setter.Value>  
      <ControlTemplate>  
        <Rectangle StrokeThickness="1"  
          Stroke="Black"  
          StrokeDashArray="1 2"  
          SnapsToDevicePixels="true"/>  
      </ControlTemplate>  
    </Setter.Value>  
  </Setter>  
</Style>  
```  
  
<a name="When"></a>   
## <a name="when-to-use-focus-visual-styles"></a><span data-ttu-id="1893d-123">使用焦點視覺化樣式的時機</span><span class="sxs-lookup"><span data-stu-id="1893d-123">When to Use Focus Visual Styles</span></span>  
 <span data-ttu-id="1893d-124">概念上，套用至控制項的焦點視覺化樣式外觀在各個控制項之間應該保持一致。</span><span class="sxs-lookup"><span data-stu-id="1893d-124">Conceptually, the appearance of focus visual styles applied to controls should be coherent from control to control.</span></span> <span data-ttu-id="1893d-125">確保一致性的方法之一是，只有當您在撰寫整個佈景主題時，才能變更焦點視覺化樣式，而定義於該佈景主題中的每一個控制項都會取得完全相同的焦點視覺化樣式，或是控制項之間視覺上相關之樣式的一些變化。</span><span class="sxs-lookup"><span data-stu-id="1893d-125">One way to ensure coherence is to change the focus visual style only if you are composing an entire theme, where each control that is defined in the theme gets either the very same focus visual style, or some variation of a style that is visually related from control to control.</span></span> <span data-ttu-id="1893d-126">另外，您可以使用相同的樣式 (或類似樣式)，為頁面上或 UI 中每一個可透過鍵盤取得焦點的元素設定樣式。</span><span class="sxs-lookup"><span data-stu-id="1893d-126">Alternatively, you might use the same style (or similar styles) to style every keyboard-focusable element on a page or in a UI.</span></span>  
  
 <span data-ttu-id="1893d-127">設定<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>不屬於佈景主題的個別控制項樣式上是未預期的用法的焦點視覺化樣式。</span><span class="sxs-lookup"><span data-stu-id="1893d-127">Setting <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A> on individual control styles that are not part of a theme is not the intended usage of focus visual styles.</span></span> <span data-ttu-id="1893d-128">這是因為控制項之間不一致的視覺化行為，可導致使用者在關於鍵盤焦點方面得到令人困惑的體驗。</span><span class="sxs-lookup"><span data-stu-id="1893d-128">This is because an inconsistent visual behavior between controls can lead to a confusing user experience regarding keyboard focus.</span></span> <span data-ttu-id="1893d-129">如果您打算鍵盤焦點是刻意不一致整個佈景主題的控制項特定行為，更好的方法是使用觸發程序在樣式中個別輸入的狀態屬性，這類<xref:System.Windows.UIElement.IsFocused%2A>或<xref:System.Windows.UIElement.IsKeyboardFocused%2A>。</span><span class="sxs-lookup"><span data-stu-id="1893d-129">If you are intending control-specific behaviors for keyboard focus that are deliberately not coherent across a theme, a much better approach is to use triggers in styles for individual input state properties, such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocused%2A>.</span></span>  
  
 <span data-ttu-id="1893d-130">焦點視覺化樣式是鍵盤焦點專用的。</span><span class="sxs-lookup"><span data-stu-id="1893d-130">Focus visual styles act exclusively for keyboard focus.</span></span> <span data-ttu-id="1893d-131">因此，焦點視覺化樣式是一種協助工具功能。</span><span class="sxs-lookup"><span data-stu-id="1893d-131">As such, focus visual styles are a type of accessibility feature.</span></span> <span data-ttu-id="1893d-132">如果您想要針對任何類型的焦點進行 UI 變更 (不論是透過滑鼠、鍵盤或程式設計)，則您不應該使用焦點視覺化樣式，而應該在從一般焦點屬性 (例如 <xref:System.Windows.UIElement.IsFocused%2A> 或 <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>) 的值運作的樣式或範本中改用 setter 和觸發程序。</span><span class="sxs-lookup"><span data-stu-id="1893d-132">If you want UI changes for any type of focus, whether via mouse, keyboard, or programmatically, then you should not use focus visual styles, and should instead use setters and triggers in styles or templates that are working from the value of general focus properties such as <xref:System.Windows.UIElement.IsFocused%2A> or <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>.</span></span>  
  
<a name="How"></a>   
## <a name="how-to-create-a-focus-visual-style"></a><span data-ttu-id="1893d-133">建立焦點視覺化樣式的方式</span><span class="sxs-lookup"><span data-stu-id="1893d-133">How to Create a Focus Visual Style</span></span>  
 <span data-ttu-id="1893d-134">樣式建立的焦點視覺化樣式，應一律具有<xref:System.Windows.Style.TargetType%2A>的<xref:System.Windows.Controls.Control>。</span><span class="sxs-lookup"><span data-stu-id="1893d-134">The style you create for a focus visual style should always have the <xref:System.Windows.Style.TargetType%2A> of <xref:System.Windows.Controls.Control>.</span></span> <span data-ttu-id="1893d-135">樣式的組成應主要<xref:System.Windows.Controls.ControlTemplate>。</span><span class="sxs-lookup"><span data-stu-id="1893d-135">The style should consist mainly of a <xref:System.Windows.Controls.ControlTemplate>.</span></span> <span data-ttu-id="1893d-136">您未指定目標類型是類型的焦點視覺化樣式會指派給<xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>。</span><span class="sxs-lookup"><span data-stu-id="1893d-136">You do not specify the target type to be the type where the focus visual style is assigned to the <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>.</span></span>  
  
 <span data-ttu-id="1893d-137">因為目標類型一律<xref:System.Windows.Controls.Control>，您必須使用屬性通用於所有控制項樣式 (使用的屬性<xref:System.Windows.Controls.Control>類別和其基底類別)。</span><span class="sxs-lookup"><span data-stu-id="1893d-137">Because the target type is always <xref:System.Windows.Controls.Control>, you must style by using properties that are common to all controls (using properties of the <xref:System.Windows.Controls.Control> class and its base classes).</span></span> <span data-ttu-id="1893d-138">您應該建立將正常運作的範本來與 UI 元素重疊，而且將不會混淆控制項的功能區域。</span><span class="sxs-lookup"><span data-stu-id="1893d-138">You should create a template that will properly function as an overlay to a UI element and that will not obscure functional areas of the control.</span></span> <span data-ttu-id="1893d-139">一般而言，這表示視覺化回饋應該出現在控制項邊界外部，或者做為暫時性或不引人注目的效果，這類效果將不會在套用焦點視覺化樣式的控制項上封鎖點擊測試。</span><span class="sxs-lookup"><span data-stu-id="1893d-139">Generally, this means that the visual feedback should appear outside the control margins, or as temporary or unobtrusive effects that will not block the hit testing on the control where the focus visual style is applied.</span></span> <span data-ttu-id="1893d-140">您可以使用範本繫結中的有助於判斷大小及定位的重疊範本的內容包括<xref:System.Windows.FrameworkElement.ActualHeight%2A>， <xref:System.Windows.FrameworkElement.ActualWidth%2A>， <xref:System.Windows.FrameworkElement.Margin%2A>，和<xref:System.Windows.Controls.Control.Padding%2A>。</span><span class="sxs-lookup"><span data-stu-id="1893d-140">Properties that you can use in template binding that are useful for determining sizing and positioning of your overlay template include <xref:System.Windows.FrameworkElement.ActualHeight%2A>, <xref:System.Windows.FrameworkElement.ActualWidth%2A>, <xref:System.Windows.FrameworkElement.Margin%2A>, and <xref:System.Windows.Controls.Control.Padding%2A>.</span></span>  
  
<a name="Alternatives"></a>   
## <a name="alternatives-to-using-a-focus-visual-style"></a><span data-ttu-id="1893d-141">使用焦點視覺化樣式的替代方案</span><span class="sxs-lookup"><span data-stu-id="1893d-141">Alternatives to Using a Focus Visual Style</span></span>  
 <span data-ttu-id="1893d-142">針對不適合使用焦點視覺化樣式的情況 (可能是因為您只設定單一控制項的樣式，或因為您想要對控制項範本有更大的控制權)，有許多其他可存取的屬性和技術可用於建立視覺化行為來回應焦點的變更。</span><span class="sxs-lookup"><span data-stu-id="1893d-142">For situations where using a focus visual style is not appropriate, either because you are only styling single controls or because you want greater control over the control template, there are many other accessible properties and techniques that can create visual behavior in response to changes in focus.</span></span>  
  
 <span data-ttu-id="1893d-143">如需所有對觸發程序、setter 及事件 setter 的詳細討論，請參閱[設定樣式和範本](../controls/styling-and-templating.md)。</span><span class="sxs-lookup"><span data-stu-id="1893d-143">Triggers, setters, and event setters are all discussed in detail in [Styling and Templating](../controls/styling-and-templating.md).</span></span> <span data-ttu-id="1893d-144">[路由事件概觀](routed-events-overview.md)中則會討論如何處理路由事件。</span><span class="sxs-lookup"><span data-stu-id="1893d-144">Routed event handling is discussed in [Routed Events Overview](routed-events-overview.md).</span></span>  
  
### <a name="iskeyboardfocused"></a><span data-ttu-id="1893d-145">IsKeyboardFocused</span><span class="sxs-lookup"><span data-stu-id="1893d-145">IsKeyboardFocused</span></span>  
 <span data-ttu-id="1893d-146">如果您特別感興趣鍵盤焦點<xref:System.Windows.UIElement.IsKeyboardFocused%2A>相依性屬性可用於屬性<xref:System.Windows.Trigger>。</span><span class="sxs-lookup"><span data-stu-id="1893d-146">If you are specifically interested in keyboard focus, the <xref:System.Windows.UIElement.IsKeyboardFocused%2A> dependency property can be used for a property <xref:System.Windows.Trigger>.</span></span> <span data-ttu-id="1893d-147">若要定義非常專屬於單一控制項的鍵盤焦點行為，樣式或範本中的屬性觸發程序是更為合適的技術，而這可能不會以視覺化方式符合其他控制項的鍵盤焦點行為。</span><span class="sxs-lookup"><span data-stu-id="1893d-147">A property trigger in either a style or template is a more appropriate technique for defining a keyboard focus behavior that is very specifically for a single control, and which might not visually match the keyboard focus behavior for other controls.</span></span>  
  
 <span data-ttu-id="1893d-148">另一個類似的相依性屬性是<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>，則可能適合使用，如果您想要以視覺化方式呼叫該鍵盤焦點位於複合或控制項功能區內。</span><span class="sxs-lookup"><span data-stu-id="1893d-148">Another similar dependency property is <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>, which might be appropriate to use if you want to visually call out that keyboard focus is somewhere within compositing or within the functional area of the control.</span></span> <span data-ttu-id="1893d-149">例如，您可能會在其中放置<xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A>觸發程序使得群組數個控制項的面板只會出現以不同的方式，即使鍵盤焦點可能更精確地位於該面板中的個別項目。</span><span class="sxs-lookup"><span data-stu-id="1893d-149">For example, you might place an <xref:System.Windows.UIElement.IsKeyboardFocusWithin%2A> trigger such that a panel that groups several controls appears differently, even though keyboard focus might more precisely be on an individual element within that panel.</span></span>  
  
 <span data-ttu-id="1893d-150">您也可以使用事件<xref:System.Windows.UIElement.GotKeyboardFocus>和<xref:System.Windows.UIElement.LostKeyboardFocus>（以及其預覽對等項目）。</span><span class="sxs-lookup"><span data-stu-id="1893d-150">You can also use the events <xref:System.Windows.UIElement.GotKeyboardFocus> and <xref:System.Windows.UIElement.LostKeyboardFocus> (as well as their Preview equivalents).</span></span> <span data-ttu-id="1893d-151">您可以使用這些事件做為基礎<xref:System.Windows.EventSetter>，或者您可以將事件的處理常式撰寫程式碼後置中。</span><span class="sxs-lookup"><span data-stu-id="1893d-151">You can use these events as the basis for an <xref:System.Windows.EventSetter>, or you can write handlers for the events in code-behind.</span></span>  
  
### <a name="other-focus-properties"></a><span data-ttu-id="1893d-152">其他焦點屬性</span><span class="sxs-lookup"><span data-stu-id="1893d-152">Other Focus Properties</span></span>  
 <span data-ttu-id="1893d-153">如果您想要所有可能的原因變更焦點的產生視覺化行為，您應該基底 setter 或觸發程序<xref:System.Windows.UIElement.IsFocused%2A>相依性屬性，或者上<xref:System.Windows.UIElement.GotFocus>或是<xref:System.Windows.UIElement.LostFocus>用於事件<xref:System.Windows.EventSetter>。</span><span class="sxs-lookup"><span data-stu-id="1893d-153">If you want all possible causes of changing focus to produce a visual behavior, you should base a setter or trigger on the <xref:System.Windows.UIElement.IsFocused%2A> dependency property, or alternatively on the <xref:System.Windows.UIElement.GotFocus> or <xref:System.Windows.UIElement.LostFocus> events used for an <xref:System.Windows.EventSetter>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="1893d-154">另請參閱</span><span class="sxs-lookup"><span data-stu-id="1893d-154">See also</span></span>

- <xref:System.Windows.FrameworkElement.FocusVisualStyle%2A>
- [<span data-ttu-id="1893d-155">樣式設定和範本化</span><span class="sxs-lookup"><span data-stu-id="1893d-155">Styling and Templating</span></span>](../controls/styling-and-templating.md)
- [<span data-ttu-id="1893d-156">焦點概觀</span><span class="sxs-lookup"><span data-stu-id="1893d-156">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="1893d-157">輸入概觀</span><span class="sxs-lookup"><span data-stu-id="1893d-157">Input Overview</span></span>](input-overview.md)
