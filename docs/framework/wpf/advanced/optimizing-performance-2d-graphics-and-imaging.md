---
title: 最佳化效能：2D 圖形和影像處理
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- graphics [WPF], performance
- drawing [WPF], optimizing performance
- imaging [WPF], optimizing performance
- shapes [WPF], optimizing performance
- 2-D graphics [WPF]
- images [WPF], optimizing performance
ms.assetid: e335601e-28c8-4d64-ba27-778fffd55f72
ms.openlocfilehash: 4fca9231872a268470c9bcfa73e7a0c0a26d300c
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/23/2019
ms.locfileid: "61981938"
---
# <a name="optimizing-performance-2d-graphics-and-imaging"></a><span data-ttu-id="56655-102">最佳化效能：2D 圖形和影像處理</span><span class="sxs-lookup"><span data-stu-id="56655-102">Optimizing Performance: 2D Graphics and Imaging</span></span>
[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="56655-103">提供各種 2D 圖形和影像處理功能，可以針對您的應用程式需求最佳化。</span><span class="sxs-lookup"><span data-stu-id="56655-103">provides a wide range of 2D graphics and imaging functionality that can be optimized for your application requirements.</span></span> <span data-ttu-id="56655-104">本主題提供下列領域的效能最佳化相關資訊。</span><span class="sxs-lookup"><span data-stu-id="56655-104">This topic provides information about performance optimization in those areas.</span></span>  

<a name="Drawing_and_Shapes"></a>   
## <a name="drawing-and-shapes"></a><span data-ttu-id="56655-105">繪圖和圖形</span><span class="sxs-lookup"><span data-stu-id="56655-105">Drawing and Shapes</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="56655-106">提供了<xref:System.Windows.Media.Drawing>和<xref:System.Windows.Shapes.Shape>物件來代表圖形繪圖內容。</span><span class="sxs-lookup"><span data-stu-id="56655-106">provides both <xref:System.Windows.Media.Drawing> and <xref:System.Windows.Shapes.Shape> objects to represent graphical drawing content.</span></span> <span data-ttu-id="56655-107">不過，<xref:System.Windows.Media.Drawing>物件是簡單的建構比<xref:System.Windows.Shapes.Shape>物件，並提供較佳的效能特性。</span><span class="sxs-lookup"><span data-stu-id="56655-107">However, <xref:System.Windows.Media.Drawing> objects are simpler constructs than <xref:System.Windows.Shapes.Shape> objects and provide better performance characteristics.</span></span>  
  
 <span data-ttu-id="56655-108">A<xref:System.Windows.Shapes.Shape>可讓您將圖形描繪至螢幕。</span><span class="sxs-lookup"><span data-stu-id="56655-108">A <xref:System.Windows.Shapes.Shape> allows you to draw a graphical shape to the screen.</span></span> <span data-ttu-id="56655-109">因為它們衍生自<xref:System.Windows.FrameworkElement>類別，<xref:System.Windows.Shapes.Shape>物件都可以使用在面板和大部分的控制項。</span><span class="sxs-lookup"><span data-stu-id="56655-109">Because they are derived from the <xref:System.Windows.FrameworkElement> class, <xref:System.Windows.Shapes.Shape> objects can be used inside panels and most controls.</span></span>  
  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="56655-110">提供了數層的圖形和轉譯服務存取權。</span><span class="sxs-lookup"><span data-stu-id="56655-110">offers several layers of access to graphics and rendering services.</span></span> <span data-ttu-id="56655-111">在最上層的<xref:System.Windows.Shapes.Shape>物件很容易使用，並提供許多實用的功能，例如版面配置和事件處理。</span><span class="sxs-lookup"><span data-stu-id="56655-111">At the top layer, <xref:System.Windows.Shapes.Shape> objects are easy to use and provide many useful features, such as layout and event handling.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="56655-112">則提供數個立即可用的 Shape 物件。</span><span class="sxs-lookup"><span data-stu-id="56655-112">provides a number of ready-to-use shape objects.</span></span> <span data-ttu-id="56655-113">所有的 shape 物件繼承自<xref:System.Windows.Shapes.Shape>類別。</span><span class="sxs-lookup"><span data-stu-id="56655-113">All shape objects inherit from the <xref:System.Windows.Shapes.Shape> class.</span></span> <span data-ttu-id="56655-114">可用的 shape 物件包含<xref:System.Windows.Shapes.Ellipse>， <xref:System.Windows.Shapes.Line>， <xref:System.Windows.Shapes.Path>， <xref:System.Windows.Shapes.Polygon>， <xref:System.Windows.Shapes.Polyline>，和<xref:System.Windows.Shapes.Rectangle>。</span><span class="sxs-lookup"><span data-stu-id="56655-114">Available shape objects include <xref:System.Windows.Shapes.Ellipse>, <xref:System.Windows.Shapes.Line>, <xref:System.Windows.Shapes.Path>, <xref:System.Windows.Shapes.Polygon>, <xref:System.Windows.Shapes.Polyline>, and <xref:System.Windows.Shapes.Rectangle>.</span></span>  
  
 <span data-ttu-id="56655-115"><xref:System.Windows.Media.Drawing> 物件，相反地，非衍生自<xref:System.Windows.FrameworkElement>類別，並提供輕量型實作呈現圖形、 影像和文字。</span><span class="sxs-lookup"><span data-stu-id="56655-115"><xref:System.Windows.Media.Drawing> objects, on the other hand, do not derive from the <xref:System.Windows.FrameworkElement> class and provide a lighter-weight implementation for rendering shapes, images, and text.</span></span>  
  
 <span data-ttu-id="56655-116">有四種類型的<xref:System.Windows.Media.Drawing>物件：</span><span class="sxs-lookup"><span data-stu-id="56655-116">There are four types of <xref:System.Windows.Media.Drawing> objects:</span></span>  
  
- <span data-ttu-id="56655-117"><xref:System.Windows.Media.GeometryDrawing> 繪製圖形。</span><span class="sxs-lookup"><span data-stu-id="56655-117"><xref:System.Windows.Media.GeometryDrawing> Draws a shape.</span></span>  
  
- <span data-ttu-id="56655-118"><xref:System.Windows.Media.ImageDrawing> 繪製影像。</span><span class="sxs-lookup"><span data-stu-id="56655-118"><xref:System.Windows.Media.ImageDrawing> Draws an image.</span></span>  
  
- <span data-ttu-id="56655-119"><xref:System.Windows.Media.GlyphRunDrawing> 繪製文字。</span><span class="sxs-lookup"><span data-stu-id="56655-119"><xref:System.Windows.Media.GlyphRunDrawing> Draws text.</span></span>  
  
- <span data-ttu-id="56655-120"><xref:System.Windows.Media.DrawingGroup> 繪製其他繪圖。</span><span class="sxs-lookup"><span data-stu-id="56655-120"><xref:System.Windows.Media.DrawingGroup> Draws other drawings.</span></span> <span data-ttu-id="56655-121">您可以使用繪圖群組，來將其他繪圖結合為單一複合繪圖。</span><span class="sxs-lookup"><span data-stu-id="56655-121">Use a drawing group to combine other drawings into a single composite drawing.</span></span>  
  
 <span data-ttu-id="56655-122"><xref:System.Windows.Media.GeometryDrawing>物件用來呈現幾何內容。</span><span class="sxs-lookup"><span data-stu-id="56655-122">The <xref:System.Windows.Media.GeometryDrawing> object is used to render geometry content.</span></span> <span data-ttu-id="56655-123"><xref:System.Windows.Media.Geometry>類別和衍生，這類的具象類別<xref:System.Windows.Media.CombinedGeometry>， <xref:System.Windows.Media.EllipseGeometry>，和<xref:System.Windows.Media.PathGeometry>、 提供方法來轉譯 2D 圖形，以及提供點擊測試和裁剪的支援。</span><span class="sxs-lookup"><span data-stu-id="56655-123">The <xref:System.Windows.Media.Geometry> class and the concrete classes which derive from it, such as <xref:System.Windows.Media.CombinedGeometry>, <xref:System.Windows.Media.EllipseGeometry>, and <xref:System.Windows.Media.PathGeometry>, provide a means for rendering 2D graphics, as well as providing hit-testing and clipping support.</span></span> <span data-ttu-id="56655-124">舉例來說，Geometry 物件可用來定義控制項的區域，或定義要套用至影像的裁剪區域。</span><span class="sxs-lookup"><span data-stu-id="56655-124">Geometry objects can be used to define the region of a control, for example, or to define the clip region to apply to an image.</span></span> <span data-ttu-id="56655-125">Geometry 物件可以是矩形和圓形之類的簡單區域，或從兩個或多個 Geometry 物件建立的複合區域。</span><span class="sxs-lookup"><span data-stu-id="56655-125">Geometry objects can be simple regions, such as rectangles and circles, or composite regions created from two or more geometry objects.</span></span> <span data-ttu-id="56655-126">更複雜的幾何區域可能由合併<xref:System.Windows.Media.PathSegment>-衍生的物件，例如<xref:System.Windows.Media.ArcSegment>， <xref:System.Windows.Media.BezierSegment>，和<xref:System.Windows.Media.QuadraticBezierSegment>。</span><span class="sxs-lookup"><span data-stu-id="56655-126">More complex geometric regions can be created by combining <xref:System.Windows.Media.PathSegment>-derived objects, such as <xref:System.Windows.Media.ArcSegment>, <xref:System.Windows.Media.BezierSegment>, and <xref:System.Windows.Media.QuadraticBezierSegment>.</span></span>  
  
 <span data-ttu-id="56655-127">在介面中，<xref:System.Windows.Media.Geometry>類別和<xref:System.Windows.Shapes.Shape>類別是相當類似。</span><span class="sxs-lookup"><span data-stu-id="56655-127">On the surface, the <xref:System.Windows.Media.Geometry> class and the <xref:System.Windows.Shapes.Shape> class are quite similar.</span></span> <span data-ttu-id="56655-128">呈現 2D 圖形中同時使用，兩者都有類似的具象類別，例如衍生自這些<xref:System.Windows.Media.EllipseGeometry>和<xref:System.Windows.Shapes.Ellipse>。</span><span class="sxs-lookup"><span data-stu-id="56655-128">Both are used in the rendering of 2D graphics and both have similar concrete classes which derive from them, for example, <xref:System.Windows.Media.EllipseGeometry> and <xref:System.Windows.Shapes.Ellipse>.</span></span> <span data-ttu-id="56655-129">不過，這兩組類別之間有非常重要的差異。</span><span class="sxs-lookup"><span data-stu-id="56655-129">However, there are important differences between these two sets of classes.</span></span> <span data-ttu-id="56655-130">第一，<xref:System.Windows.Media.Geometry>類別缺少的功能的一些<xref:System.Windows.Shapes.Shape>類別，例如能夠繪製本身。</span><span class="sxs-lookup"><span data-stu-id="56655-130">For one, the <xref:System.Windows.Media.Geometry> class lacks some of the functionality of the <xref:System.Windows.Shapes.Shape> class, such as the ability to draw itself.</span></span> <span data-ttu-id="56655-131">若要繪製 Geometry 物件，必須使用 DrawingContext、Drawing 或 Path (注意，Path 也是一種 Shape) 等其他類別來執行繪製作業。</span><span class="sxs-lookup"><span data-stu-id="56655-131">To draw a geometry object, another class such as DrawingContext, Drawing, or a Path (it is worth noting that a Path is a Shape) must be used to perform the drawing operation.</span></span> <span data-ttu-id="56655-132">填滿、筆觸以及筆觸粗細等呈現屬性位於可繪製 Geometry 物件的類別中，而 Shape 物件則包含這些屬性。</span><span class="sxs-lookup"><span data-stu-id="56655-132">Rendering properties such as fill, stroke, and the stroke thickness are on the class which draws the geometry object, while a shape object contains these properties.</span></span> <span data-ttu-id="56655-133">針對這項差異的其中一個理解方式是：Geometry 物件可定義區域 (例如圓形)；而 Shape 物件則可定義區域、該區域的填滿方式和外框方式，並參與版面配置系統。</span><span class="sxs-lookup"><span data-stu-id="56655-133">One way to think of this difference is that a geometry object defines a region, a circle for example, while a shape object defines a region, defines how that region is filled and outlined, and participates in the layout system.</span></span>  
  
 <span data-ttu-id="56655-134">由於<xref:System.Windows.Shapes.Shape>物件衍生自<xref:System.Windows.FrameworkElement>使用它們的類別可以在您的應用程式中新增更多的記憶體耗用量。</span><span class="sxs-lookup"><span data-stu-id="56655-134">Since <xref:System.Windows.Shapes.Shape> objects derive from the <xref:System.Windows.FrameworkElement> class, using them can add significantly more memory consumption in your application.</span></span> <span data-ttu-id="56655-135">如果您真的不需要<xref:System.Windows.FrameworkElement>功能的圖形化的內容，請考慮使用輕量<xref:System.Windows.Media.Drawing>物件。</span><span class="sxs-lookup"><span data-stu-id="56655-135">If you really do not need the <xref:System.Windows.FrameworkElement> features for your graphical content, consider using the lighter-weight <xref:System.Windows.Media.Drawing> objects.</span></span>  
  
 <span data-ttu-id="56655-136">如需詳細資訊<xref:System.Windows.Media.Drawing>物件，請參閱[繪圖物件概觀](../graphics-multimedia/drawing-objects-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="56655-136">For more information on <xref:System.Windows.Media.Drawing> objects, see [Drawing Objects Overview](../graphics-multimedia/drawing-objects-overview.md).</span></span>  
  
<a name="StreamGeometry_Objects"></a>   
## <a name="streamgeometry-objects"></a><span data-ttu-id="56655-137">StreamGeometry 物件</span><span class="sxs-lookup"><span data-stu-id="56655-137">StreamGeometry Objects</span></span>  
 <span data-ttu-id="56655-138"><xref:System.Windows.Media.StreamGeometry>物件是輕量級替代方案<xref:System.Windows.Media.PathGeometry>來建立幾何圖形。</span><span class="sxs-lookup"><span data-stu-id="56655-138">The <xref:System.Windows.Media.StreamGeometry> object is a light-weight alternative to <xref:System.Windows.Media.PathGeometry> for creating geometric shapes.</span></span> <span data-ttu-id="56655-139">使用<xref:System.Windows.Media.StreamGeometry>當您需要描繪複雜幾何。</span><span class="sxs-lookup"><span data-stu-id="56655-139">Use a <xref:System.Windows.Media.StreamGeometry> when you need to describe a complex geometry.</span></span> <span data-ttu-id="56655-140"><xref:System.Windows.Media.StreamGeometry> 最適合處理許多<xref:System.Windows.Media.PathGeometry>物件，並執行得更好，相較於使用許多個別<xref:System.Windows.Media.PathGeometry>物件。</span><span class="sxs-lookup"><span data-stu-id="56655-140"><xref:System.Windows.Media.StreamGeometry> is optimized for handling many <xref:System.Windows.Media.PathGeometry> objects and performs better when compared to using many individual <xref:System.Windows.Media.PathGeometry> objects.</span></span>  
  
 <span data-ttu-id="56655-141">下列範例會使用屬性語法以建立三角形<xref:System.Windows.Media.StreamGeometry>在[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="56655-141">The following example uses attribute syntax to create a triangular <xref:System.Windows.Media.StreamGeometry> in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>  
  
 [!code-xaml[GeometriesMiscSnippets_snip#StreamGeometryTriangleExampleWholePage](~/samples/snippets/xaml/VS_Snippets_Wpf/GeometriesMiscSnippets_snip/XAML/StreamGeometryExample.xaml#streamgeometrytriangleexamplewholepage)]  
  
 <span data-ttu-id="56655-142">如需詳細資訊<xref:System.Windows.Media.StreamGeometry>物件，請參閱[圖形使用 StreamGeometry 建立](../graphics-multimedia/how-to-create-a-shape-using-a-streamgeometry.md)。</span><span class="sxs-lookup"><span data-stu-id="56655-142">For more information on <xref:System.Windows.Media.StreamGeometry> objects, see [Create a Shape Using a StreamGeometry](../graphics-multimedia/how-to-create-a-shape-using-a-streamgeometry.md).</span></span>  
  
<a name="DrawingVisual_Objects"></a>   
## <a name="drawingvisual-objects"></a><span data-ttu-id="56655-143">DrawingVisual 物件</span><span class="sxs-lookup"><span data-stu-id="56655-143">DrawingVisual Objects</span></span>  
 <span data-ttu-id="56655-144"><xref:System.Windows.Media.DrawingVisual>物件是輕量型繪圖類別，用來呈現圖形、 影像或文字。</span><span class="sxs-lookup"><span data-stu-id="56655-144">The <xref:System.Windows.Media.DrawingVisual> object is a lightweight drawing class that is used to render shapes, images, or text.</span></span> <span data-ttu-id="56655-145">此類別之所以被視為輕量型，是因為它不提供版面配置或事件處理，這使它有更好的效能。</span><span class="sxs-lookup"><span data-stu-id="56655-145">This class is considered lightweight because it does not provide layout or event handling, which improves its performance.</span></span> <span data-ttu-id="56655-146">基於此原因，它適合用於背景或美工圖案繪圖。</span><span class="sxs-lookup"><span data-stu-id="56655-146">For this reason, drawings are ideal for backgrounds and clip art.</span></span> <span data-ttu-id="56655-147">如需詳細資訊，請參閱[使用 DrawingVisual 物件](../graphics-multimedia/using-drawingvisual-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="56655-147">For more information, see [Using DrawingVisual Objects](../graphics-multimedia/using-drawingvisual-objects.md).</span></span>  
  
<a name="Images"></a>   
## <a name="images"></a><span data-ttu-id="56655-148">影像</span><span class="sxs-lookup"><span data-stu-id="56655-148">Images</span></span>  
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="56655-149">影像處理功能比舊版 [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)] 影像處理功能有更大幅的改良。</span><span class="sxs-lookup"><span data-stu-id="56655-149">imaging provides a significant improvement over the imaging capabilities in previous versions of [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)].</span></span> <span data-ttu-id="56655-150">以往，影像處理功能 (例如顯示點陣圖或使用通用控制項上的影像) 主要是由 Microsoft Windows 圖形裝置介面 (GDI) 或 Microsoft Windows GDI+ 應用程式開發介面 (API) 進行處理。</span><span class="sxs-lookup"><span data-stu-id="56655-150">Imaging capabilities, such as displaying a bitmap or using an image on a common control were primarily handled by the Microsoft Windows Graphics Device Interface (GDI) or Microsoft Windows GDI+ application programming interface (API).</span></span> <span data-ttu-id="56655-151">這些 API 提供基本影像處理功能，但無法支援轉碼器擴充性和高畫質影像等功能。</span><span class="sxs-lookup"><span data-stu-id="56655-151">These API provided baseline imaging functionality, but lacked features such as support for codec extensibility and high fidelity image support.</span></span> <span data-ttu-id="56655-152">WPF 影像處理 API 的設計目的是克服 GDI 和 GDI+ 的缺點，並提供一組新的 API 以在應用程式內顯示及使用影像。</span><span class="sxs-lookup"><span data-stu-id="56655-152">WPF Imaging API have been redesigned to overcome the shortcomings of GDI and GDI+ and provide a new set of API to display and use images within your applications.</span></span>  
  
 <span data-ttu-id="56655-153">使用影像時，請考慮下列建議事項以取得較佳的效能：</span><span class="sxs-lookup"><span data-stu-id="56655-153">When using images, consider the following recommendations for gaining better performance:</span></span>  
  
- <span data-ttu-id="56655-154">如果您的應用程式需要顯示縮圖影像，請考慮建立影像的縮小版本。</span><span class="sxs-lookup"><span data-stu-id="56655-154">If your application requires you to display thumbnail images, consider creating a reduced-sized version of the image.</span></span> <span data-ttu-id="56655-155">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 預設會載入您的影像，並將其解碼到完整大小。</span><span class="sxs-lookup"><span data-stu-id="56655-155">By default, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] loads your image and decodes it to its full size.</span></span> <span data-ttu-id="56655-156">如果您只需要影像的縮圖版本，[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 仍會多此一舉地將影像解碼到完整大小，然後再縮至縮圖大小。</span><span class="sxs-lookup"><span data-stu-id="56655-156">If you only want a thumbnail version of the image, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] unnecessary decodes the image to its full-size and then scales it down to a thumbnail size.</span></span> <span data-ttu-id="56655-157">為了避免不必要的額外負荷，您可以要求 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 解碼影像至縮圖大小，或要求 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 載入縮圖大小的影像。</span><span class="sxs-lookup"><span data-stu-id="56655-157">To avoid this unnecessary overhead, you can either request [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to decode the image to a thumbnail size, or request [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to load a thumbnail size image.</span></span>  
  
- <span data-ttu-id="56655-158">一律將影像解碼至所需大小，而非預設大小。</span><span class="sxs-lookup"><span data-stu-id="56655-158">Always decode the image to desired size and not to the default size.</span></span> <span data-ttu-id="56655-159">如上所述，您可以要求 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 將影像解碼至所需大小，而不是預設的完整大小。</span><span class="sxs-lookup"><span data-stu-id="56655-159">As mentioned above, request [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] to decode your image to a desired size and not the default full size.</span></span> <span data-ttu-id="56655-160">這麼做不只能減少應用程式的工作集，還會降低執行速度。</span><span class="sxs-lookup"><span data-stu-id="56655-160">You will reduce not only your application's working set, but execution speed as well.</span></span>  
  
- <span data-ttu-id="56655-161">因此，可能的話，請將影像合併單一影像，例如多張影像組成的底片。</span><span class="sxs-lookup"><span data-stu-id="56655-161">If possible, combine the images into a single image, such as a film strip composed of multiple images.</span></span>  
  
- <span data-ttu-id="56655-162">如需詳細資訊，請參閱 [影像處理概觀](../graphics-multimedia/imaging-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="56655-162">For more information, see [Imaging Overview](../graphics-multimedia/imaging-overview.md).</span></span>  
  
### <a name="bitmapscalingmode"></a><span data-ttu-id="56655-163">BitmapScalingMode</span><span class="sxs-lookup"><span data-stu-id="56655-163">BitmapScalingMode</span></span>  
 <span data-ttu-id="56655-164">建立任何點陣圖的比例動畫時，預設的高品質影像重新取樣演算法有時會耗用過多系統資源，導致畫面播放速率降低，從而造成動畫中斷。</span><span class="sxs-lookup"><span data-stu-id="56655-164">When animating the scale of any bitmap, the default high-quality image re-sampling algorithm can sometimes consume sufficient system resources to cause frame rate degradation, effectively causing animations to stutter.</span></span> <span data-ttu-id="56655-165">藉由設定<xref:System.Windows.Media.RenderOptions.BitmapScalingMode%2A>的屬性<xref:System.Windows.Media.RenderOptions>物件到<xref:System.Windows.Media.BitmapScalingMode.LowQuality>縮放點陣圖時，您可以建立更順暢的動畫。</span><span class="sxs-lookup"><span data-stu-id="56655-165">By setting the <xref:System.Windows.Media.RenderOptions.BitmapScalingMode%2A> property of the <xref:System.Windows.Media.RenderOptions> object to <xref:System.Windows.Media.BitmapScalingMode.LowQuality> you can create a smoother animation when scaling a bitmap.</span></span> <span data-ttu-id="56655-166"><xref:System.Windows.Media.BitmapScalingMode.LowQuality> 模式會告知[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]處理映像時，從品質最佳化的演算法切換為速度最佳化演算法的轉譯引擎。</span><span class="sxs-lookup"><span data-stu-id="56655-166"><xref:System.Windows.Media.BitmapScalingMode.LowQuality> mode tells the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] rendering engine to switch from a quality-optimized algorithm to a speed-optimized algorithm when processing images.</span></span>  
  
 <span data-ttu-id="56655-167">下列範例示範如何設定<xref:System.Windows.Media.BitmapScalingMode>映像物件。</span><span class="sxs-lookup"><span data-stu-id="56655-167">The following example shows how to set the <xref:System.Windows.Media.BitmapScalingMode> for an image object.</span></span>  
  
 [!code-csharp[RenderOptions#RenderOptionsSnippet2](~/samples/snippets/csharp/VS_Snippets_Wpf/RenderOptions/CSharp/Window1.xaml.cs#renderoptionssnippet2)]
 [!code-vb[RenderOptions#RenderOptionsSnippet2](~/samples/snippets/visualbasic/VS_Snippets_Wpf/RenderOptions/visualbasic/window1.xaml.vb#renderoptionssnippet2)]  
  
### <a name="cachinghint"></a><span data-ttu-id="56655-168">CachingHint</span><span class="sxs-lookup"><span data-stu-id="56655-168">CachingHint</span></span>  
 <span data-ttu-id="56655-169">根據預設，[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]不會快取的呈現的內容<xref:System.Windows.Media.TileBrush>物件，例如<xref:System.Windows.Media.DrawingBrush>和<xref:System.Windows.Media.VisualBrush>。</span><span class="sxs-lookup"><span data-stu-id="56655-169">By default, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] does not cache the rendered contents of <xref:System.Windows.Media.TileBrush> objects, such as <xref:System.Windows.Media.DrawingBrush> and <xref:System.Windows.Media.VisualBrush>.</span></span> <span data-ttu-id="56655-170">在靜態案例其中的內容和使用<xref:System.Windows.Media.TileBrush>在場景會變更，這很合理，因為它可以節省視訊記憶體。</span><span class="sxs-lookup"><span data-stu-id="56655-170">In static scenarios where neither the contents nor use of the <xref:System.Windows.Media.TileBrush> in the scene is changing, this makes sense, since it conserves video memory.</span></span> <span data-ttu-id="56655-171">不會因為許多感測時<xref:System.Windows.Media.TileBrush>具有靜態內容使用中的非靜態方法 — 例如，當靜態<xref:System.Windows.Media.DrawingBrush>或<xref:System.Windows.Media.VisualBrush>旋轉 3D 物件的介面對應。</span><span class="sxs-lookup"><span data-stu-id="56655-171">It does not make as much sense when a <xref:System.Windows.Media.TileBrush> with static content is used in a non-static way—for example, when a static <xref:System.Windows.Media.DrawingBrush> or <xref:System.Windows.Media.VisualBrush> is mapped to the surface of a rotating 3D object.</span></span> <span data-ttu-id="56655-172">預設行為[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]是重新呈現內容的整個<xref:System.Windows.Media.DrawingBrush>或<xref:System.Windows.Media.VisualBrush>每個框架，即使內容不變亦同。</span><span class="sxs-lookup"><span data-stu-id="56655-172">The default behavior of [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is to re-render the entire content of the <xref:System.Windows.Media.DrawingBrush> or <xref:System.Windows.Media.VisualBrush> for every frame, even though the content is unchanging.</span></span>  
  
 <span data-ttu-id="56655-173">藉由設定<xref:System.Windows.Media.RenderOptions.CachingHint%2A>的屬性<xref:System.Windows.Media.RenderOptions>物件到<xref:System.Windows.Media.CachingHint.Cache>您可以使用並排筆刷物件的快取的版本，以提升效能。</span><span class="sxs-lookup"><span data-stu-id="56655-173">By setting the <xref:System.Windows.Media.RenderOptions.CachingHint%2A> property of the <xref:System.Windows.Media.RenderOptions> object to <xref:System.Windows.Media.CachingHint.Cache> you can increase performance by using cached versions of the tiled brush objects.</span></span>  
  
 <span data-ttu-id="56655-174"><xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A>並<xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>屬性的值是相對大小值，判斷何時<xref:System.Windows.Media.TileBrush>應該重新產生物件，因為變更小數位數。</span><span class="sxs-lookup"><span data-stu-id="56655-174">The <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> and <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A> property values are relative size values that determine when the <xref:System.Windows.Media.TileBrush> object should be regenerated due to changes in scale.</span></span> <span data-ttu-id="56655-175">例如，藉由設定<xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>屬性為 2.0 時，快取<xref:System.Windows.Media.TileBrush>只需要重新產生它的大小超過兩次目前的快取的大小。</span><span class="sxs-lookup"><span data-stu-id="56655-175">For example, by setting the <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A> property to 2.0, the cache for the <xref:System.Windows.Media.TileBrush> only needs to be regenerated when its size exceeds twice the size of the current cache.</span></span>  
  
 <span data-ttu-id="56655-176">下列範例示範如何使用的快取提示選項<xref:System.Windows.Media.DrawingBrush>。</span><span class="sxs-lookup"><span data-stu-id="56655-176">The following example shows how to use the caching hint option for a <xref:System.Windows.Media.DrawingBrush>.</span></span>  
  
 [!code-csharp[RenderOptions#RenderOptionsSnippet3](~/samples/snippets/csharp/VS_Snippets_Wpf/RenderOptions/CSharp/Window1.xaml.cs#renderoptionssnippet3)]
 [!code-vb[RenderOptions#RenderOptionsSnippet3](~/samples/snippets/visualbasic/VS_Snippets_Wpf/RenderOptions/visualbasic/window1.xaml.vb#renderoptionssnippet3)]  
  
## <a name="see-also"></a><span data-ttu-id="56655-177">另請參閱</span><span class="sxs-lookup"><span data-stu-id="56655-177">See also</span></span>

- [<span data-ttu-id="56655-178">最佳化 WPF 應用程式效能</span><span class="sxs-lookup"><span data-stu-id="56655-178">Optimizing WPF Application Performance</span></span>](optimizing-wpf-application-performance.md)
- [<span data-ttu-id="56655-179">應用程式效能規劃</span><span class="sxs-lookup"><span data-stu-id="56655-179">Planning for Application Performance</span></span>](planning-for-application-performance.md)
- [<span data-ttu-id="56655-180">運用硬體</span><span class="sxs-lookup"><span data-stu-id="56655-180">Taking Advantage of Hardware</span></span>](optimizing-performance-taking-advantage-of-hardware.md)
- [<span data-ttu-id="56655-181">版面配置與設計</span><span class="sxs-lookup"><span data-stu-id="56655-181">Layout and Design</span></span>](optimizing-performance-layout-and-design.md)
- [<span data-ttu-id="56655-182">物件行為</span><span class="sxs-lookup"><span data-stu-id="56655-182">Object Behavior</span></span>](optimizing-performance-object-behavior.md)
- [<span data-ttu-id="56655-183">應用程式資源</span><span class="sxs-lookup"><span data-stu-id="56655-183">Application Resources</span></span>](optimizing-performance-application-resources.md)
- [<span data-ttu-id="56655-184">Text</span><span class="sxs-lookup"><span data-stu-id="56655-184">Text</span></span>](optimizing-performance-text.md)
- [<span data-ttu-id="56655-185">資料繫結</span><span class="sxs-lookup"><span data-stu-id="56655-185">Data Binding</span></span>](optimizing-performance-data-binding.md)
- [<span data-ttu-id="56655-186">其他效能建議</span><span class="sxs-lookup"><span data-stu-id="56655-186">Other Performance Recommendations</span></span>](optimizing-performance-other-recommendations.md)
- [<span data-ttu-id="56655-187">動畫祕訣和訣竅</span><span class="sxs-lookup"><span data-stu-id="56655-187">Animation Tips and Tricks</span></span>](../graphics-multimedia/animation-tips-and-tricks.md)
