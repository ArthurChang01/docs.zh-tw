---
title: "預覽事件"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- Preview events [WPF]
- suppressing events [WPF]
- events [WPF], Preview
- events [WPF], suppressing
ms.assetid: b5032308-aa9c-4d02-af11-630ecec8df7e
caps.latest.revision: "7"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: a258a0e145e9a24e6e87bb511fdbd6166422a656
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/22/2017
---
# <a name="preview-events"></a><span data-ttu-id="ad977-102">預覽事件</span><span class="sxs-lookup"><span data-stu-id="ad977-102">Preview Events</span></span>
<span data-ttu-id="ad977-103">預覽事件，也就是通道事件，是路由的事件，其中的路由方向是從應用程式根目錄，向引發事件，且會回報為事件資料來源的項目。</span><span class="sxs-lookup"><span data-stu-id="ad977-103">Preview events, also known as tunneling events, are routed events where the direction of the route travels from the application root towards the element that raised the event and is reported as the source in event data.</span></span> <span data-ttu-id="ad977-104">並非所有事件案例支援或需要預覽事件。本主題描述的情況下，其中預覽事件存在，應用程式或元件應如何處理它們和情況下，建立自訂元件或類別中預覽事件可能會適當。</span><span class="sxs-lookup"><span data-stu-id="ad977-104">Not all event scenarios support or require preview events; this topic describes the situations where preview events exist, how applications or components should handle them, and cases where creating preview events in custom components or classes might be appropriate.</span></span>  
  
## <a name="preview-events-and-input"></a><span data-ttu-id="ad977-105">預覽事件和輸入</span><span class="sxs-lookup"><span data-stu-id="ad977-105">Preview Events and Input</span></span>  
 <span data-ttu-id="ad977-106">當您處理的事件一般情況下，謹慎的預覽將事件標示事件中處理資料。</span><span class="sxs-lookup"><span data-stu-id="ad977-106">When you handle Preview events in general, be cautious about marking the events handled in the event data.</span></span> <span data-ttu-id="ad977-107">處理預覽事件的任何項目以外引發它 （報告為事件資料來源項目） 的項目有不提供項目有機會處理它所引發之事件的效果。</span><span class="sxs-lookup"><span data-stu-id="ad977-107">Handling a Preview event on any element other than the element that raised it (the element that is reported as the source in the event data) has the effect of not providing an element the opportunity to handle the event that it originated.</span></span> <span data-ttu-id="ad977-108">有時候這是預期的結果，尤其是有問題的項目存在於撰寫控制項中的關聯性。</span><span class="sxs-lookup"><span data-stu-id="ad977-108">Sometimes this is the desired result, particularly if the elements in question exist in relationships within the compositing of a control.</span></span>  
  
 <span data-ttu-id="ad977-109">輸入事件具體而言，預覽事件事件資料執行個體與共用對應反昇事件。</span><span class="sxs-lookup"><span data-stu-id="ad977-109">For input events specifically, Preview events also share event data instances with the equivalent bubbling event.</span></span> <span data-ttu-id="ad977-110">如果您使用預覽事件的類別處理常式來處理輸入的事件標記，反昇輸入的事件的類別處理常式不會叫用。</span><span class="sxs-lookup"><span data-stu-id="ad977-110">If you use a Preview event class handler to mark the input event handled, the bubbling input event class handler will not be invoked.</span></span> <span data-ttu-id="ad977-111">或者，如果您使用預覽事件的執行個體處理常式處理事件標記，反昇事件的處理常式不通常會叫用。</span><span class="sxs-lookup"><span data-stu-id="ad977-111">Or, if you use a Preview event instance handler to mark the event handled, handlers for the bubbling event will not typically be invoked.</span></span> <span data-ttu-id="ad977-112">可以註冊類別處理常式或執行個體處理常式，或連接到要叫用即使事件標示為已處理，但該技術不常使用的選項。</span><span class="sxs-lookup"><span data-stu-id="ad977-112">Class handlers or instance handlers can be registered or attached with an option to be invoked even if the event is marked handled, but that technique is not commonly used.</span></span>  
  
 <span data-ttu-id="ad977-113">如需類別處理，以及它與預覽事件詳細資訊，請參閱[標示路由傳送事件中當做 Handled，和類別處理](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md)。</span><span class="sxs-lookup"><span data-stu-id="ad977-113">For more information about class handling and how it relates to Preview events see [Marking Routed Events as Handled, and Class Handling](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md).</span></span>  
  
### <a name="working-around-event-suppression-by-controls"></a><span data-ttu-id="ad977-114">處理控制項的事件隱藏項目</span><span class="sxs-lookup"><span data-stu-id="ad977-114">Working Around Event Suppression by Controls</span></span>  
 <span data-ttu-id="ad977-115">通常用預覽事件的一個案例是複合控制項的輸入事件的處理。</span><span class="sxs-lookup"><span data-stu-id="ad977-115">One scenario where Preview events are commonly used is for composited control handling of input events.</span></span> <span data-ttu-id="ad977-116">有時候，控制項的作者隱藏特定事件來自從其控制項，或許是為了替換元件定義的事件，以提供更多的資訊或更具體的行為。</span><span class="sxs-lookup"><span data-stu-id="ad977-116">Sometimes, the author of the control suppresses a certain event from originating from their control, perhaps in order to substitute a component-defined event that carries more information or implies a more specific behavior.</span></span> <span data-ttu-id="ad977-117">比方說， [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button>隱藏<xref:System.Windows.UIElement.MouseLeftButtonDown>和<xref:System.Windows.UIElement.MouseLeftButtonDown>所引發的事件反昇<xref:System.Windows.Controls.Button>或複合項目以利於捕捉滑鼠和引發<xref:System.Windows.Controls.Primitives.ButtonBase.Click>一定所引發的事件<xref:System.Windows.Controls.Button>本身。</span><span class="sxs-lookup"><span data-stu-id="ad977-117">For instance, a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <xref:System.Windows.Controls.Button> suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown> and <xref:System.Windows.UIElement.MouseLeftButtonDown> bubbling events raised by the <xref:System.Windows.Controls.Button> or its composite elements in favor of capturing the mouse and raising a <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event that is always raised by the <xref:System.Windows.Controls.Button> itself.</span></span> <span data-ttu-id="ad977-118">事件及其資料仍繼續此路由上，但因為<xref:System.Windows.Controls.Button>標記事件資料做為<xref:System.Windows.RoutedEventArgs.Handled%2A>，特別指出應扮演之事件的處理常式`handledEventsToo`案例會叫用。</span><span class="sxs-lookup"><span data-stu-id="ad977-118">The event and its data still continue along the route, but because the <xref:System.Windows.Controls.Button> marks the event data as <xref:System.Windows.RoutedEventArgs.Handled%2A>, only handlers for the event that specifically indicated they should act in the `handledEventsToo` case  are invoked.</span></span>  <span data-ttu-id="ad977-119">如果朝向您的應用程式根目錄的其他項目仍然希望有機會處理控制隱藏的事件，一種替代方法是附加的程式碼中的處理常式`handledEventsToo`指定為`true`。</span><span class="sxs-lookup"><span data-stu-id="ad977-119">If other elements towards the root of your application still wanted an opportunity to handle a control-suppressed event, one alternative is to attach handlers in code with `handledEventsToo` specified as `true`.</span></span> <span data-ttu-id="ad977-120">但通常較簡單的技術是要變更您要預覽相當於輸入事件的控制代碼的路由方向。</span><span class="sxs-lookup"><span data-stu-id="ad977-120">But often a simpler technique is to change the routing direction you handle to be the Preview equivalent of an input event.</span></span> <span data-ttu-id="ad977-121">比方說，如果會隱藏控制項<xref:System.Windows.UIElement.MouseLeftButtonDown>，嘗試附加的處理常式<xref:System.Windows.UIElement.PreviewMouseLeftButtonDown>改為。</span><span class="sxs-lookup"><span data-stu-id="ad977-121">For instance, if a control suppresses <xref:System.Windows.UIElement.MouseLeftButtonDown>, try attaching a handler for <xref:System.Windows.UIElement.PreviewMouseLeftButtonDown> instead.</span></span> <span data-ttu-id="ad977-122">這項技術僅適用於基底項目輸入事件這類<xref:System.Windows.UIElement.MouseLeftButtonDown>。</span><span class="sxs-lookup"><span data-stu-id="ad977-122">This technique only works for base element input events such as <xref:System.Windows.UIElement.MouseLeftButtonDown>.</span></span> <span data-ttu-id="ad977-123">這些輸入的事件使用通道/泡泡組、 引發兩個事件，且共用的事件資料。</span><span class="sxs-lookup"><span data-stu-id="ad977-123">These input events use tunnel/bubble pairs, raise both events, and share the event data.</span></span>  
  
 <span data-ttu-id="ad977-124">每個這些技術有副作用或限制。</span><span class="sxs-lookup"><span data-stu-id="ad977-124">Each of these techniques has either side effects or limitations.</span></span> <span data-ttu-id="ad977-125">處理預覽事件的副作用是此時處理的事件可能會停用處理反昇事件中，預期的處理常式，因此限制是，它通常不建議您將事件處理仍在 Previ 時標記路由的新增部分。</span><span class="sxs-lookup"><span data-stu-id="ad977-125">The side effect of handling the Preview event is that handling the event at that point might disable handlers that expect to handle the bubbling event, and therefore the limitation is that it is usually not a good idea to mark the event handled while it is still on the Preview part of the route.</span></span> <span data-ttu-id="ad977-126">限制`handledEventsToo`技巧是，您不能指定`handledEventsToo`中的處理常式[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]做為屬性，您必須註冊事件處理常式程式碼中取得要附加的處理常式的所在的物件參考的項目之後。</span><span class="sxs-lookup"><span data-stu-id="ad977-126">The limitation of the `handledEventsToo` technique is that you cannot specify a `handledEventsToo` handler in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] as an attribute, you must register the event handler in code after obtaining an object reference to the element where the handler is to be attached.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ad977-127">請參閱</span><span class="sxs-lookup"><span data-stu-id="ad977-127">See Also</span></span>  
 [<span data-ttu-id="ad977-128">將路由事件標記為已處理以及類別處理</span><span class="sxs-lookup"><span data-stu-id="ad977-128">Marking Routed Events as Handled, and Class Handling</span></span>](../../../../docs/framework/wpf/advanced/marking-routed-events-as-handled-and-class-handling.md)  
 [<span data-ttu-id="ad977-129">路由事件概觀</span><span class="sxs-lookup"><span data-stu-id="ad977-129">Routed Events Overview</span></span>](../../../../docs/framework/wpf/advanced/routed-events-overview.md)
