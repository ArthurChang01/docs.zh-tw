---
title: "相依性屬性值優先順序"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- dependency properties [WPF], classes as owners
- dependency properties [WPF], metadata
- classes [WPF], owners of dependency properties
- metadata [WPF], dependency properties
ms.assetid: 1fbada8e-4867-4ed1-8d97-62c07dad7ebc
caps.latest.revision: "27"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 0b52b809b732f3859a7ce02a4433b2387e797932
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/21/2017
---
# <a name="dependency-property-value-precedence"></a><span data-ttu-id="2b01c-102">相依性屬性值優先順序</span><span class="sxs-lookup"><span data-stu-id="2b01c-102">Dependency Property Value Precedence</span></span>
<span data-ttu-id="2b01c-103"><a name="introduction"></a> 本主題說明 [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 屬性系統的運作方式如何影響相依性屬性的值，並描述屬性系統套用到屬性有效值的優先順序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-103"><a name="introduction"></a> This topic explains how the workings of the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] property system can affect the value of a dependency property, and describes the precedence by which aspects of the property system apply to the effective value of a property.</span></span>  
    
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="2b01c-104">必要條件</span><span class="sxs-lookup"><span data-stu-id="2b01c-104">Prerequisites</span></span>  
 <span data-ttu-id="2b01c-105">本主題假設您已從 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 類別的現有相依性屬性消費者角度了解相依性屬性，並已閱讀[相依性屬性概觀](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-105">This topic assumes that you understand dependency properties from the perspective of a consumer of existing dependency properties on [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] classes, and have read [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span></span> <span data-ttu-id="2b01c-106">為遵循本主題中的範例，您也應該了解 [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] 並知道如何撰寫 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 應用程式。</span><span class="sxs-lookup"><span data-stu-id="2b01c-106">To follow the examples in this topic, you should also understand [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] and know how to write [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>  
  
<a name="intro"></a>   
## <a name="the-wpf-property-system"></a><span data-ttu-id="2b01c-107">WPF 屬性系統</span><span class="sxs-lookup"><span data-stu-id="2b01c-107">The WPF Property System</span></span>  
 <span data-ttu-id="2b01c-108">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 屬性系統提供一個強大的方法，透過各種因素來決定相依性屬性的值，並啟用即時屬性驗證、晚期繫結，以及將其他屬性的值變更通知相關屬性等功能。</span><span class="sxs-lookup"><span data-stu-id="2b01c-108">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] property system offers a powerful way to have the value of dependency properties be determined by a variety of factors, enabling features such as real-time property validation, late binding, and notifying related properties of changes to values for other properties.</span></span> <span data-ttu-id="2b01c-109">用來決定相依性屬性值的實際順序和邏輯相當複雜。</span><span class="sxs-lookup"><span data-stu-id="2b01c-109">The exact order and logic that is used to determine dependency property values is reasonably complex.</span></span> <span data-ttu-id="2b01c-110">不過，知道此順序將有助於避免不必要的屬性設定，也可釐清試圖影響或預測相依性屬性值，為何最後並未產生所預期的值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-110">Knowing this order will help you avoid unnecessary property setting, and might also clear up confusion over exactly why some attempt to influence or anticipate a dependency property value did not end up resulting in the value you expected.</span></span>  
  
<a name="multiple_sets"></a>   
## <a name="dependency-properties-might-be-set-in-multiple-places"></a><span data-ttu-id="2b01c-111">相依性屬性可能在多處「設定」</span><span class="sxs-lookup"><span data-stu-id="2b01c-111">Dependency Properties Might Be "Set" in Multiple Places</span></span>  
 <span data-ttu-id="2b01c-112">以下是範例[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]所在相同的屬性 (<xref:System.Windows.Controls.Control.Background%2A>) 有三種不同 「 設定 」 可能會影響該值的作業。</span><span class="sxs-lookup"><span data-stu-id="2b01c-112">The following is example [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] where the same property (<xref:System.Windows.Controls.Control.Background%2A>) has three different "set" operations that might influence the value.</span></span>  
  
 [!code-xaml[PropertiesOvwSupport#DPPrecedence](../../../../samples/snippets/csharp/VS_Snippets_Wpf/PropertiesOvwSupport/CSharp/page4.xaml#dpprecedence)]  
  
 <span data-ttu-id="2b01c-113">在此，您預期會套用哪個色彩 - 紅色、綠色，還是藍色？</span><span class="sxs-lookup"><span data-stu-id="2b01c-113">Here, which color do you expect will apply—red, green, or blue?</span></span>  
  
 <span data-ttu-id="2b01c-114">除了動畫值和強制型轉之外，區域屬性集會設為最高優先順序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-114">With the exception of animated values and coercion, local property sets are set at the highest precedence.</span></span> <span data-ttu-id="2b01c-115">如果您在本機設定值，可預期該值將會被接受，甚至優先於任何樣式或控制項範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-115">If you set a value locally you can expect that the value will be honored, even above any styles or control templates.</span></span> <span data-ttu-id="2b01c-116">在範例中，這裡<xref:System.Windows.Controls.Control.Background%2A>區域設定為紅色。</span><span class="sxs-lookup"><span data-stu-id="2b01c-116">Here in the example, <xref:System.Windows.Controls.Control.Background%2A> is set to Red locally.</span></span> <span data-ttu-id="2b01c-117">因此，即使它是隱含樣式，原本套用於在該範圍內，該類型的所有項目，在此範圍中，定義的樣式不提供最高優先順序<xref:System.Windows.Controls.Control.Background%2A>屬性及其值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-117">Therefore, the style defined in this scope, even though it is an implicit style that would otherwise apply to all elements of that type in that scope, is not the highest precedence for giving the <xref:System.Windows.Controls.Control.Background%2A> property its value.</span></span>  <span data-ttu-id="2b01c-118">如果從該 Button 執行個體移除區域數值 Red，則樣式會具有優先順序，因此按鈕會從樣式取得 Background 值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-118">If you removed the local value of Red from that Button instance, then the style would have precedence and the button would obtain the Background value from the style.</span></span>  <span data-ttu-id="2b01c-119">在樣式內，觸發程序具有較高的優先順序，因此如果將滑鼠移至按鈕上方，按鈕會變成藍色，否則就會是綠色的。</span><span class="sxs-lookup"><span data-stu-id="2b01c-119">Within the style, triggers take precedence, so the button will be blue if the mouse is over it, and green otherwise.</span></span>  
  
<a name="listing"></a>   
## <a name="dependency-property-setting-precedence-list"></a><span data-ttu-id="2b01c-120">相依性屬性設定優先順序清單</span><span class="sxs-lookup"><span data-stu-id="2b01c-120">Dependency Property Setting Precedence List</span></span>  
 <span data-ttu-id="2b01c-121">以下是屬性系統在指派相依性屬性的執行階段值時，所使用的決定順序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-121">The following is the definitive order that the property system uses when assigning the run-time values of dependency properties.</span></span> <span data-ttu-id="2b01c-122">最高優先順序會先列出。</span><span class="sxs-lookup"><span data-stu-id="2b01c-122">Highest precedence is listed first.</span></span> <span data-ttu-id="2b01c-123">此清單更進一步說明了[相依性屬性概觀](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)中所述的部分概要。</span><span class="sxs-lookup"><span data-stu-id="2b01c-123">This list expands on some of the generalizations made in the [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md).</span></span>  
  
1.  <span data-ttu-id="2b01c-124">**屬性系統強制型轉**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-124">**Property system coercion.**</span></span> <span data-ttu-id="2b01c-125">如需強制型轉的詳細資訊，請參閱本主題稍後的[強制型轉、動畫和基底值](#animations)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-125">For details on coercion, see [Coercion, Animation, and Base Value](#animations) later in this topic.</span></span>  
  
2.  <span data-ttu-id="2b01c-126">**作用中動畫或具有 Hold 行為的動畫**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-126">**Active animations, or animations with a Hold behavior.**</span></span> <span data-ttu-id="2b01c-127">屬性的動畫必須優先於基底 (非動畫) 值，才能有任何實際效果，即使該值是在本機設定也一樣。</span><span class="sxs-lookup"><span data-stu-id="2b01c-127">In order to have any practical effect, an animation of a property must be able to have precedence over the base (unanimated) value, even if that value was set locally.</span></span> <span data-ttu-id="2b01c-128">如需詳細資訊，請參閱本主題稍後的[強制型轉、動畫和基底值](#animations)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-128">For details, see [Coercion, Animation, and Base Value](#animations) later in this topic.</span></span>  
  
3.  <span data-ttu-id="2b01c-129">**區域數值**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-129">**Local value.**</span></span> <span data-ttu-id="2b01c-130">為區域數值可能會設定 「 包裝函式 」 屬性，也等於中的屬性或屬性項目設定的方便性，不論透過[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，或藉由呼叫<xref:System.Windows.DependencyObject.SetValue%2A>[!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)]使用特定的執行個體的屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-130">A local value might be set through the convenience of the "wrapper" property, which also equates to setting as an attribute or property element in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], or by a call to the <xref:System.Windows.DependencyObject.SetValue%2A> [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)] using a property of a specific instance.</span></span> <span data-ttu-id="2b01c-131">如果使用繫結或資源來設定區域數值，其在優先順序中的作用就如同設定直接值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-131">If you set a local value by using a binding or a resource, these each act in the precedence as if a direct value was set.</span></span>  
  
4.  <span data-ttu-id="2b01c-132">**TemplatedParent 範本屬性**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-132">**TemplatedParent template properties.**</span></span> <span data-ttu-id="2b01c-133">項目有<xref:System.Windows.FrameworkElement.TemplatedParent%2A>是建立為範本的一部分 (<xref:System.Windows.Controls.ControlTemplate>或<xref:System.Windows.DataTemplate>)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-133">An element has a <xref:System.Windows.FrameworkElement.TemplatedParent%2A> if it was created as part of a template (a <xref:System.Windows.Controls.ControlTemplate> or <xref:System.Windows.DataTemplate>).</span></span> <span data-ttu-id="2b01c-134">如需何時套用此屬性的詳細資訊，請參閱本主題稍後的 [TemplatedParent](#templatedparent)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-134">For details on when this applies, see [TemplatedParent](#templatedparent) later in this topic.</span></span> <span data-ttu-id="2b01c-135">在範本內，優先順序如下：</span><span class="sxs-lookup"><span data-stu-id="2b01c-135">Within the template, the following precedence applies:</span></span>  
  
    1.  <span data-ttu-id="2b01c-136">從觸發程序<xref:System.Windows.FrameworkElement.TemplatedParent%2A>範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-136">Triggers from the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template.</span></span>  
  
    2.  <span data-ttu-id="2b01c-137">屬性集 (通常透過[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]屬性) 在<xref:System.Windows.FrameworkElement.TemplatedParent%2A>範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-137">Property sets (typically through [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] attributes) in the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template.</span></span>  
  
5.  <span data-ttu-id="2b01c-138">**隱含樣式**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-138">**Implicit style.**</span></span> <span data-ttu-id="2b01c-139">僅適用於 `Style` 屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-139">Applies only to the `Style` property.</span></span> <span data-ttu-id="2b01c-140">`Style` 屬性是由具有符合項目類型之索引鍵的任何樣式資源所填入。</span><span class="sxs-lookup"><span data-stu-id="2b01c-140">The `Style` property is filled by any style resource with a key that matches the type of that element.</span></span> <span data-ttu-id="2b01c-141">該樣式資源必須位於頁面或應用程式中；查閱隱含樣式資源不會進行到主題中。</span><span class="sxs-lookup"><span data-stu-id="2b01c-141">That style resource must exist either in the page or the application; lookup for an implicit style resource does not proceed into the themes.</span></span>  
  
6.  <span data-ttu-id="2b01c-142">**樣式觸發程序**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-142">**Style triggers.**</span></span> <span data-ttu-id="2b01c-143">來自於頁面或應用程式之樣式內的觸發程序 (這些樣式可為明確或隱含樣式，但不能來自於預設樣式，預設樣式的優先順序較低)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-143">The triggers within styles from page or application (these styles might be either explicit or implicit styles, but not from the default styles, which have lower precedence).</span></span>  
  
7.  <span data-ttu-id="2b01c-144">**樣板觸發程序**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-144">**Template triggers.**</span></span> <span data-ttu-id="2b01c-145">樣式內之範本或直接套用之範本中的任何觸發程序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-145">Any trigger from a template within a style, or a directly applied template.</span></span>  
  
8.  <span data-ttu-id="2b01c-146">**樣式 setter**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-146">**Style setters.**</span></span> <span data-ttu-id="2b01c-147">從數值<xref:System.Windows.Setter>樣式頁面或應用程式內。</span><span class="sxs-lookup"><span data-stu-id="2b01c-147">Values from a <xref:System.Windows.Setter> within styles from page or application.</span></span>  
  
9. <span data-ttu-id="2b01c-148">**預設 (主題) 樣式**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-148">**Default (theme) style.**</span></span> <span data-ttu-id="2b01c-149">如需何時套用此樣式，以及主題樣式與主題樣式內範本之關聯的詳細資訊，請參閱本主題稍後的[預設 (主題) 樣式](#themestyles)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-149">For details on when this applies, and how theme styles relate to the templates within theme styles, see [Default (Theme) Styles](#themestyles) later in this topic.</span></span> <span data-ttu-id="2b01c-150">在預設樣式內，優先順序如下：</span><span class="sxs-lookup"><span data-stu-id="2b01c-150">Within a default style, the following order of precedence applies:</span></span>  
  
    1.  <span data-ttu-id="2b01c-151">主題樣式中的作用中觸發程序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-151">Active triggers in the theme style.</span></span>  
  
    2.  <span data-ttu-id="2b01c-152">主題樣式中的 setter。</span><span class="sxs-lookup"><span data-stu-id="2b01c-152">Setters in the theme style.</span></span>  
  
10. <span data-ttu-id="2b01c-153">**繼承**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-153">**Inheritance.**</span></span> <span data-ttu-id="2b01c-154">有幾個相依性屬性會從父項目繼承值到子項目，因此無須在整個應用程式的每一個項目上特別設定。</span><span class="sxs-lookup"><span data-stu-id="2b01c-154">A few dependency properties inherit their values from parent element to child elements, such that they need not be set specifically on each element throughout an application.</span></span> <span data-ttu-id="2b01c-155">如需詳細資訊，請參閱[屬性值繼承](../../../../docs/framework/wpf/advanced/property-value-inheritance.md)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-155">For details see [Property Value Inheritance](../../../../docs/framework/wpf/advanced/property-value-inheritance.md).</span></span>  
  
11. <span data-ttu-id="2b01c-156">**來自相依性屬性中繼資料的預設值**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-156">**Default value from dependency property metadata.**</span></span> <span data-ttu-id="2b01c-157">任何指定的相依性屬性都可能會有屬性系統註冊為該特定屬性建立的預設值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-157">Any given dependency property may have a default value as established by the property system registration of that particular property.</span></span> <span data-ttu-id="2b01c-158">此外，繼承相依性屬性的衍生類別可選擇根據類型覆寫該中繼資料 (包括預設值)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-158">Also, derived classes that inherit a dependency property have the option to override that metadata (including the default value) on a per-type basis.</span></span> <span data-ttu-id="2b01c-159">如需詳細資訊，請參閱[相依性屬性中繼資料](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-159">See [Dependency Property Metadata](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md) for more information.</span></span> <span data-ttu-id="2b01c-160">因為會在預設值之前檢查繼承，所以對繼承的屬性而言，父項目的預設值會優先於子項目。</span><span class="sxs-lookup"><span data-stu-id="2b01c-160">Because inheritance is checked before default value, for an inherited property, a parent element default value takes precedence over a child element.</span></span>  <span data-ttu-id="2b01c-161">因此，如果未在任何位置設定可繼承的屬性，就會使用在根項目或父項目上指定的預設值，而不是子項目的預設值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-161">Consequently, if an inheritable property is not set anywhere, the default value as specified on the root or parent is used instead of the child element default value.</span></span>  
  
<a name="templatedparent"></a>   
## <a name="templatedparent"></a><span data-ttu-id="2b01c-162">TemplatedParent</span><span class="sxs-lookup"><span data-stu-id="2b01c-162">TemplatedParent</span></span>  
 <span data-ttu-id="2b01c-163">作為優先順序項目的 TemplatedParent 不會套用到您直接在標準應用程式標記中宣告之項目的任何屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-163">TemplatedParent as a precedence item does not apply to any property of an element that you declare directly in standard application markup.</span></span> <span data-ttu-id="2b01c-164">TemplatedParent 概念只對視覺化樹狀結構內因套用範本而產生的子項目有效。</span><span class="sxs-lookup"><span data-stu-id="2b01c-164">The TemplatedParent concept exists only for child items within a visual tree that come into existence through the application of the template.</span></span> <span data-ttu-id="2b01c-165">對屬性系統的搜尋時<xref:System.Windows.FrameworkElement.TemplatedParent%2A>值的範本，它會搜尋建立該元素的範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-165">When the property system searches the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template for a value, it is searching the template that created that element.</span></span> <span data-ttu-id="2b01c-166">屬性值從<xref:System.Windows.FrameworkElement.TemplatedParent%2A>範本通常當做已設定為本機值在子元素，但此較低的優先順序與本機值存在的原因可能共用的範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-166">The property values from the <xref:System.Windows.FrameworkElement.TemplatedParent%2A> template generally act as if they were set as a local value on the child element, but this lesser precedence versus the local value exists because the templates are potentially shared.</span></span> <span data-ttu-id="2b01c-167">如需詳細資訊，請參閱 <xref:System.Windows.FrameworkElement.TemplatedParent%2A>。</span><span class="sxs-lookup"><span data-stu-id="2b01c-167">For details, see <xref:System.Windows.FrameworkElement.TemplatedParent%2A>.</span></span>  
  
<a name="style_property"></a>   
## <a name="the-style-property"></a><span data-ttu-id="2b01c-168">Style 屬性</span><span class="sxs-lookup"><span data-stu-id="2b01c-168">The Style Property</span></span>  
 <span data-ttu-id="2b01c-169">查閱稍早所述的順序套用至所有可能的相依性屬性，但有一個例外：<xref:System.Windows.FrameworkElement.Style%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-169">The order of lookup described earlier applies to all possible dependency properties except one: the <xref:System.Windows.FrameworkElement.Style%2A> property.</span></span> <span data-ttu-id="2b01c-170"><xref:System.Windows.FrameworkElement.Style%2A>屬性是唯一的它無法自行設計，因此不會套用優先順序項目 5 到 8。</span><span class="sxs-lookup"><span data-stu-id="2b01c-170">The <xref:System.Windows.FrameworkElement.Style%2A> property is unique in that it cannot itself be styled, so the precedence items 5 through 8 do not apply.</span></span> <span data-ttu-id="2b01c-171">此外，顯示動畫，或強制型轉<xref:System.Windows.FrameworkElement.Style%2A>不建議您 (和動畫<xref:System.Windows.FrameworkElement.Style%2A>需要自訂動畫類別)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-171">Also, either animating or coercing <xref:System.Windows.FrameworkElement.Style%2A> is not recommended (and animating <xref:System.Windows.FrameworkElement.Style%2A> would require a custom animation class).</span></span> <span data-ttu-id="2b01c-172">這會保留三種方式，<xref:System.Windows.FrameworkElement.Style%2A>可能設定屬性：</span><span class="sxs-lookup"><span data-stu-id="2b01c-172">This leaves three ways that the <xref:System.Windows.FrameworkElement.Style%2A> property might be set:</span></span>  
  
-   <span data-ttu-id="2b01c-173">**明確樣式**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-173">**Explicit style.**</span></span> <span data-ttu-id="2b01c-174"><xref:System.Windows.FrameworkElement.Style%2A>屬性直接設定。</span><span class="sxs-lookup"><span data-stu-id="2b01c-174">The <xref:System.Windows.FrameworkElement.Style%2A> property is set directly.</span></span> <span data-ttu-id="2b01c-175">在大多數情況下，樣式不會內嵌定義，而是使用明確索引鍵將它當做資源參考。</span><span class="sxs-lookup"><span data-stu-id="2b01c-175">In most scenarios, the style is not defined inline, but instead is referenced as a resource, by explicit key.</span></span> <span data-ttu-id="2b01c-176">在此情況下，Style 屬性本身就會當做區域數值，也就是優先順序項目 3。</span><span class="sxs-lookup"><span data-stu-id="2b01c-176">In this case the Style property itself acts as if it were a local value, precedence item 3.</span></span>  
  
-   <span data-ttu-id="2b01c-177">**隱含樣式**：</span><span class="sxs-lookup"><span data-stu-id="2b01c-177">**Implicit style.**</span></span> <span data-ttu-id="2b01c-178"><xref:System.Windows.FrameworkElement.Style%2A>未直接設定屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-178">The <xref:System.Windows.FrameworkElement.Style%2A> property is not set directly.</span></span> <span data-ttu-id="2b01c-179">不過，<xref:System.Windows.FrameworkElement.Style%2A>存在資源查閱序列 （頁面、 應用程式） 中某個層級，而且做為索引鍵使用的樣式會套用至型別對應的資源索引鍵。</span><span class="sxs-lookup"><span data-stu-id="2b01c-179">However, the <xref:System.Windows.FrameworkElement.Style%2A> exists at some level in the resource lookup sequence (page, application) and is keyed using a resource key that matches the type the style is to be applied to.</span></span> <span data-ttu-id="2b01c-180">在此情況下，<xref:System.Windows.FrameworkElement.Style%2A>屬性本身做為 5 的項目序列中識別優先順序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-180">In this case, the <xref:System.Windows.FrameworkElement.Style%2A> property itself acts by a precedence identified in the sequence as item 5.</span></span> <span data-ttu-id="2b01c-181">使用偵測到此狀況<xref:System.Windows.DependencyPropertyHelper>針對<xref:System.Windows.FrameworkElement.Style%2A>屬性，並尋找<xref:System.Windows.BaseValueSource.ImplicitStyleReference>結果中。</span><span class="sxs-lookup"><span data-stu-id="2b01c-181">This condition can be detected by using <xref:System.Windows.DependencyPropertyHelper> against the <xref:System.Windows.FrameworkElement.Style%2A> property and looking for <xref:System.Windows.BaseValueSource.ImplicitStyleReference> in the results.</span></span>  
  
-   <span data-ttu-id="2b01c-182">**預設樣式**也稱為**主題樣式**。</span><span class="sxs-lookup"><span data-stu-id="2b01c-182">**Default style**, also known as **theme style.**</span></span> <span data-ttu-id="2b01c-183"><xref:System.Windows.FrameworkElement.Style%2A>屬性不會直接設定，而且事實上會為讀取`null`執行階段為止。</span><span class="sxs-lookup"><span data-stu-id="2b01c-183">The <xref:System.Windows.FrameworkElement.Style%2A> property is not set directly, and in fact will read as `null` up until run time.</span></span> <span data-ttu-id="2b01c-184">在此情況下，樣式會來自屬於 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 展示引擎一部分的執行階段主題評估。</span><span class="sxs-lookup"><span data-stu-id="2b01c-184">In this case, the style comes from the run-time theme evaluation that is part of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] presentation engine.</span></span>  
  
 <span data-ttu-id="2b01c-185">對於不在主題中的隱含樣式，類型必須完全相符 - `MyButton``Button` 衍生的類別不會隱含使用 `Button` 的樣式。</span><span class="sxs-lookup"><span data-stu-id="2b01c-185">For implicit styles not in themes, the type must match exactly—a `MyButton``Button`-derived class will not implicitly use a style for `Button`.</span></span>  
  
<a name="themestyles"></a>   
## <a name="default-theme-styles"></a><span data-ttu-id="2b01c-186">預設 (主題) 樣式</span><span class="sxs-lookup"><span data-stu-id="2b01c-186">Default (Theme) Styles</span></span>  
 <span data-ttu-id="2b01c-187">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 隨附的每個控制項都有預設樣式。</span><span class="sxs-lookup"><span data-stu-id="2b01c-187">Every control that ships with [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] has a default style.</span></span> <span data-ttu-id="2b01c-188">該預設樣式可能會視主題而不同，因此預設樣式有時也稱為主題樣式。</span><span class="sxs-lookup"><span data-stu-id="2b01c-188">That default style potentially varies by theme, which is why this default style is sometimes referred to as a theme style.</span></span>  
  
 <span data-ttu-id="2b01c-189">最重要的資訊控制項為其控制項範本，存在於佈景主題樣式的 setter 稱為預設樣式中找到其<xref:System.Windows.Controls.Control.Template%2A>屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-189">The most important information that is found within a default style for a control is its control template, which exists in the theme style as a setter for its <xref:System.Windows.Controls.Control.Template%2A> property.</span></span> <span data-ttu-id="2b01c-190">如果預設樣式沒有範本，則沒有自訂範本作為自訂樣式一部分的控制項將完全沒有視覺外觀。</span><span class="sxs-lookup"><span data-stu-id="2b01c-190">If there were no template from default styles, a control without a custom template as part of a custom style would have no visual appearance at all.</span></span> <span data-ttu-id="2b01c-191">預設樣式中的範本會為每個控制項的視覺外觀提供基本結構，而且也會定義在範本視覺化樹狀結構中定義的屬性與相對應控制項類別之間的連接。</span><span class="sxs-lookup"><span data-stu-id="2b01c-191">The template from the default style gives the visual appearance of each control a basic structure, and also defines the connections between properties defined in the visual tree of the template and the corresponding control class.</span></span> <span data-ttu-id="2b01c-192">每個控制項會公開一組屬性，這些屬性可影響控制項的視覺外觀，但不會完全取代範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-192">Each control exposes a set of properties that can influence the visual appearance of the control without completely replacing the template.</span></span> <span data-ttu-id="2b01c-193">例如，請考慮預設視覺外觀的<xref:System.Windows.Controls.Primitives.Thumb>控制項，這是元件的<xref:System.Windows.Controls.Primitives.ScrollBar>。</span><span class="sxs-lookup"><span data-stu-id="2b01c-193">For example, consider the default visual appearance of a <xref:System.Windows.Controls.Primitives.Thumb> control, which is a component of a <xref:System.Windows.Controls.Primitives.ScrollBar>.</span></span>  
  
 <span data-ttu-id="2b01c-194">A<xref:System.Windows.Controls.Primitives.Thumb>有特定的自訂屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-194">A <xref:System.Windows.Controls.Primitives.Thumb> has certain customizable properties.</span></span> <span data-ttu-id="2b01c-195">預設範本<xref:System.Windows.Controls.Primitives.Thumb>建立基本結構 / 視覺化樹狀結構有數個巢狀<xref:System.Windows.Controls.Border>元件，以建立斜面的外觀。</span><span class="sxs-lookup"><span data-stu-id="2b01c-195">The default template of a <xref:System.Windows.Controls.Primitives.Thumb> creates a basic structure / visual tree with several nested <xref:System.Windows.Controls.Border> components to create a bevel look.</span></span> <span data-ttu-id="2b01c-196">如果此屬性是範本的一部分，要公開的自訂<xref:System.Windows.Controls.Primitives.Thumb>類別，則該屬性必須公開[TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md)，範本中。</span><span class="sxs-lookup"><span data-stu-id="2b01c-196">If a property that is part of the template is intended to be exposed for customization by the <xref:System.Windows.Controls.Primitives.Thumb> class, then that property must be exposed by a [TemplateBinding](../../../../docs/framework/wpf/advanced/templatebinding-markup-extension.md), within the template.</span></span> <span data-ttu-id="2b01c-197">如果是<xref:System.Windows.Controls.Primitives.Thumb>，這些框線的各種屬性這類共用範本繫結至屬性<xref:System.Windows.Controls.Border.Background%2A>或<xref:System.Windows.Controls.Border.BorderThickness%2A>。</span><span class="sxs-lookup"><span data-stu-id="2b01c-197">In the case of <xref:System.Windows.Controls.Primitives.Thumb>, various properties of these borders share a template binding to properties such as <xref:System.Windows.Controls.Border.Background%2A> or <xref:System.Windows.Controls.Border.BorderThickness%2A>.</span></span> <span data-ttu-id="2b01c-198">但特定其他屬性或視覺化排列方式是用硬式編碼加入控制項範本，或繫結至直接來自於主題的值，除了取代整個範本之外，無法以其他方式變更。</span><span class="sxs-lookup"><span data-stu-id="2b01c-198">But certain other properties or visual arrangements are hard-coded into the control template or are bound to values that come directly from the theme, and cannot be changed short of replacing the entire template.</span></span> <span data-ttu-id="2b01c-199">一般而言，如果屬性來自於樣板化父項目且不由範本繫結公開，就無法使用樣式調整，因為沒有簡單的方式可將它設為目標。</span><span class="sxs-lookup"><span data-stu-id="2b01c-199">Generally, if a property comes from a templated parent and is not exposed by a template binding, it cannot be adjusted by styles because there is no easy way to target it.</span></span> <span data-ttu-id="2b01c-200">但該屬性仍會受到所套用範本中的屬性值繼承所影響，或受到預設值所影響。</span><span class="sxs-lookup"><span data-stu-id="2b01c-200">But that property could still be influenced by property value inheritance in the applied template, or by default value.</span></span>  
  
 <span data-ttu-id="2b01c-201">主題樣式在其定義中使用類型作為索引鍵。</span><span class="sxs-lookup"><span data-stu-id="2b01c-201">The theme styles use a type as the key in their definitions.</span></span> <span data-ttu-id="2b01c-202">不過，當佈景主題套用至指定的項目執行個體後，佈景主題此類型執行查閱藉由檢查<xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>在控制項上的屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-202">However, when themes are applied to a given element instance, themes lookup for this type is performed by checking the <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> property on a control.</span></span> <span data-ttu-id="2b01c-203">這與隱含樣式使用常值 Type 的方式相反。</span><span class="sxs-lookup"><span data-stu-id="2b01c-203">This is in contrast to using the literal Type, as implicit styles do.</span></span> <span data-ttu-id="2b01c-204">值<xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>即使實作器不會變更它 （預期的方式變更的屬性是不覆寫它，在屬性層級，但若要改為其預設值屬性中繼資料中的變更），讓衍生類別會繼承。</span><span class="sxs-lookup"><span data-stu-id="2b01c-204">The value of <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> would inherit to derived classes even if the implementer did not change it (the intended way of changing the property is not to override it at the property level, but to instead change its default value in property metadata).</span></span> <span data-ttu-id="2b01c-205">這種間接方式可讓基底類別為沒有樣式 (或者更重要的是，在該樣式內沒有範本，因此完全沒有預設視覺外觀) 的衍生項目定義主題樣式。</span><span class="sxs-lookup"><span data-stu-id="2b01c-205">This indirection enables base classes to define the theme styles for derived elements that do not otherwise have a style (or more importantly, do not have a template within that style and would thus have no default visual appearance at all).</span></span> <span data-ttu-id="2b01c-206">因此，您也可以衍生`MyButton`從<xref:System.Windows.Controls.Button>，仍然會出現<xref:System.Windows.Controls.Button>預設範本。</span><span class="sxs-lookup"><span data-stu-id="2b01c-206">Thus, you can derive `MyButton` from <xref:System.Windows.Controls.Button> and will still get the <xref:System.Windows.Controls.Button> default template.</span></span> <span data-ttu-id="2b01c-207">如果您的控制項作者`MyButton`和您想要不同的行為，您無法覆寫的相依性屬性中繼資料<xref:System.Windows.FrameworkElement.DefaultStyleKey%2A>上`MyButton`傳回不同的索引鍵，並接著定義包括範本相關的佈景主題樣式如`MyButton`，您必須封裝與您`MyButton`控制項。</span><span class="sxs-lookup"><span data-stu-id="2b01c-207">If you were the control author of `MyButton` and you wanted a different behavior, you could override the dependency property metadata for <xref:System.Windows.FrameworkElement.DefaultStyleKey%2A> on `MyButton` to return a different key, and then define the relevant theme styles including template for `MyButton` that you must package with your `MyButton` control.</span></span> <span data-ttu-id="2b01c-208">如需主題、樣式和控制項撰寫的詳細資訊，請參閱[控制項撰寫概觀](../../../../docs/framework/wpf/controls/control-authoring-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-208">For more details on themes, styles, and control authoring, see [Control Authoring Overview](../../../../docs/framework/wpf/controls/control-authoring-overview.md).</span></span>  
  
<a name="resources"></a>   
## <a name="dynamic-resource-references-and-binding"></a><span data-ttu-id="2b01c-209">動態資源參考和繫結</span><span class="sxs-lookup"><span data-stu-id="2b01c-209">Dynamic Resource References and Binding</span></span>  
 <span data-ttu-id="2b01c-210">動態資源參考和繫結作業會採用其設定位置的優先順序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-210">Dynamic resource references and binding operations respect the precedence of the location at which they are set.</span></span> <span data-ttu-id="2b01c-211">例如，套用到區域數值的動態資源會依優先順序項目 3 作用，主題樣式內屬性 setter 的繫結會依優先順序項目 9 套用，依此類推。</span><span class="sxs-lookup"><span data-stu-id="2b01c-211">For example, a dynamic resource applied to a local value acts per precedence item 3, a binding for a property setter within a theme style applies at precedence item 9, and so on.</span></span> <span data-ttu-id="2b01c-212">由於動態資源參考和繫結必須能夠從應用程式的執行階段狀態取得值，因此決定任何指定屬性之屬性值優先順序的實際程序也會延伸至執行階段。</span><span class="sxs-lookup"><span data-stu-id="2b01c-212">Because dynamic resource references and binding must both be able to obtain values from the run time state of the application, this entails that the actual process of determining the property value precedence for any given property extends into the run time as well.</span></span>  
  
 <span data-ttu-id="2b01c-213">嚴格來說，動態資源參考不是屬性系統的一部分，但它們有自己的查閱順序，會與上面所列的順序互動。</span><span class="sxs-lookup"><span data-stu-id="2b01c-213">Dynamic resource references are not strictly speaking part of the property system, but they do have a lookup order of their own which interacts with the sequence listed above.</span></span> <span data-ttu-id="2b01c-214">該優先順序在 [XAML 資源](../../../../docs/framework/wpf/advanced/xaml-resources.md)中有更詳細的說明。</span><span class="sxs-lookup"><span data-stu-id="2b01c-214">That precedence is documented more thoroughly in the [XAML Resources](../../../../docs/framework/wpf/advanced/xaml-resources.md).</span></span> <span data-ttu-id="2b01c-215">基本上來說，該優先順序就是：項目優先於頁面根項目、應用程式、主題和系統。</span><span class="sxs-lookup"><span data-stu-id="2b01c-215">The basic summation of that precedence is: element to page root, application, theme, system.</span></span>  
  
 <span data-ttu-id="2b01c-216">動態資源和繫結具有其設定位置的優先順序，但會受到其值影響。</span><span class="sxs-lookup"><span data-stu-id="2b01c-216">Dynamic resources and bindings have the precedence of where they were set, but the value is deferred.</span></span> <span data-ttu-id="2b01c-217">因此，如果您將動態資源或繫結設定為區域數值，區域數值的任何變更都會取代整個動態資源或繫結。</span><span class="sxs-lookup"><span data-stu-id="2b01c-217">One consequence of this is that if you set a dynamic resource or binding to a local value, any change to the local value replaces the dynamic resource or binding entirely.</span></span> <span data-ttu-id="2b01c-218">即使您呼叫<xref:System.Windows.DependencyObject.ClearValue%2A>方法，以清除本機設定值，動態資源或繫結不會還原。</span><span class="sxs-lookup"><span data-stu-id="2b01c-218">Even if you call the <xref:System.Windows.DependencyObject.ClearValue%2A> method to clear the locally set value, the dynamic resource or binding will not be restored.</span></span> <span data-ttu-id="2b01c-219">事實上，如果您呼叫<xref:System.Windows.DependencyObject.ClearValue%2A>屬性具有動態資源或繫結 （與任何常值的本機值），它們會依清除<xref:System.Windows.DependencyObject.ClearValue%2A>太呼叫。</span><span class="sxs-lookup"><span data-stu-id="2b01c-219">In fact, if you call <xref:System.Windows.DependencyObject.ClearValue%2A> on a property that has a dynamic resource or binding in place (with no literal local value), they are cleared by the <xref:System.Windows.DependencyObject.ClearValue%2A> call too.</span></span>  
  
<a name="setcurrentvalue"></a>   
## <a name="setcurrentvalue"></a><span data-ttu-id="2b01c-220">SetCurrentValue</span><span class="sxs-lookup"><span data-stu-id="2b01c-220">SetCurrentValue</span></span>  
 <span data-ttu-id="2b01c-221"><xref:System.Windows.DependencyObject.SetCurrentValue%2A>方法為另一種方式來設定屬性，但是並不依照優先權順序。</span><span class="sxs-lookup"><span data-stu-id="2b01c-221">The <xref:System.Windows.DependencyObject.SetCurrentValue%2A> method is another way to set a property, but it is not in the order of precedence.</span></span> <span data-ttu-id="2b01c-222">相反地，<xref:System.Windows.DependencyObject.SetCurrentValue%2A>可讓您變更屬性的值，而不覆寫先前的值的來源。</span><span class="sxs-lookup"><span data-stu-id="2b01c-222">Instead, <xref:System.Windows.DependencyObject.SetCurrentValue%2A> enables you to change the value of a property without overwriting the source of a previous value.</span></span> <span data-ttu-id="2b01c-223">您可以使用<xref:System.Windows.DependencyObject.SetCurrentValue%2A>任何您想要設定值，而不需給予該值的優先順序為區域數值的時間。</span><span class="sxs-lookup"><span data-stu-id="2b01c-223">You can use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> any time that you want to set a value without giving that value the precedence of a local value.</span></span> <span data-ttu-id="2b01c-224">例如，如果屬性是觸發程序來設定，然後指派另一個透過<xref:System.Windows.DependencyObject.SetCurrentValue%2A>、 對屬性系統仍尊重觸發程序和觸發程序的動作發生時，會變更屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-224">For example, if a property is set by a trigger and then assigned another value via <xref:System.Windows.DependencyObject.SetCurrentValue%2A>, the property system still respects the trigger and the property will change if the trigger’s action occurs.</span></span> <span data-ttu-id="2b01c-225"><xref:System.Windows.DependencyObject.SetCurrentValue%2A>可讓您變更屬性的值沒有任何具有較高優先順序的來源。</span><span class="sxs-lookup"><span data-stu-id="2b01c-225"><xref:System.Windows.DependencyObject.SetCurrentValue%2A> enables you to change the property’s value without giving it a source with a higher precedence.</span></span> <span data-ttu-id="2b01c-226">同樣地，您可以使用<xref:System.Windows.DependencyObject.SetCurrentValue%2A>若要變更屬性的值，而不覆寫繫結。</span><span class="sxs-lookup"><span data-stu-id="2b01c-226">Likewise, you can use <xref:System.Windows.DependencyObject.SetCurrentValue%2A> to change the value of a property without overwriting a binding.</span></span>  
  
<a name="animations"></a>   
## <a name="coercion-animations-and-base-value"></a><span data-ttu-id="2b01c-227">強制型轉、動畫和基底值</span><span class="sxs-lookup"><span data-stu-id="2b01c-227">Coercion, Animations, and Base Value</span></span>  
 <span data-ttu-id="2b01c-228">在這個 [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)] 中，強制型轉和動畫都會在名為「基底值」的值上作用。</span><span class="sxs-lookup"><span data-stu-id="2b01c-228">Coercion and animation both act on a value that is termed as the "base value" throughout this [!INCLUDE[TLA2#tla_sdk](../../../../includes/tla2sharptla-sdk-md.md)].</span></span> <span data-ttu-id="2b01c-229">因此，基底值是透過在項目中往上評估，直到達到第 2 個項目來決定的值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-229">The base value is thus whatever value is determined through evaluating upwards in the items until item 2 is reached.</span></span>  
  
 <span data-ttu-id="2b01c-230">對動畫而言，如果動畫未同時指定特定行為的 "From" 和 "To"，或是動畫刻意在完成後還原成基底值，則基底值可能會對動畫值造成影響。</span><span class="sxs-lookup"><span data-stu-id="2b01c-230">For an animation, the base value can have an effect on the animated value, if that animation does not specify both "From" and "To" for certain behaviors, or if the animation deliberately reverts to the base value when completed.</span></span> <span data-ttu-id="2b01c-231">若要了解實際的情形，請執行 [From、To 和 By 動畫目標值範例](http://go.microsoft.com/fwlink/?LinkID=159988)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-231">To see this in practice, run the [From, To, and By Animation Target Values Sample](http://go.microsoft.com/fwlink/?LinkID=159988).</span></span> <span data-ttu-id="2b01c-232">請試著設定此範例中矩形高度的區域數值，讓初始區域數值與動畫中的任何 "From" 不同。</span><span class="sxs-lookup"><span data-stu-id="2b01c-232">Try setting the local values of the rectangle height in the example, such that the initial local value differs from any "From" in the animation.</span></span> <span data-ttu-id="2b01c-233">您會發現，動畫會立即使用 "From" 值啟動，並在啟動後取代基底值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-233">You will note that the animations start right away using the "From" values and replace the base value once started.</span></span> <span data-ttu-id="2b01c-234">動畫可能會指定一旦完成藉由指定 停止動畫之前找到的值傳回<xref:System.Windows.Media.Animation.FillBehavior>。</span><span class="sxs-lookup"><span data-stu-id="2b01c-234">The animation might specify to return to the value found before animation once it is completed by specifying the Stop <xref:System.Windows.Media.Animation.FillBehavior>.</span></span> <span data-ttu-id="2b01c-235">在此之後，就會使用正常優先順序來決定基底值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-235">Afterwards, normal precedence is used for the base value determination.</span></span>  
  
 <span data-ttu-id="2b01c-236">您可將多個動畫套用到單一屬性，每個動畫可能已透過值優先順序的不同點定義。</span><span class="sxs-lookup"><span data-stu-id="2b01c-236">Multiple animations might be applied to a single property, with each of these animations possibly having been defined from different points in the value precedence.</span></span> <span data-ttu-id="2b01c-237">不過，這些動畫可能會將值結合起來，而不是只從較高的優先順序套用動畫。</span><span class="sxs-lookup"><span data-stu-id="2b01c-237">However, these animations will potentially composite their values, rather than just applying the animation from the higher precedence.</span></span> <span data-ttu-id="2b01c-238">這完全取決於動畫的定義方式，以及要顯示為動畫之值的類型。</span><span class="sxs-lookup"><span data-stu-id="2b01c-238">This depends on exactly how the animations are defined, and the type of the value that is being animated.</span></span> <span data-ttu-id="2b01c-239">如需將屬性顯示為動畫的詳細資訊，請參閱[動畫概觀](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-239">For more information about animating properties, see [Animation Overview](../../../../docs/framework/wpf/graphics-multimedia/animation-overview.md).</span></span>  
  
 <span data-ttu-id="2b01c-240">強制型轉的套用層級最高。</span><span class="sxs-lookup"><span data-stu-id="2b01c-240">Coercion applies at the highest level of all.</span></span> <span data-ttu-id="2b01c-241">即使是已在執行中的應用程式也受值強制型轉的限制。</span><span class="sxs-lookup"><span data-stu-id="2b01c-241">Even an already running animation is subject to value coercion.</span></span> <span data-ttu-id="2b01c-242">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] 中的某些現有相依性屬性有內建強制型轉。</span><span class="sxs-lookup"><span data-stu-id="2b01c-242">Certain existing dependency properties in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] have built-in coercion.</span></span> <span data-ttu-id="2b01c-243">您可以自訂相依性屬性，定義自訂相依性屬性的強制型轉行為來撰寫<xref:System.Windows.CoerceValueCallback>和中繼資料的一部分傳遞回呼，當您建立屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-243">For a custom dependency property, you define the coercion behavior for a custom dependency property by writing a <xref:System.Windows.CoerceValueCallback> and passing the callback as part of metadata when you create the property.</span></span> <span data-ttu-id="2b01c-244">您也可以覆寫現有屬性的強制型轉行為，方式是在衍生類別中覆寫該屬性上的中繼資料。</span><span class="sxs-lookup"><span data-stu-id="2b01c-244">You can also override coercion behavior of existing properties by overriding the metadata on that property in a derived class.</span></span> <span data-ttu-id="2b01c-245">強制型轉與基底值互動的方式是，強制型轉上的條件約束會以當時存在的條件約束套用，但仍保留基底值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-245">Coercion interacts with the base value in such a way that the constraints on coercion are applied as those constraints exist at the time, but the base value is still retained.</span></span> <span data-ttu-id="2b01c-246">因此，如果強制型轉中的條件約束稍後放寬，強制型轉就會傳回最接近該基底值的值，而且強制型轉對屬性的影響有可能會在所有條件約束都放寬之後停止。</span><span class="sxs-lookup"><span data-stu-id="2b01c-246">Therefore, if constraints in coercion are later lifted, the coercion will return the closest value possible to that base value, and potentially the coercion influence on a property will cease as soon as all constraints are lifted.</span></span> <span data-ttu-id="2b01c-247">如需強制型轉行為的詳細資訊，請參閱[相依性屬性回呼和驗證](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md)。</span><span class="sxs-lookup"><span data-stu-id="2b01c-247">For more information about coercion behavior, see [Dependency Property Callbacks and Validation](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md).</span></span>  
  
<a name="triggers"></a>   
## <a name="trigger-behaviors"></a><span data-ttu-id="2b01c-248">觸發程序行為</span><span class="sxs-lookup"><span data-stu-id="2b01c-248">Trigger Behaviors</span></span>  
 <span data-ttu-id="2b01c-249">控制項通常會將觸發程序行為定義為其在主題中之預設樣式的一部分。</span><span class="sxs-lookup"><span data-stu-id="2b01c-249">Controls often define trigger behaviors as part of their default style in themes.</span></span> <span data-ttu-id="2b01c-250">在控制項上設定區域屬性，可能會使觸發程序無法從視覺或行為上回應使用者驅動的事件。</span><span class="sxs-lookup"><span data-stu-id="2b01c-250">Setting local properties on controls might prevent the triggers from being able to respond to user-driven events either visually or behaviorally.</span></span> <span data-ttu-id="2b01c-251">屬性觸發程序的常見用法是針對控制項或狀態屬性例如<xref:System.Windows.Controls.Primitives.Selector.IsSelected%2A>。</span><span class="sxs-lookup"><span data-stu-id="2b01c-251">The most common use of a property trigger is for control or state properties such as <xref:System.Windows.Controls.Primitives.Selector.IsSelected%2A>.</span></span> <span data-ttu-id="2b01c-252">例如，根據預設時<xref:System.Windows.Controls.Button>已停用 (針對觸發<xref:System.Windows.UIElement.IsEnabled%2A>是`false`) 則<xref:System.Windows.Controls.Control.Foreground%2A>佈景主題樣式的值是什麼情況會讓控制項出現 「 灰色 」。</span><span class="sxs-lookup"><span data-stu-id="2b01c-252">For example, by default when a <xref:System.Windows.Controls.Button> is disabled (trigger for <xref:System.Windows.UIElement.IsEnabled%2A> is `false`) then the <xref:System.Windows.Controls.Control.Foreground%2A> value in the theme style is what causes the control to appear "grayed out".</span></span> <span data-ttu-id="2b01c-253">但是，如果您已設定本機<xref:System.Windows.Controls.Control.Foreground%2A>值正常的灰色外色彩將取消的優先順序，根據您的本機屬性集，即使在這個屬性觸發案例。</span><span class="sxs-lookup"><span data-stu-id="2b01c-253">But if you have set a local <xref:System.Windows.Controls.Control.Foreground%2A> value, that normal gray-out color will be overruled in precedence by your local property set, even in this property-triggered scenario.</span></span> <span data-ttu-id="2b01c-254">當您為具有主題層級觸發程序行為的屬性設定值時，請特別小心，並確保不會不當干擾該控制項的預期使用者體驗。</span><span class="sxs-lookup"><span data-stu-id="2b01c-254">Be cautious of setting values for properties that have theme-level trigger behaviors and make sure you are not unduly interfering with the intended user experience for that control.</span></span>  
  
<a name="clearvalue"></a>   
## <a name="clearvalue-and-value-precedence"></a><span data-ttu-id="2b01c-255">ClearValue 和值優先順序</span><span class="sxs-lookup"><span data-stu-id="2b01c-255">ClearValue and Value Precedence</span></span>  
 <span data-ttu-id="2b01c-256"><xref:System.Windows.DependencyObject.ClearValue%2A>方法提供代替品表示若要清除的設定項目的相依性屬性的任何本機套用的值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-256">The <xref:System.Windows.DependencyObject.ClearValue%2A> method provides an expedient means to clear any locally applied value from a dependency property that is set on an element.</span></span> <span data-ttu-id="2b01c-257">不過，呼叫<xref:System.Windows.DependencyObject.ClearValue%2A>並不保證，如同在屬性註冊期間所建立中繼資料中的預設值是新生效的值。</span><span class="sxs-lookup"><span data-stu-id="2b01c-257">However, calling <xref:System.Windows.DependencyObject.ClearValue%2A> is not a guarantee that the default as established in metadata during property registration is the new effective value.</span></span> <span data-ttu-id="2b01c-258">值優先順序中的所有其他參與者仍在作用中。</span><span class="sxs-lookup"><span data-stu-id="2b01c-258">All of the other participants in value precedence are still active.</span></span> <span data-ttu-id="2b01c-259">只有在本機設定的值會從優先順序移除。</span><span class="sxs-lookup"><span data-stu-id="2b01c-259">Only the locally set value has been removed from the precedence sequence.</span></span> <span data-ttu-id="2b01c-260">例如，如果您呼叫<xref:System.Windows.DependencyObject.ClearValue%2A>從中佈景主題樣式，也會設定該屬性，然後再佈景主題會套用的值為新的值，而不是中繼資料為基礎的預設屬性。</span><span class="sxs-lookup"><span data-stu-id="2b01c-260">For example, if you call <xref:System.Windows.DependencyObject.ClearValue%2A> on a property where that property is also set by a theme style, then the theme value is applied as the new value rather than the metadata-based default.</span></span> <span data-ttu-id="2b01c-261">如果您想要採用跨處理序的所有屬性值參與者，並將值設為預設的已註冊的中繼資料，您可以取得預設值，肯定是藉由查詢相依性屬性中繼資料，然後可以在本機使用的預設值設定屬性，藉由呼叫<xref:System.Windows.DependencyObject.SetValue%2A>。</span><span class="sxs-lookup"><span data-stu-id="2b01c-261">If you want to take all property value participants out of the process and set the value to the registered metadata default, you can obtain that default value definitively by querying the dependency property metadata, and then you can use the default value to locally set the property with a call to <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="2b01c-262">另請參閱</span><span class="sxs-lookup"><span data-stu-id="2b01c-262">See Also</span></span>  
 <xref:System.Windows.DependencyObject>  
 <xref:System.Windows.DependencyProperty>  
 [<span data-ttu-id="2b01c-263">相依性屬性概觀</span><span class="sxs-lookup"><span data-stu-id="2b01c-263">Dependency Properties Overview</span></span>](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)  
 [<span data-ttu-id="2b01c-264">自訂相依性屬性</span><span class="sxs-lookup"><span data-stu-id="2b01c-264">Custom Dependency Properties</span></span>](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md)  
 [<span data-ttu-id="2b01c-265">相依性屬性回呼和驗證</span><span class="sxs-lookup"><span data-stu-id="2b01c-265">Dependency Property Callbacks and Validation</span></span>](../../../../docs/framework/wpf/advanced/dependency-property-callbacks-and-validation.md)
