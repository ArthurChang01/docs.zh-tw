---
title: "裝載服務"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: hosting services [WCF]
ms.assetid: 192be927-6be2-4fda-98f0-e513c4881acc
caps.latest.revision: "31"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: b23dac1db5252d3ce2bd60e4f8525dd89d9127b0
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/22/2017
---
# <a name="hosting-services"></a><span data-ttu-id="9c590-102">裝載服務</span><span class="sxs-lookup"><span data-stu-id="9c590-102">Hosting Services</span></span>
<span data-ttu-id="9c590-103">如果要成為作用中的服務，必須將服務裝載在建立及控制其內容和存留時間的執行階段環境中。</span><span class="sxs-lookup"><span data-stu-id="9c590-103">To become active, a service must be hosted within a run-time environment that creates it and controls its context and lifetime.</span></span> [!INCLUDE[indigo1](../../../includes/indigo1-md.md)]<span data-ttu-id="9c590-104"> 服務是設計為在支援 Managed 程式碼的 Windows 處理序中執行的。</span><span class="sxs-lookup"><span data-stu-id="9c590-104"> services are designed to run in any Windows process that supports managed code.</span></span>  
  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="9c590-105"> 為服務導向應用程式的建置提供了統一的程式設計模型。</span><span class="sxs-lookup"><span data-stu-id="9c590-105"> provides a unified programming model for building service-oriented applications.</span></span> <span data-ttu-id="9c590-106">這個程式設計模型會維持一致並與部署服務的執行階段環境互相獨立。</span><span class="sxs-lookup"><span data-stu-id="9c590-106">This programming model remains consistent and is independent of the run-time environment in which the service is deployed.</span></span> <span data-ttu-id="9c590-107">實務上，這意味著不管裝載選項為何，服務的程式碼看起來都差不多。</span><span class="sxs-lookup"><span data-stu-id="9c590-107">In practice, this means that the code for your services looks much the same whatever the hosting option.</span></span>  
  
 <span data-ttu-id="9c590-108">這些裝載選項的範圍從在主控台應用程式中執行到伺服器環境 (例如，在由網際網路資訊服務 (IIS) 或 Windows Process Activation Service (WAS) 管理的背景工作處理序中執行的 Windows 服務) 不一而足。</span><span class="sxs-lookup"><span data-stu-id="9c590-108">These hosting options range from running inside a console application to server environments such as a Windows service running within a worker process managed by Internet Information Services (IIS) or by Windows Process Activation Service (WAS).</span></span> <span data-ttu-id="9c590-109">開發人員可選擇滿足服務部署需求的裝載環境。</span><span class="sxs-lookup"><span data-stu-id="9c590-109">Developers choose the hosting environment that satisfies the service's deployment requirements.</span></span> <span data-ttu-id="9c590-110">這些需求可能源自部署了應用程式的平台、應用程式必須賴以傳送與接收訊息的傳輸，或是用來確保足夠可用性所需的處理序回收類型與其他處理序管理，或是其他一些管理或可靠性需求。</span><span class="sxs-lookup"><span data-stu-id="9c590-110">These requirements might derive from the platform on which the application is deployed, the transport on which it must send and receive messages, or on the type of process recycling and other process management required to ensure adequate availability, or on some other management or reliability requirements.</span></span> <span data-ttu-id="9c590-111">下節將提供有關裝載選項的資訊與指引。</span><span class="sxs-lookup"><span data-stu-id="9c590-111">The next section provides information and guidance on hosting options.</span></span>  
  
## <a name="hosting-options"></a><span data-ttu-id="9c590-112">裝載選項</span><span class="sxs-lookup"><span data-stu-id="9c590-112">Hosting Options</span></span>  
  
#### <a name="self-hosting-in-a-managed-application"></a><span data-ttu-id="9c590-113">在 Managed 應用程式中自我裝載</span><span class="sxs-lookup"><span data-stu-id="9c590-113">Self-Hosting in a Managed Application</span></span>  
 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)]<span data-ttu-id="9c590-114"> 服務可以裝載於任何 Managed 應用程式。</span><span class="sxs-lookup"><span data-stu-id="9c590-114"> services can be hosted in any managed application.</span></span> <span data-ttu-id="9c590-115">這是最彈性的選項，因為它只需要最少的基礎結構就可部署。</span><span class="sxs-lookup"><span data-stu-id="9c590-115">This is the most flexible option because it requires the least infrastructure to deploy.</span></span> <span data-ttu-id="9c590-116">您可以將服務的程式碼嵌入 Managed 應用程式程式碼中，然後建立並開啟 <xref:System.ServiceModel.ServiceHost> 的執行個體以便提供服務。</span><span class="sxs-lookup"><span data-stu-id="9c590-116">You embed the code for the service inside the managed application code and then create and open an instance of the <xref:System.ServiceModel.ServiceHost> to make the service available.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="9c590-117">[How to： 將 WCF 服務裝載於 Managed 應用程式](../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md)。</span><span class="sxs-lookup"><span data-stu-id="9c590-117"> [How to: Host a WCF Service in a Managed Application](../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md).</span></span>  
  
 <span data-ttu-id="9c590-118">此選項可啟用兩個常見的案例：在主控台應用程式與豐富型用戶端 (Rich Client) 應用程式 (例如，以 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 或 Windows Forms (WinForms) 為基礎的應用程式) 中執行的 [!INCLUDE[avalon1](../../../includes/avalon1-md.md)] 服務。</span><span class="sxs-lookup"><span data-stu-id="9c590-118">This option enables two common scenarios: [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services running inside console applications and rich client applications such as those based on [!INCLUDE[avalon1](../../../includes/avalon1-md.md)] or Windows Forms (WinForms).</span></span> <span data-ttu-id="9c590-119">在應用程式開發階段，於主控台應用程式中裝載 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務一般來說是很有用的方式。</span><span class="sxs-lookup"><span data-stu-id="9c590-119">Hosting a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service inside a console application is typically useful during the application's development phase.</span></span> <span data-ttu-id="9c590-120">這樣一來，您可以很容易地進行偵錯、取得追蹤資訊以便了解應用程式裡面所發生的事，以及藉由將它們複製到新的位置輕易地加以移動。</span><span class="sxs-lookup"><span data-stu-id="9c590-120">This makes them easy to debug, easy to get trace information from to find out what is happening inside of the application, and easy to move around by copying them to new locations.</span></span> <span data-ttu-id="9c590-121">這個裝載選項同時可讓豐富型用戶端應用程式 (例如， [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] 和 WinForms 應用程式) 更容易與外界通訊。</span><span class="sxs-lookup"><span data-stu-id="9c590-121">This hosting option also makes it easy for rich client applications, such as [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] and WinForms applications, to communicate with the outside world.</span></span> <span data-ttu-id="9c590-122">例如，使用 [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] 做為使用者介面，並同時裝載 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務以允許其他用戶端與其連線並共用資訊的對等共同作業用戶端。</span><span class="sxs-lookup"><span data-stu-id="9c590-122">For example, a peer-to-peer collaboration client that uses [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] for its user interface and also hosts a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service that allows other clients to connect to it and share information.</span></span>  
  
#### <a name="managed-windows-services"></a><span data-ttu-id="9c590-123">Managed Windows 服務</span><span class="sxs-lookup"><span data-stu-id="9c590-123">Managed Windows Services</span></span>  
 <span data-ttu-id="9c590-124">這個裝載選項包含可將 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務裝載為 Managed Windows 服務 (之前稱為 NT 服務) 的註冊應用程式定義域 (AppDomain)，如此一來便可透過 Windows 服務的服務控制管理員 (SCM) 來控制服務的處理序存留期。</span><span class="sxs-lookup"><span data-stu-id="9c590-124">This hosting option consists of registering the application domain (AppDomain) that hosts an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service as a managed Windows Service (formerly known as NT service) so that the process lifetime of the service is controlled by the service control manager (SCM) for Windows services.</span></span> <span data-ttu-id="9c590-125">就像自我裝載選項一樣，此類型的裝載環境要求將某些裝載程式碼撰寫成應用程式的一部分。</span><span class="sxs-lookup"><span data-stu-id="9c590-125">Like the self-hosting option, this type of hosting environment requires that some hosting code is written as part of the application.</span></span> <span data-ttu-id="9c590-126">此服務可同時實作為 Windows 服務以及 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務，方法是讓它繼承 <xref:System.ServiceProcess.ServiceBase> 類別以及 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務合約介面。</span><span class="sxs-lookup"><span data-stu-id="9c590-126">The service is implemented as both a Windows Service and as an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service by causing it to inherit from the <xref:System.ServiceProcess.ServiceBase> class as well as from an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service contract interface.</span></span> <span data-ttu-id="9c590-127"><xref:System.ServiceModel.ServiceHost> 接著會透過覆寫的 <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> 方法來建立並開啟，並透過覆寫的 <xref:System.ServiceProcess.ServiceBase.OnStop> 方法加以關閉。</span><span class="sxs-lookup"><span data-stu-id="9c590-127">The <xref:System.ServiceModel.ServiceHost> is then created and opened within an overridden <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> method and closed within an overridden <xref:System.ServiceProcess.ServiceBase.OnStop> method.</span></span> <span data-ttu-id="9c590-128">繼承自 <xref:System.Configuration.Install.Installer> 的安裝程式類別必須同時實作，以允許藉由 Installutil.exe 工具將程式安裝為 Windows 服務。</span><span class="sxs-lookup"><span data-stu-id="9c590-128">An installer class that inherits from <xref:System.Configuration.Install.Installer> must also be implemented to allow the program to be installed as a Windows Service by the Installutil.exe tool.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="9c590-129">[How to： 將 WCF 服務裝載於 Managed 的 Windows 服務](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)。</span><span class="sxs-lookup"><span data-stu-id="9c590-129"> [How to: Host a WCF Service in a Managed Windows Service](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md).</span></span> <span data-ttu-id="9c590-130">Managed Windows 服務裝載選項所啟用的案例，就是在非訊息啟動的安全環境中由 IIS 外部所裝載的長期執行之 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務案例。</span><span class="sxs-lookup"><span data-stu-id="9c590-130">The scenario enabled by the managed Windows Service hosting option is that of a long-running [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service hosted outside of IIS in a secure environment that is not message-activated.</span></span> <span data-ttu-id="9c590-131">服務的存留期會改由作業系統來控制。</span><span class="sxs-lookup"><span data-stu-id="9c590-131">The lifetime of the service is controlled instead by the operating system.</span></span> <span data-ttu-id="9c590-132">所有 Windows 版本都提供這個裝載選項。</span><span class="sxs-lookup"><span data-stu-id="9c590-132">This hosting option is available in all versions of Windows.</span></span>  
  
#### <a name="internet-information-services-iis"></a><span data-ttu-id="9c590-133">Internet Information Services (IIS)</span><span class="sxs-lookup"><span data-stu-id="9c590-133">Internet Information Services (IIS)</span></span>  
 <span data-ttu-id="9c590-134">IIS 裝載選項會與 [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] 整合並使用這些技術所提供的功能，例如處理序回收、閒置關機、處理序健康狀態監控，以及訊息啟動。</span><span class="sxs-lookup"><span data-stu-id="9c590-134">The IIS hosting option is integrated with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] and uses the features these technologies offer, such as process recycling, idle shutdown, process health monitoring, and message-based activation.</span></span> <span data-ttu-id="9c590-135">在 [!INCLUDE[wxp](../../../includes/wxp-md.md)] 和 [!INCLUDE[ws2003](../../../includes/ws2003-md.md)] 作業系統中，建議您採用這個解決方案來裝載必須具備高度可用性與高度擴充性的 Web 服務應用程式。</span><span class="sxs-lookup"><span data-stu-id="9c590-135">On the [!INCLUDE[wxp](../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../includes/ws2003-md.md)] operating systems, this is the preferred solution for hosting Web service applications that must be highly available and highly scalable.</span></span> <span data-ttu-id="9c590-136">IIS 同時提供整合式管理功能，而這也是客戶希望從企業級伺服器產品中所得到的功能。</span><span class="sxs-lookup"><span data-stu-id="9c590-136">IIS also offers the integrated manageability that customers expect from an enterprise-class server product.</span></span> <span data-ttu-id="9c590-137">這個裝載選項要求必須正確設定 IIS，但不要求您將任何裝載程式碼撰寫為應用程式的一部分。</span><span class="sxs-lookup"><span data-stu-id="9c590-137">This hosting option requires that IIS be properly configured, but it does not require that any hosting code be written as part of the application.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="9c590-138"> 如何為 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務設定 IIS 裝載的詳細資訊，請參閱 [How to: Host a WCF Service in IIS](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span><span class="sxs-lookup"><span data-stu-id="9c590-138"> how to configure IIS hosting for a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service, see [How to: Host a WCF Service in IIS](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span></span>  
  
 <span data-ttu-id="9c590-139">請注意，IIS 裝載的服務只能使用 HTTP 傳輸。</span><span class="sxs-lookup"><span data-stu-id="9c590-139">Note that IIS-hosted services can only use the HTTP transport.</span></span> <span data-ttu-id="9c590-140">它在 IIS 5.1 版的實作方式已經為 [!INCLUDE[wxp](../../../includes/wxp-md.md)]帶來一些限制。</span><span class="sxs-lookup"><span data-stu-id="9c590-140">Its implementation in IIS 5.1 has introduced some limitations in [!INCLUDE[wxp](../../../includes/wxp-md.md)].</span></span> <span data-ttu-id="9c590-141">在 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 中，IIS 5.1 為 [!INCLUDE[wxp](../../../includes/wxp-md.md)] 服務所提供的訊息啟用會封鎖相同電腦上其他所有自我裝載的 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務，不讓這些服務使用連接埠 80 來進行通訊。</span><span class="sxs-lookup"><span data-stu-id="9c590-141">The message-based activation provided for an [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service by IIS 5.1 on [!INCLUDE[wxp](../../../includes/wxp-md.md)] blocks any other self-hosted [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service on the same computer from using port 80 to communicate.</span></span> <span data-ttu-id="9c590-142">在[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 中，當 [!INCLUDE[iis601](../../../includes/iis601-md.md)] 服務透過 [!INCLUDE[ws2003](../../../includes/ws2003-md.md)]來裝載時，可以在其他應用程式的相同的 AppDomain/應用程式集區/背景工作處理序中執行。</span><span class="sxs-lookup"><span data-stu-id="9c590-142">[!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services can run in the same AppDomain/Application Pool/Worker Process as other applications when hosted by [!INCLUDE[iis601](../../../includes/iis601-md.md)] on [!INCLUDE[ws2003](../../../includes/ws2003-md.md)].</span></span> <span data-ttu-id="9c590-143">但是由於 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 和 [!INCLUDE[iis601](../../../includes/iis601-md.md)] 都採用核心模式 HTTP 堆疊 (HTTP.sys)，因此 [!INCLUDE[iis601](../../../includes/iis601-md.md)] 可與其他在相同電腦上執行的自我裝載 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 服務共用連接埠 80 (如果是 IIS 5.1 就不能這麼做)。</span><span class="sxs-lookup"><span data-stu-id="9c590-143">But because [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] and [!INCLUDE[iis601](../../../includes/iis601-md.md)] both use the kernel-mode HTTP stack (HTTP.sys), [!INCLUDE[iis601](../../../includes/iis601-md.md)] can share port 80 with other self-hosted [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] services running on the same machine, unlike IIS 5.1.</span></span>  
  
#### <a name="windows-process-activation-service-was"></a><span data-ttu-id="9c590-144">Windows Process Activation Service (WAS)</span><span class="sxs-lookup"><span data-stu-id="9c590-144">Windows Process Activation Service (WAS)</span></span>  
 <span data-ttu-id="9c590-145">Windows Process Activation Service (WAS) 是 [!INCLUDE[lserver](../../../includes/lserver-md.md)] 上全新的處理序啟動機制 ( [!INCLUDE[wv](../../../includes/wv-md.md)]也提供此機制)。</span><span class="sxs-lookup"><span data-stu-id="9c590-145">Windows Process Activation Service (WAS) is the new process activation mechanism for the [!INCLUDE[lserver](../../../includes/lserver-md.md)] that is also available on [!INCLUDE[wv](../../../includes/wv-md.md)].</span></span> <span data-ttu-id="9c590-146">它包含熟悉的 [!INCLUDE[iis601](../../../includes/iis601-md.md)] 處理序模型 (應用程式集區和訊息處理序啟用) 和裝載功能 (例如，快速故障防護、健康狀態監控，與回收機制)，但是從啟用架構中移除對 HTTP 的相依性。</span><span class="sxs-lookup"><span data-stu-id="9c590-146">It retains the familiar [!INCLUDE[iis601](../../../includes/iis601-md.md)] process model (application pools and message-based process activation) and hosting features (such as rapid failure protection, health monitoring, and recycling), but it removes the dependency on HTTP from the activation architecture.</span></span> [!INCLUDE[iisver](../../../includes/iisver-md.md)]<span data-ttu-id="9c590-147"> 會使用 WAS，以完成透過 HTTP 的訊息啟用。</span><span class="sxs-lookup"><span data-stu-id="9c590-147"> uses WAS to accomplish message-based activation over HTTP.</span></span> <span data-ttu-id="9c590-148">其他 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 元件也可外掛至 WAS 以提供 [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] 所支援的其他通訊協定 (例如 TCP、MSMQ，與具名管道) 上的訊息啟動。</span><span class="sxs-lookup"><span data-stu-id="9c590-148">Additional [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] components also plug into WAS to provide message-based activation over the other protocols that [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] supports, such as TCP, MSMQ, and named pipes.</span></span> <span data-ttu-id="9c590-149">如此便可讓使用通訊協定的應用程式使用 IIS 功能，例如處理序回收、快速故障防護，以及只提供給以 HTTP 為基礎的應用程式使用的常見組態系統等。</span><span class="sxs-lookup"><span data-stu-id="9c590-149">This allows applications that use communication protocols to use the IIS features such as process recycling, rapid fail protection, and the common configuration system that were only available to HTTP-based applications.</span></span>  
  
 <span data-ttu-id="9c590-150">這個裝載選項要求必須正確設定 WAS，但不要求您將任何裝載程式碼撰寫為應用程式的一部分。</span><span class="sxs-lookup"><span data-stu-id="9c590-150">This hosting option requires that WAS be properly configured, but it does not require you to write any hosting code as part of the application.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="9c590-151"> 如何設定 WAS 裝載的詳細資訊，請參閱 [How to: Host a WCF Service in WAS](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md).</span><span class="sxs-lookup"><span data-stu-id="9c590-151"> how to configure WAS hosting, see [How to: Host a WCF Service in WAS](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md).</span></span>  
  
## <a name="choosing-a-hosting-environment"></a><span data-ttu-id="9c590-152">選擇裝載環境</span><span class="sxs-lookup"><span data-stu-id="9c590-152">Choosing a Hosting Environment</span></span>  
 <span data-ttu-id="9c590-153">下表將摘要說明一些與各個裝載選項相關的主要優點與案例。</span><span class="sxs-lookup"><span data-stu-id="9c590-153">The following table summarizes some of the key benefits and scenarios associated with each of the hosting options.</span></span>  
  
|<span data-ttu-id="9c590-154">裝載環境</span><span class="sxs-lookup"><span data-stu-id="9c590-154">Hosting Environment</span></span>|<span data-ttu-id="9c590-155">常見案例</span><span class="sxs-lookup"><span data-stu-id="9c590-155">Common Scenarios</span></span>|<span data-ttu-id="9c590-156">主要優點與限制</span><span class="sxs-lookup"><span data-stu-id="9c590-156">Key Benefits and Limitations</span></span>|  
|-------------------------|----------------------|----------------------------------|  
|<span data-ttu-id="9c590-157">Managed 應用程式 (「自我裝載」)</span><span class="sxs-lookup"><span data-stu-id="9c590-157">Managed Application ("Self-Hosted")</span></span>|<span data-ttu-id="9c590-158">在開發期間使用的主控台應用程式。</span><span class="sxs-lookup"><span data-stu-id="9c590-158">-   Console applications used during development.</span></span><br /><span data-ttu-id="9c590-159">豐富型 WinForm 和[!INCLUDE[avalon2](../../../includes/avalon2-md.md)]存取服務的用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="9c590-159">-   Rich WinForm and [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] client applications accessing services.</span></span>|<span data-ttu-id="9c590-160">-有彈性。</span><span class="sxs-lookup"><span data-stu-id="9c590-160">-   Flexible.</span></span><br /><span data-ttu-id="9c590-161">-容易部署。</span><span class="sxs-lookup"><span data-stu-id="9c590-161">-   Easy to deploy.</span></span><br /><span data-ttu-id="9c590-162">-不企業解決方案的服務。</span><span class="sxs-lookup"><span data-stu-id="9c590-162">-   Not an enterprise solution for services.</span></span>|  
|<span data-ttu-id="9c590-163">Windows 服務 (之前稱為 NT 服務)</span><span class="sxs-lookup"><span data-stu-id="9c590-163">Windows Services (formerly known as NT services)</span></span>|<span data-ttu-id="9c590-164">-長時間執行[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]IIS 外部裝載的服務。</span><span class="sxs-lookup"><span data-stu-id="9c590-164">-   A long-running [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service hosted outside of IIS.</span></span>|<span data-ttu-id="9c590-165">服務處理序存留期間由作業系統在非訊息啟動。</span><span class="sxs-lookup"><span data-stu-id="9c590-165">-   Service process lifetime controlled by the operating system, not message-activated.</span></span><br /><span data-ttu-id="9c590-166">支援所有版本的 Windows。</span><span class="sxs-lookup"><span data-stu-id="9c590-166">-   Supported by all versions of Windows.</span></span><br /><span data-ttu-id="9c590-167">安全的環境。</span><span class="sxs-lookup"><span data-stu-id="9c590-167">-   Secure environment.</span></span>|  
|<span data-ttu-id="9c590-168">IIS 5.1、 [!INCLUDE[iis601](../../../includes/iis601-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9c590-168">IIS 5.1, [!INCLUDE[iis601](../../../includes/iis601-md.md)]</span></span>|<span data-ttu-id="9c590-169">-執行[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]服務與並存[!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]透過 HTTP 通訊協定在網際網路上的內容。</span><span class="sxs-lookup"><span data-stu-id="9c590-169">-   Running a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service side-by-side with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] content on the Internet using the HTTP protocol.</span></span>|<span data-ttu-id="9c590-170">同處理序回收。</span><span class="sxs-lookup"><span data-stu-id="9c590-170">-   Process recycling.</span></span><br /><span data-ttu-id="9c590-171">-閒置關機。</span><span class="sxs-lookup"><span data-stu-id="9c590-171">-   Idle shutdown.</span></span><br /><span data-ttu-id="9c590-172">-處理狀況監控。</span><span class="sxs-lookup"><span data-stu-id="9c590-172">-   Process health monitoring.</span></span><br /><span data-ttu-id="9c590-173">訊息型啟用。</span><span class="sxs-lookup"><span data-stu-id="9c590-173">-   Message-based activation.</span></span><br /><span data-ttu-id="9c590-174">-僅限 HTTP。</span><span class="sxs-lookup"><span data-stu-id="9c590-174">-   HTTP only.</span></span>|  
|<span data-ttu-id="9c590-175">Windows Process Activation Service (WAS)</span><span class="sxs-lookup"><span data-stu-id="9c590-175">Windows Process Activation Service (WAS)</span></span>|<span data-ttu-id="9c590-176">-執行[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]服務使用不同的傳輸通訊協定在網際網路上未安裝 IIS。</span><span class="sxs-lookup"><span data-stu-id="9c590-176">-   Running a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service without installing IIS on the Internet using various transport protocols.</span></span>|<span data-ttu-id="9c590-177">不需要 IIS。</span><span class="sxs-lookup"><span data-stu-id="9c590-177">-   IIS is not required.</span></span><br /><span data-ttu-id="9c590-178">同處理序回收。</span><span class="sxs-lookup"><span data-stu-id="9c590-178">-   Process recycling.</span></span><br /><span data-ttu-id="9c590-179">-閒置關機。</span><span class="sxs-lookup"><span data-stu-id="9c590-179">-   Idle shutdown.</span></span><br /><span data-ttu-id="9c590-180">-處理狀況監控。</span><span class="sxs-lookup"><span data-stu-id="9c590-180">-   Process health monitoring.</span></span><br /><span data-ttu-id="9c590-181">訊息型啟用。</span><span class="sxs-lookup"><span data-stu-id="9c590-181">-   Message-based activation.</span></span><br /><span data-ttu-id="9c590-182">-使用 HTTP、 TCP、 具名的管道和 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="9c590-182">-   Works with HTTP, TCP, named pipes, and MSMQ.</span></span>|  
|<span data-ttu-id="9c590-183">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="9c590-183">IIS 7.0</span></span>|<span data-ttu-id="9c590-184">-執行[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]服務[!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]內容。</span><span class="sxs-lookup"><span data-stu-id="9c590-184">-   Running a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] content.</span></span><br /><span data-ttu-id="9c590-185">-執行[!INCLUDE[indigo2](../../../includes/indigo2-md.md)]使用各種不同的傳輸通訊協定在網際網路上的服務。</span><span class="sxs-lookup"><span data-stu-id="9c590-185">-   Running a [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] service on the Internet using various transport protocols.</span></span>|<span data-ttu-id="9c590-186">-已優點。</span><span class="sxs-lookup"><span data-stu-id="9c590-186">-   WAS benefits.</span></span><br /><span data-ttu-id="9c590-187">-整合與[!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]和 IIS 內容。</span><span class="sxs-lookup"><span data-stu-id="9c590-187">-   Integrated with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] and IIS content.</span></span>|  
  
 <span data-ttu-id="9c590-188">裝載環境的選擇取決於用來部署該環境的 Windows 版本、用來傳送訊息所需的傳輸，以及所需的處理序類型和應用程式定義域回收。</span><span class="sxs-lookup"><span data-stu-id="9c590-188">The choice of a hosting environment depends on the version of Windows on which it is deployed, the transports it requires to send messages and the type of process and application domain recycling it requires.</span></span> <span data-ttu-id="9c590-189">下表摘要說明與這些需求相關的資料。</span><span class="sxs-lookup"><span data-stu-id="9c590-189">The following table summarizes the data related to these requirements.</span></span>  
  
|<span data-ttu-id="9c590-190">裝載環境</span><span class="sxs-lookup"><span data-stu-id="9c590-190">Hosting Environment</span></span>|<span data-ttu-id="9c590-191">平台可用性</span><span class="sxs-lookup"><span data-stu-id="9c590-191">Platform Availability</span></span>|<span data-ttu-id="9c590-192">支援的傳輸</span><span class="sxs-lookup"><span data-stu-id="9c590-192">Transports Supported</span></span>|<span data-ttu-id="9c590-193">處理序和 AppDomain 回收</span><span class="sxs-lookup"><span data-stu-id="9c590-193">Process and AppDomain Recycling</span></span>|  
|-------------------------|---------------------------|--------------------------|-------------------------------------|  
|<span data-ttu-id="9c590-194">Managed 應用程式 (「自我裝載」)</span><span class="sxs-lookup"><span data-stu-id="9c590-194">Managed Applications ("Self-Hosted")</span></span>|[!INCLUDE[wxp](../../../includes/wxp-md.md)]<span data-ttu-id="9c590-195">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span><span class="sxs-lookup"><span data-stu-id="9c590-195">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span></span><br /><br /> [!INCLUDE[lserver](../../../includes/lserver-md.md)]|<span data-ttu-id="9c590-196">HTTP、</span><span class="sxs-lookup"><span data-stu-id="9c590-196">HTTP,</span></span><br /><br /> <span data-ttu-id="9c590-197">net.tcp、</span><span class="sxs-lookup"><span data-stu-id="9c590-197">net.tcp,</span></span><br /><br /> <span data-ttu-id="9c590-198">net.pipe、</span><span class="sxs-lookup"><span data-stu-id="9c590-198">net.pipe,</span></span><br /><br /> <span data-ttu-id="9c590-199">net.msmq</span><span class="sxs-lookup"><span data-stu-id="9c590-199">net.msmq</span></span>|<span data-ttu-id="9c590-200">否</span><span class="sxs-lookup"><span data-stu-id="9c590-200">No</span></span>|  
|<span data-ttu-id="9c590-201">Windows 服務 (之前稱為 NT 服務)</span><span class="sxs-lookup"><span data-stu-id="9c590-201">Windows Services (formerly known as NT services)</span></span>|[!INCLUDE[wxp](../../../includes/wxp-md.md)]<span data-ttu-id="9c590-202">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span><span class="sxs-lookup"><span data-stu-id="9c590-202">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span></span><br /><br /> [!INCLUDE[lserver](../../../includes/lserver-md.md)]|<span data-ttu-id="9c590-203">HTTP、</span><span class="sxs-lookup"><span data-stu-id="9c590-203">HTTP,</span></span><br /><br /> <span data-ttu-id="9c590-204">net.tcp、</span><span class="sxs-lookup"><span data-stu-id="9c590-204">net.tcp,</span></span><br /><br /> <span data-ttu-id="9c590-205">net.pipe、</span><span class="sxs-lookup"><span data-stu-id="9c590-205">net.pipe,</span></span><br /><br /> <span data-ttu-id="9c590-206">net.msmq</span><span class="sxs-lookup"><span data-stu-id="9c590-206">net.msmq</span></span>|<span data-ttu-id="9c590-207">否</span><span class="sxs-lookup"><span data-stu-id="9c590-207">No</span></span>|  
|<span data-ttu-id="9c590-208">IIS 5.1</span><span class="sxs-lookup"><span data-stu-id="9c590-208">IIS 5.1</span></span>|[!INCLUDE[wxp](../../../includes/wxp-md.md)]|<span data-ttu-id="9c590-209">HTTP</span><span class="sxs-lookup"><span data-stu-id="9c590-209">HTTP</span></span>|<span data-ttu-id="9c590-210">[是]</span><span class="sxs-lookup"><span data-stu-id="9c590-210">Yes</span></span>|  
|[!INCLUDE[iis601](../../../includes/iis601-md.md)]|[!INCLUDE[ws2003](../../../includes/ws2003-md.md)]|<span data-ttu-id="9c590-211">HTTP</span><span class="sxs-lookup"><span data-stu-id="9c590-211">HTTP</span></span>|<span data-ttu-id="9c590-212">[是]</span><span class="sxs-lookup"><span data-stu-id="9c590-212">Yes</span></span>|  
|<span data-ttu-id="9c590-213">Windows Process Activation Service (WAS)</span><span class="sxs-lookup"><span data-stu-id="9c590-213">Windows Process Activation Service (WAS)</span></span>|[!INCLUDE[wv](../../../includes/wv-md.md)]<span data-ttu-id="9c590-214">, [!INCLUDE[lserver](../../../includes/lserver-md.md)]</span><span class="sxs-lookup"><span data-stu-id="9c590-214">, [!INCLUDE[lserver](../../../includes/lserver-md.md)]</span></span>|<span data-ttu-id="9c590-215">HTTP、</span><span class="sxs-lookup"><span data-stu-id="9c590-215">HTTP,</span></span><br /><br /> <span data-ttu-id="9c590-216">net.tcp、</span><span class="sxs-lookup"><span data-stu-id="9c590-216">net.tcp,</span></span><br /><br /> <span data-ttu-id="9c590-217">net.pipe、</span><span class="sxs-lookup"><span data-stu-id="9c590-217">net.pipe,</span></span><br /><br /> <span data-ttu-id="9c590-218">net.msmq</span><span class="sxs-lookup"><span data-stu-id="9c590-218">net.msmq</span></span>|<span data-ttu-id="9c590-219">[是]</span><span class="sxs-lookup"><span data-stu-id="9c590-219">Yes</span></span>|  
  
 <span data-ttu-id="9c590-220">從未受信任的主機執行服務或任何延伸項目都會破壞安全性，這點請您務必注意。</span><span class="sxs-lookup"><span data-stu-id="9c590-220">It is important to note that running a service or any extension from an untrusted host compromises security.</span></span> <span data-ttu-id="9c590-221">同時，請注意當您開啟模擬下的 <xref:System.ServiceModel.ServiceHost> 時，應用程式必須確定使用者尚未登出，例如，藉由快取使用者的 <xref:System.Security.Principal.WindowsIdentity> 來判斷。</span><span class="sxs-lookup"><span data-stu-id="9c590-221">Also, note that when opening a <xref:System.ServiceModel.ServiceHost> under impersonation, an application must ensure that the user is not logged off, for example by caching the <xref:System.Security.Principal.WindowsIdentity> of the user.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="9c590-222">請參閱</span><span class="sxs-lookup"><span data-stu-id="9c590-222">See Also</span></span>  
 [<span data-ttu-id="9c590-223">系統需求</span><span class="sxs-lookup"><span data-stu-id="9c590-223">System Requirements</span></span>](../../../docs/framework/wcf/wcf-system-requirements.md)  
 [<span data-ttu-id="9c590-224">基本程式設計週期</span><span class="sxs-lookup"><span data-stu-id="9c590-224">Basic Programming Lifecycle</span></span>](../../../docs/framework/wcf/basic-programming-lifecycle.md)  
 [<span data-ttu-id="9c590-225">履行服務合約</span><span class="sxs-lookup"><span data-stu-id="9c590-225">Implementing Service Contracts</span></span>](../../../docs/framework/wcf/implementing-service-contracts.md)  
 [<span data-ttu-id="9c590-226">如何：在 IIS 中裝載 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="9c590-226">How to: Host a WCF Service in IIS</span></span>](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)  
 [<span data-ttu-id="9c590-227">如何：在 WAS 中裝載 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="9c590-227">How to: Host a WCF Service in WAS</span></span>](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md)  
 [<span data-ttu-id="9c590-228">如何：在 Managed Windows 服務中裝載 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="9c590-228">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)  
 [<span data-ttu-id="9c590-229">如何：於受管理的應用程式中裝載 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="9c590-229">How to: Host a WCF Service in a Managed Application</span></span>](../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md)
