---
title: HOW TO：建立 Windows Communication Foundation 用戶端
ms.date: 03/30/2017
helpviewer_keywords:
- clients [WCF], running
- WCF clients [WCF], running
ms.assetid: a67884cc-1c4b-416b-8c96-5c954099f19f
ms.openlocfilehash: 9e6d75bf8911a3c36e63b3bc108faae823434d1d
ms.sourcegitcommit: c7f3e2e9d6ead6cc3acd0d66b10a251d0c66e59d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/08/2018
ms.locfileid: "44221645"
---
# <a name="how-to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="d7654-102">HOW TO：建立 Windows Communication Foundation 用戶端</span><span class="sxs-lookup"><span data-stu-id="d7654-102">How to: Create a Windows Communication Foundation Client</span></span>

<span data-ttu-id="d7654-103">這是建立 Windows Communication Foundation (WCF) 應用程式所需的六個工作的第四個。</span><span class="sxs-lookup"><span data-stu-id="d7654-103">This is the fourth of six tasks required to create a Windows Communication Foundation (WCF) application.</span></span> <span data-ttu-id="d7654-104">如需這六個工作的概觀，請參閱[使用者入門教學課程](../../../docs/framework/wcf/getting-started-tutorial.md)主題。</span><span class="sxs-lookup"><span data-stu-id="d7654-104">For an overview of all six of the tasks, see the [Getting Started Tutorial](../../../docs/framework/wcf/getting-started-tutorial.md) topic.</span></span>

<span data-ttu-id="d7654-105">本主題描述如何從 WCF 服務擷取中繼資料，並使用它來建立 WCF proxy 以存取服務。</span><span class="sxs-lookup"><span data-stu-id="d7654-105">This topic describes how to retrieve metadata from a WCF service and use it to create a WCF proxy that can access the service.</span></span> <span data-ttu-id="d7654-106">這個工作是使用 Visual Studio 提供的 [加入服務參考] 功能來完成。</span><span class="sxs-lookup"><span data-stu-id="d7654-106">This task is completed by using the Add Service Reference functionality provided by Visual Studio .</span></span> <span data-ttu-id="d7654-107">這個工具會從服務的 MEX 端點取得中繼資料，並以您所選擇的語言 (預設為 C#) 產生用戶端 Proxy 的 Managed 原始程式碼檔。</span><span class="sxs-lookup"><span data-stu-id="d7654-107">This tool obtains the metadata from the service’s MEX endpoint and generates a managed source code file for a client proxy in the language you have chosen (C# by default).</span></span> <span data-ttu-id="d7654-108">除了建立用戶端 Proxy，此工具也會建立或更新用戶端的組態檔，讓用戶端應用程式在其中一個端點與服務連線。</span><span class="sxs-lookup"><span data-stu-id="d7654-108">In addition to creating the client proxy, the tool also creates or updates the client configuration file which enables the client application to connect to the service at one of its endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="d7654-109">您也可以使用[ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)工具來產生 proxy 類別和組態，而不使用 Visual studio 的 加入服務參考。</span><span class="sxs-lookup"><span data-stu-id="d7654-109">You can also use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool to generate the proxy class and configuration instead of using Add Service Reference inside of Visual Studio.</span></span>

> [!WARNING]
> <span data-ttu-id="d7654-110">從類別庫專案中呼叫 WCF 服務時[!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)]您可以使用 「 加入服務參考 」 功能來自動產生 proxy 和相關聯的組態檔。</span><span class="sxs-lookup"><span data-stu-id="d7654-110">When calling a WCF service from a class library project in [!INCLUDE[vs_current_long](../../../includes/vs-current-long-md.md)] you can use the Add Service Reference feature to automatically generate a proxy and associated configuration file.</span></span>  <span data-ttu-id="d7654-111">類別庫專案將不會使用組態檔。</span><span class="sxs-lookup"><span data-stu-id="d7654-111">The configuration file will not be used by the class library project.</span></span> <span data-ttu-id="d7654-112">您必須將所產生組態檔中的設定加入至將會呼叫類別庫之可執行檔的 app.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="d7654-112">You will need to add the settings in the generated configuration file to the app.config file for the executable that will call the class library.</span></span>

 <span data-ttu-id="d7654-113">用戶端應用程式會使用產生的 Proxy 類別來建立與服務通訊的用戶端。</span><span class="sxs-lookup"><span data-stu-id="d7654-113">The client application uses the generated proxy class to communicate with the service.</span></span> <span data-ttu-id="d7654-114">此程序所述[如何： 使用用戶端](../../../docs/framework/wcf/how-to-use-a-wcf-client.md)。</span><span class="sxs-lookup"><span data-stu-id="d7654-114">This procedure is described in [How to: Use a Client](../../../docs/framework/wcf/how-to-use-a-wcf-client.md).</span></span>

## <a name="to-create-a-windows-communication-foundation-client"></a><span data-ttu-id="d7654-115">若要建立 Windows Communication Foundation 用戶端</span><span class="sxs-lookup"><span data-stu-id="d7654-115">To create a Windows Communication Foundation client</span></span>

1.  <span data-ttu-id="d7654-116">以滑鼠右鍵按一下 [快速入門] 方案，選取建立新的主控台應用程式專案**新增**，**新的專案**。</span><span class="sxs-lookup"><span data-stu-id="d7654-116">Create a new console application project by right-clicking on the Getting Started solution, selecting, **Add**, **New Project**.</span></span> <span data-ttu-id="d7654-117">在 [新增專案] 對話方塊的左側，選取 [C#] 或 [VB] 下方的 [Windows]。</span><span class="sxs-lookup"><span data-stu-id="d7654-117">In the **Add New Project** dialog on the left hand side of the dialog select **Windows** under **C#** or **VB**.</span></span> <span data-ttu-id="d7654-118">在對話方塊的中間區段中選取 [主控台應用程式]。</span><span class="sxs-lookup"><span data-stu-id="d7654-118">In the center section of the dialog select **Console Application**.</span></span> <span data-ttu-id="d7654-119">將專案命名為 `GettingStartedClient`。</span><span class="sxs-lookup"><span data-stu-id="d7654-119">Name the project `GettingStartedClient`.</span></span>

2.  <span data-ttu-id="d7654-120">Gettingstartedclient 專案的目標 framework 設定為.NET Framework 4.5，以滑鼠右鍵按一下**GettingStartedClient**方案總管 中，然後選取**屬性**。</span><span class="sxs-lookup"><span data-stu-id="d7654-120">Set the target framework of the GettingStartedClient project to .NET Framework 4.5 by right clicking on **GettingStartedClient** in the Solution Explorer and selecting **Properties**.</span></span> <span data-ttu-id="d7654-121">在標示 [目標 Framework] 的下拉式方塊中選取 [.NET Framework 4.5]。</span><span class="sxs-lookup"><span data-stu-id="d7654-121">In the dropdown box labeled **Target Framework** select **.NET Framework 4.5**.</span></span> <span data-ttu-id="d7654-122">設定目標 framework VB 專案有點不同，請在 GettingStartedClient 專案屬性對話方塊中，按一下**編譯**左手邊的畫面中，索引標籤，然後按一下**進階編譯選項**在對話方塊的左下角的按鈕。</span><span class="sxs-lookup"><span data-stu-id="d7654-122">Setting the target framework for a VB project is a little different, in the GettingStartedClient project properties dialog, click the **Compile** tab on the left-hand side of the screen, and then click the **Advanced Compile Options** button at the lower left-hand corner of the dialog.</span></span> <span data-ttu-id="d7654-123">接著在標籤為 [目標 Framework] 的下拉式方塊中選取 [.NET Framework 4.5]。</span><span class="sxs-lookup"><span data-stu-id="d7654-123">Then select **.NET Framework 4.5** in the dropdown box labeled **Target Framework**.</span></span>

     <span data-ttu-id="d7654-124">設定目標 framework 會導致 Visual Studio 2011 重新載入該方案中，按下**確定**出現提示時。</span><span class="sxs-lookup"><span data-stu-id="d7654-124">Setting the target framework will cause Visual Studio 2011 to reload the solution, press **OK** when prompted.</span></span>

3.  <span data-ttu-id="d7654-125">將 System.ServiceModel 的參考新增至 [gettingstartedclient] 專案中，以滑鼠右鍵按一下**參考**在 [方案總管]，然後選取 [gettingstartedclient] 專案下的資料夾**新增**參考。</span><span class="sxs-lookup"><span data-stu-id="d7654-125">Add a reference to System.ServiceModel to the GettingStartedClient project by right-clicking the **Reference** folder under the GettingStartedClient project in Solution Explorer and select **Add** Reference.</span></span> <span data-ttu-id="d7654-126">在 [新增參考] 對話方塊中，選取對話方塊左側的 [Framework]。</span><span class="sxs-lookup"><span data-stu-id="d7654-126">In the **Add Reference** dialog select **Framework** on the left-hand side of the dialog.</span></span> <span data-ttu-id="d7654-127">在 [搜尋組件] 文字方塊中輸入 `System.ServiceModel`。</span><span class="sxs-lookup"><span data-stu-id="d7654-127">In the Search Assemblies textbox, type in `System.ServiceModel`.</span></span> <span data-ttu-id="d7654-128">在對話方塊中間區段中選取 [System.ServiceModel]，按一下 [新增] 按鈕，然後按一下 [關閉] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="d7654-128">In the center section of the dialog select **System.ServiceModel**, click the **Add** button, and click the **Close** button.</span></span> <span data-ttu-id="d7654-129">按一下以儲存方案**全部儲存**主功能表下的按鈕。</span><span class="sxs-lookup"><span data-stu-id="d7654-129">Save the solution by clicking the **Save All** button below the main menu.</span></span>

4.  <span data-ttu-id="d7654-130">接下來，您會新增至計算機服務的服務參考。</span><span class="sxs-lookup"><span data-stu-id="d7654-130">Next you add a service reference to the Calculator Service.</span></span> <span data-ttu-id="d7654-131">您必須先啟動 GettingStartedHost 主控台應用程式，才能執行此作業。</span><span class="sxs-lookup"><span data-stu-id="d7654-131">Before you can do that, you must start up the GettingStartedHost console application.</span></span> <span data-ttu-id="d7654-132">一旦主機正在執行，以滑鼠右鍵按一下**參考**中 [gettingstartedclient] 專案下的資料夾**方案總管**，然後選取**新增** >  **服務參考**。</span><span class="sxs-lookup"><span data-stu-id="d7654-132">Once the host is running, right-click the **References** folder under the GettingStartedClient project in **Solution Explorer** and select **Add** > **Service Reference**.</span></span> <span data-ttu-id="d7654-133">在下列 URL 中的 [位址] 方塊中的型別**加入服務參考** 對話方塊： [ http://localhost:8000/ServiceModelSamples/Service ](http://localhost:8000/ServiceModelSamples/Service) ，按一下 [**移**] 按鈕。</span><span class="sxs-lookup"><span data-stu-id="d7654-133">Type in the following URL in the address box of the **Add Service Reference** dialog:  [http://localhost:8000/ServiceModelSamples/Service](http://localhost:8000/ServiceModelSamples/Service) and click the **Go** button.</span></span> <span data-ttu-id="d7654-134">CalculatorService 接著應該顯示在 [服務] 清單中。</span><span class="sxs-lookup"><span data-stu-id="d7654-134">The CalculatorService should then be displayed in the Services list box.</span></span> <span data-ttu-id="d7654-135">按兩下 CalculatorService，它會展開並顯示服務所實作的服務合約。</span><span class="sxs-lookup"><span data-stu-id="d7654-135">Double-click CalculatorService and it will expand and show the service contracts implemented by the service.</span></span> <span data-ttu-id="d7654-136">保留預設命名空間，並按一下**確定** 按鈕。</span><span class="sxs-lookup"><span data-stu-id="d7654-136">Leave the default namespace as is and click the **OK** button.</span></span>

     <span data-ttu-id="d7654-137">當您使用 Visual Studio 加入服務的參考時，新項目將會在 [方案總管] 中 [GettingStartedClient] 專案底下的 [服務參考] 資料夾下方出現。</span><span class="sxs-lookup"><span data-stu-id="d7654-137">When you add a reference to a service using Visual Studio a new item will appear in the Solution Explorer under the Service References folder under the GettingStartedClient project.</span></span>  <span data-ttu-id="d7654-138">如果您使用[ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)工具將產生的原始程式碼檔和 app.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="d7654-138">If you use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) tool a source code file and app.config file will be generated.</span></span>

     <span data-ttu-id="d7654-139">您也可以使用命令列工具[ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)搭配適當的參數，來建立用戶端程式碼。</span><span class="sxs-lookup"><span data-stu-id="d7654-139">You can also use the command-line tool [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) with the appropriate switches to create the client code.</span></span> <span data-ttu-id="d7654-140">下列範例會產生服務的程式碼檔案與組態檔。</span><span class="sxs-lookup"><span data-stu-id="d7654-140">The following example generates a code file and a configuration file for the service.</span></span> <span data-ttu-id="d7654-141">第一個範例示範如何在 VB 中產生 Proxy，第二個範例示範如何在 C# 中產生 Proxy：</span><span class="sxs-lookup"><span data-stu-id="d7654-141">The first example shows how to generate the proxy in VB and the second shows how to generated the proxy in C#:</span></span>

    ```
    svcutil.exe /language:vb /out:generatedProxy.vb /config:app.config http://localhost:8000/ServiceModelSamples/service
    ```

    ```csharp
    svcutil.exe /language:cs /out:generatedProxy.cs /config:app.config http://localhost:8000/ServiceModelSamples/service
    ```

 <span data-ttu-id="d7654-142">現在您已建立用戶端應用程式將用來呼叫計算機服務的 Proxy。</span><span class="sxs-lookup"><span data-stu-id="d7654-142">You have now created the proxy that the client application will use to call the calculator service.</span></span> <span data-ttu-id="d7654-143">請繼續進行系列中的下一個主題： [How to： 設定用戶端](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)</span><span class="sxs-lookup"><span data-stu-id="d7654-143">Proceed to the next topic in the series: [How to: Configure a Client](../../../docs/framework/wcf/how-to-configure-a-basic-wcf-client.md)</span></span>

## <a name="see-also"></a><span data-ttu-id="d7654-144">另請參閱</span><span class="sxs-lookup"><span data-stu-id="d7654-144">See Also</span></span>

- [<span data-ttu-id="d7654-145">ServiceModel 中繼資料公用程式工具 (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="d7654-145">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
- [<span data-ttu-id="d7654-146">快速入門</span><span class="sxs-lookup"><span data-stu-id="d7654-146">Getting Started</span></span>](../../../docs/framework/wcf/samples/getting-started-sample.md)
- [<span data-ttu-id="d7654-147">自我裝載</span><span class="sxs-lookup"><span data-stu-id="d7654-147">Self-Host</span></span>](../../../docs/framework/wcf/samples/self-host.md)
- [<span data-ttu-id="d7654-148">如何：使用組態檔發行服務的中繼資料</span><span class="sxs-lookup"><span data-stu-id="d7654-148">How to: Publish Metadata for a Service Using a Configuration File</span></span>](../../../docs/framework/wcf/feature-details/how-to-publish-metadata-for-a-service-using-a-configuration-file.md)
- [<span data-ttu-id="d7654-149">如何：使用 Svcutil.exe 來下載中繼資料文件</span><span class="sxs-lookup"><span data-stu-id="d7654-149">How to: Use Svcutil.exe to Download Metadata Documents</span></span>](../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-download-metadata-documents.md)
