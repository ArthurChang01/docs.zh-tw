---
title: 使用 Windows 通信基礎教程對入門進行故障排除
ms.date: 01/25/2019
ms.assetid: 69a21511-0871-4c41-9a53-93110e84d7fd
ms.openlocfilehash: 92e986370fe1b6e067d9f8aebc73179c1ac6a20f
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/12/2020
ms.locfileid: "79183096"
---
# <a name="troubleshoot-the-get-started-with-windows-communication-foundation-tutorials"></a><span data-ttu-id="56de8-102">使用 Windows 通信基礎教程對入門進行故障排除</span><span class="sxs-lookup"><span data-stu-id="56de8-102">Troubleshoot the Get started with Windows Communication Foundation tutorials</span></span>

<span data-ttu-id="56de8-103">本文提供了解決方案，解決在按照[教程中的步驟：開始使用 Windows 通信基礎應用程式](getting-started-tutorial.md)時可能面臨的最常見問題和錯誤。</span><span class="sxs-lookup"><span data-stu-id="56de8-103">This article provides solutions for the most common problems and errors you might face when you follow the steps in the [Tutorial: Get started with Windows Communication Foundation applications](getting-started-tutorial.md).</span></span>
  
## <a name="common-problems"></a><span data-ttu-id="56de8-104">常見問題</span><span class="sxs-lookup"><span data-stu-id="56de8-104">Common problems</span></span>

<span data-ttu-id="56de8-105">**我在硬碟上找不到專案檔案。**</span><span class="sxs-lookup"><span data-stu-id="56de8-105">**I can't find the project files on my hard drive.**</span></span>

 <span data-ttu-id="56de8-106">Visual Studio 將專案檔案保存在*C：\使用者\\&lt;使用者名&gt;[源]存儲庫*中。</span><span class="sxs-lookup"><span data-stu-id="56de8-106">Visual Studio saves project files in *C:\Users\\&lt;user name&gt;\source\repos*.</span></span>  

<span data-ttu-id="56de8-107">**我找不到*Svcutil.exe*生成的*App.config*檔。**</span><span class="sxs-lookup"><span data-stu-id="56de8-107">**I can't find the *App.config* file generated by *Svcutil.exe*.**</span></span>

 <span data-ttu-id="56de8-108">在 Visual Studio 中，"**添加現有專案"** 視窗預設僅顯示具有以下副檔名的檔：</span><span class="sxs-lookup"><span data-stu-id="56de8-108">In Visual Studio, the **Add Existing Item** window only displays files with the following extensions by default:</span></span>

- <span data-ttu-id="56de8-109">*.cs*</span><span class="sxs-lookup"><span data-stu-id="56de8-109">*.cs*</span></span>
- <span data-ttu-id="56de8-110">*.resx*</span><span class="sxs-lookup"><span data-stu-id="56de8-110">*.resx*</span></span>
- <span data-ttu-id="56de8-111">*.設置*</span><span class="sxs-lookup"><span data-stu-id="56de8-111">*.settings*</span></span>
- <span data-ttu-id="56de8-112">*.xsd*</span><span class="sxs-lookup"><span data-stu-id="56de8-112">*.xsd*</span></span>
- <span data-ttu-id="56de8-113">*.wsdl*</span><span class="sxs-lookup"><span data-stu-id="56de8-113">*.wsdl*</span></span>

<span data-ttu-id="56de8-114">要顯示所有檔案類型，請在 **"添加現有專案**"視窗右下角的下拉清單中選擇 \*\*"所有檔 "（.）。\* \* \*\*</span><span class="sxs-lookup"><span data-stu-id="56de8-114">To display all file types, select **All Files (\*.\*)** in the drop-down list in the lower-right corner of the **Add Existing Item** window.</span></span>  
  
## <a name="common-errors"></a><span data-ttu-id="56de8-115">常見錯誤</span><span class="sxs-lookup"><span data-stu-id="56de8-115">Common errors</span></span>

### <a name="compile-the-service-application"></a><span data-ttu-id="56de8-116">編譯服務應用程式</span><span class="sxs-lookup"><span data-stu-id="56de8-116">Compile the service application</span></span>

<span data-ttu-id="56de8-117">**在"入門主機.模組1"中未找到錯誤 BC30420"子主"。**</span><span class="sxs-lookup"><span data-stu-id="56de8-117">**Error BC30420 'Sub Main' was not found in 'GettingStartedHost.Module1'.**</span></span>

<span data-ttu-id="56de8-118">對於視覺化基本應用程式，進入點不正確。</span><span class="sxs-lookup"><span data-stu-id="56de8-118">The entry point is incorrect for the Visual Basic application.</span></span> <span data-ttu-id="56de8-119">進行以下更改：</span><span class="sxs-lookup"><span data-stu-id="56de8-119">Make the following change:</span></span>

   1. <span data-ttu-id="56de8-120">在 **"解決方案資源管理器"** 視窗中，選擇 **"入門主機"** 資料夾，然後從快顯功能表中選擇 **"屬性**"。</span><span class="sxs-lookup"><span data-stu-id="56de8-120">In the **Solution Explorer** window, select the **GettingStartedHost** folder, and then select **Properties** from the shortcut menu.</span></span>
    <span data-ttu-id="56de8-121">a.</span><span class="sxs-lookup"><span data-stu-id="56de8-121">a.</span></span> <span data-ttu-id="56de8-122">在 **"入門主機"** 視窗中，對於**啟始物件**，從清單中選擇 **"服務.程式**"（或特定應用程式的進入點）。</span><span class="sxs-lookup"><span data-stu-id="56de8-122">In the **GettingStartedHost** window, for **Startup object**, select **Service.Program** (or the entry point for your particular application) from the list.</span></span>
    <span data-ttu-id="56de8-123">b.</span><span class="sxs-lookup"><span data-stu-id="56de8-123">b.</span></span> <span data-ttu-id="56de8-124">從主功能表中，選擇 **"全部保存檔** > **Save All**"。</span><span class="sxs-lookup"><span data-stu-id="56de8-124">From the main menu, select **File** > **Save All**.</span></span>

### <a name="run-the-service-application"></a><span data-ttu-id="56de8-125">運行服務應用程式</span><span class="sxs-lookup"><span data-stu-id="56de8-125">Run the service application</span></span>

<span data-ttu-id="56de8-126">**HTTP 無法註冊 URL "HTTP：\//：8000/入門/計算機服務"。您的進程沒有對此命名空間的存取權限。**</span><span class="sxs-lookup"><span data-stu-id="56de8-126">**HTTP could not register URL 'http:\//+:8000/GettingStarted/CalculatorService'. Your process does not have access rights to this namespace.**</span></span>

 <span data-ttu-id="56de8-127">要獲得適當的存取權限，可以啟動託管具有管理許可權的 Windows 通信基礎 （WCF） 服務的過程：</span><span class="sxs-lookup"><span data-stu-id="56de8-127">For proper access, start the process hosting the Windows Communication Foundation (WCF) service with administrative privileges:</span></span>

- <span data-ttu-id="56de8-128">對於視覺化工作室：在 **"開始"** 功能表中選擇"視覺工作室"程式，然後從快顯功能表中選擇 **"以管理員** > **身份運行**更多"。</span><span class="sxs-lookup"><span data-stu-id="56de8-128">For Visual Studio: Select the Visual Studio program in the **Start** menu, and then select **More** > **Run as administrator** from the shortcut menu.</span></span>
- <span data-ttu-id="56de8-129">對於主控台視窗：在 **"開始"** 功能表中選擇 **"命令提示"，** 然後從快顯功能表中選擇 **"以** > **管理員身份運行**更多"。</span><span class="sxs-lookup"><span data-stu-id="56de8-129">For a console window: Select **Command Prompt** in the **Start** menu, and then select **More** > **Run As administrator** from the shortcut menu.</span></span>
- <span data-ttu-id="56de8-130">對於 Windows 資源管理器：選擇可執行檔，然後從快顯功能表中選擇 **"以管理員身份運行**"。</span><span class="sxs-lookup"><span data-stu-id="56de8-130">For Windows Explorer: Select the executable, and then select **Run as administrator** from the shortcut menu.</span></span>

### <a name="compile-the-client-application"></a><span data-ttu-id="56de8-131">編譯用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="56de8-131">Compile the client application</span></span>

<span data-ttu-id="56de8-132">**"計算機用戶端"，不包含"方法名稱>"\<的定義，並且找不到接受類型為"計算機用戶端\<"的第一個參數的擴充方法"方法名稱>"（您是否缺少使用指令或程式集引用？**</span><span class="sxs-lookup"><span data-stu-id="56de8-132">**'CalculatorClient', does not contain a definition for '\<method name>' and no extension method '\<method name>' accepting a first argument of type 'CalculatorClient' could be found (are you missing a using directive or an assembly reference?)**</span></span>  

<span data-ttu-id="56de8-133">只有使用`ServiceOperationAttribute`屬性標記的方法才會公開。</span><span class="sxs-lookup"><span data-stu-id="56de8-133">Only those methods that you mark with the `ServiceOperationAttribute` attribute are publically exposed.</span></span> <span data-ttu-id="56de8-134">如果在`ICalculator`介面中的方法省略`ServiceOperationAttribute`該屬性，則會在編譯期間收到此錯誤訊息。</span><span class="sxs-lookup"><span data-stu-id="56de8-134">If you omit the `ServiceOperationAttribute` attribute from a method in the `ICalculator` interface, you receive this error message during compilation.</span></span>  

<span data-ttu-id="56de8-135">**找不到類型或命名空間名稱"計算機用戶端"（您是否缺少 using 指令或程式集引用？**</span><span class="sxs-lookup"><span data-stu-id="56de8-135">**The type or namespace name 'CalculatorClient' could not be found (are you missing a using directive or an assembly reference?)**</span></span>

 <span data-ttu-id="56de8-136">如果在使用*Svcutil.exe*工具生成*generatedProxy.cs（* 或*生成的Proxy.vb）* 檔時，未將這些檔添加到用戶端專案中，則收到此錯誤。</span><span class="sxs-lookup"><span data-stu-id="56de8-136">You receive this error if you don't add the *generatedProxy.cs* (or *generatedProxy.vb*) file to your client project when you generated them with the *Svcutil.exe* tool.</span></span>  

### <a name="run-the-client-application"></a><span data-ttu-id="56de8-137">運行用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="56de8-137">Run the client application</span></span>

<span data-ttu-id="56de8-138">**未處理異常：系統.服務模型.終結點未找到異常：無法連接到"HTTP：/\/本地主機：8000/入門/計算機服務"。TCP 錯誤代碼 10061：由於目的電腦主動拒絕，因此無法進行連接。**</span><span class="sxs-lookup"><span data-stu-id="56de8-138">**Unhandled Exception: System.ServiceModel.EndpointNotFoundException: Could not connect to 'http:\//localhost:8000/GettingStarted/CalculatorService'. TCP error code 10061: No connection could be made because the target machine actively refused it.**</span></span>

<span data-ttu-id="56de8-139">如果在未初次開機服務的情況下運行用戶端應用程式，則會發生此錯誤。</span><span class="sxs-lookup"><span data-stu-id="56de8-139">This error occurs if you run the client application without first starting the service.</span></span> <span data-ttu-id="56de8-140">首先，運行主機應用程式以啟動服務，然後運行用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="56de8-140">First, run the host application to start the service, and then run the client application.</span></span>

### <a name="use-the-svcutilexe-tool"></a><span data-ttu-id="56de8-141">使用 Svcutil.exe 工具</span><span class="sxs-lookup"><span data-stu-id="56de8-141">Use the Svcutil.exe tool</span></span>

<span data-ttu-id="56de8-142">**"Svcutil"不被識別為內部或外部命令、可操作程式或批次檔。**</span><span class="sxs-lookup"><span data-stu-id="56de8-142">**'Svcutil' is not recognized as an internal or external command, operable program, or batch file.**</span></span>

 <span data-ttu-id="56de8-143">*Svcutil.exe*必須位於系統路徑中。</span><span class="sxs-lookup"><span data-stu-id="56de8-143">*Svcutil.exe* must be in the system path.</span></span> <span data-ttu-id="56de8-144">最簡單的解決方案是使用 Visual Studio 命令提示符。</span><span class="sxs-lookup"><span data-stu-id="56de8-144">The easiest solution is to use the Visual Studio command prompt.</span></span> <span data-ttu-id="56de8-145">在 **"開始"** 功能表中，選擇 **"\<視覺工作室"版本>** 目錄，然後選擇 **"開發人員\<命令提示">。**</span><span class="sxs-lookup"><span data-stu-id="56de8-145">From the **Start** menu, select the **Visual Studio \<version>** directory, then select **Developer Command Prompt for VS \<version>**.</span></span> <span data-ttu-id="56de8-146">此命令提示符將系統路徑設置到作為 Visual Studio 一部分提供的所有工具的正確位置。</span><span class="sxs-lookup"><span data-stu-id="56de8-146">This command prompt sets the system path to the correct locations for all tools shipped as part of Visual Studio.</span></span>  
  
### <a name="run-the-service-and-client-applications"></a><span data-ttu-id="56de8-147">運行服務和用戶端應用程式</span><span class="sxs-lookup"><span data-stu-id="56de8-147">Run the service and client applications</span></span>

<span data-ttu-id="56de8-148">**系統.服務模型.安全.安全協商例外：SOAP 安全協商與目標的"HTTP：/localhost：8000/\/入門/計算機服務"的目標"HTTP：/localhost：8000/\/入門/計算機服務"失敗**</span><span class="sxs-lookup"><span data-stu-id="56de8-148">**System.ServiceModel.Security.SecurityNegotiationException: SOAP security negotiation with 'http:\//localhost:8000/GettingStarted/CalculatorService' for target 'http:\//localhost:8000/GettingStarted/CalculatorService' failed**</span></span>  

<span data-ttu-id="56de8-149">此錯誤發生在沒有網路連接的域加入電腦上。</span><span class="sxs-lookup"><span data-stu-id="56de8-149">This error occurs on a domain-joined computer that doesn't have network connectivity.</span></span> <span data-ttu-id="56de8-150">將電腦連接到網路或關閉服務和用戶端的安全性。</span><span class="sxs-lookup"><span data-stu-id="56de8-150">Connect your computer to the network or turn off security for both the service and the client.</span></span>

<span data-ttu-id="56de8-151">要關閉安全性：</span><span class="sxs-lookup"><span data-stu-id="56de8-151">To turn off security:</span></span>

- <span data-ttu-id="56de8-152">對於服務，用以下代碼替換創建`WSHttpBinding`的代碼：</span><span class="sxs-lookup"><span data-stu-id="56de8-152">For the service, replace the code that creates the `WSHttpBinding` with the following code:</span></span>  
  
    ```csharp
    // Step 3: Add a service endpoint.
    selfhost.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(SecurityMode.None), "CalculatorService");  
    ```

- <span data-ttu-id="56de8-153">對於用戶端，在設定檔中，在**\<綁定>** 元素下更新**\<安全>** 元素，如下所示：</span><span class="sxs-lookup"><span data-stu-id="56de8-153">For the client, in the configuration file, update the **\<security>** element under the **\<binding>** element as follows:</span></span>  
  
    ```xml
    <binding name="WSHttpBinding_ICalculator" security mode="None" />
    ```  

## <a name="see-also"></a><span data-ttu-id="56de8-154">另請參閱</span><span class="sxs-lookup"><span data-stu-id="56de8-154">See also</span></span>  
 [<span data-ttu-id="56de8-155">開始使用 WCF 應用程式</span><span class="sxs-lookup"><span data-stu-id="56de8-155">Get started with WCF applications</span></span>](getting-started-tutorial.md)  
 [<span data-ttu-id="56de8-156">WCF 故障排除快速入門</span><span class="sxs-lookup"><span data-stu-id="56de8-156">WCF troubleshooting quickstart</span></span>](wcf-troubleshooting-quickstart.md)  
 [<span data-ttu-id="56de8-157">排除設置問題</span><span class="sxs-lookup"><span data-stu-id="56de8-157">Troubleshooting setup issues</span></span>](troubleshooting-setup-issues.md)
