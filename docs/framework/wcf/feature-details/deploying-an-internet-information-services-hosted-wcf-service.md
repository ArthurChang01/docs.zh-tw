---
title: 部署已裝載網際網路資訊服務的 WCF 服務
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: 99ed9ce5304717073057f6712a2b96d910d43bea
ms.sourcegitcommit: 213292dfbb0c37d83f62709959ff55c50af5560d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/25/2018
ms.locfileid: "47170174"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="b848c-102">部署已裝載網際網路資訊服務的 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="b848c-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>

<span data-ttu-id="b848c-103">開發和部署裝載在網際網路資訊服務 (IIS) 中的 Windows Communication Foundation (WCF) 服務包含下列工作：</span><span class="sxs-lookup"><span data-stu-id="b848c-103">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>

- <span data-ttu-id="b848c-104">確定，IIS、 ASP.NET、 WCF 及 WCF 啟用元件已正確安裝並註冊。</span><span class="sxs-lookup"><span data-stu-id="b848c-104">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>

- <span data-ttu-id="b848c-105">建立新的 IIS 應用程式，或重複使用現有的 ASP.NET 應用程式。</span><span class="sxs-lookup"><span data-stu-id="b848c-105">Create a new IIS application, or reuse an existing ASP.NET application.</span></span>

- <span data-ttu-id="b848c-106">建立 WCF 服務.svc 檔案。</span><span class="sxs-lookup"><span data-stu-id="b848c-106">Create a .svc file for the WCF service.</span></span>

- <span data-ttu-id="b848c-107">將服務實作部署到 IIS 應用程式。</span><span class="sxs-lookup"><span data-stu-id="b848c-107">Deploy the service implementation to the IIS application.</span></span>

- <span data-ttu-id="b848c-108">設定 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="b848c-108">Configure the WCF service.</span></span>

<span data-ttu-id="b848c-109">建立 IIS 裝載的 WCF 服務的詳細逐步解說，請參閱 <<c0> [ 如何： 將 WCF 服務裝載於 IIS](how-to-host-a-wcf-service-in-iis.md)。</span><span class="sxs-lookup"><span data-stu-id="b848c-109">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](how-to-host-a-wcf-service-in-iis.md).</span></span>

## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="b848c-110">確定 IIS、ASP.NET 和 WCF 已正確安裝及註冊</span><span class="sxs-lookup"><span data-stu-id="b848c-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>

<span data-ttu-id="b848c-111">WCF、 IIS 和 ASP.NET 必須安裝 IIS 裝載的 WCF 服務，才能正確運作。</span><span class="sxs-lookup"><span data-stu-id="b848c-111">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="b848c-112">安裝 （如.NET Framework 的一部分） 的 WCF、 ASP.NET 和 IIS 的程序需視您的作業系統而有所不同。</span><span class="sxs-lookup"><span data-stu-id="b848c-112">The procedures for installing WCF (as part of the .NET Framework), ASP.NET, and IIS vary depending on your operating system.</span></span> <span data-ttu-id="b848c-113">如需有關如何安裝 WCF 和.NET Framework 的詳細資訊，請參閱 <<c0> [ 安裝適用於開發人員的.NET Framework](../../install/guide-for-developers.md)。</span><span class="sxs-lookup"><span data-stu-id="b848c-113">For more information about installing WCF and the .NET Framework, see [Install the .NET Framework for developers](../../install/guide-for-developers.md).</span></span> <span data-ttu-id="b848c-114">若要在 Windows 10 上安裝 IIS，請開啟**程式和功能**中**控制台**，然後選取**開啟或關閉開啟的 Windows 功能**。</span><span class="sxs-lookup"><span data-stu-id="b848c-114">To install IIS on Windows 10, open **Programs and Features** in **Control Panel** and then select **Turn Windows features on or off**.</span></span> <span data-ttu-id="b848c-115">在  **Windows 功能**，選取**Internet Information Services** ，然後選擇**確定**。</span><span class="sxs-lookup"><span data-stu-id="b848c-115">In **Windows Features**, select **Internet Information Services** and then choose **OK**.</span></span>

![與 IIS，反白顯示的 Windows 功能](media/windows-features-iis.png)

<span data-ttu-id="b848c-117">在其他作業系統上安裝 IIS 的指示位於[安裝在 Windows Vista 和 Windows 7 上的 IIS](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)並[Windows Server 2012 R2 上安裝 IIS 8.5](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2)。</span><span class="sxs-lookup"><span data-stu-id="b848c-117">Instructions for installing IIS on other operating systems can be found at [Install IIS on Windows Vista and Windows 7](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7) and [Install IIS 8.5 on Windows Server 2012 R2](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2).</span></span>

<span data-ttu-id="b848c-118">如果 IIS 已經存在於電腦上.NET Framework 的安裝程序會自動向 IIS 註冊 WCF。</span><span class="sxs-lookup"><span data-stu-id="b848c-118">The installation process for .NET Framework automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="b848c-119">如果 IIS 已安裝.NET Framework 之後，額外的步驟，才能向 IIS 和 ASP.NET 的 WCF。</span><span class="sxs-lookup"><span data-stu-id="b848c-119">If IIS is installed after the .NET Framework, an additional step is required to register WCF with IIS and ASP.NET.</span></span> <span data-ttu-id="b848c-120">請依據您的作業系統，採取下列適當的步驟：</span><span class="sxs-lookup"><span data-stu-id="b848c-120">You can do this as follows, depending on your operating system:</span></span>

- <span data-ttu-id="b848c-121">Windows 7 和 Windows Server 2003： 使用[ServiceModel 註冊工具 (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md)向 IIS 註冊 WCF 的工具。</span><span class="sxs-lookup"><span data-stu-id="b848c-121">Windows 7 and Windows Server 2003: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register WCF with IIS.</span></span> <span data-ttu-id="b848c-122">若要使用此工具，輸入**ServiceModelReg.exe /i /x**中[Visual Studio 的開發人員命令提示字元](../../tools/developer-command-prompt-for-vs.md)。</span><span class="sxs-lookup"><span data-stu-id="b848c-122">To use this tool, type **ServiceModelReg.exe /i /x** in the [Developer Command Prompt for Visual Studio](../../tools/developer-command-prompt-for-vs.md).</span></span>

- <span data-ttu-id="b848c-123">Windows 7： 最後，您必須確認 ASP.NET 已設定為使用.NET Framework 4 或更新版本的版本。</span><span class="sxs-lookup"><span data-stu-id="b848c-123">Windows 7: Finally, you must verify that ASP.NET is configured to use the .NET Framework version 4 or later.</span></span> <span data-ttu-id="b848c-124">您可以執行 ASPNET_Regiis 工具，搭配`–i`選項。</span><span class="sxs-lookup"><span data-stu-id="b848c-124">You do this by running the ASPNET_Regiis tool with the `–i` option.</span></span> <span data-ttu-id="b848c-125">如需詳細資訊，請參閱 < [ASP.NET IIS 註冊工具](https://go.microsoft.com/fwlink/?LinkId=201186)。</span><span class="sxs-lookup"><span data-stu-id="b848c-125">For more information, see [ASP.NET IIS Registration Tool](https://go.microsoft.com/fwlink/?LinkId=201186).</span></span>

## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="b848c-126">建立新的 IIS 應用程式或是重複使用現有的 ASP.NET 應用程式</span><span class="sxs-lookup"><span data-stu-id="b848c-126">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>

<span data-ttu-id="b848c-127">IIS 裝載的 WCF 服務必須駐留的 IIS 應用程式。</span><span class="sxs-lookup"><span data-stu-id="b848c-127">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="b848c-128">您可以只建立新的 IIS 應用程式裝載 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="b848c-128">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="b848c-129">或者，您可以部署到現有的應用程式已經裝載的 WCF 服務[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]內容 （例如.aspx 頁面和 ASP.NET Web 服務 [ASMX]）。</span><span class="sxs-lookup"><span data-stu-id="b848c-129">Alternatively, you can deploy an WCF service into an existing application that is already hosting [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="b848c-130">如需這些選項的詳細資訊，請參閱 「 主控 WCF-並存使用 ASP.NET"及"裝載 ASP.NET 相容性模式中的 WCF 服務 > 章節中[WCF 服務與 ASP.NET](wcf-services-and-aspnet.md)。</span><span class="sxs-lookup"><span data-stu-id="b848c-130">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](wcf-services-and-aspnet.md).</span></span>

<span data-ttu-id="b848c-131">請注意， [!INCLUDE[iis601](../../../../includes/iis601-md.md)] 及更新版本會定期重新啟動獨立的物件導向程式設計應用程式。</span><span class="sxs-lookup"><span data-stu-id="b848c-131">Note that [!INCLUDE[iis601](../../../../includes/iis601-md.md)] and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="b848c-132">預設值為 1740 分鐘。</span><span class="sxs-lookup"><span data-stu-id="b848c-132">The default value is 1740 minutes.</span></span> <span data-ttu-id="b848c-133">支援的最大值為 71,582 分鐘。</span><span class="sxs-lookup"><span data-stu-id="b848c-133">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="b848c-134">您可以停用這項重新啟動。</span><span class="sxs-lookup"><span data-stu-id="b848c-134">This restart can be disabled.</span></span> <span data-ttu-id="b848c-135">如需有關這個屬性的詳細資訊，請參閱 < [PeriodicRestartTime](https://go.microsoft.com/fwlink/?LinkId=109968)。</span><span class="sxs-lookup"><span data-stu-id="b848c-135">For more information about this property, see the [PeriodicRestartTime](https://go.microsoft.com/fwlink/?LinkId=109968).</span></span>

## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="b848c-136">建立 WCF 服務的 .svc 檔案</span><span class="sxs-lookup"><span data-stu-id="b848c-136">Create an .svc File for the WCF Service</span></span>

<span data-ttu-id="b848c-137">在 IIS 中裝載的 WCF 服務會以特殊內容檔 （.svc 檔案） 在 IIS 應用程式內部表示。</span><span class="sxs-lookup"><span data-stu-id="b848c-137">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="b848c-138">這個模型與 IIS 應用程式將 ASMX 頁面表示為 .asmx 檔案的方式很類似。</span><span class="sxs-lookup"><span data-stu-id="b848c-138">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="b848c-139">.Svc 檔案包含 WCF 特定的處理指示詞 ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md))，可讓 WCF，裝載基礎結構啟動裝載的服務，以回應傳入的訊息。</span><span class="sxs-lookup"><span data-stu-id="b848c-139">A .svc file contains a WCF-specific processing directive ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="b848c-140">以下是 .svc 檔案最常見的語法：</span><span class="sxs-lookup"><span data-stu-id="b848c-140">The most common syntax for a .svc file is in the following statement.</span></span>

```
<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>
```

<span data-ttu-id="b848c-141">它是組成[ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)指示詞與一個屬性， `Service`。</span><span class="sxs-lookup"><span data-stu-id="b848c-141">It consists of the [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="b848c-142">`Service` 屬性值就是服務實作的 Common Language Runtime (CLR) 型別名稱。</span><span class="sxs-lookup"><span data-stu-id="b848c-142">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="b848c-143">基本上，使用此指示詞與使用下列程式碼來建立服務主機是一樣的：</span><span class="sxs-lookup"><span data-stu-id="b848c-143">Using this directive is basically equivalent to creating a service host using the following code.</span></span>

```csharp
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );
```

<span data-ttu-id="b848c-144">其他的裝載組態，例如建立服務的基底位址清單，也能夠透過此方式來完成。</span><span class="sxs-lookup"><span data-stu-id="b848c-144">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="b848c-145">您也可以使用自訂的 <xref:System.ServiceModel.Activation.ServiceHostFactory> 來延伸指示詞，以便搭配自訂裝載方案來使用。</span><span class="sxs-lookup"><span data-stu-id="b848c-145">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="b848c-146">裝載 WCF 服務的 IIS 應用程式不負責管理建立和存留期<xref:System.ServiceModel.ServiceHost>執行個體。</span><span class="sxs-lookup"><span data-stu-id="b848c-146">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="b848c-147">受管理的 WCF 裝載基礎結構會建立必要<xref:System.ServiceModel.ServiceHost>收到.svc 檔案的第一個要求時動態執行個體。</span><span class="sxs-lookup"><span data-stu-id="b848c-147">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="b848c-148">除非程式碼明確地關閉此執行個體，或當應用程式已回收時，才會釋放此執行個體。</span><span class="sxs-lookup"><span data-stu-id="b848c-148">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>

<span data-ttu-id="b848c-149">如需.svc 檔案語法的詳細資訊，請參閱 < [ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)。</span><span class="sxs-lookup"><span data-stu-id="b848c-149">For more information about the syntax for .svc files, see [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>

## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="b848c-150">將服務實作部署到 IIS 應用程式</span><span class="sxs-lookup"><span data-stu-id="b848c-150">Deploy the Service Implementation to the IIS Application</span></span>

<span data-ttu-id="b848c-151">在 IIS 中裝載的 WCF 服務使用相同的動態編譯模型[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="b848c-151">WCF services hosted in IIS use the same dynamic compilation model as [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)].</span></span> <span data-ttu-id="b848c-152">如同 ASP.NET 中，您可以部署在不同位置的數種方式裝載於 IIS 的 WCF 服務的實作程式碼，如下所示：</span><span class="sxs-lookup"><span data-stu-id="b848c-152">Just as with ASP.NET, you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>

- <span data-ttu-id="b848c-153">做為預先編譯的 .dll 檔，位於全域組件快取 (GAC) 或應用程式的 \bin 目錄中。</span><span class="sxs-lookup"><span data-stu-id="b848c-153">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="b848c-154">預先編譯的二進位檔會等到部署了新版本的類別庫之後才會更新。</span><span class="sxs-lookup"><span data-stu-id="b848c-154">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>

- <span data-ttu-id="b848c-155">因為未編譯的原始程式檔會位於應用程式的 \App_Code 目錄中。</span><span class="sxs-lookup"><span data-stu-id="b848c-155">As uncompiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="b848c-156">位於此目錄的來源檔會在處理應用程式的第一個要求時動態需要。</span><span class="sxs-lookup"><span data-stu-id="b848c-156">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="b848c-157">在收到下一個要求時，對 \App_Code 目錄中檔案的任何變更都會導致整個應用程式的回收與重新編譯。</span><span class="sxs-lookup"><span data-stu-id="b848c-157">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>

- <span data-ttu-id="b848c-158">因為未編譯的程式碼直接置於.svc 檔案。</span><span class="sxs-lookup"><span data-stu-id="b848c-158">As uncompiled code placed directly in the .svc file.</span></span> <span data-ttu-id="b848c-159">實作程式碼也可以在服務的.svc 檔案中，位於的內嵌之後\@ServiceHost 指示詞。</span><span class="sxs-lookup"><span data-stu-id="b848c-159">Implementation code can also be located inline in the service’s .svc file, after the \@ServiceHost directive.</span></span> <span data-ttu-id="b848c-160">在收到下一個要求時，對內嵌程式碼的任何變更都會導致整個應用程式的回收與重新編譯。</span><span class="sxs-lookup"><span data-stu-id="b848c-160">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>

<span data-ttu-id="b848c-161">如需詳細資訊[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]編譯模型，請參閱 < [ASP.NET 編譯概觀](https://go.microsoft.com/fwlink/?LinkId=94773)。</span><span class="sxs-lookup"><span data-stu-id="b848c-161">For more information about the [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] compilation model, see [ASP.NET Compilation Overview](https://go.microsoft.com/fwlink/?LinkId=94773).</span></span>

## <a name="configure-the-wcf-service"></a><span data-ttu-id="b848c-162">設定 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="b848c-162">Configure the WCF Service</span></span>

<span data-ttu-id="b848c-163">IIS 裝載的 WCF 服務會將其組態儲存在應用程式 Web.config 檔案中。</span><span class="sxs-lookup"><span data-stu-id="b848c-163">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="b848c-164">IIS 裝載的服務會為 IIS 外部所裝載的 WCF 服務使用相同的組態項目和語法。</span><span class="sxs-lookup"><span data-stu-id="b848c-164">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="b848c-165">然而，IIS 裝載環境具備了下列特殊限制：</span><span class="sxs-lookup"><span data-stu-id="b848c-165">However, the following constraints are unique to the IIS hosting environment:</span></span>

- <span data-ttu-id="b848c-166">IIS 裝載服務的基底位址。</span><span class="sxs-lookup"><span data-stu-id="b848c-166">Base addresses for IIS-hosted services.</span></span>

- <span data-ttu-id="b848c-167">IIS 外部裝載的 WCF 服務可以控制其所傳遞的基底的一組裝載的服務基底位址的應用程式位址 Uri<xref:System.ServiceModel.ServiceHost>建構函式或藉由提供[\<主機 >](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)中的項目服務的組態。</span><span class="sxs-lookup"><span data-stu-id="b848c-167">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="b848c-168">IIS 所裝載的服務無法控制自己的基底位址；IIS 裝載服務的基底位址就是所屬 .svc 檔案的位址。</span><span class="sxs-lookup"><span data-stu-id="b848c-168">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>

### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="b848c-169">IIS 裝載服務的端點位址</span><span class="sxs-lookup"><span data-stu-id="b848c-169">Endpoint Addresses for IIS-Hosted Services</span></span>

<span data-ttu-id="b848c-170">透過 IIS 裝載時，端點位址一律視為相對於 .svc 檔案 (用來代表服務) 的位址。</span><span class="sxs-lookup"><span data-stu-id="b848c-170">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="b848c-171">例如，如果 WCF 服務的基底位址是`http://localhost/Application1/MyService.svc`使用下列的端點組態：</span><span class="sxs-lookup"><span data-stu-id="b848c-171">For example, if the base address of a WCF service is `http://localhost/Application1/MyService.svc` with the following endpoint configuration:</span></span>

```xml
<endpoint address="anotherEndpoint" .../>
```

<span data-ttu-id="b848c-172">這會提供可在端點`http://localhost/Application1/MyService.svc/anotherEndpoint`。</span><span class="sxs-lookup"><span data-stu-id="b848c-172">This provides an endpoint that can be reached at `http://localhost/Application1/MyService.svc/anotherEndpoint`.</span></span>

<span data-ttu-id="b848c-173">同樣地，端點組態項目，會使用空字串，因為相對位址提供可在端點`http://localhost/Application1/MyService.svc`，這是基底地址。</span><span class="sxs-lookup"><span data-stu-id="b848c-173">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at `http://localhost/Application1/MyService.svc`, which is the base address.</span></span>

```xml
<endpoint address="" ... />
```

<span data-ttu-id="b848c-174">請務必針對 IIS 裝載服務端點使用相對端點位址。</span><span class="sxs-lookup"><span data-stu-id="b848c-174">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="b848c-175">提供完整的端點位址 (例如`http://localhost/MyService.svc`) 可能會導致服務的部署中的錯誤如果端點位址並未指向 IIS 應用程式裝載服務公開的端點。</span><span class="sxs-lookup"><span data-stu-id="b848c-175">Supplying a fully-qualified endpoint address (for example, `http://localhost/MyService.svc`) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="b848c-176">針對裝載的服務使用相對端點位址可以避免這些潛在的衝突。</span><span class="sxs-lookup"><span data-stu-id="b848c-176">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>

### <a name="available-transports"></a><span data-ttu-id="b848c-177">可用的傳輸</span><span class="sxs-lookup"><span data-stu-id="b848c-177">Available Transports</span></span>

<span data-ttu-id="b848c-178">WCF 服務裝載於 IIS 5.1 和[!INCLUDE[iis601](../../../../includes/iis601-md.md)]受限於只能使用 HTTP 通訊。</span><span class="sxs-lookup"><span data-stu-id="b848c-178">WCF services hosted in IIS 5.1 and [!INCLUDE[iis601](../../../../includes/iis601-md.md)] are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="b848c-179">在這些 IIS 平台上，設定裝載的服務來使用非 HTTP 繫結會在服務啟動期間導致錯誤。</span><span class="sxs-lookup"><span data-stu-id="b848c-179">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="b848c-180">在 [!INCLUDE[iisver](../../../../includes/iisver-md.md)]上，支援的傳輸包括 HTTP、Net.TCP、Net.Pipe、Net.MSMQ，和 msmq.formatname，以便提供與現有 MSMQ 應用程式的回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="b848c-180">For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>

### <a name="http-transport-security"></a><span data-ttu-id="b848c-181">HTTP 傳輸安全性</span><span class="sxs-lookup"><span data-stu-id="b848c-181">HTTP Transport Security</span></span>

<span data-ttu-id="b848c-182">IIS 裝載的 WCF 服務可以利用 HTTP 傳輸安全性 （例如，HTTPS 和 HTTP 驗證配置例如基本、 摘要式與 Windows 整合式驗證），只要包含服務的 IIS 虛擬目錄支援這些設定。</span><span class="sxs-lookup"><span data-stu-id="b848c-182">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="b848c-183">裝載端點繫結上的 HTTP 傳輸安全性設定必須符合包含該設定之 IIS 虛擬目錄上的傳輸安全性設定。</span><span class="sxs-lookup"><span data-stu-id="b848c-183">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>

<span data-ttu-id="b848c-184">例如，設定為使用 HTTP 摘要式驗證的 WCF 端點必須位於也會設定為允許 HTTP 摘要式驗證的 IIS 虛擬目錄。</span><span class="sxs-lookup"><span data-stu-id="b848c-184">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="b848c-185">IIS 設定與 WCF 端點設定的組合不相符會導致在服務啟動期間的錯誤。</span><span class="sxs-lookup"><span data-stu-id="b848c-185">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>

## <a name="see-also"></a><span data-ttu-id="b848c-186">另請參閱</span><span class="sxs-lookup"><span data-stu-id="b848c-186">See also</span></span>

- [<span data-ttu-id="b848c-187">在 Internet Information Services 中裝載</span><span class="sxs-lookup"><span data-stu-id="b848c-187">Hosting in Internet Information Services</span></span>](hosting-in-internet-information-services.md)
- [<span data-ttu-id="b848c-188">Internet Information Services 裝載最佳做法</span><span class="sxs-lookup"><span data-stu-id="b848c-188">Internet Information Services Hosting Best Practices</span></span>](internet-information-services-hosting-best-practices.md)
- [<span data-ttu-id="b848c-189">Windows Server App Fabric 主控功能</span><span class="sxs-lookup"><span data-stu-id="b848c-189">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=201276)
