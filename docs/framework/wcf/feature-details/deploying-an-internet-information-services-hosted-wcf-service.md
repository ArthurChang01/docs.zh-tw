---
title: 部署已裝載網際網路資訊服務的 WCF 服務
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: 67f6877546951bd92b235218f10f6ccc7011ef5c
ms.sourcegitcommit: 927b7ea6b2ea5a440c8f23e3e66503152eb85591
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/16/2020
ms.locfileid: "81463860"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="76ef7-102">部署已裝載網際網路資訊服務的 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="76ef7-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>

<span data-ttu-id="76ef7-103">開發並部署在 Internet 資訊服務 (IIS) 中託管的 Windows 通訊基礎 (WCF) 服務包括以下任務:</span><span class="sxs-lookup"><span data-stu-id="76ef7-103">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>

- <span data-ttu-id="76ef7-104">確保正確安裝和註冊 IIS、ASP.NET、WCF 和 WCF 啟動元件。</span><span class="sxs-lookup"><span data-stu-id="76ef7-104">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>

- <span data-ttu-id="76ef7-105">創建新的 IIS 應用程式,或重用現有的 ASP.NET 應用程式。</span><span class="sxs-lookup"><span data-stu-id="76ef7-105">Create a new IIS application, or reuse an existing ASP.NET application.</span></span>

- <span data-ttu-id="76ef7-106">為 WCF 服務創建 .svc 檔案。</span><span class="sxs-lookup"><span data-stu-id="76ef7-106">Create a .svc file for the WCF service.</span></span>

- <span data-ttu-id="76ef7-107">將服務實作部署到 IIS 應用程式。</span><span class="sxs-lookup"><span data-stu-id="76ef7-107">Deploy the service implementation to the IIS application.</span></span>

- <span data-ttu-id="76ef7-108">配置 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="76ef7-108">Configure the WCF service.</span></span>

<span data-ttu-id="76ef7-109">有關創建 IIS 託管的 WCF 服務的詳細演練,請參閱[如何:在 IIS 中託管 WCF 服務](how-to-host-a-wcf-service-in-iis.md)。</span><span class="sxs-lookup"><span data-stu-id="76ef7-109">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](how-to-host-a-wcf-service-in-iis.md).</span></span>

## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="76ef7-110">確定 IIS、ASP.NET 和 WCF 已正確安裝及註冊</span><span class="sxs-lookup"><span data-stu-id="76ef7-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>

<span data-ttu-id="76ef7-111">必須安裝 WCF、IIS 和ASP.NET才能使 IIS 託管的 WCF 服務正常運行。</span><span class="sxs-lookup"><span data-stu-id="76ef7-111">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="76ef7-112">安裝 WCF(作為 .NET 框架的一部分)、ASP.NET和 IIS 的過程因作業系統而異。</span><span class="sxs-lookup"><span data-stu-id="76ef7-112">The procedures for installing WCF (as part of the .NET Framework), ASP.NET, and IIS vary depending on your operating system.</span></span> <span data-ttu-id="76ef7-113">有關安裝 WCF 和 .NET 框架的詳細資訊,請參閱[為開發人員安裝 .NET 框架](../../install/guide-for-developers.md)。</span><span class="sxs-lookup"><span data-stu-id="76ef7-113">For more information about installing WCF and the .NET Framework, see [Install the .NET Framework for developers](../../install/guide-for-developers.md).</span></span> <span data-ttu-id="76ef7-114">要在 Windows 10 上安裝 IIS,請在 **「控制面板**」中打開**程式和功能**,然後選擇 **「打開或關閉 Windows 功能**」。</span><span class="sxs-lookup"><span data-stu-id="76ef7-114">To install IIS on Windows 10, open **Programs and Features** in **Control Panel** and then select **Turn Windows features on or off**.</span></span> <span data-ttu-id="76ef7-115">在**Windows 功能**中,選擇**互聯網資訊服務**,然後選擇 **「確定**」。。</span><span class="sxs-lookup"><span data-stu-id="76ef7-115">In **Windows Features**, select **Internet Information Services** and then choose **OK**.</span></span>

![突顯 IIS 的 Windows 功能](./media/windows-features-iis.png)

<span data-ttu-id="76ef7-117">有關在其他作業系統上安裝 IIS 的說明,請參閱[在 Windows Vista 和 Windows 7 上安裝 IIS,](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)並在 Windows 伺服器[2012 R2 上安裝 IIS 8.5](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2)。</span><span class="sxs-lookup"><span data-stu-id="76ef7-117">Instructions for installing IIS on other operating systems can be found at [Install IIS on Windows Vista and Windows 7](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7) and [Install IIS 8.5 on Windows Server 2012 R2](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2).</span></span>

<span data-ttu-id="76ef7-118">如果電腦上已存在 IIS,則 .NET 框架的安裝過程會自動將 WCF 註冊到 IIS。</span><span class="sxs-lookup"><span data-stu-id="76ef7-118">The installation process for .NET Framework automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="76ef7-119">如果在 .NET 框架之後安裝了 IIS,則需要執行其他步驟才能將 WCF 註冊到 IIS 並ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="76ef7-119">If IIS is installed after the .NET Framework, an additional step is required to register WCF with IIS and ASP.NET.</span></span> <span data-ttu-id="76ef7-120">請依據您的作業系統，採取下列適當的步驟：</span><span class="sxs-lookup"><span data-stu-id="76ef7-120">You can do this as follows, depending on your operating system:</span></span>

- <span data-ttu-id="76ef7-121">Windows 7 和 Windows 伺服器 2003:使用[服務模型註冊工具 (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md)工具向 IIS 註冊 WCF。</span><span class="sxs-lookup"><span data-stu-id="76ef7-121">Windows 7 and Windows Server 2003: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register WCF with IIS.</span></span> <span data-ttu-id="76ef7-122">要使用此工具,在[視覺化工作室的開發人員指令提示符](../../tools/developer-command-prompt-for-vs.md)中鍵入**ServiceModelReg.exe/i /x** 。</span><span class="sxs-lookup"><span data-stu-id="76ef7-122">To use this tool, type **ServiceModelReg.exe /i /x** in the [Developer Command Prompt for Visual Studio](../../tools/developer-command-prompt-for-vs.md).</span></span>

- <span data-ttu-id="76ef7-123">Windows 7:最後,您必須驗證ASP.NET是否配置為使用 .NET 框架版本 4 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="76ef7-123">Windows 7: Finally, you must verify that ASP.NET is configured to use the .NET Framework version 4 or later.</span></span> <span data-ttu-id="76ef7-124">通過運行帶有該`–i`選項ASPNET_Regiis工具來執行此操作。</span><span class="sxs-lookup"><span data-stu-id="76ef7-124">You do this by running the ASPNET_Regiis tool with the `–i` option.</span></span> <span data-ttu-id="76ef7-125">有關詳細資訊,請參閱[ASP.NET IIS 註冊工具](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90))。</span><span class="sxs-lookup"><span data-stu-id="76ef7-125">For more information, see [ASP.NET IIS Registration Tool](https://docs.microsoft.com/previous-versions/dotnet/netframework-3.5/k6h9cz8h(v=vs.90)).</span></span>

## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="76ef7-126">建立新的 IIS 應用程式或是重複使用現有的 ASP.NET 應用程式</span><span class="sxs-lookup"><span data-stu-id="76ef7-126">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>

<span data-ttu-id="76ef7-127">IIS 託管的 WCF 服務必須駐留在 IIS 應用程式內。</span><span class="sxs-lookup"><span data-stu-id="76ef7-127">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="76ef7-128">您可以創建新的 IIS 應用程式來獨佔 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="76ef7-128">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="76ef7-129">或者,您可以將 WCF 服務部署到已託管ASP.NET 2.0 內容(如 .aspx 頁和ASP.NET Web 服務 [ASMX])的現有應用程式。</span><span class="sxs-lookup"><span data-stu-id="76ef7-129">Alternatively, you can deploy an WCF service into an existing application that is already hosting ASP.NET 2.0 content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="76ef7-130">有關這些選項的詳細資訊,請參閱[WCF 服務和 ASP.NET](wcf-services-and-aspnet.md)中的「與 ASP.NET 並排託管 WCF」和「以ASP.NET相容性模式託管 WCF 服務」部分。</span><span class="sxs-lookup"><span data-stu-id="76ef7-130">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](wcf-services-and-aspnet.md).</span></span>

<span data-ttu-id="76ef7-131">請注意,IIS 6.0 和更高版本會定期重新啟動隔離的面向對象的程式設計應用程式。</span><span class="sxs-lookup"><span data-stu-id="76ef7-131">Note that IIS 6.0 and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="76ef7-132">預設值為 1740 分鐘。</span><span class="sxs-lookup"><span data-stu-id="76ef7-132">The default value is 1740 minutes.</span></span> <span data-ttu-id="76ef7-133">支援的最大值為 71,582 分鐘。</span><span class="sxs-lookup"><span data-stu-id="76ef7-133">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="76ef7-134">您可以停用這項重新啟動。</span><span class="sxs-lookup"><span data-stu-id="76ef7-134">This restart can be disabled.</span></span> <span data-ttu-id="76ef7-135">關於此屬性的詳細資訊,請參閱[定期重新啟動時間](https://docs.microsoft.com/previous-versions/iis/6.0-sdk/ms525914(v=vs.90))。</span><span class="sxs-lookup"><span data-stu-id="76ef7-135">For more information about this property, see the [PeriodicRestartTime](https://docs.microsoft.com/previous-versions/iis/6.0-sdk/ms525914(v=vs.90)).</span></span>

## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="76ef7-136">建立 WCF 服務的 .svc 檔案</span><span class="sxs-lookup"><span data-stu-id="76ef7-136">Create an .svc File for the WCF Service</span></span>

<span data-ttu-id="76ef7-137">IIS 中託管的 WCF 服務表示為 IIS 應用程式中的特殊內容檔 (.svc 檔)。</span><span class="sxs-lookup"><span data-stu-id="76ef7-137">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="76ef7-138">這個模型與 IIS 應用程式將 ASMX 頁面表示為 .asmx 檔案的方式很類似。</span><span class="sxs-lookup"><span data-stu-id="76ef7-138">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="76ef7-139">.svc 檔包含特定於 WCF 的處理指令[\@(ServiceHost),](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)允許 WCF 託管基礎結構啟動託管服務以回應傳入的消息。</span><span class="sxs-lookup"><span data-stu-id="76ef7-139">A .svc file contains a WCF-specific processing directive ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="76ef7-140">以下是 .svc 檔案最常見的語法：</span><span class="sxs-lookup"><span data-stu-id="76ef7-140">The most common syntax for a .svc file is in the following statement.</span></span>

`<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>`

<span data-ttu-id="76ef7-141">它由[\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)指令和單`Service`個屬性 組成。</span><span class="sxs-lookup"><span data-stu-id="76ef7-141">It consists of the [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="76ef7-142">`Service` 屬性值就是服務實作的 Common Language Runtime (CLR) 型別名稱。</span><span class="sxs-lookup"><span data-stu-id="76ef7-142">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="76ef7-143">基本上，使用此指示詞與使用下列程式碼來建立服務主機是一樣的：</span><span class="sxs-lookup"><span data-stu-id="76ef7-143">Using this directive is basically equivalent to creating a service host using the following code.</span></span>

```csharp
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );
```

<span data-ttu-id="76ef7-144">其他的裝載組態，例如建立服務的基底位址清單，也能夠透過此方式來完成。</span><span class="sxs-lookup"><span data-stu-id="76ef7-144">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="76ef7-145">您也可以使用自訂的 <xref:System.ServiceModel.Activation.ServiceHostFactory> 來延伸指示詞，以便搭配自訂裝載方案來使用。</span><span class="sxs-lookup"><span data-stu-id="76ef7-145">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="76ef7-146">託管 WCF 服務的 IIS 應用程式不負責管理<xref:System.ServiceModel.ServiceHost>實例的 創建和存留期。</span><span class="sxs-lookup"><span data-stu-id="76ef7-146">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="76ef7-147">當收到 .svc<xref:System.ServiceModel.ServiceHost>檔案的第 一個請求時,託管的 WCF 託管基礎結構會動態創建必要的實例。</span><span class="sxs-lookup"><span data-stu-id="76ef7-147">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="76ef7-148">除非程式碼明確地關閉此執行個體，或當應用程式已回收時，才會釋放此執行個體。</span><span class="sxs-lookup"><span data-stu-id="76ef7-148">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>

<span data-ttu-id="76ef7-149">有關 .svc 檔案的語法的詳細資訊,請參閱[\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)。</span><span class="sxs-lookup"><span data-stu-id="76ef7-149">For more information about the syntax for .svc files, see [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>

## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="76ef7-150">將服務實作部署到 IIS 應用程式</span><span class="sxs-lookup"><span data-stu-id="76ef7-150">Deploy the Service Implementation to the IIS Application</span></span>

<span data-ttu-id="76ef7-151">IIS 中託管的 WCF 服務使用與 ASP.NET 2.0 相同的動態編譯模型。</span><span class="sxs-lookup"><span data-stu-id="76ef7-151">WCF services hosted in IIS use the same dynamic compilation model as ASP.NET 2.0.</span></span> <span data-ttu-id="76ef7-152">與ASP.NET一樣,您可以通過多種方式在不同位置部署IIS託管的WCF服務的實現代碼,如下所示:</span><span class="sxs-lookup"><span data-stu-id="76ef7-152">Just as with ASP.NET, you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>

- <span data-ttu-id="76ef7-153">做為預先編譯的 .dll 檔，位於全域組件快取 (GAC) 或應用程式的 \bin 目錄中。</span><span class="sxs-lookup"><span data-stu-id="76ef7-153">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="76ef7-154">預先編譯的二進位檔會等到部署了新版本的類別庫之後才會更新。</span><span class="sxs-lookup"><span data-stu-id="76ef7-154">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>

- <span data-ttu-id="76ef7-155">作為位於應用程式的_App_Code目錄中的未編譯源檔。</span><span class="sxs-lookup"><span data-stu-id="76ef7-155">As uncompiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="76ef7-156">位於此目錄的來源檔會在處理應用程式的第一個要求時動態需要。</span><span class="sxs-lookup"><span data-stu-id="76ef7-156">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="76ef7-157">在收到下一個要求時，對 \App_Code 目錄中檔案的任何變更都會導致整個應用程式的回收與重新編譯。</span><span class="sxs-lookup"><span data-stu-id="76ef7-157">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>

- <span data-ttu-id="76ef7-158">作為直接放置在 .svc 檔中的未編譯代碼。</span><span class="sxs-lookup"><span data-stu-id="76ef7-158">As uncompiled code placed directly in the .svc file.</span></span> <span data-ttu-id="76ef7-159">實現代碼也可以位於\@服務的 .svc 檔中,在 ServiceHost 指令之後。</span><span class="sxs-lookup"><span data-stu-id="76ef7-159">Implementation code can also be located inline in the service’s .svc file, after the \@ServiceHost directive.</span></span> <span data-ttu-id="76ef7-160">在收到下一個要求時，對內嵌程式碼的任何變更都會導致整個應用程式的回收與重新編譯。</span><span class="sxs-lookup"><span data-stu-id="76ef7-160">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>

<span data-ttu-id="76ef7-161">有關ASP.NET 2.0 編譯模型的詳細資訊,請參閱[ASP.NET 編譯概述](https://docs.microsoft.com/previous-versions/aspnet/ms178466(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="76ef7-161">For more information about the ASP.NET 2.0 compilation model, see [ASP.NET Compilation Overview](https://docs.microsoft.com/previous-versions/aspnet/ms178466(v=vs.100)).</span></span>

## <a name="configure-the-wcf-service"></a><span data-ttu-id="76ef7-162">設定 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="76ef7-162">Configure the WCF Service</span></span>

<span data-ttu-id="76ef7-163">IIS 託管的 WCF 服務將其設定儲存在應用程式 Web.config 檔中。</span><span class="sxs-lookup"><span data-stu-id="76ef7-163">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="76ef7-164">IIS 託管的服務使用與IIS外部託管的WCF服務相同的配置元素和語法。</span><span class="sxs-lookup"><span data-stu-id="76ef7-164">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="76ef7-165">然而，IIS 裝載環境具備了下列特殊限制：</span><span class="sxs-lookup"><span data-stu-id="76ef7-165">However, the following constraints are unique to the IIS hosting environment:</span></span>

- <span data-ttu-id="76ef7-166">IIS 裝載服務的基底位址。</span><span class="sxs-lookup"><span data-stu-id="76ef7-166">Base addresses for IIS-hosted services.</span></span>

- <span data-ttu-id="76ef7-167">在IIS之外託管 WCF 服務的應用程式可以通過將一組基本位址URI<xref:System.ServiceModel.ServiceHost>傳遞給建構函數或在服務配置中提供[\<主機>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)元素來控制其託管服務的基本位址。</span><span class="sxs-lookup"><span data-stu-id="76ef7-167">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="76ef7-168">IIS 所裝載的服務無法控制自己的基底位址；IIS 裝載服務的基底位址就是所屬 .svc 檔案的位址。</span><span class="sxs-lookup"><span data-stu-id="76ef7-168">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>

### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="76ef7-169">IIS 裝載服務的端點位址</span><span class="sxs-lookup"><span data-stu-id="76ef7-169">Endpoint Addresses for IIS-Hosted Services</span></span>

<span data-ttu-id="76ef7-170">透過 IIS 裝載時，端點位址一律視為相對於 .svc 檔案 (用來代表服務) 的位址。</span><span class="sxs-lookup"><span data-stu-id="76ef7-170">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="76ef7-171">例如,如果 WCF 服務的基本`http://localhost/Application1/MyService.svc`位址具有 以下終結點配置:</span><span class="sxs-lookup"><span data-stu-id="76ef7-171">For example, if the base address of a WCF service is `http://localhost/Application1/MyService.svc` with the following endpoint configuration:</span></span>

```xml
<endpoint address="anotherEndpoint" />
```

<span data-ttu-id="76ef7-172">這提供了可在 處`http://localhost/Application1/MyService.svc/anotherEndpoint`到達的終結點。</span><span class="sxs-lookup"><span data-stu-id="76ef7-172">This provides an endpoint that can be reached at `http://localhost/Application1/MyService.svc/anotherEndpoint`.</span></span>

<span data-ttu-id="76ef7-173">同樣,使用空字串作為相對位址的終結點配置元素提供可在 處`http://localhost/Application1/MyService.svc`訪問的終結點,該終結點是基本位址。</span><span class="sxs-lookup"><span data-stu-id="76ef7-173">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at `http://localhost/Application1/MyService.svc`, which is the base address.</span></span>

```xml
<endpoint address="" />
```

<span data-ttu-id="76ef7-174">請務必針對 IIS 裝載服務端點使用相對端點位址。</span><span class="sxs-lookup"><span data-stu-id="76ef7-174">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="76ef7-175">如果終結點位址未指向承載公開終結點的服務的`http://localhost/MyService.svc`IIS 應用程式,則提供完全限定的終結點位址(例如),可能會導致服務部署中的錯誤。</span><span class="sxs-lookup"><span data-stu-id="76ef7-175">Supplying a fully-qualified endpoint address (for example, `http://localhost/MyService.svc`) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="76ef7-176">針對裝載的服務使用相對端點位址可以避免這些潛在的衝突。</span><span class="sxs-lookup"><span data-stu-id="76ef7-176">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>

### <a name="available-transports"></a><span data-ttu-id="76ef7-177">可用的傳輸</span><span class="sxs-lookup"><span data-stu-id="76ef7-177">Available Transports</span></span>

<span data-ttu-id="76ef7-178">IIS 5.1 和 IIS 6.0 中託管的 WCF 服務僅限於使用基於 HTTP 的通信。</span><span class="sxs-lookup"><span data-stu-id="76ef7-178">WCF services hosted in IIS 5.1 and IIS 6.0 are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="76ef7-179">在這些 IIS 平台上，設定裝載的服務來使用非 HTTP 繫結會在服務啟動期間導致錯誤。</span><span class="sxs-lookup"><span data-stu-id="76ef7-179">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="76ef7-180">對於 IIS 7.0,支援的傳輸包括 HTTP、Net.TCP、Net.Pipe、Net.MSMQ 和 msmq.formatname,用於向後與現有 MSMQ 應用程式相容。</span><span class="sxs-lookup"><span data-stu-id="76ef7-180">For IIS 7.0, the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>

### <a name="http-transport-security"></a><span data-ttu-id="76ef7-181">HTTP 傳輸安全性</span><span class="sxs-lookup"><span data-stu-id="76ef7-181">HTTP Transport Security</span></span>

<span data-ttu-id="76ef7-182">IIS 託管的 WCF 服務可以使用 HTTP 傳輸安全性(例如,HTTPS 和 HTTP 身份驗證方案(如基本、摘要和 Windows 整合身份驗證),只要包含該服務的 IIS 虛擬目錄支援這些設置。</span><span class="sxs-lookup"><span data-stu-id="76ef7-182">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="76ef7-183">裝載端點繫結上的 HTTP 傳輸安全性設定必須符合包含該設定之 IIS 虛擬目錄上的傳輸安全性設定。</span><span class="sxs-lookup"><span data-stu-id="76ef7-183">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>

<span data-ttu-id="76ef7-184">例如,配置為使用 HTTP 摘要身份驗證的 WCF 終結點必須駐留在 IIS 虛擬目錄中,該虛擬目錄也配置為允許 HTTP 摘要身份驗證。</span><span class="sxs-lookup"><span data-stu-id="76ef7-184">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="76ef7-185">IIS 設置和 WCF 終結點設置的不匹配組合會導致服務啟動期間出錯。</span><span class="sxs-lookup"><span data-stu-id="76ef7-185">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>

## <a name="see-also"></a><span data-ttu-id="76ef7-186">另請參閱</span><span class="sxs-lookup"><span data-stu-id="76ef7-186">See also</span></span>

- [<span data-ttu-id="76ef7-187">在網際網路資訊服務中裝載</span><span class="sxs-lookup"><span data-stu-id="76ef7-187">Hosting in Internet Information Services</span></span>](hosting-in-internet-information-services.md)
- [<span data-ttu-id="76ef7-188">Internet Information Services 裝載最佳做法</span><span class="sxs-lookup"><span data-stu-id="76ef7-188">Internet Information Services Hosting Best Practices</span></span>](internet-information-services-hosting-best-practices.md)
- <span data-ttu-id="76ef7-189">[Windows Server AppFabric 裝載功能](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span><span class="sxs-lookup"><span data-stu-id="76ef7-189">[Windows Server App Fabric Hosting Features](https://docs.microsoft.com/previous-versions/appfabric/ee677189(v=azure.10))</span></span>
