---
title: 部署已裝載網際網路資訊服務的 WCF 服務
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: 59f18d8487deb52f5ecb5b5c814ec9bdbc74e2cc
ms.sourcegitcommit: 3d5d33f384eeba41b2dff79d096f47ccc8d8f03d
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/04/2018
ms.locfileid: "33496376"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="ca0aa-102">部署已裝載網際網路資訊服務的 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="ca0aa-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>
<span data-ttu-id="ca0aa-103">開發和部署 Windows Communication Foundation (WCF) 服務是裝載網際網路資訊服務 (IIS) 中包含下列工作：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-103">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>  
  
-   <span data-ttu-id="ca0aa-104">請確定 IIS、 ASP.NET、 WCF 及 WCF 啟用元件正確安裝及註冊。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-104">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>  
  
-   <span data-ttu-id="ca0aa-105">建立新的 IIS 應用程式，或是重複使用現有的 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 應用程式。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-105">Create a new IIS application, or reuse an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] application.</span></span>  
  
-   <span data-ttu-id="ca0aa-106">建立 WCF 服務的.svc 檔案。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-106">Create a .svc file for the WCF service.</span></span>  
  
-   <span data-ttu-id="ca0aa-107">將服務實作部署到 IIS 應用程式。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-107">Deploy the service implementation to the IIS application.</span></span>  
  
-   <span data-ttu-id="ca0aa-108">設定 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-108">Configure the WCF service.</span></span>  
  
 <span data-ttu-id="ca0aa-109">建立 IIS 裝載的 WCF 服務的詳細逐步解說，請參閱[How to： 將 WCF 服務裝載於 IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-109">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span></span>  
  
## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="ca0aa-110">確定 IIS、ASP.NET 和 WCF 已正確安裝及註冊</span><span class="sxs-lookup"><span data-stu-id="ca0aa-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>  
 <span data-ttu-id="ca0aa-111">必須安裝 IIS 裝載的 WCF 服務正常運作的 WCF、 IIS 和 ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-111">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="ca0aa-112">安裝 WCF 的程序 (一部分[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)])，ASP.NET 和 IIS 根據所使用的作業系統版本而有所不同。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-112">The procedures for installing WCF (as part of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]), ASP.NET and IIS vary depending on the operating system version being used.</span></span> <span data-ttu-id="ca0aa-113">如需有關安裝 WCF 和[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]，請參閱[Microsoft.NET Framework 4 Web 安裝程式](http://go.microsoft.com/fwlink/?LinkId=201185)。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-113">For more information about installing WCF and the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], see [Microsoft .NET Framework 4 Web Installer](http://go.microsoft.com/fwlink/?LinkId=201185).</span></span> <span data-ttu-id="ca0aa-114">您可以參閱 [安裝 IIS](http://go.microsoft.com/fwlink/?LinkId=201188)中的 IIS 安裝指示。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-114">Instructions for installing IIS can be found at [Installing IIS](http://go.microsoft.com/fwlink/?LinkId=201188).</span></span>  
  
 <span data-ttu-id="ca0aa-115">安裝程序[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]會自動註冊 WCF 與 IIS，如果 IIS 已經存在於電腦上。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-115">The installation process for the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)] automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="ca0aa-116">如果已安裝 IIS 之後[!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]，額外的步驟，才能向 IIS 註冊 WCF 和[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-116">If IIS is installed after the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)], an additional step is required to register WCF with IIS and [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)].</span></span> <span data-ttu-id="ca0aa-117">請依據您的作業系統，採取下列適當的步驟：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-117">You can do this as follows, depending on your operating system:</span></span>  
  
-   [!INCLUDE[wxpsp2](../../../../includes/wxpsp2-md.md)]<span data-ttu-id="ca0aa-118">、 Windows 7 和[!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]： 使用[ServiceModel 註冊工具 (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md)向 IIS 註冊 WCF 工具： 若要使用此工具，輸入**ServiceModelReg.exe /i /x** Visual Studio 中命令提示字元。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-118">, Windows 7, and [!INCLUDE[ws2003](../../../../includes/ws2003-md.md)]: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register WCF with IIS: To use this tool, type **ServiceModelReg.exe /i /x** in the Visual Studio command prompt.</span></span> <span data-ttu-id="ca0aa-119">按一下 [開始] 按鈕，並依序選取 [ **所有程式**, **Microsoft Visual Studio 2012**, **Visual Studio Tools**] 和 [ **Visual Studio 命令提示字元**]，您即可開啟這個命令提示字元。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-119">You can open this command prompt by clicking the start button, selecting **All Programs**, **Microsoft Visual Studio 2012**, **Visual Studio Tools**, and **Visual Studio Command Prompt**</span></span>  
  
-   [!INCLUDE[wv](../../../../includes/wv-md.md)]<span data-ttu-id="ca0aa-120">：安裝 [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)]的 Windows Communication Foundation 啟動元件子元件。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-120">: Install the Windows Communication Foundation Activation Components subcomponent of the [!INCLUDE[vstecwinfx](../../../../includes/vstecwinfx-md.md)].</span></span> <span data-ttu-id="ca0aa-121">若要這樣做，請在控制台中按一下**新增或移除程式**然後**新增\/移除 Windows 元件**。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-121">To do this, in Control Panel, click **Add or Remove Programs** and then **Add\/Remove Windows Components**.</span></span> <span data-ttu-id="ca0aa-122">這樣會啟動 [ **Windows 元件精靈**]。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-122">This activates the **Windows Component Wizard**.</span></span>  
  
-   <span data-ttu-id="ca0aa-123">Windows 7：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-123">Windows 7:</span></span>  
  
 <span data-ttu-id="ca0aa-124">最後，您必須確認 ASP.NET 設定成使用 .NET Framework 4 版。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-124">Finally you must verify that ASP.NET is configured to use the .NET Framework version 4.</span></span> <span data-ttu-id="ca0aa-125">您可以使用 -i 選項來執行 ASPNET_Regiis 工具，藉以達成此目的。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-125">You do this by running the ASPNET_Regiis tool with the –i option.</span></span> <span data-ttu-id="ca0aa-126">如需詳細資訊，請參閱[ASP.NET IIS 註冊工具](http://go.microsoft.com/fwlink/?LinkId=201186)</span><span class="sxs-lookup"><span data-stu-id="ca0aa-126">For more information, see [ASP.NET IIS Registration Tool](http://go.microsoft.com/fwlink/?LinkId=201186)</span></span>  
  
## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="ca0aa-127">建立新的 IIS 應用程式或是重複使用現有的 ASP.NET 應用程式</span><span class="sxs-lookup"><span data-stu-id="ca0aa-127">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>  
 <span data-ttu-id="ca0aa-128">IIS 裝載的 WCF 服務必須駐留在 IIS 應用程式裡面。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-128">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="ca0aa-129">您可以只建立新的 IIS 應用程式裝載 WCF 服務。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-129">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="ca0aa-130">或者，您可以將 WCF 服務部署到現有的應用程式已經裝載[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]內容 （例如.aspx 網頁和 ASP.NET Web 服務 [ASMX]）。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-130">Alternatively, you can deploy an WCF service into an existing application that is already hosting [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="ca0aa-131">如需這些選項的詳細資訊，請參閱 「 主控 WCF-並存使用 ASP.NET 」 及 「 ASP.NET 相容性模式中的裝載 WCF 服務 」 一節中[WCF 服務與 ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md)。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-131">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](../../../../docs/framework/wcf/feature-details/wcf-services-and-aspnet.md).</span></span>  
  
 <span data-ttu-id="ca0aa-132">請注意， [!INCLUDE[iis601](../../../../includes/iis601-md.md)] 及更新版本會定期重新啟動獨立的物件導向程式設計應用程式。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-132">Note that [!INCLUDE[iis601](../../../../includes/iis601-md.md)] and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="ca0aa-133">預設值為 1740 分鐘。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-133">The default value is 1740 minutes.</span></span> <span data-ttu-id="ca0aa-134">支援的最大值為 71,582 分鐘。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-134">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="ca0aa-135">您可以停用這項重新啟動。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-135">This restart can be disabled.</span></span> <span data-ttu-id="ca0aa-136">如需有關這個屬性的詳細資訊，請參閱[PeriodicRestartTime](http://go.microsoft.com/fwlink/?LinkId=109968)。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-136">For more information about this property, see the [PeriodicRestartTime](http://go.microsoft.com/fwlink/?LinkId=109968).</span></span>  
  
## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="ca0aa-137">建立 WCF 服務的 .svc 檔案</span><span class="sxs-lookup"><span data-stu-id="ca0aa-137">Create an .svc File for the WCF Service</span></span>  
 <span data-ttu-id="ca0aa-138">在 IIS 中裝載的 WCF 服務會以特殊內容檔 （.svc 檔案） 在 IIS 應用程式內部表示。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-138">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="ca0aa-139">這個模型與 IIS 應用程式將 ASMX 頁面表示為 .asmx 檔案的方式很類似。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-139">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="ca0aa-140">.Svc 檔案包含特定 WCF 處理指示詞 ([@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md))，可讓 WCF，裝載基礎結構啟動裝載的服務，以回應傳入訊息中。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-140">A .svc file contains a WCF-specific processing directive ([@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="ca0aa-141">以下是 .svc 檔案最常見的語法：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-141">The most common syntax for a .svc file is in the following statement.</span></span>  
  
```  
<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>  
```  
  
 <span data-ttu-id="ca0aa-142">此語法包含 [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) 指示詞與一個屬性 `Service`。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-142">It consists of the [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="ca0aa-143">`Service` 屬性值就是服務實作的 Common Language Runtime (CLR) 型別名稱。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-143">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="ca0aa-144">基本上，使用此指示詞與使用下列程式碼來建立服務主機是一樣的：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-144">Using this directive is basically equivalent to creating a service host using the following code.</span></span>  
  
```  
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );  
```  
  
 <span data-ttu-id="ca0aa-145">其他的裝載組態，例如建立服務的基底位址清單，也能夠透過此方式來完成。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-145">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="ca0aa-146">您也可以使用自訂的 <xref:System.ServiceModel.Activation.ServiceHostFactory> 來延伸指示詞，以便搭配自訂裝載方案來使用。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-146">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="ca0aa-147">裝載 WCF 服務的 IIS 應用程式不負責管理建立與存留期<xref:System.ServiceModel.ServiceHost>執行個體。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-147">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="ca0aa-148">受管理的 WCF 裝載基礎結構會建立必要<xref:System.ServiceModel.ServiceHost>收到.svc 檔案的第一個要求時動態執行個體。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-148">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="ca0aa-149">除非程式碼明確地關閉此執行個體，或當應用程式已回收時，才會釋放此執行個體。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-149">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>  
  
 <span data-ttu-id="ca0aa-150">如需.svc 檔案語法的詳細資訊，請參閱[ @ServiceHost ](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-150">For more information about the syntax for .svc files, see [@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>  
  
## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="ca0aa-151">將服務實作部署到 IIS 應用程式</span><span class="sxs-lookup"><span data-stu-id="ca0aa-151">Deploy the Service Implementation to the IIS Application</span></span>  
 <span data-ttu-id="ca0aa-152">在 IIS 中裝載的 WCF 服務使用相同的動態編譯模型[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-152">WCF services hosted in IIS use the same dynamic compilation model as [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)].</span></span> <span data-ttu-id="ca0aa-153">就像[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]，您可以部署在多種不同的位置，IIS 裝載的 WCF 服務的實作程式碼，如下所示：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-153">Just as with [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)], you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>  
  
-   <span data-ttu-id="ca0aa-154">做為預先編譯的 .dll 檔，位於全域組件快取 (GAC) 或應用程式的 \bin 目錄中。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-154">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="ca0aa-155">預先編譯的二進位檔會等到部署了新版本的類別庫之後才會更新。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-155">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>  
  
-   <span data-ttu-id="ca0aa-156">成為未編譯的來源檔，位於應用程式的 \App_Code 目錄中。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-156">As un-compiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="ca0aa-157">位於此目錄的來源檔會在處理應用程式的第一個要求時動態需要。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-157">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="ca0aa-158">在收到下一個要求時，對 \App_Code 目錄中檔案的任何變更都會導致整個應用程式的回收與重新編譯。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-158">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>  
  
-   <span data-ttu-id="ca0aa-159">成為未編譯的程式碼，直接位於 .svc 檔案中。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-159">As un-compiled code placed directly in the .svc file.</span></span> <span data-ttu-id="ca0aa-160">實作程式碼也可以內嵌在服務的.svc 檔案中，位於後@ServiceHost指示詞。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-160">Implementation code can also be located inline in the service’s .svc file, after the @ServiceHost directive.</span></span> <span data-ttu-id="ca0aa-161">在收到下一個要求時，對內嵌程式碼的任何變更都會導致整個應用程式的回收與重新編譯。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-161">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>  
  
 <span data-ttu-id="ca0aa-162">如需有關[!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)]編譯模型，請參閱[ASP.NET 編譯概觀](http://go.microsoft.com/fwlink/?LinkId=94773)。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-162">For more information about the [!INCLUDE[vstecasplong](../../../../includes/vstecasplong-md.md)] compilation model, see [ASP.NET Compilation Overview](http://go.microsoft.com/fwlink/?LinkId=94773).</span></span>  
  
## <a name="configure-the-wcf-service"></a><span data-ttu-id="ca0aa-163">設定 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="ca0aa-163">Configure the WCF Service</span></span>  
 <span data-ttu-id="ca0aa-164">IIS 裝載的 WCF 服務會將其組態儲存在應用程式的 Web.config 檔案。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-164">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="ca0aa-165">IIS 裝載的服務在 IIS 外部裝載的 WCF 服務使用相同的組態項目和語法。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-165">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="ca0aa-166">然而，IIS 裝載環境具備了下列特殊限制：</span><span class="sxs-lookup"><span data-stu-id="ca0aa-166">However, the following constraints are unique to the IIS hosting environment:</span></span>  
  
-   <span data-ttu-id="ca0aa-167">IIS 裝載服務的基底位址。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-167">Base addresses for IIS-hosted services.</span></span>  
  
-   <span data-ttu-id="ca0aa-168">在 IIS 外部裝載的 WCF 服務可以控制所傳遞的基底的一組裝載的服務基底位址的應用程式位址的 Uri 加入<xref:System.ServiceModel.ServiceHost>建構函式或藉由提供[\<主機 >](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)中的項目服務的組態。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-168">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="ca0aa-169">IIS 所裝載的服務無法控制自己的基底位址；IIS 裝載服務的基底位址就是所屬 .svc 檔案的位址。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-169">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>  
  
### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="ca0aa-170">IIS 裝載服務的端點位址</span><span class="sxs-lookup"><span data-stu-id="ca0aa-170">Endpoint Addresses for IIS-Hosted Services</span></span>  
 <span data-ttu-id="ca0aa-171">透過 IIS 裝載時，端點位址一律視為相對於 .svc 檔案 (用來代表服務) 的位址。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-171">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="ca0aa-172">例如，如果 WCF 服務的基底位址是http://localhost/Application1/MyService.svc使用下列端點組態。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-172">For example, if the base address of a WCF service is http://localhost/Application1/MyService.svc with the following endpoint configuration.</span></span>  
  
```xml  
<endpoint address="anotherEndpoint" .../>  
```  
  
 <span data-ttu-id="ca0aa-173">這會提供的端點，可以在達到 「http://localhost/Application1/MyService.svc/anotherEndpoint"。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-173">This provides an endpoint that can be reached at "http://localhost/Application1/MyService.svc/anotherEndpoint".</span></span>  
  
 <span data-ttu-id="ca0aa-174">同樣地，端點組態項目，其使用空字串，與相對位址會提供可在連線的端點http://localhost/Application1/MyService.svc，這是基底地址。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-174">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at http://localhost/Application1/MyService.svc, which is the base address.</span></span>  
  
```xml  
<endpoint address="" ... />  
```  
  
 <span data-ttu-id="ca0aa-175">請務必針對 IIS 裝載服務端點使用相對端點位址。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-175">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="ca0aa-176">提供完整的端點位址 (例如，http://localhost/MyService.svc)如果端點位址並未指向 IIS 應用程式裝載服務公開的端點可能導致服務部署中的錯誤。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-176">Supplying a fully-qualified endpoint address (for example, http://localhost/MyService.svc) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="ca0aa-177">針對裝載的服務使用相對端點位址可以避免這些潛在的衝突。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-177">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>  
  
### <a name="available-transports"></a><span data-ttu-id="ca0aa-178">可用的傳輸</span><span class="sxs-lookup"><span data-stu-id="ca0aa-178">Available Transports</span></span>  
 <span data-ttu-id="ca0aa-179">WCF 服務裝載於 IIS 5.1 和[!INCLUDE[iis601](../../../../includes/iis601-md.md)]僅限於使用 HTTP 通訊。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-179">WCF services hosted in IIS 5.1 and [!INCLUDE[iis601](../../../../includes/iis601-md.md)] are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="ca0aa-180">在這些 IIS 平台上，設定裝載的服務來使用非 HTTP 繫結會在服務啟動期間導致錯誤。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-180">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="ca0aa-181">在 [!INCLUDE[iisver](../../../../includes/iisver-md.md)]上，支援的傳輸包括 HTTP、Net.TCP、Net.Pipe、Net.MSMQ，和 msmq.formatname，以便提供與現有 MSMQ 應用程式的回溯相容性。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-181">For [!INCLUDE[iisver](../../../../includes/iisver-md.md)], the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>  
  
### <a name="http-transport-security"></a><span data-ttu-id="ca0aa-182">HTTP 傳輸安全性</span><span class="sxs-lookup"><span data-stu-id="ca0aa-182">HTTP Transport Security</span></span>  
 <span data-ttu-id="ca0aa-183">IIS 裝載的 WCF 服務可以利用 HTTP 傳輸安全性 （例如，HTTPS 和 HTTP 驗證配置基本、 摘要式與 Windows 整合式驗證），只要包含服務的 IIS 虛擬目錄支援這些設定。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-183">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="ca0aa-184">裝載端點繫結上的 HTTP 傳輸安全性設定必須符合包含該設定之 IIS 虛擬目錄上的傳輸安全性設定。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-184">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>  
  
 <span data-ttu-id="ca0aa-185">例如，設定為使用 HTTP 摘要式驗證的 WCF 端點必須位於也設定為允許 HTTP 摘要式驗證的 IIS 虛擬目錄。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-185">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="ca0aa-186">IIS 設定與 WCF 端點設定組合不相符會在服務啟動期間導致錯誤。</span><span class="sxs-lookup"><span data-stu-id="ca0aa-186">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ca0aa-187">另請參閱</span><span class="sxs-lookup"><span data-stu-id="ca0aa-187">See Also</span></span>  
 [<span data-ttu-id="ca0aa-188">在 Internet Information Services 中裝載</span><span class="sxs-lookup"><span data-stu-id="ca0aa-188">Hosting in Internet Information Services</span></span>](../../../../docs/framework/wcf/feature-details/hosting-in-internet-information-services.md)  
 [<span data-ttu-id="ca0aa-189">Internet Information Services 裝載最佳做法</span><span class="sxs-lookup"><span data-stu-id="ca0aa-189">Internet Information Services Hosting Best Practices</span></span>](../../../../docs/framework/wcf/feature-details/internet-information-services-hosting-best-practices.md)  
 [<span data-ttu-id="ca0aa-190">Windows Server App Fabric 裝載功能</span><span class="sxs-lookup"><span data-stu-id="ca0aa-190">Windows Server App Fabric Hosting Features</span></span>](http://go.microsoft.com/fwlink/?LinkId=201276)
