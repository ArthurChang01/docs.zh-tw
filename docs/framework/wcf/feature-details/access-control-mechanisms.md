---
title: "存取控制機制"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- WCF security
- access control [WCF]
ms.assetid: 9d576122-3f55-4425-9acf-b23d0781e966
caps.latest.revision: "13"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 1d856af12269416b3303e617338165771ae4f2b8
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/22/2017
---
# <a name="access-control-mechanisms"></a><span data-ttu-id="8009e-102">存取控制機制</span><span class="sxs-lookup"><span data-stu-id="8009e-102">Access Control Mechanisms</span></span>
<span data-ttu-id="8009e-103">您可以用 [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] 以多種方式控制存取。</span><span class="sxs-lookup"><span data-stu-id="8009e-103">You can control access in several way with [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span> <span data-ttu-id="8009e-104">本主題將扼要討論各種機制，並提供每一種機制的建議使用時機，本主題目的在於協助您選擇使用正確的機制。</span><span class="sxs-lookup"><span data-stu-id="8009e-104">This topic briefly discusses the various mechanisms and provides suggestions on when to use each; it is intended to help you select the correct mechanism to use.</span></span> <span data-ttu-id="8009e-105">下面將依複雜性的順序列出存取技術。</span><span class="sxs-lookup"><span data-stu-id="8009e-105">The access technologies are listed in order of complexity.</span></span> <span data-ttu-id="8009e-106">最簡單的是 <xref:System.Security.Permissions.PrincipalPermissionAttribute>，最複雜的則是「身分識別模型」。</span><span class="sxs-lookup"><span data-stu-id="8009e-106">The simplest is the <xref:System.Security.Permissions.PrincipalPermissionAttribute>; the most complex is the Identity Model.</span></span>  
  
 <span data-ttu-id="8009e-107">除了這些機制，模擬和委派[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]述[委派和模擬](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-107">In addition to these mechanisms, impersonation and delegation with [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is explained in [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="principalpermissionattribute"></a><span data-ttu-id="8009e-108">PrincipalPermissionAttribute</span><span class="sxs-lookup"><span data-stu-id="8009e-108">PrincipalPermissionAttribute</span></span>  
 <span data-ttu-id="8009e-109"><xref:System.Security.Permissions.PrincipalPermissionAttribute> 是用來限制對於服務方法的存取。</span><span class="sxs-lookup"><span data-stu-id="8009e-109">The <xref:System.Security.Permissions.PrincipalPermissionAttribute> is used to restrict access to a service method.</span></span> <span data-ttu-id="8009e-110">當套用到方法時，這個屬性即可用來要求 Windows 群組或 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 角色中的特定呼叫者身分識別或成員資格。</span><span class="sxs-lookup"><span data-stu-id="8009e-110">When the attribute is applied to a method, it can be used to demand a specific caller's identity or membership in a Windows group or [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role.</span></span> <span data-ttu-id="8009e-111">如果是使用 X.509 憑證進行驗證，用戶端便會獲得由主體名稱加憑證指紋所組成的主要身分識別。</span><span class="sxs-lookup"><span data-stu-id="8009e-111">If the client is authenticated using an X.509 certificate, it is given a primary identity that consists of the subject name plus the thumbprint of the certificate.</span></span>  
  
 <span data-ttu-id="8009e-112">請用 <xref:System.Security.Permissions.PrincipalPermissionAttribute> 控制服務執行所在電腦上資源的存取，如果服務的使用者永遠屬於服務執行所在之相同 Windows 網域，也用此種做法。</span><span class="sxs-lookup"><span data-stu-id="8009e-112">Use the <xref:System.Security.Permissions.PrincipalPermissionAttribute> to control access to resources on the computer that the service is running on, and if the users of the service will always be part of the same Windows domain that the service is running on.</span></span> <span data-ttu-id="8009e-113">您可以輕易建立具有指定之存取層級 (例如無、唯讀或讀取和寫入) 的 Windows 群組。</span><span class="sxs-lookup"><span data-stu-id="8009e-113">You can easily create Windows groups that have specified levels of access (such as none, read-only, or read and write).</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-114">使用屬性，請參閱[How to： 使用 PrincipalPermissionAttribute 類別的限制存取](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-114"> using the attribute, see [How to: Restrict Access with the PrincipalPermissionAttribute Class](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-115">身分識別，請參閱[服務識別和驗證](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-115"> identity, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
## <a name="aspnet-membership-provider"></a><span data-ttu-id="8009e-116">ASP.NET 成員資格提供者</span><span class="sxs-lookup"><span data-stu-id="8009e-116">ASP.NET Membership Provider</span></span>  
 <span data-ttu-id="8009e-117">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 的一項功能是成員資格提供者。</span><span class="sxs-lookup"><span data-stu-id="8009e-117">A feature of [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is the membership provider.</span></span> <span data-ttu-id="8009e-118">儘管從技術角度來說，成員資格提供者並不屬於存取控制機制，但其可透過限制能夠存取服務端點的一組可能識別來控制對於服務的存取。</span><span class="sxs-lookup"><span data-stu-id="8009e-118">Even though the membership provider is not technically an access control mechanism, it allows controlling access to the service by limiting the set of possible identities that can access the service's endpoint.</span></span> <span data-ttu-id="8009e-119">成員資格功能包括可以填入 (Populate) 使用者名稱/密碼組合的資料庫，而該名稱/密碼組合可讓網站的使用者配合該網站來建立帳戶。</span><span class="sxs-lookup"><span data-stu-id="8009e-119">The membership feature includes a database that can be populated with user name/password combinations that enable users of a Web site to establish accounts with the site.</span></span> <span data-ttu-id="8009e-120">為了存取使用成員資格提供者的服務，使用者必須以自己的使用者名稱和密碼登入。</span><span class="sxs-lookup"><span data-stu-id="8009e-120">To access a service that uses the membership provider, a user must log on with his or her user name and password.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8009e-121">您必須先使用 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 功能填入資料庫，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 服務才能使用該資料進行授權。</span><span class="sxs-lookup"><span data-stu-id="8009e-121">You must first populate the database using the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] feature before a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service can use it for authorization purposes.</span></span>  
  
 <span data-ttu-id="8009e-122">如果已經從現有 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 網站建立了成員資格資料庫，而且要讓相同的使用者使用您的服務 (即透過相同的使用者名稱和密碼進行授權)，您也可以使用成員資格功能。</span><span class="sxs-lookup"><span data-stu-id="8009e-122">You can also use the membership feature if you already have a membership database from an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] Web site and you want to enable the same users to use your service, authorized with the same user names and passwords.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-123">使用中的成員資格功能[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]服務，請參閱[How to： 使用 ASP.NET 成員資格提供者](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-123"> using the membership feature in a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, see [How to: Use the ASP.NET Membership Provider](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-membership-provider.md).</span></span>  
  
## <a name="aspnet-role-provider"></a><span data-ttu-id="8009e-124">ASP.NET 角色提供者</span><span class="sxs-lookup"><span data-stu-id="8009e-124">ASP.NET Role Provider</span></span>  
 <span data-ttu-id="8009e-125">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 的另一項功能便是使用角色管理授權的能力。</span><span class="sxs-lookup"><span data-stu-id="8009e-125">Another feature of [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] is the ability to manage authorization using roles.</span></span> <span data-ttu-id="8009e-126">[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 角色提供者可以讓開發人員建立使用者的角色，並指派每名使用者為一個或多個角色。</span><span class="sxs-lookup"><span data-stu-id="8009e-126">The [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider enables a developer to create roles for users and to assign each user to a role or roles.</span></span> <span data-ttu-id="8009e-127">就像使用成員資格提供者，角色和指派會儲存在資料庫中，而且可以使用 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 角色提供者之特定實作 (Implementation) 所提供的工具進行填入。</span><span class="sxs-lookup"><span data-stu-id="8009e-127">As with the membership provider, the roles and assignments are stored in a database, and can be populated using tools provided by a particular implementation of the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider.</span></span> <span data-ttu-id="8009e-128">就像使用成員資格功能，[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 開發人員可以使用資料庫中的資訊，依據個別角色來授權服務使用者。</span><span class="sxs-lookup"><span data-stu-id="8009e-128">As with the membership feature, [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] developers can use the information in the database to authorize service users by roles.</span></span> <span data-ttu-id="8009e-129">例如，他們可以結合使用角色提供者與前述的 `PrincipalPermissionAttribute` 存取控制機制。</span><span class="sxs-lookup"><span data-stu-id="8009e-129">They can, for example, use the role provider in combination with the `PrincipalPermissionAttribute` access control mechanism described above.</span></span>  
  
 <span data-ttu-id="8009e-130">如果已經建立現有的 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 角色提供者資料庫，而且要使用 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 服務中的相同規則集和使用者指派，您也可以使用 [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] 角色提供者。</span><span class="sxs-lookup"><span data-stu-id="8009e-130">You can also use the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider if you have an existing [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider database and want to use the same set of rules and user assignments in your [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-131">使用角色提供者功能，請參閱[How to： 使用 ASP.NET 角色提供者搭配服務](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-131"> using the role provider feature, see [How to: Use the ASP.NET Role Provider with a Service](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md).</span></span>  
  
## <a name="authorization-manager"></a><span data-ttu-id="8009e-132">授權管理員</span><span class="sxs-lookup"><span data-stu-id="8009e-132">Authorization Manager</span></span>  
 <span data-ttu-id="8009e-133">另一項功能會結合授權管理員 (AzMan) 與 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 角色提供者來授權用戶端。</span><span class="sxs-lookup"><span data-stu-id="8009e-133">Another feature combines the Authorization Manager (AzMan) with the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider to authorize clients.</span></span> <span data-ttu-id="8009e-134">當 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 裝載 Web 服務時，AzMan 即可整合到應用程式中，如此一來，服務的授權便能透過 AzMan 完成。</span><span class="sxs-lookup"><span data-stu-id="8009e-134">When [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] hosts a Web service, AzMan can be integrated into the application so that authorization to the service is done through AzMan.</span></span> [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]<span data-ttu-id="8009e-135"> 角色管理員會提供特定應用程式開發介面來讓您管理應用程式角色、從角色新增和移除使用者，以及檢查角色成員資格，但是您無法使用它來查詢某位使用者是否已獲授權為可執行具名的工作或作業。</span><span class="sxs-lookup"><span data-stu-id="8009e-135"> role manager provides an API that enables you to manage application roles, add and remove users from roles, and check role membership, but it does not allow you to query whether a user is authorized to perform a named task or operation.</span></span> <span data-ttu-id="8009e-136">AzMan 可讓您定義個別的作業，並將它們結合於工作中。</span><span class="sxs-lookup"><span data-stu-id="8009e-136">AzMan allows you to define individual operations and combine them into tasks.</span></span> <span data-ttu-id="8009e-137">使用 AZMan 時，除了角色檢查以外，您也可以檢查使用者是否能夠執行某項工作。</span><span class="sxs-lookup"><span data-stu-id="8009e-137">With AZMan, in addition to role checks, you can also check whether a user can perform a task.</span></span> <span data-ttu-id="8009e-138">角色指派和工作授權可以設定在應用程式外部，或是以程式設計方式執行於應用程式內部。</span><span class="sxs-lookup"><span data-stu-id="8009e-138">Role assignment and task authorization can be configured outside of the application or performed programmatically within the application.</span></span> <span data-ttu-id="8009e-139">AzMan 管理 Microsoft 管理主控台 (MMC) 嵌入式管理單元可讓系統管理員能夠變更角色可在執行階段執行的工作，以及管理每位使用者的角色成員資格。</span><span class="sxs-lookup"><span data-stu-id="8009e-139">The AzMan administration Microsoft Management Console (MMC) snap-in allows administrators to change the tasks a role can perform at run time and to manage each user's membership of roles.</span></span>  
  
 <span data-ttu-id="8009e-140">如果已經能夠存取現有的 AzMan 安裝，而且要使用 AzMan/角色提供者組合的功能來授權您的服務使用者，您也可以使用 AzMan 和 [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] 角色提供者。</span><span class="sxs-lookup"><span data-stu-id="8009e-140">You can also use AzMan and the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider if you already have access to an existing AzMan installation and want to authorize your service users using the features of the AzMan/role provider combination.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-141">AzMan 和[!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)]角色提供者，請參閱[How To： 使用 ASP.NET 2.0 的使用授權管理員 (AzMan)](http://go.microsoft.com/fwlink/?LinkId=88951)。</span><span class="sxs-lookup"><span data-stu-id="8009e-141"> AzMan and the [!INCLUDE[vstecasp](../../../../includes/vstecasp-md.md)] role provider, see [How To: Use Authorization Manager (AzMan) with ASP.NET 2.0](http://go.microsoft.com/fwlink/?LinkId=88951).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-142">使用 AzMan 和角色提供者[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)]服務，請參閱[How to： 使用 ASP.NET 授權管理員角色提供者搭配服務](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-142"> using AzMan and the role provider for [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services, see [How to: Use the ASP.NET Authorization Manager Role Provider with a Service](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md).</span></span>  
  
## <a name="identity-model"></a><span data-ttu-id="8009e-143">識別模型</span><span class="sxs-lookup"><span data-stu-id="8009e-143">Identity Model</span></span>  
 <span data-ttu-id="8009e-144">身分識別模型是一組 API，這組 API 可讓您管理宣告和原則來授權用戶端。</span><span class="sxs-lookup"><span data-stu-id="8009e-144">The Identity Model is a set of APIs that enable you to manage claims and policies to authorize clients.</span></span> <span data-ttu-id="8009e-145">使用身分識別模型時，您可以檢查呼叫者向服務驗證本身時所使用認證中所包含的每一個宣告、比較宣告與服務的原則集，並根據比較結果來授與或拒絕存取權。</span><span class="sxs-lookup"><span data-stu-id="8009e-145">With the Identity Model, you can examine every claim contained in credentials that the caller used to authenticate itself to the service, compare the claims to the set of policies for the service, and grant or deny access based on the comparison.</span></span>  
  
 <span data-ttu-id="8009e-146">如果您需要精密控制能力，以及在授與存取權之前設定特定準則的能力，請使用身分識別模型。</span><span class="sxs-lookup"><span data-stu-id="8009e-146">Use the Identity Model if you need fine control and the ability to set specific criteria before granting access.</span></span> <span data-ttu-id="8009e-147">例如，當使用 <xref:System.Security.Permissions.PrincipalPermissionAttribute> 時，準則只是已通過驗證且屬於特定角色之使用者的身分識別。</span><span class="sxs-lookup"><span data-stu-id="8009e-147">For example, when using the <xref:System.Security.Permissions.PrincipalPermissionAttribute>, the criterion is simply that the identity of the user is authenticated and belongs to a specific role.</span></span> <span data-ttu-id="8009e-148">相較之下，若是使用身分識別模型，您就可以建立原則，表示使用者必須超過 18 歲並擁有有效的駕照，才允許該使用者檢視某份文件。</span><span class="sxs-lookup"><span data-stu-id="8009e-148">In contrast, using the Identity Model, you can create a policy that states the user must be over 18 years of age and possesses a valid driver's license before being allowed to view a document.</span></span>  
  
 <span data-ttu-id="8009e-149">有一個可以充分發揮身分識別模型宣告架構存取控制的範例，就是在發行權杖情節中使用同盟認證的情況下。</span><span class="sxs-lookup"><span data-stu-id="8009e-149">One example where you can benefit from the Identity Model claim-based access control is when using federation credentials in the issued token scenario.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-150">同盟與發行的權杖，請參閱[同盟和發出的權杖](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-150"> federation and issued tokens, see [Federation and Issued Tokens](../../../../docs/framework/wcf/feature-details/federation-and-issued-tokens.md).</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="8009e-151">識別模型中，請參閱[管理宣告和授權的方式識別模型](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)。</span><span class="sxs-lookup"><span data-stu-id="8009e-151"> the Identity Model, see [Managing Claims and Authorization with the Identity Model](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8009e-152">請參閱</span><span class="sxs-lookup"><span data-stu-id="8009e-152">See Also</span></span>  
 <xref:System.Security.Permissions.PrincipalPermissionAttribute>  
 [<span data-ttu-id="8009e-153">如何：利用 PrincipalPermissionAttribute 類別限制存取</span><span class="sxs-lookup"><span data-stu-id="8009e-153">How to: Restrict Access with the PrincipalPermissionAttribute Class</span></span>](../../../../docs/framework/wcf/how-to-restrict-access-with-the-principalpermissionattribute-class.md)  
 [<span data-ttu-id="8009e-154">如何：使用 ASP.NET 角色提供者搭配服務</span><span class="sxs-lookup"><span data-stu-id="8009e-154">How to: Use the ASP.NET Role Provider with a Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-role-provider-with-a-service.md)  
 [<span data-ttu-id="8009e-155">如何：使用 ASP.NET 授權管理員角色提供者搭配服務</span><span class="sxs-lookup"><span data-stu-id="8009e-155">How to: Use the ASP.NET Authorization Manager Role Provider with a Service</span></span>](../../../../docs/framework/wcf/feature-details/how-to-use-the-aspnet-authorization-manager-role-provider-with-a-service.md)  
 [<span data-ttu-id="8009e-156">使用身分識別模型來管理宣告與授權</span><span class="sxs-lookup"><span data-stu-id="8009e-156">Managing Claims and Authorization with the Identity Model</span></span>](../../../../docs/framework/wcf/feature-details/managing-claims-and-authorization-with-the-identity-model.md)  
 [<span data-ttu-id="8009e-157">委派和模擬</span><span class="sxs-lookup"><span data-stu-id="8009e-157">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)
