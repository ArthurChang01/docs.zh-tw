---
title: 在 Windows Process Activation Service 中裝載
ms.date: 03/30/2017
helpviewer_keywords:
- hosting services [WCF], WAS
ms.assetid: d2b9d226-15b7-41fc-8c9a-cb651ac20ecd
ms.openlocfilehash: 19a37b2d988ba779c4373ba296b43f6508db5925
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/23/2019
ms.locfileid: "54731266"
---
# <a name="hosting-in-windows-process-activation-service"></a><span data-ttu-id="4b08f-102">在 Windows Process Activation Service 中裝載</span><span class="sxs-lookup"><span data-stu-id="4b08f-102">Hosting in Windows Process Activation Service</span></span>
<span data-ttu-id="4b08f-103">Windows Process Activation Service (WAS) 管理啟動和包含該主機的 Windows Communication Foundation (WCF) 服務的應用程式的工作者處理序的存留期。</span><span class="sxs-lookup"><span data-stu-id="4b08f-103">The Windows Process Activation Service (WAS) manages the activation and lifetime of the worker processes that contain applications that host Windows Communication Foundation (WCF) services.</span></span> <span data-ttu-id="4b08f-104">WAS 處理序模型會藉由移除 HTTP 上的相依性，將 HTTP 伺服器的 [!INCLUDE[iis601](../../../../includes/iis601-md.md)] 處理序模型一般化。</span><span class="sxs-lookup"><span data-stu-id="4b08f-104">The WAS process model generalizes the [!INCLUDE[iis601](../../../../includes/iis601-md.md)] process model for the HTTP server by removing the dependency on HTTP.</span></span> <span data-ttu-id="4b08f-105">這可讓 WCF 服務使用 HTTP 和非 HTTP 通訊協定，例如 Net.TCP，請在裝載環境中支援訊息型啟用，並可讓您裝載大量應用程式，在指定電腦上。</span><span class="sxs-lookup"><span data-stu-id="4b08f-105">This allows WCF services to use both HTTP and non-HTTP protocols, such as Net.TCP, in a hosting environment that supports message-based activation and offers the ability to host a large number of applications on a given machine.</span></span>  
  
 <span data-ttu-id="4b08f-106">如在 WAS 裝載環境中，執行建置 WCF 服務的詳細資訊，請參閱[How to:將 WCF 服務裝載於 WAS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md)。</span><span class="sxs-lookup"><span data-stu-id="4b08f-106">For more information about building a WCF service that runs in the WAS hosting environment, see [How to: Host a WCF Service in WAS](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md).</span></span>  
  
 <span data-ttu-id="4b08f-107">WAS 處理序模型提供的幾項功能，可將應用程式裝載得更為穩固、容易管理，而且能夠更有效率地運用資源：</span><span class="sxs-lookup"><span data-stu-id="4b08f-107">The WAS process model provides several features that enable applications to be hosted in a way that is more robust, more manageable, and that uses resources efficiently:</span></span>  
  
-   <span data-ttu-id="4b08f-108">訊息式的應用程式啟動和背景工作處理序應用程式會動態啟動與停止，以回應透過 HTTP 和非 HTTP 網路通訊協定抵達的傳入工作項目。</span><span class="sxs-lookup"><span data-stu-id="4b08f-108">Message-based activation of applications and worker process applications start and stop dynamically in response to incoming work items that arrive using HTTP and non-HTTP network protocols.</span></span>  
  
-   <span data-ttu-id="4b08f-109">穩固的應用程式與背景工作處理序回收作業可維護執行中的應用程式健康狀況。</span><span class="sxs-lookup"><span data-stu-id="4b08f-109">Robust application and worker process recycling to maintain the health of running applications.</span></span>  
  
-   <span data-ttu-id="4b08f-110">集中式應用程式組態和管理。</span><span class="sxs-lookup"><span data-stu-id="4b08f-110">Centralized application configuration and management.</span></span>  
  
-   <span data-ttu-id="4b08f-111">可讓應用程式善用 IIS 處理序模型的優勢，而不需要部署完整的 IIS 安裝項目。</span><span class="sxs-lookup"><span data-stu-id="4b08f-111">Allows applications to take advantage of the IIS process model without requiring the deployment footprint of a full IIS installation.</span></span>  
  
 <span data-ttu-id="4b08f-112">如需 WAS 功能的詳細資訊，請參閱[IIS 7.0 Beta:IIS 7.0 的 Web 系統管理](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md)。</span><span class="sxs-lookup"><span data-stu-id="4b08f-112">For more information about WAS features, see [IIS 7.0 Beta: IIS 7.0 Web Administration](../../../../docs/framework/wcf/feature-details/hosting-in-windows-process-activation-service.md).</span></span>  
  
 <span data-ttu-id="4b08f-113">[Windows Server AppFabric](https://go.microsoft.com/fwlink/?LinkId=196496)搭配[!INCLUDE[iisver](../../../../includes/iisver-md.md)]和 Windows Process Activation Service (WAS) 來提供豐富的應用程式裝載環境，為 NET4 WCF 和 WF 服務。</span><span class="sxs-lookup"><span data-stu-id="4b08f-113">[Windows Server AppFabric](https://go.microsoft.com/fwlink/?LinkId=196496) works with [!INCLUDE[iisver](../../../../includes/iisver-md.md)] and Windows Process Activation Service (WAS) to provide a rich application hosting environment for NET4 WCF and WF services.</span></span> <span data-ttu-id="4b08f-114">這些優點包括處理序生命週期管理、處理序回收、共用裝載、快速失敗保護、處理序損壞、隨選啟動和健康監視。</span><span class="sxs-lookup"><span data-stu-id="4b08f-114">These benefits include process life-cycle management, process recycling, shared hosting, rapid failure protection, process orphaning, on-demand activation, and health monitoring.</span></span> <span data-ttu-id="4b08f-115">如需詳細資訊，請參閱 < [AppFabric 主控功能](https://go.microsoft.com/fwlink/?LinkId=196494)並[AppFabric 主控概念](https://go.microsoft.com/fwlink/?LinkId=196495)。</span><span class="sxs-lookup"><span data-stu-id="4b08f-115">For detailed information, see [AppFabric Hosting Features](https://go.microsoft.com/fwlink/?LinkId=196494) and [AppFabric Hosting Concepts](https://go.microsoft.com/fwlink/?LinkId=196495).</span></span>  
  
## <a name="elements-of-the-was-addressing-model"></a><span data-ttu-id="4b08f-116">WAS 定址模型項目</span><span class="sxs-lookup"><span data-stu-id="4b08f-116">Elements of the WAS Addressing Model</span></span>  
 <span data-ttu-id="4b08f-117">包含統一資源識別元 (URI) 位址的應用程式，這些程式碼單元會經由伺服器來管理自身的存留期和執行環境。</span><span class="sxs-lookup"><span data-stu-id="4b08f-117">Applications have Uniform Resource Identifier (URI) addresses, which are the code units whose lifetime and execution environment are managed by the server.</span></span> <span data-ttu-id="4b08f-118">單一 WAS 伺服器執行個體可以裝載許多不同的應用程式。</span><span class="sxs-lookup"><span data-stu-id="4b08f-118">A single WAS server instance can be home to many different applications.</span></span> <span data-ttu-id="4b08f-119">伺服器會組織成群組呼叫的應用程式*站台*。</span><span class="sxs-lookup"><span data-stu-id="4b08f-119">Servers organize applications into groups called *sites*.</span></span> <span data-ttu-id="4b08f-120">同一個網站中的應用程式會依階層架構順序加以排列，以反映做為應用程式外部位址使用的 URI 結構。</span><span class="sxs-lookup"><span data-stu-id="4b08f-120">Within a site, applications are arranged in a hierarchical manner that reflects the structure of the URIs that serve as their external addresses.</span></span>  
  
 <span data-ttu-id="4b08f-121">應用程式位址包含兩個部分：基底 URI 前置詞和應用程式專屬的相對位址 (路徑)，兩者混合使用時，可以提供應用程式的外部位址。</span><span class="sxs-lookup"><span data-stu-id="4b08f-121">Application addresses have two parts: a base URI prefix and an application-specific, relative address (path), which provide the external address for an application when joined together.</span></span> <span data-ttu-id="4b08f-122">基底 URI 前置詞是根據網站繫結所建構，並且用於該網站中的所有應用程式。</span><span class="sxs-lookup"><span data-stu-id="4b08f-122">The base URI prefix is constructed from the site binding and is used for all the applications under the site.</span></span> <span data-ttu-id="4b08f-123">然後應用程式專屬的路徑片段建構應用程式位址 (例如，"/ /applicationone") 並將它們附加至基底 URI 前置詞 (例如"net.tcp: //localhost") 以完整的應用程式 URI。</span><span class="sxs-lookup"><span data-stu-id="4b08f-123">Application addresses are then constructed by taking application-specific path fragments (such as, "/applicationOne") and appending them to the base URI prefix (for example, "net.tcp://localhost") to arrive at the full application URI.</span></span>  
  
 <span data-ttu-id="4b08f-124">下表針對 WAS 網站 (包含 HTTP 和非 HTTP 網站繫結) 說明幾個可能的定址案例。</span><span class="sxs-lookup"><span data-stu-id="4b08f-124">The following table illustrates several possible addressing scenarios for WAS sites with both HTTP and non-HTTP site bindings.</span></span>  
  
|<span data-ttu-id="4b08f-125">情節</span><span class="sxs-lookup"><span data-stu-id="4b08f-125">Scenario</span></span>|<span data-ttu-id="4b08f-126">網站繫結</span><span class="sxs-lookup"><span data-stu-id="4b08f-126">Site bindings</span></span>|<span data-ttu-id="4b08f-127">應用程式路徑</span><span class="sxs-lookup"><span data-stu-id="4b08f-127">Application path</span></span>|<span data-ttu-id="4b08f-128">基底應用程式 URI</span><span class="sxs-lookup"><span data-stu-id="4b08f-128">Base application URIs</span></span>|  
|--------------|-------------------|----------------------|---------------------------|  
|<span data-ttu-id="4b08f-129">僅限 HTTP</span><span class="sxs-lookup"><span data-stu-id="4b08f-129">HTTP Only</span></span>|<span data-ttu-id="4b08f-130">http: \*: 80:\*</span><span class="sxs-lookup"><span data-stu-id="4b08f-130">http: \*:80:\*</span></span>|<span data-ttu-id="4b08f-131">/appTwo</span><span class="sxs-lookup"><span data-stu-id="4b08f-131">/appTwo</span></span>|http://localhost/appTwo/|  
|<span data-ttu-id="4b08f-132">HTTP 和非 HTTP 兩者</span><span class="sxs-lookup"><span data-stu-id="4b08f-132">Both HTTP and Non-HTTP</span></span>|<span data-ttu-id="4b08f-133">http: \*: 80:\*</span><span class="sxs-lookup"><span data-stu-id="4b08f-133">http: \*:80:\*</span></span><br /><br /> <span data-ttu-id="4b08f-134">net.tcp:808:\*</span><span class="sxs-lookup"><span data-stu-id="4b08f-134">net.tcp: 808:\*</span></span>|<span data-ttu-id="4b08f-135">/appTwo</span><span class="sxs-lookup"><span data-stu-id="4b08f-135">/appTwo</span></span>|http://localhost/appTwo/<br /><span data-ttu-id="4b08f-136">net.tcp://localhost/appTwo/</span><span class="sxs-lookup"><span data-stu-id="4b08f-136">net.tcp://localhost/appTwo/</span></span>|  
|<span data-ttu-id="4b08f-137">僅限非 HTTP</span><span class="sxs-lookup"><span data-stu-id="4b08f-137">Non-HTTP only</span></span>|<span data-ttu-id="4b08f-138">net.pipe: \*</span><span class="sxs-lookup"><span data-stu-id="4b08f-138">net.pipe: \*</span></span>|<span data-ttu-id="4b08f-139">/appThree</span><span class="sxs-lookup"><span data-stu-id="4b08f-139">/appThree</span></span>|<span data-ttu-id="4b08f-140">net.pipe://appThree/</span><span class="sxs-lookup"><span data-stu-id="4b08f-140">net.pipe://appThree/</span></span>|  
  
 <span data-ttu-id="4b08f-141">您也可以針對應用程式中的服務與資源加以定址。</span><span class="sxs-lookup"><span data-stu-id="4b08f-141">Services and resources within an application can also be addressed.</span></span> <span data-ttu-id="4b08f-142">在應用程式中，應用程式資源會以相對於基底應用程式路徑的方式定址。</span><span class="sxs-lookup"><span data-stu-id="4b08f-142">Within an application, application resources are addressed relative to the base application path.</span></span> <span data-ttu-id="4b08f-143">例如，假定電腦名稱 contoso.com 上的某個網站同時包含 HTTP 和 Net.TCP 通訊協定的網站繫結。</span><span class="sxs-lookup"><span data-stu-id="4b08f-143">For example, assume that a site on a machine name contoso.com has site bindings for both the HTTP and Net.TCP protocols.</span></span> <span data-ttu-id="4b08f-144">同時假定該網站包含一個位於 /Billing 的應用程式，以便在 GetOrders.svc 公開服務。</span><span class="sxs-lookup"><span data-stu-id="4b08f-144">Also assume that the site contains one application located at /Billing, which exposes a service at GetOrders.svc.</span></span> <span data-ttu-id="4b08f-145">這時，如果 GetOrders.svc 服務公開了包含 SecureEndpoint 相對位址的端點，則服務端點會在下列兩個 URL 中公開：</span><span class="sxs-lookup"><span data-stu-id="4b08f-145">Then, if the GetOrders.svc service exposed an endpoint with a relative address of SecureEndpoint, the service endpoint would be exposed at the following two URIs:</span></span>  
  
- `http://contoso.com/Billing/GetOrders.svc/SecureEndpoint`
- `net.tcp://contoso.com/Billing/GetOrders.svc/SecureEndpoint`
  
## <a name="the-was-runtime"></a><span data-ttu-id="4b08f-146">WAS 執行階段</span><span class="sxs-lookup"><span data-stu-id="4b08f-146">The WAS Runtime</span></span>  
 <span data-ttu-id="4b08f-147">為了定址與管理方便，應用程式會組織成網站。</span><span class="sxs-lookup"><span data-stu-id="4b08f-147">Applications are organized into sites for the purposes of addressing and management.</span></span> <span data-ttu-id="4b08f-148">在執行階段，應用程式也會組織成應用程式集區中的群組。</span><span class="sxs-lookup"><span data-stu-id="4b08f-148">At run time, applications are also grouped together into application pools.</span></span> <span data-ttu-id="4b08f-149">一個應用程式集區可包含來自許多不同網站的不同應用程式。</span><span class="sxs-lookup"><span data-stu-id="4b08f-149">An application pool can house many different applications from many different sites.</span></span> <span data-ttu-id="4b08f-150">應用程式集區中的所有應用程式都共用一組執行階段特徵。</span><span class="sxs-lookup"><span data-stu-id="4b08f-150">All of the applications inside an application pool share a common set of run-time characteristics.</span></span> <span data-ttu-id="4b08f-151">例如，它們會在相同版本的 Common Language Runtime (CLR) 中執行，而且共用相同的處理序身分識別。</span><span class="sxs-lookup"><span data-stu-id="4b08f-151">For example, they all run under the same version of the common language runtime (CLR) and they all share a common process identity.</span></span> <span data-ttu-id="4b08f-152">每個應用程式集區都對應至一個背景工作處理序 (w3wp.exe) 的執行個體。</span><span class="sxs-lookup"><span data-stu-id="4b08f-152">Each application pool corresponds to an instance of a worker process (w3wp.exe).</span></span> <span data-ttu-id="4b08f-153">每個在共用應用程式集區內執行的 Managed 應用程式都會透過 CLR AppDomain 與其他應用程式隔離開來。</span><span class="sxs-lookup"><span data-stu-id="4b08f-153">Each managed application running inside of a shared application pool is isolated from other applications by means of a CLR AppDomain.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4b08f-154">另請參閱</span><span class="sxs-lookup"><span data-stu-id="4b08f-154">See also</span></span>
- [<span data-ttu-id="4b08f-155">WAS 啟用架構</span><span class="sxs-lookup"><span data-stu-id="4b08f-155">WAS Activation Architecture</span></span>](../../../../docs/framework/wcf/feature-details/was-activation-architecture.md)
- [<span data-ttu-id="4b08f-156">設定用於 WCF 的 WAS</span><span class="sxs-lookup"><span data-stu-id="4b08f-156">Configuring WAS for Use with WCF</span></span>](../../../../docs/framework/wcf/feature-details/configuring-the-wpa--service-for-use-with-wcf.md)
- [<span data-ttu-id="4b08f-157">如何：安裝及設定 WCF 啟用元件</span><span class="sxs-lookup"><span data-stu-id="4b08f-157">How to: Install and Configure WCF Activation Components</span></span>](../../../../docs/framework/wcf/feature-details/how-to-install-and-configure-wcf-activation-components.md)
- [<span data-ttu-id="4b08f-158">如何：裝載在 WAS 中的 WCF 服務</span><span class="sxs-lookup"><span data-stu-id="4b08f-158">How to: Host a WCF Service in WAS</span></span>](../../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md)
- [<span data-ttu-id="4b08f-159">Windows Server AppFabric 裝載功能</span><span class="sxs-lookup"><span data-stu-id="4b08f-159">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=201276)
