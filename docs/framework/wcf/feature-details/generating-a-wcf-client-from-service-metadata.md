---
title: "從服務中繼資料產生 WCF 用戶端"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 27f8f545-cc44-412a-b104-617e0781b803
caps.latest.revision: "9"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: f0b35697761263b0a605f46fdb6dfbb472a354b8
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/21/2017
---
# <a name="generating-a-wcf-client-from-service-metadata"></a><span data-ttu-id="aef63-102">從服務中繼資料產生 WCF 用戶端</span><span class="sxs-lookup"><span data-stu-id="aef63-102">Generating a WCF Client from Service Metadata</span></span>
<span data-ttu-id="aef63-103">本主題說明如何使用 Svcutil.exe 中不同的參數，從中繼資料文件中產生用戶端。</span><span class="sxs-lookup"><span data-stu-id="aef63-103">This topic describes how to use the various switches in Svcutil.exe to generate clients from metadata documents.</span></span>  
  
 <span data-ttu-id="aef63-104">中繼資料文件可以位於永久性儲存裝置上或在線上擷取。</span><span class="sxs-lookup"><span data-stu-id="aef63-104">Metadata documents can be on a durable storage or be retrieved online.</span></span> <span data-ttu-id="aef63-105">線上擷取會遵循 WS-MetadataExchange 通訊協定或 Microsoft Discovery (DISCO) 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="aef63-105">Online retrieval follows either the WS-MetadataExchange protocol or the Microsoft Discovery (DISCO) protocol.</span></span> <span data-ttu-id="aef63-106">Svcutil.exe 會同時發出以下中繼資料要求，以擷取中繼資料：</span><span class="sxs-lookup"><span data-stu-id="aef63-106">Svcutil.exe issues the following metadata requests simultaneously to retrieve metadata:</span></span>  
  
-   <span data-ttu-id="aef63-107">對所提供位址的 WS-MetadataExchange (MEX) 要求。</span><span class="sxs-lookup"><span data-stu-id="aef63-107">WS-MetadataExchange (MEX) request to the supplied address.</span></span>  
  
-   <span data-ttu-id="aef63-108">對附加 `/mex` 之所提供位址的 MEX 要求。</span><span class="sxs-lookup"><span data-stu-id="aef63-108">MEX request to the supplied address with `/mex` appended.</span></span>  
  
-   <span data-ttu-id="aef63-109">DISCO 要求 (使用[DiscoveryClientProtocol](http://go.microsoft.com/fwlink/?LinkId=94777)從 ASP.NET Web 服務) 提供的位址。</span><span class="sxs-lookup"><span data-stu-id="aef63-109">DISCO request (using the [DiscoveryClientProtocol](http://go.microsoft.com/fwlink/?LinkId=94777) from ASP.NET Web services) to the supplied address.</span></span>  
  
 <span data-ttu-id="aef63-110">Svcutil.exe 會根據 Web 服務描述語言 (WSDL) 或從服務收到的原則檔產生用戶端。</span><span class="sxs-lookup"><span data-stu-id="aef63-110">Svcutil.exe generates the client based on the Web Services Description Language (WSDL) or policy file received from the service.</span></span> <span data-ttu-id="aef63-111">使用者主要名稱 (UPN) 是串連包含 "@" 的使用者名稱，並新增完整網域名稱 (FQDN) 所產生的。</span><span class="sxs-lookup"><span data-stu-id="aef63-111">The user principal name (UPN) is generated by concatenating the user name with "@" and then adding a fully-qualified domain name (FQDN).</span></span> <span data-ttu-id="aef63-112">不過，如果在 Active Directory 註冊的使用者，此格式不正確，而且工具所產生的 UPN 會造成 Kerberos 驗證，並出現下列錯誤訊息中的失敗：**登入嘗試失敗。**</span><span class="sxs-lookup"><span data-stu-id="aef63-112">However, for users who registered on Active Directory, this format is not valid and the UPN that the tool generates causes a failure in the Kerberos authentication with the following error message: **The logon attempt failed.**</span></span> <span data-ttu-id="aef63-113">若要解決這個問題，請手動修復由此工具產生的用戶端檔案。</span><span class="sxs-lookup"><span data-stu-id="aef63-113">To resolve this problem, manually fix the client file that the tool generated.</span></span>  
  
```  
svcutil.exe [/t:code]  <metadataDocumentPath>* | <url>* | <epr>  
```  
  
## <a name="referencing-and-sharing-types"></a><span data-ttu-id="aef63-114">參照與共用型別</span><span class="sxs-lookup"><span data-stu-id="aef63-114">Referencing and Sharing Types</span></span>  
  
|<span data-ttu-id="aef63-115">選項</span><span class="sxs-lookup"><span data-stu-id="aef63-115">Option</span></span>|<span data-ttu-id="aef63-116">說明</span><span class="sxs-lookup"><span data-stu-id="aef63-116">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="aef63-117">**/reference:\<檔案路徑 >**</span><span class="sxs-lookup"><span data-stu-id="aef63-117">**/reference:\<file path>**</span></span>|<span data-ttu-id="aef63-118">參考指定組件中的型別。</span><span class="sxs-lookup"><span data-stu-id="aef63-118">References types in the specified assembly.</span></span> <span data-ttu-id="aef63-119">產生用戶端時，使用這個選項即可指定組件，這些組件可能包含代表匯入之中繼資料的類型。</span><span class="sxs-lookup"><span data-stu-id="aef63-119">When generating clients, use this option to specify assemblies that might contain types that represent the metadata being imported.</span></span><br /><br /> <span data-ttu-id="aef63-120">簡短形式：`/r`</span><span class="sxs-lookup"><span data-stu-id="aef63-120">Short form: `/r`</span></span>|  
|<span data-ttu-id="aef63-121">**/excludeType:\<類型 >**</span><span class="sxs-lookup"><span data-stu-id="aef63-121">**/excludeType:\<type>**</span></span>|<span data-ttu-id="aef63-122">指定要從參考的合約類型排除的完整型別名稱或組件限定型別名稱。</span><span class="sxs-lookup"><span data-stu-id="aef63-122">Specifies a fully-qualified or assembly-qualified type name to be excluded from referenced contract types.</span></span><br /><br /> <span data-ttu-id="aef63-123">簡短形式：`/et`</span><span class="sxs-lookup"><span data-stu-id="aef63-123">Short form: `/et`</span></span>|  
  
## <a name="choosing-a-serializer"></a><span data-ttu-id="aef63-124">選擇序列化程式</span><span class="sxs-lookup"><span data-stu-id="aef63-124">Choosing a Serializer</span></span>  
  
|<span data-ttu-id="aef63-125">選項</span><span class="sxs-lookup"><span data-stu-id="aef63-125">Option</span></span>|<span data-ttu-id="aef63-126">說明</span><span class="sxs-lookup"><span data-stu-id="aef63-126">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="aef63-127">**/serializer:Auto**</span><span class="sxs-lookup"><span data-stu-id="aef63-127">**/serializer:Auto**</span></span>|<span data-ttu-id="aef63-128">自動選取序列化程式。</span><span class="sxs-lookup"><span data-stu-id="aef63-128">Automatically selects the serializer.</span></span> <span data-ttu-id="aef63-129">這會使用 `DataContract` 序列化程式。</span><span class="sxs-lookup"><span data-stu-id="aef63-129">This uses the `DataContract` serializer.</span></span> <span data-ttu-id="aef63-130">如果這個作業失敗，則使用 `XmlSerializer`。</span><span class="sxs-lookup"><span data-stu-id="aef63-130">If this fails, the `XmlSerializer` is used.</span></span><br /><br /> <span data-ttu-id="aef63-131">簡短形式：`/ser:Auto`</span><span class="sxs-lookup"><span data-stu-id="aef63-131">Short Form: `/ser:Auto`</span></span>|  
|<span data-ttu-id="aef63-132">**/serializer:DataContractSerializer**</span><span class="sxs-lookup"><span data-stu-id="aef63-132">**/serializer:DataContractSerializer**</span></span>|<span data-ttu-id="aef63-133">產生使用 `DataContract` 序列化程式以進行序列化與還原序列化的資料型別。</span><span class="sxs-lookup"><span data-stu-id="aef63-133">Generates data types that use the `DataContract` serializer for serialization and deserialization.</span></span><br /><br /> <span data-ttu-id="aef63-134">簡短形式：`/ser:DataContractSerializer`</span><span class="sxs-lookup"><span data-stu-id="aef63-134">Short form: `/ser:DataContractSerializer`</span></span>|  
|<span data-ttu-id="aef63-135">**/serializer: xmlserializer**</span><span class="sxs-lookup"><span data-stu-id="aef63-135">**/serializer:XmlSerializer**</span></span>|<span data-ttu-id="aef63-136">產生使用 `XmlSerializer` 以進行序列化與還原序列化的資料型別。</span><span class="sxs-lookup"><span data-stu-id="aef63-136">Generates data types that use the `XmlSerializer` for serialization and deserialization.</span></span><br /><br /> <span data-ttu-id="aef63-137">簡短形式：`/ser:XmlSerializer`</span><span class="sxs-lookup"><span data-stu-id="aef63-137">Short form: `/ser:XmlSerializer`</span></span>|  
|<span data-ttu-id="aef63-138">**/importXmlTypes**</span><span class="sxs-lookup"><span data-stu-id="aef63-138">**/importXmlTypes**</span></span>|<span data-ttu-id="aef63-139">設定 `DataContract` 序列化程式將非 `DataContract` 型別匯入為 `IXmlSerializable` 型別。</span><span class="sxs-lookup"><span data-stu-id="aef63-139">Configures the `DataContract` serializer to import non-`DataContract` types as `IXmlSerializable` types.</span></span><br /><br /> <span data-ttu-id="aef63-140">簡短形式：`/ixt`</span><span class="sxs-lookup"><span data-stu-id="aef63-140">Short form: `/ixt`</span></span>|  
|<span data-ttu-id="aef63-141">**/dataContractOnly**</span><span class="sxs-lookup"><span data-stu-id="aef63-141">**/dataContractOnly**</span></span>|<span data-ttu-id="aef63-142">只產生 `DataContract` 型別的程式碼。</span><span class="sxs-lookup"><span data-stu-id="aef63-142">Generates code for `DataContract` types only.</span></span> <span data-ttu-id="aef63-143">會產生 `ServiceContract` 型別。</span><span class="sxs-lookup"><span data-stu-id="aef63-143">`ServiceContract` types are generated.</span></span><br /><br /> <span data-ttu-id="aef63-144">這個選項應該只能指定本機中繼資料檔案。</span><span class="sxs-lookup"><span data-stu-id="aef63-144">You should specify only local metadata files for this option.</span></span><br /><br /> <span data-ttu-id="aef63-145">簡短形式：`/dconly`</span><span class="sxs-lookup"><span data-stu-id="aef63-145">Short form: `/dconly`</span></span>|  
  
## <a name="choosing-a-language-for-the-client"></a><span data-ttu-id="aef63-146">選擇用戶端語言</span><span class="sxs-lookup"><span data-stu-id="aef63-146">Choosing a Language for the Client</span></span>  
  
|<span data-ttu-id="aef63-147">選項</span><span class="sxs-lookup"><span data-stu-id="aef63-147">Option</span></span>|<span data-ttu-id="aef63-148">說明</span><span class="sxs-lookup"><span data-stu-id="aef63-148">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="aef63-149">**/language:\<語言 >**</span><span class="sxs-lookup"><span data-stu-id="aef63-149">**/language:\<language>**</span></span>|<span data-ttu-id="aef63-150">指定要用於產生程式碼的程式語言。</span><span class="sxs-lookup"><span data-stu-id="aef63-150">Specifies the programming language to use for code generation.</span></span> <span data-ttu-id="aef63-151">請提供在 Machine.config 檔案中註冊的語言名稱，或繼承自 <xref:System.CodeDom.Compiler.CodeDomProvider> 之類別的完整名稱。</span><span class="sxs-lookup"><span data-stu-id="aef63-151">Provide either a language name registered in the Machine.config file or the fully-qualified name of a class that inherits from <xref:System.CodeDom.Compiler.CodeDomProvider>.</span></span><br /><br /> <span data-ttu-id="aef63-152">值：c#、cs、csharp、vb、vbs、visualbasic、vbscript、javascript、c++、mc、cpp</span><span class="sxs-lookup"><span data-stu-id="aef63-152">Values: c#, cs, csharp, vb, vbs, visualbasic, vbscript, javascript, c++, mc, cpp</span></span><br /><br /> <span data-ttu-id="aef63-153">預設：csharp</span><span class="sxs-lookup"><span data-stu-id="aef63-153">Default: csharp</span></span><br /><br /> <span data-ttu-id="aef63-154">簡短形式：`/l`</span><span class="sxs-lookup"><span data-stu-id="aef63-154">Short form: `/l`</span></span><br /><br /> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="aef63-155">[CodeDomProvider 類別](http://go.microsoft.com/fwlink/?LinkId=94778)。</span><span class="sxs-lookup"><span data-stu-id="aef63-155"> [CodeDomProvider Class](http://go.microsoft.com/fwlink/?LinkId=94778).</span></span>|  
  
## <a name="choosing-a-namespace-for-the-client"></a><span data-ttu-id="aef63-156">選擇用戶端命名空間</span><span class="sxs-lookup"><span data-stu-id="aef63-156">Choosing a Namespace for the Client</span></span>  
  
|<span data-ttu-id="aef63-157">選項</span><span class="sxs-lookup"><span data-stu-id="aef63-157">Option</span></span>|<span data-ttu-id="aef63-158">說明</span><span class="sxs-lookup"><span data-stu-id="aef63-158">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="aef63-159">**/namespace:\<字串、 字串 >**</span><span class="sxs-lookup"><span data-stu-id="aef63-159">**/namespace:\<string,string>**</span></span>|<span data-ttu-id="aef63-160">指定從 WSDL 或 XML 結構描述 `targetNamespace` 到 Common Language Runtime (CLR) 命名空間的對應。</span><span class="sxs-lookup"><span data-stu-id="aef63-160">Specifies a mapping from a WSDL or XML Schema `targetNamespace` to a common language runtime (CLR) namespace.</span></span> <span data-ttu-id="aef63-161">使用萬用字元 (*) 做為 `targetNamespace` 會對應至所有的 `targetNamespaces`，而不會明確對應至該 CLR 命名空間。</span><span class="sxs-lookup"><span data-stu-id="aef63-161">Using a wildcard (*) for the `targetNamespace` maps all `targetNamespaces` without an explicit mapping to that CLR namespace.</span></span><br /><br /> <span data-ttu-id="aef63-162">為了確保訊息合約名稱不會與作業名稱衝突，您應該以雙冒號 (`::`) 來限定型別參照，或確定名稱為唯一。</span><span class="sxs-lookup"><span data-stu-id="aef63-162">To make sure that the message contract name does not collide with the operation name, either qualify the type reference with double colons (`::`) or make sure the names are unique.</span></span><br /><br /> <span data-ttu-id="aef63-163">預設：衍生自 `DataContracts` 的結構描述文件之目標命名空間。</span><span class="sxs-lookup"><span data-stu-id="aef63-163">Default: Derived from the target namespace of the schema document for `DataContracts`.</span></span> <span data-ttu-id="aef63-164">預設命名空間用於所有其他產生的型別。</span><span class="sxs-lookup"><span data-stu-id="aef63-164">The default namespace is used for all other generated types.</span></span><br /><br /> <span data-ttu-id="aef63-165">簡短形式：`/n`</span><span class="sxs-lookup"><span data-stu-id="aef63-165">Short form: `/n`</span></span>|  
  
## <a name="choosing-a-data-binding"></a><span data-ttu-id="aef63-166">選擇資料繫結</span><span class="sxs-lookup"><span data-stu-id="aef63-166">Choosing a Data Binding</span></span>  
  
|<span data-ttu-id="aef63-167">選項</span><span class="sxs-lookup"><span data-stu-id="aef63-167">Option</span></span>|<span data-ttu-id="aef63-168">說明</span><span class="sxs-lookup"><span data-stu-id="aef63-168">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="aef63-169">**/enableDataBinding**</span><span class="sxs-lookup"><span data-stu-id="aef63-169">**/enableDataBinding**</span></span>|<span data-ttu-id="aef63-170">在所有 <xref:System.ComponentModel.INotifyPropertyChanged> 型別上實作 `DataContract` 介面，以啟用資料繫結。</span><span class="sxs-lookup"><span data-stu-id="aef63-170">Implements the <xref:System.ComponentModel.INotifyPropertyChanged> interface on all `DataContract` types to enable data binding.</span></span><br /><br /> <span data-ttu-id="aef63-171">簡短形式：`/edb`</span><span class="sxs-lookup"><span data-stu-id="aef63-171">Short form: `/edb`</span></span>|  
  
## <a name="generating-configuration"></a><span data-ttu-id="aef63-172">產生組態</span><span class="sxs-lookup"><span data-stu-id="aef63-172">Generating Configuration</span></span>  
  
|<span data-ttu-id="aef63-173">選項</span><span class="sxs-lookup"><span data-stu-id="aef63-173">Option</span></span>|<span data-ttu-id="aef63-174">說明</span><span class="sxs-lookup"><span data-stu-id="aef63-174">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="aef63-175">**/config:\<configFile >**</span><span class="sxs-lookup"><span data-stu-id="aef63-175">**/config:\<configFile>**</span></span>|<span data-ttu-id="aef63-176">針對產生的組態檔指定檔案名稱。</span><span class="sxs-lookup"><span data-stu-id="aef63-176">Specifies the file name for the generated configuration file.</span></span><br /><br /> <span data-ttu-id="aef63-177">預設：output.config</span><span class="sxs-lookup"><span data-stu-id="aef63-177">Default: output.config</span></span>|  
|<span data-ttu-id="aef63-178">**/mergeConfig**</span><span class="sxs-lookup"><span data-stu-id="aef63-178">**/mergeConfig**</span></span>|<span data-ttu-id="aef63-179">將產生的組態合併至現有檔案，而非覆寫現有檔案。</span><span class="sxs-lookup"><span data-stu-id="aef63-179">Merges the generated configuration into an existing file, instead of overwriting the existing file.</span></span>|  
|<span data-ttu-id="aef63-180">**/noConfig**</span><span class="sxs-lookup"><span data-stu-id="aef63-180">**/noConfig**</span></span>|<span data-ttu-id="aef63-181">不要產生組態檔。</span><span class="sxs-lookup"><span data-stu-id="aef63-181">Do not generate configuration files.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="aef63-182">另請參閱</span><span class="sxs-lookup"><span data-stu-id="aef63-182">See Also</span></span>  
 [<span data-ttu-id="aef63-183">使用中繼資料</span><span class="sxs-lookup"><span data-stu-id="aef63-183">Using Metadata</span></span>](../../../../docs/framework/wcf/feature-details/using-metadata.md)  
 [<span data-ttu-id="aef63-184">中繼資料架構概觀</span><span class="sxs-lookup"><span data-stu-id="aef63-184">Metadata Architecture Overview</span></span>](../../../../docs/framework/wcf/feature-details/metadata-architecture-overview.md)
