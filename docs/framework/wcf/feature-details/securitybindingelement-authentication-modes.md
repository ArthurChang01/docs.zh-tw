---
title: SecurityBindingElement 驗證模式
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 12300bf4-c730-4405-9f65-d286f68b5a43
ms.openlocfilehash: d55bc0e1ccd45409c09ddeba820ed74d00ae86f5
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/22/2019
ms.locfileid: "69949344"
---
# <a name="securitybindingelement-authentication-modes"></a><span data-ttu-id="ca50f-102">SecurityBindingElement 驗證模式</span><span class="sxs-lookup"><span data-stu-id="ca50f-102">SecurityBindingElement Authentication Modes</span></span>
<span data-ttu-id="ca50f-103">Windows Communication Foundation (WCF) 提供數種模式, 讓用戶端和服務彼此驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-103">Windows Communication Foundation (WCF) provides several modes by which clients and services authenticate to one another.</span></span> <span data-ttu-id="ca50f-104">您可以在 <xref:System.ServiceModel.Channels.SecurityBindingElement> 類別上使用靜態方法或透過組態，建立這些驗證模式的安全性繫結項目。</span><span class="sxs-lookup"><span data-stu-id="ca50f-104">You can create security binding elements for these authentication modes by using static methods on the <xref:System.ServiceModel.Channels.SecurityBindingElement> class or through configuration.</span></span> <span data-ttu-id="ca50f-105">本主題會簡短說明這 18 種驗證模式。</span><span class="sxs-lookup"><span data-stu-id="ca50f-105">This topic briefly describes the 18 authentication modes.</span></span>  
  
 <span data-ttu-id="ca50f-106">如需使用其中一種驗證模式之元素的範例, 請參閱[如何:為指定的驗證模式](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)建立 SecurityBindingElement。</span><span class="sxs-lookup"><span data-stu-id="ca50f-106">For an example of using the element for one of the authentication modes, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="basic-configuration-programming"></a><span data-ttu-id="ca50f-107">基本組態程式設計</span><span class="sxs-lookup"><span data-stu-id="ca50f-107">Basic Configuration Programming</span></span>  
 <span data-ttu-id="ca50f-108">下列程序會說明如何使用組態檔來設定驗證模式。</span><span class="sxs-lookup"><span data-stu-id="ca50f-108">The following procedure describes how to set the authentication mode in a configuration file.</span></span>  
  
#### <a name="to-set-the-authentication-mode-in-configuration"></a><span data-ttu-id="ca50f-109">使用組態來設定驗證模式</span><span class="sxs-lookup"><span data-stu-id="ca50f-109">To set the authentication mode in configuration</span></span>  
  
1. <span data-ttu-id="ca50f-110">對於系結 > 專案, 請加入[ \<customBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)。 [ \< ](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md)</span><span class="sxs-lookup"><span data-stu-id="ca50f-110">To the [\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element, add a [\<customBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md).</span></span>  
  
2. <span data-ttu-id="ca50f-111">做為子項目, 請將系結[ \<>](../../../../docs/framework/misc/binding.md)專案新增`<customBinding>`至專案。</span><span class="sxs-lookup"><span data-stu-id="ca50f-111">As a child element, add a [\<binding>](../../../../docs/framework/misc/binding.md) element to the `<customBinding>` element.</span></span>  
  
3. <span data-ttu-id="ca50f-112">將 `<security>` 項目加入至 `<binding>` 項目。</span><span class="sxs-lookup"><span data-stu-id="ca50f-112">Add a `<security>` element to the `<binding>` element.</span></span>  
  
4. <span data-ttu-id="ca50f-113">將 `authenticationMode` 屬性設定為下列其中一個描述值。</span><span class="sxs-lookup"><span data-stu-id="ca50f-113">Set the `authenticationMode` attribute to one of the values described below.</span></span> <span data-ttu-id="ca50f-114">例如，下列程式碼會將此模式設定為 `AnonymousForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-114">For example, the following code sets the mode to `AnonymousForCertificate`.</span></span>  
  
    ```xml  
    <bindings>  
      <customBinding>  
        <binding name="SecureCustomBinding">  
         <security authenticationMode ="AnonymousForCertificate" />  
        </binding>  
      </customBinding>  
    </bindings>  
    ```  
  
#### <a name="to-set-the-mode-programmatically"></a><span data-ttu-id="ca50f-115">以程式設計方式來設定模式</span><span class="sxs-lookup"><span data-stu-id="ca50f-115">To set the mode programmatically</span></span>  
  
1. <span data-ttu-id="ca50f-116">判斷傳回型別，該型別可能是下列其中一種型別：<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>、<xref:System.ServiceModel.Channels.TransportSecurityBindingElement>、<xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> 或 <xref:System.ServiceModel.Channels.SecurityBindingElement>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-116">Determine the return type, which can be one of the following: <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>, <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>, or <xref:System.ServiceModel.Channels.SecurityBindingElement>.</span></span>  
  
2. <span data-ttu-id="ca50f-117">呼叫 <xref:System.ServiceModel.Channels.SecurityBindingElement> 類別的適當靜態方法。</span><span class="sxs-lookup"><span data-stu-id="ca50f-117">Call the appropriate static method of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span> <span data-ttu-id="ca50f-118">例如，下列程式碼會呼叫 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="ca50f-118">For example, the following code calls the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A> method.</span></span>  
  
     [!code-csharp[c_CustomBindingsAuthMode#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombindingsauthmode/cs/source.cs#3)]
     [!code-vb[c_CustomBindingsAuthMode#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_custombindingsauthmode/vb/source.vb#3)]  
  
3. <span data-ttu-id="ca50f-119">使用繫結項目來建立自訂繫結。</span><span class="sxs-lookup"><span data-stu-id="ca50f-119">Use the binding element to create the custom binding.</span></span> <span data-ttu-id="ca50f-120">如需詳細資訊, 請參閱[自訂](../../../../docs/framework/wcf/extending/custom-bindings.md)系結。</span><span class="sxs-lookup"><span data-stu-id="ca50f-120">For more information, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md).</span></span>  
  
## <a name="mode-descriptions"></a><span data-ttu-id="ca50f-121">模式描述</span><span class="sxs-lookup"><span data-stu-id="ca50f-121">Mode Descriptions</span></span>  
  
### <a name="anonymousforcertificate"></a><span data-ttu-id="ca50f-122">AnonymousForCertificate</span><span class="sxs-lookup"><span data-stu-id="ca50f-122">AnonymousForCertificate</span></span>  
 <span data-ttu-id="ca50f-123">在此驗證模式中，用戶端為匿名，而服務會使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-123">With this authentication mode, the client is anonymous and the service is authenticated using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-124">安全性繫結項目是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-124">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-125">或者, 將 < `authenticationMode` `security`> 元素的屬性設定為`AnonymousForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-125">Alternatively, set the `authenticationMode` attribute of the <`security`> element to `AnonymousForCertificate`.</span></span>  
  
### <a name="anonymousforsslnegotiated"></a><span data-ttu-id="ca50f-126">AnonymousForSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="ca50f-126">AnonymousForSslNegotiated</span></span>  
 <span data-ttu-id="ca50f-127">在此驗證模式中，用戶端為匿名，而服務會使用在執行階段交涉的 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-127">With this authentication mode, the client is anonymous and the service is authenticated using an X.509 certificate that is negotiated at run time.</span></span> <span data-ttu-id="ca50f-128">如果為第一個參數傳遞的值是 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 時，安全性繫結項目就是由 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> 方法傳回的 `false`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-128">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> method when a value of `false` is passed for the first parameter.</span></span> <span data-ttu-id="ca50f-129">或者，可以將 `authenticationMode` 屬性設定為 `AnonymousForSslNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-129">Alternatively, set the `authenticationMode` attribute to `AnonymousForSslNegotiated`.</span></span>  
  
### <a name="certificateovertransport"></a><span data-ttu-id="ca50f-130">CertificateOverTransport</span><span class="sxs-lookup"><span data-stu-id="ca50f-130">CertificateOverTransport</span></span>  
 <span data-ttu-id="ca50f-131">在此驗證模式中，用戶端會使用出現在 SOAP 層中當做簽署支援權杖 (也就是簽署訊息簽章的權杖) 的 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-131">With this authentication mode, the client authenticates using an X.509 certificate that appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-132">服務會在傳輸層上使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-132">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="ca50f-133">安全性繫結項目是由 <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateCertificateOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-133">The security binding element is a <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateCertificateOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-134">或者，可以將 `authenticationMode` 屬性設定為 `CertificateOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-134">Alternatively, set the `authenticationMode` attribute to `CertificateOverTransport`.</span></span>  
  
### <a name="issuedtoken"></a><span data-ttu-id="ca50f-135">IssuedToken</span><span class="sxs-lookup"><span data-stu-id="ca50f-135">IssuedToken</span></span>  
 <span data-ttu-id="ca50f-136">在此驗證模式中，用戶端本身不會向服務驗證，而是向安全性權杖服務驗證並接收 SAML 權杖，接著將該權杖呈現給伺服器，證明自己知道共用金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca50f-136">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="ca50f-137">服務本身不會向用戶端驗證，但安全性權杖服務會將共用金鑰加密做為所發出權杖的一部分，這樣就只有服務才能解密該金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca50f-137">The service is not authenticated to the client, as such, but the security token service encrypts the shared key as part of the issued token so that only the service can decrypt the key.</span></span> <span data-ttu-id="ca50f-138">安全性繫結項目是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-138">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-139">或者，可以將 `authenticationMode` 屬性設定為 `IssuedToken`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-139">Alternatively, set the `authenticationMode` attribute to `IssuedToken`.</span></span>  
  
### <a name="issuedtokenforcertificate"></a><span data-ttu-id="ca50f-140">IssuedTokenForCertificate</span><span class="sxs-lookup"><span data-stu-id="ca50f-140">IssuedTokenForCertificate</span></span>  
 <span data-ttu-id="ca50f-141">在此驗證模式中，用戶端本身不會向服務驗證，而是向安全性權杖服務驗證並接收 SAML 權杖，接著將該權杖呈現給伺服器，證明自己知道共用金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca50f-141">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="ca50f-142">發出的權杖會當做簽署支援權杖或持有人權杖 (也就是簽署訊息簽章的權杖) 出現在 SOAP 層中。</span><span class="sxs-lookup"><span data-stu-id="ca50f-142">The issued token appears at the SOAP layer as either an endorsing supporting token or a bearer token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-143">服務會使用 X.509 憑證對用戶端進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-143">The service authenticates to the client using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-144">安全性繫結項目是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-144">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-145">或者，可以將 `authenticationMode` 屬性設定為 `IssuedTokenForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-145">Alternatively, set the `authenticationMode` attribute to `IssuedTokenForCertificate`.</span></span>  
  
### <a name="issuedtokenforsslnegotiated"></a><span data-ttu-id="ca50f-146">IssuedTokenForSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="ca50f-146">IssuedTokenForSslNegotiated</span></span>  
 <span data-ttu-id="ca50f-147">在此驗證模式中，用戶端本身不會向服務驗證，而是向安全性權杖服務驗證並接收 SAML 權杖，接著將該權杖呈現給伺服器，證明自己知道共用金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca50f-147">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="ca50f-148">發出的權杖會當做簽署支援權杖或持有人權杖 (也就是簽署訊息簽章的權杖) 出現在 SOAP 層中。</span><span class="sxs-lookup"><span data-stu-id="ca50f-148">The issued token appears at the SOAP layer as either an endorsing supporting token or a bearer token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-149">服務會使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-149">The service is authenticated using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-150">安全性繫結項目是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForSslBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-150">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForSslBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-151">或者，可以將 `authenticationMode` 屬性設定為 `IssuedTokenForSslnegotiated`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-151">Alternatively, set the `authenticationMode` attribute to `IssuedTokenForSslnegotiated`.</span></span>  
  
### <a name="issuedtokenovertransport"></a><span data-ttu-id="ca50f-152">IssuedTokenOverTransport</span><span class="sxs-lookup"><span data-stu-id="ca50f-152">IssuedTokenOverTransport</span></span>  
 <span data-ttu-id="ca50f-153">在此驗證模式中，用戶端本身不會向服務驗證，而是向安全性權杖服務驗證並接收 SAML 權杖，接著將該權杖呈現給伺服器，證明自己知道共用金鑰。</span><span class="sxs-lookup"><span data-stu-id="ca50f-153">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="ca50f-154">發出的權杖會當做簽署支援權杖或持有人權杖 (也就是簽署訊息簽章的權杖) 出現在 SOAP 層中。</span><span class="sxs-lookup"><span data-stu-id="ca50f-154">The issued token appears at the SOAP layer as either an endorsing supporting token or a bearer token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-155">服務會在傳輸層上使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-155">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="ca50f-156">安全性繫結項目是由 `TransportSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-156">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-157">或者，可以將 `authenticationMode` 屬性設定為 `IssuedTokenOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-157">Alternatively, set the `authenticationMode` attribute to `IssuedTokenOverTransport`.</span></span>  
  
### <a name="kerberos"></a><span data-ttu-id="ca50f-158">Kerberos</span><span class="sxs-lookup"><span data-stu-id="ca50f-158">Kerberos</span></span>  
 <span data-ttu-id="ca50f-159">在此驗證模式中，用戶端會使用 Kerberos 票證向服務進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-159">With this authentication mode, the client authenticates to the service using a Kerberos ticket.</span></span> <span data-ttu-id="ca50f-160">相同的票證也會提供伺服器驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-160">That same ticket also provides server authentication.</span></span> <span data-ttu-id="ca50f-161">安全性繫結項目是由 `SymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-161">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-162">或者，可以將 `authenticationMode` 屬性設定為 `Kerberos`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-162">Alternatively, set the `authenticationMode` attribute to `Kerberos`.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ca50f-163">為了使用此驗證模式，服務帳戶必須與某個服務主要名稱 (SPN) 相關聯。</span><span class="sxs-lookup"><span data-stu-id="ca50f-163">In order to use this authentication mode, the service account must be associated with a service principal name (SPN).</span></span> <span data-ttu-id="ca50f-164">如果要這樣做，請以 NETWORK SERVICE 帳戶或 LOCAL SYSTEM 帳戶執行此服務。</span><span class="sxs-lookup"><span data-stu-id="ca50f-164">To do this, run the service under the NETWORK SERVICE account or the LOCAL SYSTEM account.</span></span> <span data-ttu-id="ca50f-165">或者，使用 SetSpn.exe 工具來建立服務帳戶的 SPN。</span><span class="sxs-lookup"><span data-stu-id="ca50f-165">Alternatively, use the SetSpn.exe tool to create an SPN for the service account.</span></span> <span data-ttu-id="ca50f-166">不論是哪一種情況, 用戶端都必須在[ \<servicePrincipalName >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md)元素中使用正確的 SPN, <xref:System.ServiceModel.EndpointAddress>或使用此方法。</span><span class="sxs-lookup"><span data-stu-id="ca50f-166">In either case, the client must use the correct SPN in the [\<servicePrincipalName>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md) element, or by using the <xref:System.ServiceModel.EndpointAddress> constructor.</span></span> <span data-ttu-id="ca50f-167">如需詳細資訊, 請參閱[服務身分識別和驗證](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="ca50f-167">For more information, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ca50f-168">當使用 `Kerberos` 驗證模式時，就不會支援 <xref:System.Security.Principal.TokenImpersonationLevel.Anonymous> 與 <xref:System.Security.Principal.TokenImpersonationLevel.Delegation> 模擬等級。</span><span class="sxs-lookup"><span data-stu-id="ca50f-168">When the `Kerberos` authentication mode is used, the <xref:System.Security.Principal.TokenImpersonationLevel.Anonymous> and <xref:System.Security.Principal.TokenImpersonationLevel.Delegation> impersonation levels are not supported.</span></span>  
  
### <a name="kerberosovertransport"></a><span data-ttu-id="ca50f-169">KerberosOverTransport</span><span class="sxs-lookup"><span data-stu-id="ca50f-169">KerberosOverTransport</span></span>  
 <span data-ttu-id="ca50f-170">在此驗證模式中，用戶端會使用 Kerberos 票證向服務進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-170">With this authentication mode, the client authenticates to the service using a Kerberos ticket.</span></span> <span data-ttu-id="ca50f-171">Kerberos 權杖會當做簽署支援權杖 (也就是簽署訊息簽章的權杖) 出現在 SOAP 層中。</span><span class="sxs-lookup"><span data-stu-id="ca50f-171">The Kerberos token appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-172">服務會在傳輸層上使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-172">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="ca50f-173">安全性繫結項目是由 `TransportSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-173">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-174">或者，可以將 `authenticationMode` 屬性設定為 `KerberosOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-174">Alternatively, set the `authenticationMode` attribute to `KerberosOverTransport`.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="ca50f-175">為了使用此驗證模式，服務帳戶必須與某個 SPN 相關聯。</span><span class="sxs-lookup"><span data-stu-id="ca50f-175">In order to use this authentication mode, the service account must be associated with an SPN.</span></span> <span data-ttu-id="ca50f-176">如果要這樣做，請以 NETWORK SERVICE 帳戶或 LOCAL SYSTEM 帳戶執行此服務。</span><span class="sxs-lookup"><span data-stu-id="ca50f-176">To do this, run the service under the NETWORK SERVICE account or the LOCAL SYSTEM account.</span></span> <span data-ttu-id="ca50f-177">或者，使用 SetSpn.exe 工具來建立服務帳戶的 SPN。</span><span class="sxs-lookup"><span data-stu-id="ca50f-177">Alternatively, use the SetSpn.exe tool to create an SPN for the service account.</span></span> <span data-ttu-id="ca50f-178">不論是哪一種情況, 用戶端都必須在[ \<servicePrincipalName >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md)元素中使用正確的 SPN, <xref:System.ServiceModel.EndpointAddress>或使用此方法。</span><span class="sxs-lookup"><span data-stu-id="ca50f-178">In either case, the client must use the correct SPN in the [\<servicePrincipalName>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md) element, or by using the <xref:System.ServiceModel.EndpointAddress> constructor.</span></span> <span data-ttu-id="ca50f-179">如需詳細資訊, 請參閱[服務身分識別和驗證](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="ca50f-179">For more information, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
### <a name="mutualcertificate"></a><span data-ttu-id="ca50f-180">MutualCertificate</span><span class="sxs-lookup"><span data-stu-id="ca50f-180">MutualCertificate</span></span>  
 <span data-ttu-id="ca50f-181">在此驗證模式中，用戶端會使用出現在 SOAP 層中當做簽署支援權杖 (也就是簽署訊息簽章的權杖) 的 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-181">With this authentication mode, the client authenticates using an X.509 certificate that appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-182">服務也會使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-182">The service is also authenticated using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-183">安全性繫結項目是由 `SymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-183">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-184">或者，可以將 `authenticationMode` 屬性設定為 `MutualCertificate`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-184">Alternatively, set the `authenticationMode` attribute to `MutualCertificate`.</span></span>  
  
### <a name="mutualcertificateduplex"></a><span data-ttu-id="ca50f-185">MutualCertificateDuplex</span><span class="sxs-lookup"><span data-stu-id="ca50f-185">MutualCertificateDuplex</span></span>  
 <span data-ttu-id="ca50f-186">在此驗證模式中，用戶端會使用出現在 SOAP 層中當做簽署支援權杖 (也就是簽署訊息簽章的權杖) 的 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-186">With this authentication mode, the client authenticates using an X.509 certificate that appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-187">服務也會使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-187">The service is also authenticated using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-188">繫結是由 `AsymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateDuplexBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-188">The binding is a `AsymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateDuplexBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-189">或者，可以將 `authenticationMode` 屬性設定為 `MutualCertificateDuplex`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-189">Alternatively, set the `authenticationMode` attribute to `MutualCertificateDuplex`.</span></span>  
  
### <a name="mutualsslnegotiated"></a><span data-ttu-id="ca50f-190">MutualSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="ca50f-190">MutualSslNegotiated</span></span>  
 <span data-ttu-id="ca50f-191">在此驗證模式中，用戶端和服務會使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-191">With this authentication mode, the client and the service authenticate using X.509 certificates.</span></span> <span data-ttu-id="ca50f-192">如果為第一個參數傳遞的值是 `SymmetricSecurityBindingElement` 時，安全性繫結項目就是由 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> 方法傳回的 `true`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-192">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> method when a value of `true` is passed for the first parameter.</span></span> <span data-ttu-id="ca50f-193">或者，可以將 `authenticationMode` 屬性設定為 `MutualSslNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-193">Alternatively, set the `authenticationMode` attribute to `MutualSslNegotiated`.</span></span>  
  
### <a name="secureconversation"></a><span data-ttu-id="ca50f-194">SecureConversation</span><span class="sxs-lookup"><span data-stu-id="ca50f-194">SecureConversation</span></span>  
 <span data-ttu-id="ca50f-195">安全性繫結項目是由 `SymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-195">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-196">這個方法會將 <xref:System.ServiceModel.Channels.SecurityBindingElement> 當做參數接受，而該項目會在初始化期間用來建立安全工作階段。</span><span class="sxs-lookup"><span data-stu-id="ca50f-196">This method takes a <xref:System.ServiceModel.Channels.SecurityBindingElement> as a parameter, which is used during initialization to establish the secure session.</span></span> <span data-ttu-id="ca50f-197">或者，可以將 `authenticationMode` 屬性設定為 `SecureConversation`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-197">Alternatively, set the `authenticationMode` attribute to `SecureConversation`.</span></span>  
  
 <span data-ttu-id="ca50f-198">如果沒有指定啟動安裝繫結，便會為啟動安裝使用 `SspiNegotiated` 驗證模式。</span><span class="sxs-lookup"><span data-stu-id="ca50f-198">If no bootstrap binding is specified, then the `SspiNegotiated` authentication mode is used for bootstrap.</span></span>  
  
### <a name="sspinegotiation"></a><span data-ttu-id="ca50f-199">SspiNegotiation</span><span class="sxs-lookup"><span data-stu-id="ca50f-199">SspiNegotiation</span></span>  
 <span data-ttu-id="ca50f-200">在此驗證模式中，將使用交涉通訊協定來執行用戶端和伺服器驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-200">With this authentication mode, a negotiation protocol is used to perform client and server authentication.</span></span> <span data-ttu-id="ca50f-201">如果可能，便會使用 Kerberos，否則會使用 NT LanMan (NTLM)。</span><span class="sxs-lookup"><span data-stu-id="ca50f-201">Kerberos is used if possible; otherwise, NT LanMan (NTLM) is used.</span></span> <span data-ttu-id="ca50f-202">安全性繫結項目是由 `SymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-202">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-203">或者，可以將 `authenticationMode` 屬性設定為 `SspiNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-203">Alternatively, set the `authenticationMode` attribute to `SspiNegotiated`.</span></span>  
  
### <a name="sspinegotiatedovertransport"></a><span data-ttu-id="ca50f-204">SspiNegotiatedOverTransport</span><span class="sxs-lookup"><span data-stu-id="ca50f-204">SspiNegotiatedOverTransport</span></span>  
 <span data-ttu-id="ca50f-205">在此驗證模式中，將使用交涉通訊協定來執行用戶端和伺服器驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-205">With this authentication mode, a negotiation protocol is used to perform client and server authentication.</span></span> <span data-ttu-id="ca50f-206">如果可能，便會使用 Kerberos 通訊協定，否則會使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="ca50f-206">Kerberos protocol is used if possible; otherwise, NTLM is used.</span></span> <span data-ttu-id="ca50f-207">產生的權杖會當做簽署支援權杖 (也就是簽署訊息簽章的權杖) 出現在 SOAP 層中。</span><span class="sxs-lookup"><span data-stu-id="ca50f-207">The resulting token appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="ca50f-208">此外，服務也會在傳輸層上使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-208">The service is additionally authenticated at the transport layer by an X.509 certificate.</span></span> <span data-ttu-id="ca50f-209">安全性繫結項目是由 `TransportSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-209">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-210">或者，可以將 `authenticationMode` 屬性設定為 `SspiNegotiatedOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-210">Alternatively, set the `authenticationMode` attribute to `SspiNegotiatedOverTransport`.</span></span>  
  
### <a name="usernameforcertificate"></a><span data-ttu-id="ca50f-211">UserNameForCertificate</span><span class="sxs-lookup"><span data-stu-id="ca50f-211">UserNameForCertificate</span></span>  
 <span data-ttu-id="ca50f-212">在此驗證模式中，用戶端會使用當做簽署支援權杖 (也就是由訊息簽章簽署的權杖) 出現在 SOAP 層中的「使用者名稱權杖」向服務進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-212">With this authentication mode, the client authenticates to the service using a Username Token that appears at the SOAP layer as a signed supporting token; that is, a token that is signed by the message signature.</span></span> <span data-ttu-id="ca50f-213">服務會使用 X.509 憑證對用戶端進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-213">The service authenticates to the client using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-214">安全性繫結項目是由 `SymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-214">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-215">或者，可以將 `authenticationMode` 屬性設定為 `UserNameForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-215">Alternatively, set the `authenticationMode` attribute to `UserNameForCertificate`.</span></span>  
  
 <span data-ttu-id="ca50f-216">在 `UserNameForCertificate` 驗證模式中，用戶端與服務都必須使用 WS-Security 1.1。</span><span class="sxs-lookup"><span data-stu-id="ca50f-216">For the `UserNameForCertificate` authentication mode, both the client and service must be using WS-Security 1.1.</span></span>  
  
### <a name="usernameforsslnegotiated"></a><span data-ttu-id="ca50f-217">UserNameForSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="ca50f-217">UserNameForSslNegotiated</span></span>  
 <span data-ttu-id="ca50f-218">在此驗證模式中，用戶端會使用當做簽署支援權杖 (也就是由訊息簽章簽署的權杖) 出現在 SOAP 層中的「使用者名稱權杖」進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-218">With this authentication mode, the client is authenticates using a Username Token which appears at the SOAP layer as a signed supporting token; that is, a token that is signed by the message signature.</span></span> <span data-ttu-id="ca50f-219">服務會使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-219">The service is authenticated using an X.509 certificate.</span></span> <span data-ttu-id="ca50f-220">安全性繫結項目是由 `SymmetricSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForSslBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-220">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForSslBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-221">或者，可以將 `authenticationMode` 屬性設定為 `UserNameForSslNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-221">Alternatively, set the `authenticationMode` attribute to `UserNameForSslNegotiated`.</span></span>  
  
### <a name="usernameovertransport"></a><span data-ttu-id="ca50f-222">UserNameOverTransport</span><span class="sxs-lookup"><span data-stu-id="ca50f-222">UserNameOverTransport</span></span>  
 <span data-ttu-id="ca50f-223">在此驗證模式中，用戶端會使用當做簽署支援權杖 (也就是由訊息簽章簽署的權杖) 出現在 SOAP 層中的「使用者名稱權杖」進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-223">With this authentication mode, the client authenticates using a Username Token that appears at the SOAP layer as a signed supporting token; that is, a token that is signed by the message signature.</span></span> <span data-ttu-id="ca50f-224">服務會在傳輸層上使用 X.509 憑證來進行驗證。</span><span class="sxs-lookup"><span data-stu-id="ca50f-224">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="ca50f-225">安全性繫結項目是由 `TransportSecurityBindingElement` 方法傳回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="ca50f-225">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="ca50f-226">或者，可以將 `authenticationMode` 屬性設定為 `UserNameOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="ca50f-226">Alternatively, set the `authenticationMode` attribute to `UserNameOverTransport`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ca50f-227">另請參閱</span><span class="sxs-lookup"><span data-stu-id="ca50f-227">See also</span></span>

- <xref:System.ServiceModel.Channels.SecurityBindingElement>
- [<span data-ttu-id="ca50f-228">如何：為指定的驗證模式建立 SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="ca50f-228">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
