---
title: 工作平行程式庫和 PLINQ 中的 ETW 事件
ms.date: 03/30/2017
helpviewer_keywords:
- tasks, ETW events
ms.assetid: 87a9cff5-d86f-4e44-a06e-d12764d0dce2
ms.openlocfilehash: 61429babf7378b9d271ffd60a6228ae4bfe7a5e5
ms.sourcegitcommit: 62285ec11fa8e8424bab00511a90760c60e63c95
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/20/2020
ms.locfileid: "81644253"
---
# <a name="etw-events-in-task-parallel-library-and-plinq"></a><span data-ttu-id="7905c-102">工作平行程式庫和 PLINQ 中的 ETW 事件</span><span class="sxs-lookup"><span data-stu-id="7905c-102">ETW Events in Task Parallel Library and PLINQ</span></span>

<span data-ttu-id="7905c-103">工作平行程式庫和 PLINQ 都會產生 Windows 事件追蹤 (ETW) 事件，您可使用 Windows Performance Analyzer 等工具，利用這些事件對應用程式進行程式碼剖析和疑難排解。</span><span class="sxs-lookup"><span data-stu-id="7905c-103">Both the Task Parallel Library and PLINQ generate Event Trace for Windows (ETW) events that you can use to profile and troubleshoot applications by using tools such as the Windows Performance Analyzer.</span></span> <span data-ttu-id="7905c-104">但是,在大多數情況下,分析並行應用程式代碼的最佳方式是在可視化工作室中使用[併發可視化工具](/visualstudio/profiling/concurrency-visualizer)。</span><span class="sxs-lookup"><span data-stu-id="7905c-104">However, in most scenarios, the best way to profile parallel application code is to use the [Concurrency Visualizer](/visualstudio/profiling/concurrency-visualizer) in Visual Studio.</span></span>

## <a name="task-parallel-library-etw-events"></a><span data-ttu-id="7905c-105">工作平行程式庫 ETW 事件</span><span class="sxs-lookup"><span data-stu-id="7905c-105">Task Parallel Library ETW Events</span></span>

<span data-ttu-id="7905c-106">在 EVENT_HEADER 結構中，<xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType>、<xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> 和 <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> 產生的事件 ProviderId GUID 是：</span><span class="sxs-lookup"><span data-stu-id="7905c-106">In the EVENT_HEADER structure, the ProviderId GUID for events generated by <xref:System.Threading.Tasks.Parallel.For%2A?displayProperty=nameWithType>, <xref:System.Threading.Tasks.Parallel.ForEach%2A?displayProperty=nameWithType> and <xref:System.Threading.Tasks.Parallel.Invoke%2A?displayProperty=nameWithType> is:</span></span>

`0x2e5dba47, 0xa3d2, 0x4d16, 0x8e, 0xe0, 0x66, 0x71, 0xff, 0xdc, 0xd7, 0xb5`

### <a name="parallel-loop-begin"></a><span data-ttu-id="7905c-107">平行迴圈開始</span><span class="sxs-lookup"><span data-stu-id="7905c-107">Parallel Loop Begin</span></span>

<span data-ttu-id="7905c-108">EVENT_DESCRIPTOR.Task = 1</span><span class="sxs-lookup"><span data-stu-id="7905c-108">EVENT_DESCRIPTOR.Task = 1</span></span>

<span data-ttu-id="7905c-109">EVENT_DESCRIPTOR.Id = 1</span><span class="sxs-lookup"><span data-stu-id="7905c-109">EVENT_DESCRIPTOR.Id = 1</span></span>

#### <a name="user-data"></a><span data-ttu-id="7905c-110">使用者資料</span><span class="sxs-lookup"><span data-stu-id="7905c-110">User Data</span></span>

|<span data-ttu-id="7905c-111">**名稱**</span><span class="sxs-lookup"><span data-stu-id="7905c-111">**Name**</span></span>|<span data-ttu-id="7905c-112">**型別**</span><span class="sxs-lookup"><span data-stu-id="7905c-112">**Type**</span></span>|<span data-ttu-id="7905c-113">**說明**</span><span class="sxs-lookup"><span data-stu-id="7905c-113">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="7905c-114">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="7905c-114">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-115">啟動迴圈的 TaskScheduler 識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-115">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="7905c-116">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="7905c-116">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-117">啟動迴圈的工作識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-117">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="7905c-118">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="7905c-118">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-119">用來指出巢狀結構和事件派生/聯結語意組的唯一識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-119">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|
|<span data-ttu-id="7905c-120">OperationType</span><span class="sxs-lookup"><span data-stu-id="7905c-120">OperationType</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-121">指出迴圈的類型：</span><span class="sxs-lookup"><span data-stu-id="7905c-121">Indicates the type of loop:</span></span><br /><br /> <span data-ttu-id="7905c-122">1 = ParallelInvoke</span><span class="sxs-lookup"><span data-stu-id="7905c-122">1 = ParallelInvoke</span></span><br /><br /> <span data-ttu-id="7905c-123">2 = ParallelFor</span><span class="sxs-lookup"><span data-stu-id="7905c-123">2 = ParallelFor</span></span><br /><br /> <span data-ttu-id="7905c-124">3 = ParallelForEach</span><span class="sxs-lookup"><span data-stu-id="7905c-124">3 = ParallelForEach</span></span>|
|<span data-ttu-id="7905c-125">InclusiveFrom</span><span class="sxs-lookup"><span data-stu-id="7905c-125">InclusiveFrom</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="7905c-126">迴圈計數器的起始值</span><span class="sxs-lookup"><span data-stu-id="7905c-126">The starting value of the loop counter</span></span>|
|<span data-ttu-id="7905c-127">ExclusiveTo</span><span class="sxs-lookup"><span data-stu-id="7905c-127">ExclusiveTo</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="7905c-128">迴圈計數器的結束值</span><span class="sxs-lookup"><span data-stu-id="7905c-128">The ending value of the loop counter</span></span>|

### <a name="parallel-loop-end"></a><span data-ttu-id="7905c-129">平行迴圈結束</span><span class="sxs-lookup"><span data-stu-id="7905c-129">Parallel Loop End</span></span>
 <span data-ttu-id="7905c-130">EVENT_DESCRIPTOR.Task = 2</span><span class="sxs-lookup"><span data-stu-id="7905c-130">EVENT_DESCRIPTOR.Task = 2</span></span>

 <span data-ttu-id="7905c-131">EVENT_DESCRIPTOR.Id = 2</span><span class="sxs-lookup"><span data-stu-id="7905c-131">EVENT_DESCRIPTOR.Id = 2</span></span>

#### <a name="user-data"></a><span data-ttu-id="7905c-132">使用者資料</span><span class="sxs-lookup"><span data-stu-id="7905c-132">User Data</span></span>

|<span data-ttu-id="7905c-133">**名稱**</span><span class="sxs-lookup"><span data-stu-id="7905c-133">**Name**</span></span>|<span data-ttu-id="7905c-134">**型別**</span><span class="sxs-lookup"><span data-stu-id="7905c-134">**Type**</span></span>|<span data-ttu-id="7905c-135">**說明**</span><span class="sxs-lookup"><span data-stu-id="7905c-135">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="7905c-136">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="7905c-136">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-137">啟動迴圈的 TaskScheduler 識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-137">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="7905c-138">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="7905c-138">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-139">啟動迴圈的工作識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-139">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="7905c-140">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="7905c-140">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-141">用來指出巢狀結構和事件派生/聯結語意組的唯一識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-141">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|
|<span data-ttu-id="7905c-142">totalIterations</span><span class="sxs-lookup"><span data-stu-id="7905c-142">totalIterations</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="7905c-143">反覆項目總數</span><span class="sxs-lookup"><span data-stu-id="7905c-143">The total number of iterations</span></span>|

### <a name="parallel-invoke-begin"></a><span data-ttu-id="7905c-144">平行叫用開始</span><span class="sxs-lookup"><span data-stu-id="7905c-144">Parallel Invoke Begin</span></span>
 <span data-ttu-id="7905c-145">EVENT_DESCRIPTOR.Task = 3</span><span class="sxs-lookup"><span data-stu-id="7905c-145">EVENT_DESCRIPTOR.Task = 3</span></span>

 <span data-ttu-id="7905c-146">EVENT_DESCRIPTOR.Id = 3</span><span class="sxs-lookup"><span data-stu-id="7905c-146">EVENT_DESCRIPTOR.Id = 3</span></span>

#### <a name="user-data"></a><span data-ttu-id="7905c-147">使用者資料</span><span class="sxs-lookup"><span data-stu-id="7905c-147">User Data</span></span>

|<span data-ttu-id="7905c-148">**名稱**</span><span class="sxs-lookup"><span data-stu-id="7905c-148">**Name**</span></span>|<span data-ttu-id="7905c-149">**型別**</span><span class="sxs-lookup"><span data-stu-id="7905c-149">**Type**</span></span>|<span data-ttu-id="7905c-150">**說明**</span><span class="sxs-lookup"><span data-stu-id="7905c-150">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="7905c-151">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="7905c-151">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-152">啟動迴圈的 TaskScheduler 識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-152">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="7905c-153">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="7905c-153">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-154">啟動迴圈的工作識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-154">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="7905c-155">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="7905c-155">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-156">用來指出巢狀結構和事件派生/聯結語意組的唯一識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-156">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|
|<span data-ttu-id="7905c-157">totalIterations</span><span class="sxs-lookup"><span data-stu-id="7905c-157">totalIterations</span></span>|<xref:System.Int64?displayProperty=nameWithType>|<span data-ttu-id="7905c-158">反覆項目總數</span><span class="sxs-lookup"><span data-stu-id="7905c-158">The total number of iterations</span></span>|
|<span data-ttu-id="7905c-159">operationType</span><span class="sxs-lookup"><span data-stu-id="7905c-159">operationType</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-160">指出迴圈的類型：</span><span class="sxs-lookup"><span data-stu-id="7905c-160">Indicates the type of loop:</span></span><br /><br /> <span data-ttu-id="7905c-161">1 = ParallelInvoke</span><span class="sxs-lookup"><span data-stu-id="7905c-161">1 = ParallelInvoke</span></span><br /><br /> <span data-ttu-id="7905c-162">2 = ParallelFor</span><span class="sxs-lookup"><span data-stu-id="7905c-162">2 = ParallelFor</span></span><br /><br /> <span data-ttu-id="7905c-163">3 = ParallelForEach</span><span class="sxs-lookup"><span data-stu-id="7905c-163">3 = ParallelForEach</span></span>|
|<span data-ttu-id="7905c-164">ActionCount</span><span class="sxs-lookup"><span data-stu-id="7905c-164">ActionCount</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-165">在平行叫用中會執行的動作數目。</span><span class="sxs-lookup"><span data-stu-id="7905c-165">The number of actions that will be executed in the parallel invoke.</span></span>|

### <a name="parallel-invoke-end"></a><span data-ttu-id="7905c-166">平行叫用結束</span><span class="sxs-lookup"><span data-stu-id="7905c-166">Parallel Invoke End</span></span>
 <span data-ttu-id="7905c-167">EVENT_DESCRIPTOR.Task = 4</span><span class="sxs-lookup"><span data-stu-id="7905c-167">EVENT_DESCRIPTOR.Task = 4</span></span>

 <span data-ttu-id="7905c-168">EVENT_DESCRIPTOR.Id = 4</span><span class="sxs-lookup"><span data-stu-id="7905c-168">EVENT_DESCRIPTOR.Id = 4</span></span>

#### <a name="user-data"></a><span data-ttu-id="7905c-169">使用者資料</span><span class="sxs-lookup"><span data-stu-id="7905c-169">User Data</span></span>

|<span data-ttu-id="7905c-170">**名稱**</span><span class="sxs-lookup"><span data-stu-id="7905c-170">**Name**</span></span>|<span data-ttu-id="7905c-171">**型別**</span><span class="sxs-lookup"><span data-stu-id="7905c-171">**Type**</span></span>|<span data-ttu-id="7905c-172">**說明**</span><span class="sxs-lookup"><span data-stu-id="7905c-172">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="7905c-173">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="7905c-173">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-174">啟動迴圈的 TaskScheduler 識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-174">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="7905c-175">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="7905c-175">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-176">啟動迴圈的工作識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-176">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="7905c-177">ForkJoinContextID</span><span class="sxs-lookup"><span data-stu-id="7905c-177">ForkJoinContextID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-178">用來指出巢狀結構和事件派生/聯結語意組的唯一識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-178">A unique identifier used to indicate nesting and pairs for events with fork/join semantics.</span></span>|

## <a name="plinq-etw-events"></a><span data-ttu-id="7905c-179">PLINQ ETW 事件</span><span class="sxs-lookup"><span data-stu-id="7905c-179">PLINQ ETW Events</span></span>
 <span data-ttu-id="7905c-180">PLINQ 的 EVENT_HEADER.ProviderId GUID 是：</span><span class="sxs-lookup"><span data-stu-id="7905c-180">The EVENT_HEADER.ProviderId GUID for PLINQ is:</span></span>

`0x159eeeec, 0x4a14, 0x4418, 0xa8, 0xfe, 0xfa, 0xab, 0xcd, 0x98, 0x78, 0x87`

### <a name="parallel-query-begin"></a><span data-ttu-id="7905c-181">平行查詢開始</span><span class="sxs-lookup"><span data-stu-id="7905c-181">Parallel Query Begin</span></span>
 <span data-ttu-id="7905c-182">EVENT_DESCRIPTOR.Task = 1</span><span class="sxs-lookup"><span data-stu-id="7905c-182">EVENT_DESCRIPTOR.Task = 1</span></span>

 <span data-ttu-id="7905c-183">EVENT_DESCRIPTOR.Id = 1</span><span class="sxs-lookup"><span data-stu-id="7905c-183">EVENT_DESCRIPTOR.Id = 1</span></span>

#### <a name="user-data"></a><span data-ttu-id="7905c-184">使用者資料</span><span class="sxs-lookup"><span data-stu-id="7905c-184">User Data</span></span>

|<span data-ttu-id="7905c-185">**名稱**</span><span class="sxs-lookup"><span data-stu-id="7905c-185">**Name**</span></span>|<span data-ttu-id="7905c-186">**型別**</span><span class="sxs-lookup"><span data-stu-id="7905c-186">**Type**</span></span>|<span data-ttu-id="7905c-187">**說明**</span><span class="sxs-lookup"><span data-stu-id="7905c-187">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="7905c-188">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="7905c-188">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-189">啟動迴圈的 TaskScheduler 識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-189">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="7905c-190">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="7905c-190">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-191">啟動迴圈的工作識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-191">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="7905c-192">QueryID</span><span class="sxs-lookup"><span data-stu-id="7905c-192">QueryID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-193">唯一的查詢識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-193">A unique query identifier.</span></span>|

### <a name="parallel-query-end"></a><span data-ttu-id="7905c-194">平行查詢結束</span><span class="sxs-lookup"><span data-stu-id="7905c-194">Parallel Query End</span></span>
 <span data-ttu-id="7905c-195">EVENT_DESCRIPTOR.Task = 2</span><span class="sxs-lookup"><span data-stu-id="7905c-195">EVENT_DESCRIPTOR.Task = 2</span></span>

 <span data-ttu-id="7905c-196">EVENT_DESCRIPTOR.Id = 2</span><span class="sxs-lookup"><span data-stu-id="7905c-196">EVENT_DESCRIPTOR.Id = 2</span></span>

#### <a name="user-data"></a><span data-ttu-id="7905c-197">使用者資料</span><span class="sxs-lookup"><span data-stu-id="7905c-197">User Data</span></span>

|<span data-ttu-id="7905c-198">**名稱**</span><span class="sxs-lookup"><span data-stu-id="7905c-198">**Name**</span></span>|<span data-ttu-id="7905c-199">**型別**</span><span class="sxs-lookup"><span data-stu-id="7905c-199">**Type**</span></span>|<span data-ttu-id="7905c-200">**說明**</span><span class="sxs-lookup"><span data-stu-id="7905c-200">**Description**</span></span>|
|--------------|--------------|---------------------|
|<span data-ttu-id="7905c-201">OriginatingTaskSchedulerID</span><span class="sxs-lookup"><span data-stu-id="7905c-201">OriginatingTaskSchedulerID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-202">啟動迴圈的 TaskScheduler 識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-202">The ID of the TaskScheduler that started the loop.</span></span>|
|<span data-ttu-id="7905c-203">OriginatingTaskID</span><span class="sxs-lookup"><span data-stu-id="7905c-203">OriginatingTaskID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-204">啟動迴圈的工作識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-204">The ID of the task that started the loop.</span></span>|
|<span data-ttu-id="7905c-205">QueryID</span><span class="sxs-lookup"><span data-stu-id="7905c-205">QueryID</span></span>|<xref:System.Int32?displayProperty=nameWithType>|<span data-ttu-id="7905c-206">唯一的查詢識別碼。</span><span class="sxs-lookup"><span data-stu-id="7905c-206">A unique query identifier.</span></span>|

## <a name="see-also"></a><span data-ttu-id="7905c-207">另請參閱</span><span class="sxs-lookup"><span data-stu-id="7905c-207">See also</span></span>

- [<span data-ttu-id="7905c-208">.NET Framework 中的 ETW 事件</span><span class="sxs-lookup"><span data-stu-id="7905c-208">ETW Events in the .NET Framework</span></span>](etw-events.md)
- [<span data-ttu-id="7905c-209">工作平行程式庫 (TPL)</span><span class="sxs-lookup"><span data-stu-id="7905c-209">Task Parallel Library (TPL)</span></span>](../../standard/parallel-programming/task-parallel-library-tpl.md)
- [<span data-ttu-id="7905c-210">平行 LINQ (PLINQ)</span><span class="sxs-lookup"><span data-stu-id="7905c-210">Parallel LINQ (PLINQ)</span></span>](../../standard/parallel-programming/introduction-to-plinq.md)
