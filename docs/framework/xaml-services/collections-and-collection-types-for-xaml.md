---
title: XAML 的集合和集合類型
ms.date: 03/30/2017
ms.assetid: 58f8e7c6-9a41-4f25-8551-c042f1315baa
ms.openlocfilehash: 4123b64545f7c47a96c4cae496046a89b7e576b0
ms.sourcegitcommit: 9b552addadfb57fab0b9e7852ed4f1f1b8a42f8e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/23/2019
ms.locfileid: "61954176"
---
# <a name="collections-and-collection-types-for-xaml"></a><span data-ttu-id="895c3-102">XAML 的集合和集合類型</span><span class="sxs-lookup"><span data-stu-id="895c3-102">Collections and Collection Types for XAML</span></span>

<span data-ttu-id="895c3-103">本主題描述如何定義旨在支援集合，並做為父物件的項目或屬性項目的項目子系，集合的項目具現化時，對 XAML 語法的類型屬性。</span><span class="sxs-lookup"><span data-stu-id="895c3-103">This topic describes how to define properties of types that are intended to support a collection, and to support the XAML syntax for instantiating collection items as element children of a parent object element or property element.</span></span>

## <a name="xaml-collection-concepts"></a><span data-ttu-id="895c3-104">XAML 集合概念</span><span class="sxs-lookup"><span data-stu-id="895c3-104">XAML Collection Concepts</span></span>

<span data-ttu-id="895c3-105">就概念而言，任何關聯性中，有多個子系的項目範圍內的 XAML 物件項目或 XAML 屬性項目必須實作為一個集合的 XAML。</span><span class="sxs-lookup"><span data-stu-id="895c3-105">Conceptually, any relationship in XAML where there are multiple child items within the scope of a XAML object element or XAML property element must be implemented as a collection.</span></span> <span data-ttu-id="895c3-106">該集合必須是特定的 XAML 屬性的父系，該關聯性中的 XAML 型別相關聯。</span><span class="sxs-lookup"><span data-stu-id="895c3-106">That collection must be associated with a particular XAML property of the XAML type that is the parent in that relationship.</span></span> <span data-ttu-id="895c3-107">屬性必須是集合，因為 XAML 處理器預期指派標記，以支援集合屬性的新加入項目中的每個項目。</span><span class="sxs-lookup"><span data-stu-id="895c3-107">The property must be a collection because a XAML processor expects to assign each item in markup to be a newly added item of the backing collection property.</span></span>

<span data-ttu-id="895c3-108">在 XAML 語言層級的集合支援的確切需求未完整定義。</span><span class="sxs-lookup"><span data-stu-id="895c3-108">At the XAML language level, the exact requirements of collection support are not fully defined.</span></span> <span data-ttu-id="895c3-109">集合可以是其中一種清單或字典 （但不是能兩者同時） 的概念定義在 XAML 語言層級，但哪一個支援型別代表任一清單或字典不由 XAML 語言定義。</span><span class="sxs-lookup"><span data-stu-id="895c3-109">The concept that a collection can be either a list or a dictionary(but not both) is defined at the XAML language level, but which backing types represent either lists or dictionaries is not defined by the XAML language.</span></span>

<span data-ttu-id="895c3-110">在.NET Framework XAML 服務中，XAML 集合支援的概念是以.NET Framework 支援型別更清楚地定義的。</span><span class="sxs-lookup"><span data-stu-id="895c3-110">In .NET Framework XAML Services, the concept of XAML collection support is more clearly defined in terms of .NET Framework backing types.</span></span> <span data-ttu-id="895c3-111">具體來說，集合的 XAML 支援根據幾個用於 list 和 dictionary 在一般的.NET Framework 程式設計的 Api 及.NET Framework 的概念。</span><span class="sxs-lookup"><span data-stu-id="895c3-111">Specifically, the XAML support for collections is based on several .NET Framework concepts and APIs that are used for lists and dictionaries in general .NET Framework programming.</span></span>

1. <span data-ttu-id="895c3-112"><xref:System.Collections.IList>介面表示清單集合。</span><span class="sxs-lookup"><span data-stu-id="895c3-112">The <xref:System.Collections.IList> interface indicates a list collection.</span></span>

2. <span data-ttu-id="895c3-113"><xref:System.Collections.IDictionary>介面表示字典集合。</span><span class="sxs-lookup"><span data-stu-id="895c3-113">The <xref:System.Collections.IDictionary> interface indicates a dictionary collection.</span></span>

3. <span data-ttu-id="895c3-114"><xref:System.Array> 表示陣列和陣列支援<xref:System.Collections.IList>方法。</span><span class="sxs-lookup"><span data-stu-id="895c3-114"><xref:System.Array> represents an array, and an array supports <xref:System.Collections.IList> methods.</span></span>

<span data-ttu-id="895c3-115">在每個這些集合的概念，.NET Framework XAML 服務 XAML 處理器預期呼叫`Add`集合屬性的類型的特定執行個體上的方法。</span><span class="sxs-lookup"><span data-stu-id="895c3-115">In each of these collection concepts, a .NET Framework XAML Services XAML processor expects to call the `Add` method on a specific instance of the collection property's type.</span></span> <span data-ttu-id="895c3-116">或者，在序列化案例中，XAML 處理器會產生每個項目清單、 字典或 「 項目 」 的每個集合的特定概念為基礎的陣列中所找到的離散 XAML 型別執行個體。</span><span class="sxs-lookup"><span data-stu-id="895c3-116">Or, in a serialization scenario, a XAML processor produces discrete XAML-type instances for each item found in the list, dictionary or array based on each collection's specific concept of "Items".</span></span> <span data-ttu-id="895c3-117">這些是： <xref:System.Collections.IList.Item%2A>;<xref:System.Collections.IDictionary.Item%2A>; 明確<xref:System.Array.System%23Collections%23IList%23Item%2A>如<xref:System.Array>。</span><span class="sxs-lookup"><span data-stu-id="895c3-117">These are : <xref:System.Collections.IList.Item%2A>; <xref:System.Collections.IDictionary.Item%2A>; the explicit <xref:System.Array.System%23Collections%23IList%23Item%2A> for <xref:System.Array>.</span></span>

## <a name="generic-collections"></a><span data-ttu-id="895c3-118">泛型集合</span><span class="sxs-lookup"><span data-stu-id="895c3-118">Generic Collections</span></span>

<span data-ttu-id="895c3-119">泛型集合可用於一般的.NET Framework 程式，並也用於 XAML 集合屬性。</span><span class="sxs-lookup"><span data-stu-id="895c3-119">Generic collections can be useful for general .NET Framework programming, and can also be used for XAML collection properties.</span></span> <span data-ttu-id="895c3-120">不過，泛型介面<xref:System.Collections.Generic.IList%601>並<xref:System.Collections.Generic.IDictionary%602>不會視為相當於非泛型的.NET Framework XAML 服務 XAML 處理器識別<xref:System.Collections.IList>或<xref:System.Collections.IDictionary>。</span><span class="sxs-lookup"><span data-stu-id="895c3-120">However, the generic interfaces <xref:System.Collections.Generic.IList%601> and <xref:System.Collections.Generic.IDictionary%602> are not identified by .NET Framework XAML Services XAML processors as being equivalent to the non-generic <xref:System.Collections.IList> or <xref:System.Collections.IDictionary>.</span></span> <span data-ttu-id="895c3-121">而不是實作介面，建議的方法，針對泛型集合屬性類型是衍生自類別<xref:System.Collections.Generic.List%601>或<xref:System.Collections.Generic.Dictionary%602>。</span><span class="sxs-lookup"><span data-stu-id="895c3-121">Rather than implementing the interfaces, a recommended approach for generic collection property types is to derive from the classes <xref:System.Collections.Generic.List%601> or <xref:System.Collections.Generic.Dictionary%602>.</span></span> <span data-ttu-id="895c3-122">這些類別會實作非泛型介面，並因此包括預期的支援 XAML 集合中的基底實作。</span><span class="sxs-lookup"><span data-stu-id="895c3-122">These classes implement the non-generic interfaces and thus include the expected support for XAML collections in the base implementation.</span></span>

## <a name="read-only-collections-and-initialization-logic"></a><span data-ttu-id="895c3-123">唯讀的集合和初始化邏輯</span><span class="sxs-lookup"><span data-stu-id="895c3-123">Read-Only Collections and Initialization Logic</span></span>

<span data-ttu-id="895c3-124">在.NET Framework 程式設計中，它是常見的設計模式，以使保留的值集合為唯讀集合的任何屬性。</span><span class="sxs-lookup"><span data-stu-id="895c3-124">In .NET Framework programming, it is a common design pattern to make any property that holds a value of a collection as a read-only collection.</span></span> <span data-ttu-id="895c3-125">此模式允許的執行個體擁有較佳的控制項集合會發生什麼事集合屬性...</span><span class="sxs-lookup"><span data-stu-id="895c3-125">This pattern permits the instance that owns the collection property to better control what happens to the collection..</span></span> <span data-ttu-id="895c3-126">具體而言，模式可防止意外取代整個已經存在的收集設定屬性。</span><span class="sxs-lookup"><span data-stu-id="895c3-126">Specifically, the pattern prevents accidental replacement of the entire pre-existing collection by setting the property.</span></span> <span data-ttu-id="895c3-127">在此模式中，任何集合的存取權由呼叫端應該改為設定成藉由呼叫方法或屬性，因為這類支援集合類型及/或相關集合介面<xref:System.Collections.IList>。</span><span class="sxs-lookup"><span data-stu-id="895c3-127">In this pattern, any access to the collection by callers should instead be made by calling methods or properties as supported by the collection type and/or the relevant collection interfaces such as <xref:System.Collections.IList>.</span></span>

<span data-ttu-id="895c3-128">使用此模式表示任何類別會公開唯讀集合的屬性必須先初始化該屬性來保留為空集合。</span><span class="sxs-lookup"><span data-stu-id="895c3-128">Using this pattern implies that any class that exposes a read-only collection property must first initialize that property to hold an empty collection.</span></span> <span data-ttu-id="895c3-129">通常會執行初始化類別的建構行為的一部分。</span><span class="sxs-lookup"><span data-stu-id="895c3-129">Typically the initialization is performed as part of the construction behavior for the class.</span></span> <span data-ttu-id="895c3-130">用於 XAML，它是很重要的預設建構函式，固定參考這類邏輯因為 XAML 通常會呼叫預設建構函式之前處理的屬性 (集合屬性或其他)。</span><span class="sxs-lookup"><span data-stu-id="895c3-130">To be useful for XAML, it is important that such logic is always referenced by the default constructor, because XAML generally calls the default constructor prior to processing the properties (collection properties or otherwise).</span></span>

## <a name="xaml-type-system-support-and-collections"></a><span data-ttu-id="895c3-131">XAML 類型系統支援和集合</span><span class="sxs-lookup"><span data-stu-id="895c3-131">XAML Type System Support and Collections</span></span>

<span data-ttu-id="895c3-132">剖析 XAML 和填入或序列化集合屬性的基本機制，除了在.NET Framework XAML 服務實作的 XAML 類型系統會包含數個設計功能的相關 XAML 中的集合。</span><span class="sxs-lookup"><span data-stu-id="895c3-132">Beyond the basic mechanics of parsing XAML and populating or serializing collection properties, the XAML type system as implemented in .NET Framework XAML Services includes several design features that pertain to collections in XAML.</span></span>

1. <span data-ttu-id="895c3-133"><xref:System.Xaml.XamlType.IsCollection%2A> 如果支援 XAML 集合的型別所支援的 XAML 型別，傳回 true。</span><span class="sxs-lookup"><span data-stu-id="895c3-133"><xref:System.Xaml.XamlType.IsCollection%2A> returns true if the XAML type is backed by a type that provides XAML collection support.</span></span>

2. <span data-ttu-id="895c3-134"><xref:System.Xaml.XamlType.IsDictionary%2A> 和<xref:System.Xaml.XamlType.IsArray%2A>可以進一步指定的 XAML 型別支援的收集模式。</span><span class="sxs-lookup"><span data-stu-id="895c3-134"><xref:System.Xaml.XamlType.IsDictionary%2A> and <xref:System.Xaml.XamlType.IsArray%2A> can further identify which collection mode the XAML type supports.</span></span> <span data-ttu-id="895c3-135">自訂 XAML 處理器為基礎.NET Framework XAML 服務和 XAML 類型系統但不是根據現有的<xref:System.Xaml.XamlWriter>實作中，了解使用的收集模式可能需要才能知道要叫用哪一種方法收集處理程序。</span><span class="sxs-lookup"><span data-stu-id="895c3-135">For custom XAML processors that are based on .NET Framework XAML Services and the XAML type system but not based on existing <xref:System.Xaml.XamlWriter> implementations, knowing which collection mode is used might be necessary in order to know which method to invoke for collection processing.</span></span>

3. <span data-ttu-id="895c3-136">每個先前的屬性值可能會受到覆寫<xref:System.Xaml.XamlType.LookupCollectionKind%2A>XAML 型別上。</span><span class="sxs-lookup"><span data-stu-id="895c3-136">Each of the previous property values are potentially influenced by overrides of <xref:System.Xaml.XamlType.LookupCollectionKind%2A> on a XAML type.</span></span>
