---
title: 資料服務版本控制 (WCF Data Services)
ms.date: 03/30/2017
helpviewer_keywords:
- versioning, WCF Data Services
- versioning [WCF Data Services]
- WCF Data Services, versioning
ms.assetid: e3e899cc-7f25-4f67-958f-063f01f79766
ms.openlocfilehash: 9a92346267012d3651d04648b357bbf530097e34
ms.sourcegitcommit: ad99773e5e45068ce03b99518008397e1299e0d1
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/23/2018
ms.locfileid: "46705704"
---
# <a name="data-service-versioning-wcf-data-services"></a><span data-ttu-id="893f4-102">資料服務版本控制 (WCF Data Services)</span><span class="sxs-lookup"><span data-stu-id="893f4-102">Data Service Versioning (WCF Data Services)</span></span>
<span data-ttu-id="893f4-103">[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]可讓您建立資料服務，讓用戶端可以存取資料，為使用 Uri 以資料模型為基礎的資源。</span><span class="sxs-lookup"><span data-stu-id="893f4-103">The [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] enables you to create data services so that clients can access data as resources using URIs that are based on a data model.</span></span> <span data-ttu-id="893f4-104">OData 也支援服務作業的定義。</span><span class="sxs-lookup"><span data-stu-id="893f4-104">OData also supports the definition of service operations.</span></span> <span data-ttu-id="893f4-105">初始部署並在其存留期期間潛在進行數次之後，可能會因為各種原因而需要變更這些資料服務 (例如變更商務需要、資訊技術需求) 或處理其他問題。</span><span class="sxs-lookup"><span data-stu-id="893f4-105">After initial deployment, and potentially several times during their lifetime, these data services may need to be changed for a variety of reasons, such as changing business needs, information technology requirements, or to address other issues.</span></span> <span data-ttu-id="893f4-106">當您針對現有的資料服務進行變更時，必須考慮是否要定義新的資料服務版本，以及如何妥善地將對於現有用戶端應用程式的影響降至最低。</span><span class="sxs-lookup"><span data-stu-id="893f4-106">When you make changes to an existing data service, you must consider whether to define a new version of your data service and how best to minimize the impact on existing client applications.</span></span> <span data-ttu-id="893f4-107">本主題提供建立新資料服務版本時機和方式的指引。</span><span class="sxs-lookup"><span data-stu-id="893f4-107">This topic provides guidance on when and how to create a new version of a data service.</span></span> <span data-ttu-id="893f4-108">它也會描述 WCF Data Services 的用戶端和支援的 OData 通訊協定的不同版本的資料服務之間交換的處理方式。</span><span class="sxs-lookup"><span data-stu-id="893f4-108">It also describes how WCF Data Services handles an exchange between clients and data services that support different versions of the OData protocol.</span></span>

## <a name="versioning-a-wcf-data-service"></a><span data-ttu-id="893f4-109">WCF Data Services 的版本控制</span><span class="sxs-lookup"><span data-stu-id="893f4-109">Versioning a WCF Data Service</span></span>
 <span data-ttu-id="893f4-110">部署資料服務並取用資料之後，對於資料服務的變更便有可能造成與現有用戶端應用程式的相容性問題。</span><span class="sxs-lookup"><span data-stu-id="893f4-110">Once a data service is deployed and the data is being consumed, changes to the data service have the potential to cause compatibility issues with existing client applications.</span></span> <span data-ttu-id="893f4-111">不過，由於服務的整體商務需求通常需要變更，因此您必須考慮建立新資料服務版本的時機與方式，並將對於用戶端應用程式的影響降至最低。</span><span class="sxs-lookup"><span data-stu-id="893f4-111">However, because changes are often required by the overall business needs of the service, you must consider when and how to create a new version of your data service with the least impact on client applications.</span></span>

### <a name="data-model-changes-that-recommend-a-new-data-service-version"></a><span data-ttu-id="893f4-112">建議新資料服務版本的資料模型變更</span><span class="sxs-lookup"><span data-stu-id="893f4-112">Data Model Changes that Recommend a New Data Service Version</span></span>
 <span data-ttu-id="893f4-113">考慮是否要發行新資料服務版本時，最好先了解不同種類的變更影響用戶端應用程式的方式。</span><span class="sxs-lookup"><span data-stu-id="893f4-113">When considering whether to publish a new version of a data service, it is important to understand how the different kinds of changes may affect client applications.</span></span> <span data-ttu-id="893f4-114">對於可能要求您建立新資料服務版本之資料服務的變更可分成下列兩種類別：</span><span class="sxs-lookup"><span data-stu-id="893f4-114">Changes to a data service that might require you to create a new version of a data service can be divided into the following two categories:</span></span>

-   <span data-ttu-id="893f4-115">對於服務合約的變更—其中包括服務作業的更新、對於實體集 (摘要) 存取範圍的變更、版本變更，以及對於服務行為的其他變更。</span><span class="sxs-lookup"><span data-stu-id="893f4-115">Changes to the service contract—which include updates to service operations, changes to the accessibility of entity sets (feeds), version changes, and other changes to service behaviors.</span></span>

-   <span data-ttu-id="893f4-116">對於資料合約的變更—其中包括對於資料模型、摘要格式或摘要自訂的變更。</span><span class="sxs-lookup"><span data-stu-id="893f4-116">Changes to the data contract—which include changes to the data model, feed formats, or feed customizations.</span></span>

 <span data-ttu-id="893f4-117">下表詳細說明您應該考慮發行新資料服務版本的哪些變更種類：</span><span class="sxs-lookup"><span data-stu-id="893f4-117">The following table details for which kinds of changes you should consider publishing a new version of the data service:</span></span>

|<span data-ttu-id="893f4-118">變更類型</span><span class="sxs-lookup"><span data-stu-id="893f4-118">Type of Change</span></span>|<span data-ttu-id="893f4-119">需要新版本</span><span class="sxs-lookup"><span data-stu-id="893f4-119">Requires a new version</span></span>|<span data-ttu-id="893f4-120">不需要新版本</span><span class="sxs-lookup"><span data-stu-id="893f4-120">New version not needed</span></span>|
|--------------------|----------------------------|----------------------------|
|<span data-ttu-id="893f4-121">服務作業</span><span class="sxs-lookup"><span data-stu-id="893f4-121">Service operations</span></span>|<span data-ttu-id="893f4-122">新增新的參數</span><span class="sxs-lookup"><span data-stu-id="893f4-122">-   Add new parameter</span></span><br /><span data-ttu-id="893f4-123">變更傳回型別</span><span class="sxs-lookup"><span data-stu-id="893f4-123">-   Change return type</span></span><br /><span data-ttu-id="893f4-124">-移除服務作業</span><span class="sxs-lookup"><span data-stu-id="893f4-124">-   Remove service operation</span></span>|<span data-ttu-id="893f4-125">-刪除現有的參數</span><span class="sxs-lookup"><span data-stu-id="893f4-125">-   Delete existing parameter</span></span><br /><span data-ttu-id="893f4-126">-加入新的服務作業</span><span class="sxs-lookup"><span data-stu-id="893f4-126">-   Add new service operation</span></span>|
|<span data-ttu-id="893f4-127">服務行為</span><span class="sxs-lookup"><span data-stu-id="893f4-127">Service behaviors</span></span>|<span data-ttu-id="893f4-128">-停用計數要求</span><span class="sxs-lookup"><span data-stu-id="893f4-128">-   Disable count requests</span></span><br /><span data-ttu-id="893f4-129">-停用投影支援</span><span class="sxs-lookup"><span data-stu-id="893f4-129">-   Disable projection support</span></span><br /><span data-ttu-id="893f4-130">-增加所需的資料服務版本</span><span class="sxs-lookup"><span data-stu-id="893f4-130">-   Increase the required data service version</span></span>|<span data-ttu-id="893f4-131">-啟用計數要求</span><span class="sxs-lookup"><span data-stu-id="893f4-131">-   Enable count requests</span></span><br /><span data-ttu-id="893f4-132">-啟用投影支援</span><span class="sxs-lookup"><span data-stu-id="893f4-132">-   Enable projection support</span></span><br /><span data-ttu-id="893f4-133">-減少所需的資料服務版本</span><span class="sxs-lookup"><span data-stu-id="893f4-133">-   Decrease the required data service version</span></span>|
|<span data-ttu-id="893f4-134">實體集權限</span><span class="sxs-lookup"><span data-stu-id="893f4-134">Entity set permissions</span></span>|<span data-ttu-id="893f4-135">-限制實體集權限</span><span class="sxs-lookup"><span data-stu-id="893f4-135">-   Restrict entity set permissions</span></span><br /><span data-ttu-id="893f4-136">-變更回應碼 (新第一位數值) <sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="893f4-136">-   Change response code (new first digit value) <sup>1</sup></span></span>|<span data-ttu-id="893f4-137">放寬實體集權限</span><span class="sxs-lookup"><span data-stu-id="893f4-137">-   Relax entity set permissions</span></span><br /><span data-ttu-id="893f4-138">-變更回應碼 (相同第一位數值)</span><span class="sxs-lookup"><span data-stu-id="893f4-138">-   Change response code (same first digit value)</span></span>|
|<span data-ttu-id="893f4-139">實體屬性</span><span class="sxs-lookup"><span data-stu-id="893f4-139">Entity properties</span></span>|<span data-ttu-id="893f4-140">-移除現有的屬性或關聯性</span><span class="sxs-lookup"><span data-stu-id="893f4-140">-   Remove existing property or relationship</span></span><br /><span data-ttu-id="893f4-141">新增不可為 null 的屬性</span><span class="sxs-lookup"><span data-stu-id="893f4-141">-   Add non-nullable property</span></span><br /><span data-ttu-id="893f4-142">-變更現有屬性</span><span class="sxs-lookup"><span data-stu-id="893f4-142">-   Change existing property</span></span>|<span data-ttu-id="893f4-143">新增可為 null 的屬性<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="893f4-143">-   Add nullable property<sup>2</sup></span></span>|
|<span data-ttu-id="893f4-144">實體集</span><span class="sxs-lookup"><span data-stu-id="893f4-144">Entity sets</span></span>|<span data-ttu-id="893f4-145">-移除實體集</span><span class="sxs-lookup"><span data-stu-id="893f4-145">-   Remove entity set</span></span>|<span data-ttu-id="893f4-146">新增衍生型別</span><span class="sxs-lookup"><span data-stu-id="893f4-146">-   Add derived type</span></span><br /><span data-ttu-id="893f4-147">-變更基底類型</span><span class="sxs-lookup"><span data-stu-id="893f4-147">-   Change base type</span></span><br /><span data-ttu-id="893f4-148">新增實體集</span><span class="sxs-lookup"><span data-stu-id="893f4-148">-   Add entity set</span></span>|
|<span data-ttu-id="893f4-149">摘要自訂</span><span class="sxs-lookup"><span data-stu-id="893f4-149">Feed customization</span></span>|<span data-ttu-id="893f4-150">變更實體屬性對應</span><span class="sxs-lookup"><span data-stu-id="893f4-150">-   Change entity-property mapping</span></span>||

 <span data-ttu-id="893f4-151"><sup>1</sup>這可能取決於用戶端應用程式依賴接收特定錯誤碼嚴格程度。</span><span class="sxs-lookup"><span data-stu-id="893f4-151"><sup>1</sup> This may depend on how strictly a client application relies on receiving a specific error code.</span></span>

 <span data-ttu-id="893f4-152"><sup>2</sup>您可以設定<xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A>屬性設`true`已略過資料服務所傳送的用戶端上未定義任何新內容的用戶端。</span><span class="sxs-lookup"><span data-stu-id="893f4-152"><sup>2</sup> You can set the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property to `true` to have the client ignore any new properties sent by the data service that are not defined on the client.</span></span> <span data-ttu-id="893f4-153">不過，進行插入時，用戶端沒有包含在 POST 要求中的屬性會設為其預設值。</span><span class="sxs-lookup"><span data-stu-id="893f4-153">However, when inserts are made, the properties not included by the client in the POST request are set to their default values.</span></span> <span data-ttu-id="893f4-154">若是更新，屬性中用戶端未知的任何現有資料都可能會以預設值覆寫。</span><span class="sxs-lookup"><span data-stu-id="893f4-154">For updates, any existing data in a property unknown to the client might be overwritten with default values.</span></span> <span data-ttu-id="893f4-155">在此情況下，您應該將更新當做 MERGE 要求傳送，這是預設值。</span><span class="sxs-lookup"><span data-stu-id="893f4-155">In this case, you should send the update as a MERGE request, which is the default.</span></span> <span data-ttu-id="893f4-156">如需詳細資訊，請參閱 <<c0> [ 管理資料服務內容](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="893f4-156">For more information, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>

### <a name="how-to-version-a-data-service"></a><span data-ttu-id="893f4-157">如何進行資料服務的版本控制</span><span class="sxs-lookup"><span data-stu-id="893f4-157">How to Version a Data Service</span></span>
 <span data-ttu-id="893f4-158">必要時，您可以使用更新的服務合約或資料模型建立新的服務執行個體，藉以定義新的資料服務版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-158">When required, a new data service version is defined by creating a new instance of the service with an updated service contract or data model.</span></span> <span data-ttu-id="893f4-159">接著，您要使用新的 URI 端點公開這個新服務，以區別舊版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-159">This new service is then exposed by using a new URI endpoint, which differentiates it from the previous version.</span></span> <span data-ttu-id="893f4-160">例如：</span><span class="sxs-lookup"><span data-stu-id="893f4-160">For example:</span></span>

-   <span data-ttu-id="893f4-161">舊版本：`http://services.odata.org/Northwind/v1/Northwind.svc/`</span><span class="sxs-lookup"><span data-stu-id="893f4-161">Old version: `http://services.odata.org/Northwind/v1/Northwind.svc/`</span></span>

-   <span data-ttu-id="893f4-162">新版本：`http://services.odata.org/Northwind/v2/Northwind.svc/`</span><span class="sxs-lookup"><span data-stu-id="893f4-162">New version: `http://services.odata.org/Northwind/v2/Northwind.svc/`</span></span>

 <span data-ttu-id="893f4-163">升級資料服務時，用戶端也需要根據新的資料服務中繼資料進行更新，並使用新的根 URI。</span><span class="sxs-lookup"><span data-stu-id="893f4-163">When upgrading a data service, clients will need to also be updated based on the new data service metadata and to use the new root URI.</span></span> <span data-ttu-id="893f4-164">如果可能，您應該維護資料服務的舊版本，以支援尚未進行升級以使用新版本的用戶端。</span><span class="sxs-lookup"><span data-stu-id="893f4-164">When possible, you should maintain the previous version of the data service to support clients that have not yet been upgraded to use the new version.</span></span> <span data-ttu-id="893f4-165">不再需要舊版本的資料服務時，可以將其移除。</span><span class="sxs-lookup"><span data-stu-id="893f4-165">Older versions of a data service can be removed when they are no longer needed.</span></span> <span data-ttu-id="893f4-166">您應該考慮在外部組態檔中維護資料服務端點 URI。</span><span class="sxs-lookup"><span data-stu-id="893f4-166">You should consider maintaining the data service endpoint URI in an external configuration file.</span></span>

## <a name="odata-protocol-versions"></a><span data-ttu-id="893f4-167">OData 通訊協定版本</span><span class="sxs-lookup"><span data-stu-id="893f4-167">OData Protocol Versions</span></span>
 <span data-ttu-id="893f4-168">會在發行新版本的 OData 用戶端應用程式可能不會使用相同版本的資料服務所支援的 OData 通訊協定。</span><span class="sxs-lookup"><span data-stu-id="893f4-168">As new versions of OData are released, client applications may not be using the same version of the OData protocol that is supported by the data service.</span></span> <span data-ttu-id="893f4-169">較舊的用戶端應用程式可以存取資料服務支援 OData 的較新版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-169">An older client application may access a data service that supports a newer version of OData.</span></span> <span data-ttu-id="893f4-170">用戶端應用程式可能也使用 WCF Data Services 用戶端程式庫，可支援較新版本的 OData 比正在存取之資料服務的較新版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-170">A client application may also be using a newer version of the WCF Data Services client library, which supports a newer version of OData than does the data service that is being accessed.</span></span>

 <span data-ttu-id="893f4-171">WCF Data Services 會利用 OData 來處理這類版本設定案例所提供的支援。</span><span class="sxs-lookup"><span data-stu-id="893f4-171">WCF Data Services leverages the support provided by OData to handle such versioning scenarios.</span></span> <span data-ttu-id="893f4-172">另外還有支援產生及使用資料模型中繼資料來建立用戶端資料服務類別，當用戶端使用的版本不同的 OData 資料服務所使用。</span><span class="sxs-lookup"><span data-stu-id="893f4-172">There is also support for generating and using data model metadata to create client data service classes when the client uses a different version of OData than the data service uses.</span></span> <span data-ttu-id="893f4-173">如需詳細資訊，請參閱 < [OData： 通訊協定版本控制](https://go.microsoft.com/fwlink/?LinkId=186071)。</span><span class="sxs-lookup"><span data-stu-id="893f4-173">For more information, see [OData: Protocol Versioning](https://go.microsoft.com/fwlink/?LinkId=186071).</span></span>

### <a name="version-negotiation"></a><span data-ttu-id="893f4-174">版本交涉</span><span class="sxs-lookup"><span data-stu-id="893f4-174">Version Negotiation</span></span>
 <span data-ttu-id="893f4-175">資料服務可以設定來定義將由該服務，不論哪個版本的用戶端要求的 OData 通訊協定的最高版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-175">The data service can be configured to define the highest version of the OData protocol that will be used by the service, regardless of the version requested by the client.</span></span> <span data-ttu-id="893f4-176">您可以藉由指定<xref:System.Data.Services.Common.DataServiceProtocolVersion>值<xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A>屬性<xref:System.Data.Services.DataServiceBehavior>資料服務所使用。</span><span class="sxs-lookup"><span data-stu-id="893f4-176">You can do this by specifying a <xref:System.Data.Services.Common.DataServiceProtocolVersion> value for the <xref:System.Data.Services.DataServiceBehavior.MaxProtocolVersion%2A> property of the <xref:System.Data.Services.DataServiceBehavior> used by the data service.</span></span> <span data-ttu-id="893f4-177">如需詳細資訊，請參閱 <<c0> [ 設定資料服務](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="893f4-177">For more information, see [Configuring the Data Service](../../../../docs/framework/data/wcf/configuring-the-data-service-wcf-data-services.md).</span></span>

 <span data-ttu-id="893f4-178">當應用程式會使用 WCF Data Services 用戶端程式庫來存取資料服務時，程式庫自動設定這些標頭設為正確的值，根據 OData 和您的應用程式中使用的功能的版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-178">When an application uses the WCF Data Services client libraries to access a data service, the libraries automatically set these headers to the correct values, depending on the version of OData and the features that are used in your application.</span></span> <span data-ttu-id="893f4-179">根據預設，WCF Data Services 會使用支援要求的作業的最小通訊協定版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-179">By default, WCF Data Services uses the lowest protocol version that supports the requested operation.</span></span>

 <span data-ttu-id="893f4-180">下表詳述的新版[!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)]和[!INCLUDE[silverlight](../../../../includes/silverlight-md.md)]包含 WCF Data Services 支援的 OData 通訊協定的特定版本。</span><span class="sxs-lookup"><span data-stu-id="893f4-180">The following table details the versions of [!INCLUDE[dnprdnshort](../../../../includes/dnprdnshort-md.md)] and [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] that include WCF Data Services support for specific versions of the OData protocol.</span></span>

|<span data-ttu-id="893f4-181">OData 通訊協定版本</span><span class="sxs-lookup"><span data-stu-id="893f4-181">OData Protocol Version</span></span>|<span data-ttu-id="893f4-182">下列版本引入的支援</span><span class="sxs-lookup"><span data-stu-id="893f4-182">Support introduced in…</span></span>|
|-----------------------------------------------------------------------------------|----------------------------|
|<span data-ttu-id="893f4-183">第 1 版</span><span class="sxs-lookup"><span data-stu-id="893f4-183">Version 1</span></span>|<span data-ttu-id="893f4-184">-   [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] Service Pack 1 (SP1)</span><span class="sxs-lookup"><span data-stu-id="893f4-184">-   [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] Service Pack 1 (SP1)</span></span><br /><span data-ttu-id="893f4-185">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] 第 3 版</span><span class="sxs-lookup"><span data-stu-id="893f4-185">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] version 3</span></span>|
|<span data-ttu-id="893f4-186">第 2 版</span><span class="sxs-lookup"><span data-stu-id="893f4-186">Version 2</span></span>|-   [!INCLUDE[netfx40_long](../../../../includes/netfx40-long-md.md)]<br /><span data-ttu-id="893f4-187">-若要更新[!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)]SP1。</span><span class="sxs-lookup"><span data-stu-id="893f4-187">-   An update to [!INCLUDE[netfx35_long](../../../../includes/netfx35-long-md.md)] SP1.</span></span> <span data-ttu-id="893f4-188">您可以下載並安裝的更新[Microsoft 下載中心](https://go.microsoft.com/fwlink/?LinkId=158125)。</span><span class="sxs-lookup"><span data-stu-id="893f4-188">You can download and install the update from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?LinkId=158125).</span></span><br /><span data-ttu-id="893f4-189">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] 第 4 版</span><span class="sxs-lookup"><span data-stu-id="893f4-189">-   [!INCLUDE[silverlight](../../../../includes/silverlight-md.md)] version 4</span></span>|
|<span data-ttu-id="893f4-190">第 3 版</span><span class="sxs-lookup"><span data-stu-id="893f4-190">Version 3</span></span>|<span data-ttu-id="893f4-191">-您可以下載並安裝支援 OData 第 3 版的發行前版本[Microsoft 下載中心](https://go.microsoft.com/fwlink/?LinkId=203885)。</span><span class="sxs-lookup"><span data-stu-id="893f4-191">-   You can download and install a pre-release version that supports OData version 3 from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?LinkId=203885).</span></span>|

### <a name="metadata-versions"></a><span data-ttu-id="893f4-192">中繼資料版本</span><span class="sxs-lookup"><span data-stu-id="893f4-192">Metadata Versions</span></span>
 <span data-ttu-id="893f4-193">根據預設，WCF Data Services 會使用 1.1 版的 CSDL 來代表資料模型。</span><span class="sxs-lookup"><span data-stu-id="893f4-193">By default, WCF Data Services uses version 1.1 of CSDL to represent a data model.</span></span> <span data-ttu-id="893f4-194">這就是以反映提供者或自訂資料服務提供者為基礎之資料模型的情況。</span><span class="sxs-lookup"><span data-stu-id="893f4-194">This is always the case for data models that are based on either a reflection provider or a custom data service provider.</span></span> <span data-ttu-id="893f4-195">但是，當使用 [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] 來定義資料模型時，傳回的 CSDL 版本會與 [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] 所使用的版本相同。</span><span class="sxs-lookup"><span data-stu-id="893f4-195">However, when the data model is defined by using the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)], the version of CSDL returned is the same as the version that is used by the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="893f4-196">CSDL 的版本取決於命名空間[結構描述項目](https://msdn.microsoft.com/library/396074d8-f99c-4f50-a073-68bce848224f)。</span><span class="sxs-lookup"><span data-stu-id="893f4-196">The version of the CSDL is determined by the namespace of the [Schema element](https://msdn.microsoft.com/library/396074d8-f99c-4f50-a073-68bce848224f).</span></span> <span data-ttu-id="893f4-197">如需詳細資訊，請參閱規格[ \[MC-CSDL\]： 概念結構定義檔案格式](https://go.microsoft.com/fwlink/?LinkId=159072)。</span><span class="sxs-lookup"><span data-stu-id="893f4-197">For more information, see the specification [\[MC-CSDL\]: Conceptual Schema Definition File Format](https://go.microsoft.com/fwlink/?LinkId=159072).</span></span>

 <span data-ttu-id="893f4-198">傳回之中繼資料的 `DataServices` 項目還包含 `DataServiceVersion` 屬性，該值與回應訊息中 `DataServiceVersion` 標頭的值相同。</span><span class="sxs-lookup"><span data-stu-id="893f4-198">The `DataServices` element of the returned metadata also contains a `DataServiceVersion` attribute, which is the same value as the `DataServiceVersion` header in the response message.</span></span> <span data-ttu-id="893f4-199">用戶端應用程式，例如**加入服務參考**對話方塊在 Visual Studio 中，使用此資訊來產生用戶端資料服務類別與裝載資料服務的 WCF Data Services 的版本正常運作。</span><span class="sxs-lookup"><span data-stu-id="893f4-199">Client applications, such as the **Add Service Reference** dialog box in Visual Studio, use this information to generate client data service classes that work correctly with the version of WCF Data Services that host the data service.</span></span> <span data-ttu-id="893f4-200">如需詳細資訊，請參閱 < [OData： 通訊協定版本控制](https://go.microsoft.com/fwlink/?LinkId=186071)。</span><span class="sxs-lookup"><span data-stu-id="893f4-200">For more information, see [OData: Protocol Versioning](https://go.microsoft.com/fwlink/?LinkId=186071).</span></span>

## <a name="see-also"></a><span data-ttu-id="893f4-201">另請參閱</span><span class="sxs-lookup"><span data-stu-id="893f4-201">See Also</span></span>

- [<span data-ttu-id="893f4-202">資料服務提供者</span><span class="sxs-lookup"><span data-stu-id="893f4-202">Data Services Providers</span></span>](../../../../docs/framework/data/wcf/data-services-providers-wcf-data-services.md)
- [<span data-ttu-id="893f4-203">定義 WCF Data Services</span><span class="sxs-lookup"><span data-stu-id="893f4-203">Defining WCF Data Services</span></span>](../../../../docs/framework/data/wcf/defining-wcf-data-services.md)
