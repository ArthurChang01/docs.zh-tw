---
title: 自訂摘要 (WCF 資料服務)
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF Data Services, feeds
- WCF Data Services, Atom protocol
- Atom Publishing Protocol [WCF Data Services]
- WCF Data Services, customizing feeds
ms.assetid: 0d1a39bc-6462-4683-bd7d-e74e0fd28a85
ms.openlocfilehash: 1922351ffb11d5ff6541ef22dee623c20d153d6a
ms.sourcegitcommit: efff8f331fd9467f093f8ab8d23a203d6ecb5b60
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/03/2018
ms.locfileid: "43482918"
---
# <a name="feed-customization-wcf-data-services"></a><span data-ttu-id="3e73d-102">自訂摘要 (WCF 資料服務)</span><span class="sxs-lookup"><span data-stu-id="3e73d-102">Feed Customization (WCF Data Services)</span></span>
[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="3e73d-103"> 使用[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]將資料公開為摘要。</span><span class="sxs-lookup"><span data-stu-id="3e73d-103"> uses the [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] to expose data as a feed.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="3e73d-104"> 支援資料摘要的 Atom 和 「 JavaScript 物件標記法 (JSON) 格式。</span><span class="sxs-lookup"><span data-stu-id="3e73d-104"> supports both Atom and JavaScript Object Notation (JSON) formats for data feeds.</span></span> <span data-ttu-id="3e73d-105">當您使用 Atom 摘要時，[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]提供標準的方法，用來序列化資料，例如實體和關聯性，為 XML 格式，可以包含在 HTTP 訊息的本文。</span><span class="sxs-lookup"><span data-stu-id="3e73d-105">When you use an Atom feed, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] provides a standard method to serialize data, such as entities and relationships, into an XML format that can be included in the body of HTTP message.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]<span data-ttu-id="3e73d-106"> 定義包含在實體內的資料與 Atom 項目之間的預設實體屬性對應。</span><span class="sxs-lookup"><span data-stu-id="3e73d-106"> defines a default entity-property mapping between the data that is contained in entities and Atom elements.</span></span> <span data-ttu-id="3e73d-107">如需詳細資訊，請參閱 < [OData: Atom 格式](https://go.microsoft.com/fwlink/?LinkID=185794)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-107">For more information, see [OData: Atom Format](https://go.microsoft.com/fwlink/?LinkID=185794).</span></span>  
  
 <span data-ttu-id="3e73d-108">您可能有一個應用程式案例，該案例要求資料服務所傳回的屬性資料是以自訂行為序列化，而不是以標準摘要格式序列化。</span><span class="sxs-lookup"><span data-stu-id="3e73d-108">You may have an application scenario that requires that the property data returned by the data service be serialized in a customized manner rather than in the standard feed format.</span></span> <span data-ttu-id="3e73d-109">使用[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]，您可以自訂資料摘要中的序列化，因此實體的屬性可能會對應至未使用的項目和屬性的項目或自訂的項目摘要中的項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-109">With [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)], you can customize the serialization in a data feed so that properties of an entity may be mapped to unused elements and attributes of an entry or to custom elements of an entry in the feed.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3e73d-110">僅支援 Atom 摘要的摘要自訂。</span><span class="sxs-lookup"><span data-stu-id="3e73d-110">Feed customization is only supported for Atom feeds.</span></span> <span data-ttu-id="3e73d-111">當傳回的摘要需要 JSON 格式時，不會傳回自訂摘要。</span><span class="sxs-lookup"><span data-stu-id="3e73d-111">Custom feeds are not returned when the JSON format is requested for the returned feed.</span></span>  
  
 <span data-ttu-id="3e73d-112">透過 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]，您可以手動將屬性套用至資料模型中的實體類型，藉以定義 Atom 裝載的替代實體屬性對應。</span><span class="sxs-lookup"><span data-stu-id="3e73d-112">With [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], you can define an alternate entity-property mapping for an Atom payload by manually applying attributes to entity types in the data model.</span></span> <span data-ttu-id="3e73d-113">資料服務的資料來源提供者會判斷您應如何套用這些屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-113">The data source provider of the data service determines how you should apply these attributes.</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="3e73d-114">當您定義自訂摘要時，您必須確保所有已定義自訂對應的實體屬性都包含在投影中。</span><span class="sxs-lookup"><span data-stu-id="3e73d-114">When you define custom feeds, you must guarantee that all entity properties that have custom mappings defined are included in the projection.</span></span> <span data-ttu-id="3e73d-115">若投影中未包含對應的實體屬性，則可能會發生資料遺失。</span><span class="sxs-lookup"><span data-stu-id="3e73d-115">When a mapped entity property is not included in the projection, data loss might occur.</span></span> <span data-ttu-id="3e73d-116">如需詳細資訊，請參閱 <<c0> [ 查詢投影](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-116">For more information, see [Query Projections](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-the-entity-framework-provider"></a><span data-ttu-id="3e73d-117">使用 Entity Framework 提供者自訂摘要</span><span class="sxs-lookup"><span data-stu-id="3e73d-117">Customizing Feeds with the Entity Framework Provider</span></span>  
 <span data-ttu-id="3e73d-118">搭配 [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] 提供者使用的資料模型在 .edmx 檔案中以 XML 表示。</span><span class="sxs-lookup"><span data-stu-id="3e73d-118">The data model used with the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider is represented as XML in the .edmx file.</span></span> <span data-ttu-id="3e73d-119">在這種情況下，定義自訂摘要的屬性會新增至 `EntityType` 和`Property` 項目，表示資料模型中的實體類型和屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-119">In this case, the attributes that define custom feeds are added to the `EntityType` and `Property` elements that represent entity types and properties in the data model.</span></span> <span data-ttu-id="3e73d-120">這些摘要的自訂屬性中未定義[ \[MC-CSDL\]： 概念結構定義檔案格式](https://go.microsoft.com/fwlink/?LinkId=159072)，這是格式，[!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)]提供者用於定義資料模型。</span><span class="sxs-lookup"><span data-stu-id="3e73d-120">These feed customization attributes are not defined in [\[MC-CSDL\]: Conceptual Schema Definition File Format](https://go.microsoft.com/fwlink/?LinkId=159072), which is the format that the [!INCLUDE[adonet_ef](../../../../includes/adonet-ef-md.md)] provider uses to define the data model.</span></span> <span data-ttu-id="3e73d-121">因此，您必須在特定的結構描述命名空間中宣告摘要自訂屬性，定義為 `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`。</span><span class="sxs-lookup"><span data-stu-id="3e73d-121">Therefore, you must declare feed customization attributes in a specific schema namespace, which is defined as `m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"`.</span></span> <span data-ttu-id="3e73d-122">下列 XML 片段會顯示套用至 `Property` 實體類型之 `Products` 項目的摘要自訂屬性，定義 `ProductName`、`ReorderLevel` 和 `UnitsInStock` 屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-122">The following XML fragment shows feed customization attributes applied to `Property` elements of the `Products` entity type that define the `ProductName`, `ReorderLevel`, and `UnitsInStock` properties.</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedAttributes](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria custom feeds/xml/northwind.csdl#edmfeedattributes)]  
  
 <span data-ttu-id="3e73d-123">這些屬性會針對 `Products` 實體集產生下列自訂資料摘要。</span><span class="sxs-lookup"><span data-stu-id="3e73d-123">These attributes produce the following customized data feed for the `Products` entity set.</span></span> <span data-ttu-id="3e73d-124">在自訂資料摘要中，`ProductName` 屬性 (property) 值會同時顯示在 `author` 項目中並做為 `ProductName` 屬性 (property) 項目，而 `UnitsInStock` 屬性 (property) 則會顯示在自訂項目中，它具有其唯一的命名空間和做為屬性 (attribute) 的 `ReorderLevel` 屬性 (property)：</span><span class="sxs-lookup"><span data-stu-id="3e73d-124">In the customized data feed, the `ProductName` property value is displayed in both in the `author` element and as the `ProductName` property element, and the `UnitsInStock` property is displayed in a custom element that has its own unique namespace and with the `ReorderLevel` property as an attribute:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#EdmFeedResultProduct](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria custom feeds/xml/edmfeedresult.xml#edmfeedresultproduct)]  
  
 <span data-ttu-id="3e73d-125">如需詳細資訊，請參閱 <<c0> [ 如何： 使用 Entity Framework 提供者自訂摘要](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-ef-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-125">For more information, see [How to: Customize Feeds with the Entity Framework Provider](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-ef-provider-wcf-data-services.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3e73d-126">由於 Entity Designer 不支援資料模型的副檔名，您必須手動修改包含資料模型的 XML 檔案。</span><span class="sxs-lookup"><span data-stu-id="3e73d-126">Because extensions to the data model are not supported by the Entity Designer, you must manually modify the XML file that contains the data model.</span></span> <span data-ttu-id="3e73d-127">如需.edmx 檔案所產生的詳細資訊[!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)]工具，請參閱[.edmx 檔案概觀](https://msdn.microsoft.com/library/f4c8e7ce-1db6-417e-9759-15f8b55155d4)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-127">For more information about the .edmx file that is generated by the [!INCLUDE[adonet_edm](../../../../includes/adonet-edm-md.md)] tools, see [.edmx File Overview](https://msdn.microsoft.com/library/f4c8e7ce-1db6-417e-9759-15f8b55155d4).</span></span>  
  
### <a name="custom-feed-attributes"></a><span data-ttu-id="3e73d-128">自訂摘要屬性</span><span class="sxs-lookup"><span data-stu-id="3e73d-128">Custom Feed Attributes</span></span>  
 <span data-ttu-id="3e73d-129">下表顯示可自訂摘要的 XML 屬性，您可以將它們加入至定義資料模型的概念結構定義語言 (CSDL) 中。</span><span class="sxs-lookup"><span data-stu-id="3e73d-129">The following table shows the XML attributes that customize feeds that you can add to the conceptual schema definition language (CSDL) that defines the data model.</span></span> <span data-ttu-id="3e73d-130">這些屬性 (Attribute) 相當於搭配反映提供者所使用之 <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> 的屬性 (Property)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-130">These attributes are equivalent to the properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> used with the reflection provider.</span></span>  
  
|<span data-ttu-id="3e73d-131">屬性名稱</span><span class="sxs-lookup"><span data-stu-id="3e73d-131">Attribute name</span></span>|<span data-ttu-id="3e73d-132">描述</span><span class="sxs-lookup"><span data-stu-id="3e73d-132">Description</span></span>|  
|--------------------|-----------------|  
|`FC_ContentKind`|<span data-ttu-id="3e73d-133">指示內容的類型。</span><span class="sxs-lookup"><span data-stu-id="3e73d-133">Indicates the type of the content.</span></span> <span data-ttu-id="3e73d-134">以下關鍵字可定義新聞訂閱方式內容類型。</span><span class="sxs-lookup"><span data-stu-id="3e73d-134">The following keywords define syndication content types.</span></span><br /><br /> <span data-ttu-id="3e73d-135">`text:` 屬性值會在摘要中顯示為文字。</span><span class="sxs-lookup"><span data-stu-id="3e73d-135">`text:` The property value is displayed in the feed as text.</span></span><br /><br /> <span data-ttu-id="3e73d-136">`html:` 屬性值會在摘要中顯示為 HTML。</span><span class="sxs-lookup"><span data-stu-id="3e73d-136">`html:` The property value is displayed in the feed as HTML.</span></span><br /><br /> <span data-ttu-id="3e73d-137">`xhtml:` 屬性值會在摘要中顯示為 XML 格式的 HTML。</span><span class="sxs-lookup"><span data-stu-id="3e73d-137">`xhtml:` The property value is displayed in the feed as XML-formatted HTML.</span></span><br /><br /> <span data-ttu-id="3e73d-138">這些關鍵字相當於搭配反映提供者所使用之 <xref:System.Data.Services.Common.SyndicationTextContentKind> 列舉的值。</span><span class="sxs-lookup"><span data-stu-id="3e73d-138">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationTextContentKind> enumeration used with the reflection provider.</span></span><br /><br /> <span data-ttu-id="3e73d-139">使用 `FC_NsPrefix` 和 `FC_NsUri` 屬性時，將不支援此屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-139">This attribute is not supported when the `FC_NsPrefix` and `FC_NsUri` attributes are used.</span></span><br /><br /> <span data-ttu-id="3e73d-140">在您指定 `xhtml` 屬性的`FC_ContentKind` 值時，必須先確保屬性值會包含格式正確的 XML。</span><span class="sxs-lookup"><span data-stu-id="3e73d-140">When you specify a value of `xhtml` for the `FC_ContentKind` attribute, you must ensure that the property value contains properly formatted XML.</span></span> <span data-ttu-id="3e73d-141">資料服務會傳回未執行任何轉換的值。</span><span class="sxs-lookup"><span data-stu-id="3e73d-141">The data service returns the value without performing any transformations.</span></span> <span data-ttu-id="3e73d-142">您還必須確保傳回之 XML 中的任何 XML 項目前置詞具備命名空間 URI 以及對應之摘要中所定義的前置詞。</span><span class="sxs-lookup"><span data-stu-id="3e73d-142">You must also ensure that any XML element prefixes in the returned XML have a namespace URI and prefix defined in the mapped feed.</span></span>|  
|`FC_KeepInContent`|<span data-ttu-id="3e73d-143">指出參考的屬性值應包含在摘要的內容區段以及所對應的位置中。</span><span class="sxs-lookup"><span data-stu-id="3e73d-143">Indicates that the referenced property value should be included both in the content section of the feed and in the mapped location.</span></span> <span data-ttu-id="3e73d-144">有效值為 `true` 和 `false`。</span><span class="sxs-lookup"><span data-stu-id="3e73d-144">Valid values are `true` and `false`.</span></span> <span data-ttu-id="3e73d-145">若要使結果摘要與舊版的回溯相容[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]，指定其值為`true`藉此確定摘要的內容區段中包含的值。</span><span class="sxs-lookup"><span data-stu-id="3e73d-145">To make the resulting feed backward-compatible with earlier versions of [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)], specify a value of `true` to make sure that the value is included in the content section of the feed.</span></span>|  
|`FC_NsPrefix`|<span data-ttu-id="3e73d-146">非新聞訂閱方式對應中 XML 項目的命名空間前置詞。</span><span class="sxs-lookup"><span data-stu-id="3e73d-146">The namespace prefix of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="3e73d-147">這個屬性必須搭配 `FC_NsUri` 屬性使用，不能搭配 `FC_ContentKind` 屬性使用。</span><span class="sxs-lookup"><span data-stu-id="3e73d-147">This attribute must be used with the `FC_NsUri` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_NsUri`|<span data-ttu-id="3e73d-148">非新聞訂閱方式對應中 XML 項目的命名空間 URI。</span><span class="sxs-lookup"><span data-stu-id="3e73d-148">The namespace URI of the XML element in a non-syndication mapping.</span></span> <span data-ttu-id="3e73d-149">這個屬性必須搭配 `FC_NsPrefix` 屬性使用，不能搭配 `FC_ContentKind` 屬性使用。</span><span class="sxs-lookup"><span data-stu-id="3e73d-149">This attribute must be used with the `FC_NsPrefix` attribute and cannot be used with the `FC_ContentKind` attribute.</span></span>|  
|`FC_SourcePath`|<span data-ttu-id="3e73d-150">此摘要對應規則套用的實體屬性路徑。</span><span class="sxs-lookup"><span data-stu-id="3e73d-150">The path of the property of the entity to which this feed mapping rule applies.</span></span> <span data-ttu-id="3e73d-151">僅支援用於 `EntityType` 項目中的屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-151">This attribute is only supported when it is used in an `EntityType` element.</span></span><br /><br /> <span data-ttu-id="3e73d-152"><xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> 屬性不能直接參考複雜型別。</span><span class="sxs-lookup"><span data-stu-id="3e73d-152">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot directly reference a complex type.</span></span> <span data-ttu-id="3e73d-153">針對複雜型別，您必須使用路徑運算式，其中的屬性名稱以反斜線 (`/`) 字元隔開。</span><span class="sxs-lookup"><span data-stu-id="3e73d-153">For complex types, you must use a path expression where property names are separated by a backslash (`/`) character.</span></span> <span data-ttu-id="3e73d-154">例如，下列值允許實體類型`Person`包含整數屬性`Age`和複雜屬性</span><span class="sxs-lookup"><span data-stu-id="3e73d-154">For example, the following values are allowed for an entity type `Person` with an integer property `Age` and a complex property</span></span><br /><br /> <span data-ttu-id="3e73d-155">`Address`：</span><span class="sxs-lookup"><span data-stu-id="3e73d-155">`Address`:</span></span><br /><br /> `Age`<br /><br /> `Address/Street`<br /><br /> <span data-ttu-id="3e73d-156"><xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> 屬性不能設為包含空格或其他字元的值，這些在屬性名稱中不是有效字元。</span><span class="sxs-lookup"><span data-stu-id="3e73d-156">The <xref:System.Data.Services.Common.EntityPropertyMappingAttribute.SourcePath%2A> property cannot be set to a value that contains a space or any other character that is not valid in a property name.</span></span>|  
|`FC_TargetPath`|<span data-ttu-id="3e73d-157">對應屬性之結果摘要的目標項目名稱。</span><span class="sxs-lookup"><span data-stu-id="3e73d-157">The name of the target element of the resulting feed to map the property.</span></span> <span data-ttu-id="3e73d-158">這個項目可以是元素規格定義的項目或自訂項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-158">This element can be an element defined by the Atom specification or a custom element.</span></span><br /><br /> <span data-ttu-id="3e73d-159">以下關鍵字是預先定義的新聞訂閱方式目標路徑值，指向 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 摘要中的特定位置。</span><span class="sxs-lookup"><span data-stu-id="3e73d-159">The following keywords are predefined syndication target-path values that point to specific location in an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed.</span></span><br /><br /> <span data-ttu-id="3e73d-160">`SyndicationAuthorEmail:` `atom:email`子項目`atom:author`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-160">`SyndicationAuthorEmail:` The `atom:email` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="3e73d-161">`SyndicationAuthorName:` `atom:name`子項目`atom:author`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-161">`SyndicationAuthorName:` The `atom:name` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="3e73d-162">`SyndicationAuthorUri:` `atom:uri`子項目`atom:author`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-162">`SyndicationAuthorUri:` The `atom:uri` child element of the `atom:author` element.</span></span><br /><br /> <span data-ttu-id="3e73d-163">`SyndicationContributorEmail:` `atom:email`子項目`atom:contributor`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-163">`SyndicationContributorEmail:` The `atom:email` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="3e73d-164">`SyndicationContributorName:` `atom:name`子項目`atom:contributor`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-164">`SyndicationContributorName:` The `atom:name` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="3e73d-165">`SyndicationContributorUri:` `atom:uri`子項目`atom:contributor`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-165">`SyndicationContributorUri:` The `atom:uri` child element of the `atom:contributor` element.</span></span><br /><br /> <span data-ttu-id="3e73d-166">`SyndicationCustomProperty:` 自訂屬性項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-166">`SyndicationCustomProperty:` A custom property element.</span></span> <span data-ttu-id="3e73d-167">對應至自訂項目時，目標必須是路徑運算式，其中巢狀項目以反斜線 (`/`) 隔開，而且屬性以連字號 (`@`) 指定。</span><span class="sxs-lookup"><span data-stu-id="3e73d-167">When mapping to a custom element, the target must be a path expression in which nested elements are separated by a backslash (`/`) and attributes are specified by an ampersand (`@`).</span></span> <span data-ttu-id="3e73d-168">下列範例中，字串 `UnitsInStock/@ReorderLevel` 將屬性值對應至名為 `ReorderLevel` 的屬性，位於根項目中名為 `UnitsInStock` 的子項目之上。</span><span class="sxs-lookup"><span data-stu-id="3e73d-168">In the following example, the string `UnitsInStock/@ReorderLevel` maps a property value to an attribute named `ReorderLevel` on a child element named `UnitsInStock` of the root entry element.</span></span><br /><br /> `<Property Name="ReorderLevel" Type="Int16"               m:FC_TargetPath="UnitsInStock/@ReorderLevel"               m:FC_NsPrefix="Northwind"               m:FC_NsUri="http://schemas.examples.microsoft.com/dataservices"               m:FC_KeepInContent="false"               />`<br /><br /> <span data-ttu-id="3e73d-169">當目標是自訂項目名稱時，也必須指定 `FC_NsPrefix` 和 `FC_NsUri` 屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-169">When the target is a custom element name, the `FC_NsPrefix` and `FC_NsUri` attributes must also be specified.</span></span><br /><br /> <span data-ttu-id="3e73d-170">`SyndicationPublished:` `atom:published`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-170">`SyndicationPublished:` The `atom:published` element.</span></span><br /><br /> <span data-ttu-id="3e73d-171">`SyndicationRights:` `atom:rights`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-171">`SyndicationRights:` The `atom:rights` element.</span></span><br /><br /> <span data-ttu-id="3e73d-172">`SyndicationSummary:` `atom:summary`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-172">`SyndicationSummary:` The `atom:summary` element.</span></span><br /><br /> <span data-ttu-id="3e73d-173">`SyndicationTitle:` `atom:title`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-173">`SyndicationTitle:` The `atom:title` element.</span></span><br /><br /> <span data-ttu-id="3e73d-174">`SyndicationUpdated:` `atom:updated`項目。</span><span class="sxs-lookup"><span data-stu-id="3e73d-174">`SyndicationUpdated:` The `atom:updated` element.</span></span><br /><br /> <span data-ttu-id="3e73d-175">這些關鍵字相當於搭配反映提供者所使用之 <xref:System.Data.Services.Common.SyndicationItemProperty> 列舉的值。</span><span class="sxs-lookup"><span data-stu-id="3e73d-175">These keywords are equivalent to the values of the <xref:System.Data.Services.Common.SyndicationItemProperty> enumeration used with the reflection provider.</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="3e73d-176">屬性名稱和值需區分大小寫。</span><span class="sxs-lookup"><span data-stu-id="3e73d-176">Attribute names and values are case-sensitive.</span></span> <span data-ttu-id="3e73d-177">屬性可套用至 `EntityType` 項目或一個或多個 `Property` 項目，但不能同時套用至兩者。</span><span class="sxs-lookup"><span data-stu-id="3e73d-177">Attributes can be applied either to the `EntityType` element or to one or more `Property` elements, but not to both.</span></span>  
  
## <a name="customizing-feeds-with-the-reflection-provider"></a><span data-ttu-id="3e73d-178">使用反映提供者自訂摘要</span><span class="sxs-lookup"><span data-stu-id="3e73d-178">Customizing Feeds with the Reflection Provider</span></span>  
 <span data-ttu-id="3e73d-179">若要自訂使用反映提供者所實作之自訂資料模型的摘要時，將一個或多個 <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> 屬性的執行個體新增至類別中，該類別表示資料模型中的實體類型。</span><span class="sxs-lookup"><span data-stu-id="3e73d-179">To customize feeds for a data model that was implemented by using the reflection provider, add one or more instances of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> attribute to the classes that represent entity types in the data model.</span></span> <span data-ttu-id="3e73d-180">對應至摘要自訂屬性之 <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> 類別的屬性已在上一節中說明。</span><span class="sxs-lookup"><span data-stu-id="3e73d-180">The properties of the <xref:System.Data.Services.Common.EntityPropertyMappingAttribute> class correspond to the feed customization attributes that are described in the previous section.</span></span> <span data-ttu-id="3e73d-181">以下範例是 `Order` 型別的宣告，包含針對兩個屬性定義的自訂摘要對應。</span><span class="sxs-lookup"><span data-stu-id="3e73d-181">The following is an example of the declaration of the `Order` type, with custom feed mapping defined for both properties.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3e73d-182">此範例中的資料模型主題中所定義[如何： 建立資料服務，使用反映提供者](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-182">The data model for this example is defined in the topic [How to: Create a Data Service Using the Reflection Provider](../../../../docs/framework/data/wcf/create-a-data-service-using-rp-wcf-data-services.md).</span></span>  
  
 [!code-csharp[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/csharp/VS_Snippets_Misc/astoria custom feeds/cs/orderitems.svc.cs#customorderfeed)]
 [!code-vb[Astoria Custom Feeds#CustomOrderFeed](../../../../samples/snippets/visualbasic/VS_Snippets_Misc/astoria custom feeds/vb/orderitems.svc.vb#customorderfeed)]  
  
 <span data-ttu-id="3e73d-183">這些屬性會針對 `Orders` 實體集產生下列自訂資料摘要。</span><span class="sxs-lookup"><span data-stu-id="3e73d-183">These attributes produce the following customized data feed for the `Orders` entity set.</span></span> <span data-ttu-id="3e73d-184">在此自訂摘要時，`OrderId`屬性值僅顯示於`title`項目`entry`並`Customer`屬性值會同時顯示於`author`項目並做為`Customer`屬性項目：</span><span class="sxs-lookup"><span data-stu-id="3e73d-184">In this customized feed, the `OrderId` property value displays only in the `title` element of the `entry` and the `Customer` property value displays both in the `author` element and as the `Customer` property element:</span></span>  
  
 [!code-xml[Astoria Custom Feeds#IQueryableFeedResult](../../../../samples/snippets/xml/VS_Snippets_Misc/astoria custom feeds/xml/iqueryablefeedresult.xml#iqueryablefeedresult)]  
  
 <span data-ttu-id="3e73d-185">如需詳細資訊，請參閱 <<c0> [ 如何： 使用反映提供者自訂摘要](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-185">For more information, see [How to: Customize Feeds with the Reflection Provider](../../../../docs/framework/data/wcf/how-to-customize-feeds-with-the-reflection-provider-wcf-data-services.md).</span></span>  
  
## <a name="customizing-feeds-with-a-custom-data-service-provider"></a><span data-ttu-id="3e73d-186">使用自訂資料服務提供者自訂摘要</span><span class="sxs-lookup"><span data-stu-id="3e73d-186">Customizing Feeds with a Custom Data Service Provider</span></span>  
 <span data-ttu-id="3e73d-187">如果要針對某個資源類型定義使用自訂資料服務提供者所定義之資料模型的摘要自訂，請在表示資料模型中實體類型的 <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> 上呼叫 <xref:System.Data.Services.Providers.ResourceType>。</span><span class="sxs-lookup"><span data-stu-id="3e73d-187">Feed customization for a data model defined by using a custom data service provider is defined for a resource type by calling the <xref:System.Data.Services.Providers.ResourceType.AddEntityPropertyMappingAttribute%2A> on the <xref:System.Data.Services.Providers.ResourceType> that represents an entity type in the data model.</span></span> <span data-ttu-id="3e73d-188">如需詳細資訊，請參閱 <<c0> [ 自訂資料服務提供者](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-188">For more information, see [Custom Data Service Providers](../../../../docs/framework/data/wcf/custom-data-service-providers-wcf-data-services.md).</span></span>  
  
## <a name="consuming-custom-feeds"></a><span data-ttu-id="3e73d-189">使用自訂摘要</span><span class="sxs-lookup"><span data-stu-id="3e73d-189">Consuming Custom Feeds</span></span>  
 <span data-ttu-id="3e73d-190">當您的應用程式直接使用[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]摘要時，它必須能夠處理任何自訂的項目和屬性傳回之摘要中的。</span><span class="sxs-lookup"><span data-stu-id="3e73d-190">When your application directly consumes an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed, it must be able to process any customized elements and attributes in the returned feed.</span></span> <span data-ttu-id="3e73d-191">當您已在資料模型中實作自訂摘要時，無論資料服務提供者為何，`$metadata` 端點都會傳回自訂摘要資訊，如同資料服務傳回 CSDL 中的自訂摘要屬性。</span><span class="sxs-lookup"><span data-stu-id="3e73d-191">When you have implemented custom feeds in your data model, regardless of the data service provider, the `$metadata` endpoint returns custom feed information as custom feed attributes in the CSDL returned by the data service.</span></span> <span data-ttu-id="3e73d-192">當您使用**加入服務參考**對話方塊或[datasvcutil.exe](../../../../docs/framework/data/wcf/wcf-data-service-client-utility-datasvcutil-exe.md)工具來產生用戶端資料服務類別、 自訂的摘要屬性用來保證的要求和回應資料服務正確處理。</span><span class="sxs-lookup"><span data-stu-id="3e73d-192">When you use the **Add Service Reference** dialog or the [datasvcutil.exe](../../../../docs/framework/data/wcf/wcf-data-service-client-utility-datasvcutil-exe.md) tool to generate client data service classes, the customized feed attributes are used to guarantee that requests and responses to the data service are handled correctly.</span></span>  
  
## <a name="feed-customization-considerations"></a><span data-ttu-id="3e73d-193">摘要自訂考量</span><span class="sxs-lookup"><span data-stu-id="3e73d-193">Feed Customization Considerations</span></span>  
 <span data-ttu-id="3e73d-194">定義自訂摘要對應時，您應該考慮下列事項。</span><span class="sxs-lookup"><span data-stu-id="3e73d-194">You should consider the following when defining custom feed mappings.</span></span>  
  
-   <span data-ttu-id="3e73d-195">[!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]用戶端會將對應的項目摘要中為空白時，它們只包含空白字元。</span><span class="sxs-lookup"><span data-stu-id="3e73d-195">The [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] client treats mapped elements in a feed as empty when they contain only white space.</span></span> <span data-ttu-id="3e73d-196">基於這個原因，只包含空白字元的對應項目不會以相同的空白字元在用戶端上具體化。</span><span class="sxs-lookup"><span data-stu-id="3e73d-196">Because of this, mapped elements that contain only white space are not materialized on the client with the same white space.</span></span> <span data-ttu-id="3e73d-197">若要保留此空白字元在用戶端上，您必須設定的值`KeepInContext`至`true`摘要的對應屬性中。</span><span class="sxs-lookup"><span data-stu-id="3e73d-197">To preserve this white space on the client, you must set the value of `KeepInContext` to `true` in the feed mapping attribute.</span></span>  
  
## <a name="versioning-requirements"></a><span data-ttu-id="3e73d-198">版本控制需求</span><span class="sxs-lookup"><span data-stu-id="3e73d-198">Versioning Requirements</span></span>  
 <span data-ttu-id="3e73d-199">摘要自訂具有下列 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 通訊協定版本控制需求：</span><span class="sxs-lookup"><span data-stu-id="3e73d-199">Feed customization has the following [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol versioning requirements:</span></span>  
  
-   <span data-ttu-id="3e73d-200">摘要自訂要求用戶端和資料服務都支援 2.0 版的 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 通訊協定和更新版本。</span><span class="sxs-lookup"><span data-stu-id="3e73d-200">Feed customization requires that both the client and data service support version 2.0 of the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] protocol and later versions.</span></span>  
  
 <span data-ttu-id="3e73d-201">如需詳細資訊，請參閱 <<c0> [ 資料服務版本控制](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="3e73d-201">For more information, see [Data Service Versioning](../../../../docs/framework/data/wcf/data-service-versioning-wcf-data-services.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3e73d-202">另請參閱</span><span class="sxs-lookup"><span data-stu-id="3e73d-202">See Also</span></span>  
 [<span data-ttu-id="3e73d-203">反映提供者</span><span class="sxs-lookup"><span data-stu-id="3e73d-203">Reflection Provider</span></span>](../../../../docs/framework/data/wcf/reflection-provider-wcf-data-services.md)  
 [<span data-ttu-id="3e73d-204">Entity Framework 提供者</span><span class="sxs-lookup"><span data-stu-id="3e73d-204">Entity Framework Provider</span></span>](../../../../docs/framework/data/wcf/entity-framework-provider-wcf-data-services.md)
