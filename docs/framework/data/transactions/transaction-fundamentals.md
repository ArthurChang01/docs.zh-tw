---
title: 交易基礎觀念
ms.date: 03/30/2017
ms.assetid: 353f4ee2-e6bf-4b1c-b1c8-385fc8a486c0
ms.openlocfilehash: 2df782a40c74c69981e7c25300acdf18f9de3cde
ms.sourcegitcommit: 2d792961ed48f235cf413d6031576373c3050918
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/31/2019
ms.locfileid: "70205854"
---
# <a name="transaction-fundamentals"></a><span data-ttu-id="07bb5-102">交易基礎觀念</span><span class="sxs-lookup"><span data-stu-id="07bb5-102">Transaction Fundamentals</span></span>
<span data-ttu-id="07bb5-103">交易作業會將多項工作繫結在一起。</span><span class="sxs-lookup"><span data-stu-id="07bb5-103">Transactions bind multiple tasks together.</span></span> <span data-ttu-id="07bb5-104">例如，想像應用程式正在執行兩項工作。</span><span class="sxs-lookup"><span data-stu-id="07bb5-104">For example, imagine that an application performs two tasks.</span></span> <span data-ttu-id="07bb5-105">首先，它會在資料庫中建立新的表格。</span><span class="sxs-lookup"><span data-stu-id="07bb5-105">First, it creates a new table in a database.</span></span> <span data-ttu-id="07bb5-106">接著，它會呼叫特定物件來收集與格式化資料，然後將資料插入新的表格中。</span><span class="sxs-lookup"><span data-stu-id="07bb5-106">Next, it calls a specialized object to collect, format, and insert data into the new table.</span></span> <span data-ttu-id="07bb5-107">這兩項工作都是相關的，甚至是互相依存的，除非您可以在表格中填入資料，否則您會想要避免建立新的表格。</span><span class="sxs-lookup"><span data-stu-id="07bb5-107">These two tasks are related and even interdependent, such that you want to avoid creating a new table unless you can fill it with data.</span></span> <span data-ttu-id="07bb5-108">在單一交易範圍內執行這兩項工作，會將這兩項工作強制聯結在一起。</span><span class="sxs-lookup"><span data-stu-id="07bb5-108">Executing both tasks within the scope of a single transaction enforces the connection between them.</span></span> <span data-ttu-id="07bb5-109">如果第二項工作失敗，第一項工作就會復原至建立新表格之前的時間點。</span><span class="sxs-lookup"><span data-stu-id="07bb5-109">If the second task fails, the first task is rolled back to a point before the new table was created.</span></span>  
  
 <span data-ttu-id="07bb5-110">為了確保行為可以預測，所有交易都必須具備基本 ACID 屬性 (不可部分完成性、一致性、隔離性，以及耐用性)。</span><span class="sxs-lookup"><span data-stu-id="07bb5-110">To ensure predictable behavior, all transactions must possess the basic ACID properties (atomic, consistent, isolated, and durable).</span></span> <span data-ttu-id="07bb5-111">這些屬性會以「全部或無」(All-Or-None) 的論點來強調重要的交易角色。</span><span class="sxs-lookup"><span data-stu-id="07bb5-111">These properties reinforce the role of mission-critical transactions as all-or-none propositions.</span></span> <span data-ttu-id="07bb5-112">如需 ACID 的詳細資訊, 請參閱[Acid 屬性](https://go.microsoft.com/fwlink/?LinkId=98791)。</span><span class="sxs-lookup"><span data-stu-id="07bb5-112">For more information on ACID, please see [ACID Properties](https://go.microsoft.com/fwlink/?LinkId=98791).</span></span> <span data-ttu-id="07bb5-113">簡言之，ACID 可確保一組相關工作會全部成功或失敗。</span><span class="sxs-lookup"><span data-stu-id="07bb5-113">In summary, ACID guarantees that a set of related tasks either succeed or fail as a unit.</span></span> <span data-ttu-id="07bb5-114">在交易處理術語中，交易可以認可或中止。</span><span class="sxs-lookup"><span data-stu-id="07bb5-114">In transaction processing terminology, the transaction either commits or aborts.</span></span> <span data-ttu-id="07bb5-115">若要讓交易認可，所有的參與者都必須保證任何對資料的變更都是永久的。</span><span class="sxs-lookup"><span data-stu-id="07bb5-115">For a transaction to commit, all participants must guarantee that any change to data will be permanent.</span></span> <span data-ttu-id="07bb5-116">不管系統是否當機，還是發生其他不可預見的事件，變更必須持續。</span><span class="sxs-lookup"><span data-stu-id="07bb5-116">Changes must persist despite system crashes or other unforeseen events.</span></span> <span data-ttu-id="07bb5-117">只要任何一個參與者無法做出此保證，整個交易就會失敗。</span><span class="sxs-lookup"><span data-stu-id="07bb5-117">If even a single participant fails to make this guarantee, the entire transaction fails.</span></span> <span data-ttu-id="07bb5-118">所有對交易範圍內的資料所做的變更，都會復原到特定的時間點。</span><span class="sxs-lookup"><span data-stu-id="07bb5-118">All changes to data within the scope of the transaction are rolled back to a specific set point.</span></span>  
  
 <span data-ttu-id="07bb5-119">交易可以限定在單一資料資源，例如資料庫或訊息佇列。</span><span class="sxs-lookup"><span data-stu-id="07bb5-119">A transaction can be confined to a single data resource, such as a database or message queue.</span></span> <span data-ttu-id="07bb5-120">在此情況中，本機交易會受到 <xref:System.Transactions> 所提供的交易管理員所管理，進而提升效能。</span><span class="sxs-lookup"><span data-stu-id="07bb5-120">In this scenario, the local transaction is managed by the Transaction Manager provided by <xref:System.Transactions> , which generates performance gain.</span></span> <span data-ttu-id="07bb5-121">受到資料資源控制的這些交易會很有效率，而且容易管理。</span><span class="sxs-lookup"><span data-stu-id="07bb5-121">Controlled by the data resource, these transactions are efficient and easy to manage.</span></span>  
  
 <span data-ttu-id="07bb5-122">交易也可以跨越多個資料資源。</span><span class="sxs-lookup"><span data-stu-id="07bb5-122">Transactions can also span multiple data resources.</span></span> <span data-ttu-id="07bb5-123">分散式交易可讓您將發生在不同系統上的數個個別作業整合至單一成功或失敗動作。</span><span class="sxs-lookup"><span data-stu-id="07bb5-123">Distributed transactions give you the ability to incorporate several distinct operations occurring on different systems into a single pass or fail action.</span></span> <span data-ttu-id="07bb5-124">在此情況中，駐留在每個系統中的「Microsoft 分散式交易協調器」(MSDTC) 將協調所有交易。</span><span class="sxs-lookup"><span data-stu-id="07bb5-124">In this scenario, the transactions are coordinated by the Microsoft Distributed Transaction Coordinator (MSDTC) that resides in each system.</span></span>  
  
 <span data-ttu-id="07bb5-125">當您使用 <xref:System.Transactions> 所提供的類別來開發交易式應用程式時，不用擔心需要哪種交易，或是會牽涉到那個交易管理員。</span><span class="sxs-lookup"><span data-stu-id="07bb5-125">When you develop a transactional application using the classes provided by <xref:System.Transactions>, you do not need to worry about what kind of transactions you need, or the transaction manager involved.</span></span> <span data-ttu-id="07bb5-126"><xref:System.Transactions> 基礎結構會自動為您打點好所有事項。</span><span class="sxs-lookup"><span data-stu-id="07bb5-126">The <xref:System.Transactions> infrastructure automatically manages these for you.</span></span>  
  
 <span data-ttu-id="07bb5-127">當您建立交易時，可以指定套用至交易的隔離等級。</span><span class="sxs-lookup"><span data-stu-id="07bb5-127">When you create a transaction, you can specify the isolation level that applies to the transaction.</span></span> <span data-ttu-id="07bb5-128">由<xref:System.Transactions.IsolationLevel>列舉所定義的隔離等級, 會決定其他交易對受您的交易影響的資料所擁有的存取層級。</span><span class="sxs-lookup"><span data-stu-id="07bb5-128">The isolation level, defined by the <xref:System.Transactions.IsolationLevel> enum, determines what level of access other transactions will have to the data affected by your transaction.</span></span>  
  
 <span data-ttu-id="07bb5-129">您可以使用 ADO.NET、 <xref:System.EnterpriseServices>, 或<xref:System.Transactions>命名空間所提供的交易式程式設計模型來建立交易。</span><span class="sxs-lookup"><span data-stu-id="07bb5-129">You can create transactions using ADO.NET, <xref:System.EnterpriseServices>, or the transactional programming model provided by the <xref:System.Transactions> namespace.</span></span> <span data-ttu-id="07bb5-130">「[系統交易」提供的功能](features-provided-by-system-transactions.md)主題會討論您可以使用<xref:System.Transactions>命名空間來撰寫交易式應用程式的功能。</span><span class="sxs-lookup"><span data-stu-id="07bb5-130">The [Features Provided by System.Transactions](features-provided-by-system-transactions.md) topic discusses the features that you can use to write a transactional application using the <xref:System.Transactions> namespace.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="07bb5-131">另請參閱</span><span class="sxs-lookup"><span data-stu-id="07bb5-131">See also</span></span>

- [<span data-ttu-id="07bb5-132">System.Transactions 所提供的功能</span><span class="sxs-lookup"><span data-stu-id="07bb5-132">Features Provided by System.Transactions</span></span>](features-provided-by-system-transactions.md)
