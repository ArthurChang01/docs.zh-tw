---
title: 如何：設定用戶端應用程式服務
ms.date: 03/30/2017
helpviewer_keywords:
- client application services, configuring
ms.assetid: 34a8688a-a32c-40d3-94be-c8e610c6a4e8
ms.openlocfilehash: 004798ce8cf429f2a94d856e6b3a55447c2ad5fa
ms.sourcegitcommit: 11f11ca6cefe555972b3a5c99729d1a7523d8f50
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/03/2018
ms.locfileid: "32744752"
---
# <a name="how-to-configure-client-application-services"></a><span data-ttu-id="72675-102">如何：設定用戶端應用程式服務</span><span class="sxs-lookup"><span data-stu-id="72675-102">How to: Configure Client Application Services</span></span>
<span data-ttu-id="72675-103">本主題說明如何使用 Visual Studio **專案設計工具**啟用及設定用戶端應用程式服務。</span><span class="sxs-lookup"><span data-stu-id="72675-103">This topic describes how to use the Visual Studio **Project Designer** to enable and configure client application services.</span></span> <span data-ttu-id="72675-104">您可以使用用戶端應用程式服務來驗證使用者，以及從現有的 [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] 應用程式服務擷取使用者角色和設定。</span><span class="sxs-lookup"><span data-stu-id="72675-104">You can use client application services to validate users and retrieve user roles and settings from an existing [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] application service.</span></span> <span data-ttu-id="72675-105">設定後，您可以依照[用戶端應用程式服務概觀](../../../docs/framework/common-client-technologies/client-application-services-overview.md)中所述，在應用程式程式碼中存取已啟用的服務。</span><span class="sxs-lookup"><span data-stu-id="72675-105">After configuration, you can access the enabled services in your application code as described in [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md).</span></span> <span data-ttu-id="72675-106">如需 [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] 應用程式服務的詳細資訊，請參閱 [ASP.NET 應用程式服務概觀](http://msdn.microsoft.com/library/1162e529-0d70-44b2-b3ab-83e60c695013)。</span><span class="sxs-lookup"><span data-stu-id="72675-106">For more information about the [!INCLUDE[ajax_current_short](../../../includes/ajax-current-short-md.md)] application services, see [ASP.NET Application Services Overview](http://msdn.microsoft.com/library/1162e529-0d70-44b2-b3ab-83e60c695013).</span></span>  
  
 <span data-ttu-id="72675-107">您可以在 [專案設計工具] 的 [服務] 頁面上，啟用及設定用戶端應用程式服務。</span><span class="sxs-lookup"><span data-stu-id="72675-107">You can enable and configure client application services on the **Services** page of the **Project Designer**.</span></span> <span data-ttu-id="72675-108">[服務] 頁面會更新專案之 App.config 檔中的值。</span><span class="sxs-lookup"><span data-stu-id="72675-108">The **Services** page updates values in your project's App.config file.</span></span> <span data-ttu-id="72675-109">若要存取 [專案設計工具]，請使用 [專案] 功能表上的 [屬性] 命令。</span><span class="sxs-lookup"><span data-stu-id="72675-109">To access the **Project Designer**, use the **Properties** command on the **Project** menu.</span></span> <span data-ttu-id="72675-110">如需 [服務] 頁面的詳細資訊，請參閱[專案設計工具、服務頁](https://msdn.microsoft.com/library/bb398109)。</span><span class="sxs-lookup"><span data-stu-id="72675-110">For more information about the **Services** page, see [Services Page, Project Designer](https://msdn.microsoft.com/library/bb398109).</span></span>  
  
 <span data-ttu-id="72675-111">下列程序說明如何執行用戶端應用程式服務的基本組態。</span><span class="sxs-lookup"><span data-stu-id="72675-111">The following procedure describes how to perform basic configuration for client application services.</span></span> <span data-ttu-id="72675-112">進階組態選項會在稍後的章節中進行說明。</span><span class="sxs-lookup"><span data-stu-id="72675-112">Advanced configuration options are described in later sections.</span></span>  
  
### <a name="to-configure-client-application-services"></a><span data-ttu-id="72675-113">設定用戶端應用程式服務</span><span class="sxs-lookup"><span data-stu-id="72675-113">To configure client application services</span></span>  
  
1.  <span data-ttu-id="72675-114">在 [方案總管] 中，選取專案節點，然後在 [專案] 功能表上按一下 [屬性]。</span><span class="sxs-lookup"><span data-stu-id="72675-114">In **Solution Explorer**, select a project node and then on the **Project** menu, click **Properties**.</span></span>  
  
     <span data-ttu-id="72675-115">[專案設計工具] 隨即出現。</span><span class="sxs-lookup"><span data-stu-id="72675-115">The **Project Designer** appears.</span></span>  
  
2.  <span data-ttu-id="72675-116">按一下 [服務] 索引標籤。[服務] 頁面會隨即顯示 (如下圖所示)。</span><span class="sxs-lookup"><span data-stu-id="72675-116">Click the **Services** tab. The **Services** page appears, as shown in the following illustration.</span></span>  
  
     <span data-ttu-id="72675-117">![專案設計工具中的服務索引標籤](../../../docs/framework/common-client-technologies/media/casdesigner.png "casdesigner")</span><span class="sxs-lookup"><span data-stu-id="72675-117">![The Services tab in the project designer](../../../docs/framework/common-client-technologies/media/casdesigner.png "casdesigner")</span></span>  
  
3.  <span data-ttu-id="72675-118">在 [服務] 頁面上，選取 [啟用用戶端應用程式服務]。</span><span class="sxs-lookup"><span data-stu-id="72675-118">On the **Services** page, select **Enable client application services**.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="72675-119">用戶端應用程式服務需要完整版的 .NET Framework，且 .NET Framework 用戶端設定檔中不支援這些服務。</span><span class="sxs-lookup"><span data-stu-id="72675-119">Client application services require the full version of the .NET Framework, and are not supported in the .NET Framework Client Profile.</span></span> <span data-ttu-id="72675-120">如果停用 [啟用用戶端應用程式服務] 核取方塊，請確認 [目標 Framework] 已設定為 .NET Framework 3.5 (含) 以後版本。</span><span class="sxs-lookup"><span data-stu-id="72675-120">If the **Enable client application services** check box is disabled, verify that the **Target framework** is set to the .NET Framework 3.5 or later.</span></span> <span data-ttu-id="72675-121">若要檢視 C# 中的 [目標 Framework]，請開啟 [專案設計工具]，然後按一下 [應用程式] 頁面。</span><span class="sxs-lookup"><span data-stu-id="72675-121">To view the **Target framework** setting in C#, open the Project Designer and then click the **Application** page.</span></span> <span data-ttu-id="72675-122">若要檢視 Visual Basic 中的 [目標 Framework] 設定，請開啟 [專案設計工具]，並按一下 [編譯] 頁面，然後按一下 [進階編譯選項]。</span><span class="sxs-lookup"><span data-stu-id="72675-122">To view the **Target framework** setting in Visual Basic, open the Project Designer, click the **Compile** page, and then click **Advanced Compile Options**.</span></span>  
  
4.  <span data-ttu-id="72675-123">如果您要提供自己的登入控制項或對話方塊，請選取 [使用表單驗證]，或選取 [使用 Windows 驗證] 使用作業系統提供的識別。</span><span class="sxs-lookup"><span data-stu-id="72675-123">Select **Use Forms authentication** if you plan to provide your own login controls or dialog box, or select **Use Windows authentication** to use the identity supplied by the operating system.</span></span> <span data-ttu-id="72675-124">如需詳細資訊，請參閱[用戶端應用程式服務概觀](../../../docs/framework/common-client-technologies/client-application-services-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="72675-124">For more information, see [Client Application Services Overview](../../../docs/framework/common-client-technologies/client-application-services-overview.md).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="72675-125">如果您選取 [使用 Windows 驗證]，用戶端應用程式服務會自動設定為使用 SQL Server Compact 資料庫。</span><span class="sxs-lookup"><span data-stu-id="72675-125">If you select **Use Windows authentication**, client application services will automatically be configured to use a SQL Server Compact database.</span></span> <span data-ttu-id="72675-126">這會在 [服務的進階設定] 對話方塊中表示 (如下一節所述)。</span><span class="sxs-lookup"><span data-stu-id="72675-126">This is indicated in the **Advanced Settings for Services** dialog box as described in the next section.</span></span> <span data-ttu-id="72675-127">如果您接著選取 [使用表單驗證]，將不會自動清除 [使用自訂連接字串] 設定。</span><span class="sxs-lookup"><span data-stu-id="72675-127">If you then select **Use Forms authentication**, the **Use custom connection string** setting will not be cleared automatically.</span></span> <span data-ttu-id="72675-128">如果已產生用於 Windows 驗證的 [!INCLUDE[ssEW](../../../includes/ssew-md.md)] 資料庫，這可能會造成錯誤。</span><span class="sxs-lookup"><span data-stu-id="72675-128">This could result in errors if the [!INCLUDE[ssEW](../../../includes/ssew-md.md)] database has already been generated for use with Windows authentication.</span></span> <span data-ttu-id="72675-129">若要修正這些錯誤，請清除 [服務的進階設定] 對話方塊中的 [使用自訂連接字串] 設定。</span><span class="sxs-lookup"><span data-stu-id="72675-129">To fix these errors, clear the **Use custom connection string** setting in the **Advanced Settings for Services** dialog box.</span></span>  
  
5.  <span data-ttu-id="72675-130">如果您選取了 [使用表單驗證]，請在 [驗證服務位置] 方塊中，指定服務主機的 URL (不包含檔案名稱)。</span><span class="sxs-lookup"><span data-stu-id="72675-130">If you selected **Use Forms authentication**, in the **Authentication service location** box, specify the URL of the service host, not including the file name.</span></span> <span data-ttu-id="72675-131">設計工具會在將值寫入組態檔時，自動附加標準檔案名稱 (Authentication_JSON_AppService.axd)。</span><span class="sxs-lookup"><span data-stu-id="72675-131">The designer will automatically append the standard file name (Authentication_JSON_AppService.axd) when it writes the value to the configuration file.</span></span>  
  
6.  <span data-ttu-id="72675-132">或者，如果您選取了 [使用表單驗證]，您可以在 [認證提供者] 方塊中指定值。</span><span class="sxs-lookup"><span data-stu-id="72675-132">Optionally, if you selected **Use Forms authentication**, you can specify a value in the **Credentials provider** box.</span></span> <span data-ttu-id="72675-133">認證提供者必須實作 <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider> 介面。</span><span class="sxs-lookup"><span data-stu-id="72675-133">The credentials provider must implement the <xref:System.Web.ClientServices.Providers.IClientFormsAuthenticationCredentialsProvider> interface.</span></span> <span data-ttu-id="72675-134">您可以藉由使用認證提供者，將登入使用者介面與其他應用程式程式碼予以區隔。</span><span class="sxs-lookup"><span data-stu-id="72675-134">By using a credentials provider, you can separate your login user interface from your other application code.</span></span> <span data-ttu-id="72675-135">這可以讓您建立單一登入對話方塊，以供在多個應用程式中使用。</span><span class="sxs-lookup"><span data-stu-id="72675-135">This enables you to create a single login dialog box for use in multiple applications.</span></span> <span data-ttu-id="72675-136">如需詳細資訊，請參閱[如何：使用用戶端應用程式服務實作使用者登入](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md)。</span><span class="sxs-lookup"><span data-stu-id="72675-136">For more information, see [How to: Implement User Login with Client Application Services](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md).</span></span>  
  
     <span data-ttu-id="72675-137">如果您指定認證提供者，則必須將其指定為組件限定的類型名稱。</span><span class="sxs-lookup"><span data-stu-id="72675-137">If you specify a credentials provider, you must specify it as an assembly-qualified type name.</span></span> <span data-ttu-id="72675-138">如需詳細資訊，請參閱 <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=nameWithType> 和[組件名稱](../../../docs/framework/app-domains/assembly-names.md)。</span><span class="sxs-lookup"><span data-stu-id="72675-138">For more information, see <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=nameWithType> and [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span> <span data-ttu-id="72675-139">最簡單的組件限定類型名稱格式看起來會類似下列範例：</span><span class="sxs-lookup"><span data-stu-id="72675-139">In its simplest form, an assembly-qualified type name looks similar to the following example:</span></span>  
  
    ```  
    MyNamespace.MyLoginClass, MyAssembly  
    ```  
  
7.  <span data-ttu-id="72675-140">在 [角色服務位置] 和 [Web 設定服務位置] 文字方塊中，指定每個服務的服務位置 (不包含檔案名稱)。</span><span class="sxs-lookup"><span data-stu-id="72675-140">In the **Roles service location** and **Web settings service location** text boxes, specify the service location for each service, not including the file name.</span></span> <span data-ttu-id="72675-141">設計工具會在將值寫入組態檔時，自動附加標準檔案名稱 (Role_JSON_AppService.axd 和 Profile_JSON_AppService.axd)。</span><span class="sxs-lookup"><span data-stu-id="72675-141">The designer will automatically append the standard file names (Role_JSON_AppService.axd and Profile_JSON_AppService.axd) when it writes the value to the configuration file.</span></span>  
  
8.  <span data-ttu-id="72675-142">或者，按一下 [進階] 修改進階設定，例如本機快取行為。</span><span class="sxs-lookup"><span data-stu-id="72675-142">Optionally, click **Advanced** to modify advanced settings, such as the local caching behavior.</span></span> <span data-ttu-id="72675-143">如需詳細資訊，請參閱下一個程序。</span><span class="sxs-lookup"><span data-stu-id="72675-143">For more information, see the next procedure.</span></span>  
  
## <a name="advanced-configuration"></a><span data-ttu-id="72675-144">進階組態</span><span class="sxs-lookup"><span data-stu-id="72675-144">Advanced Configuration</span></span>  
 <span data-ttu-id="72675-145">下列程序說明如何為較不常見的案例，設定用戶端應用程式服務。</span><span class="sxs-lookup"><span data-stu-id="72675-145">The following procedures describe how to configure client application services for less common scenarios.</span></span> <span data-ttu-id="72675-146">例如，您可以針對部署在公用位置的應用程式使用這些組態選項，或使用加密的 SQL Server Compact 資料庫做為本機資料快取。</span><span class="sxs-lookup"><span data-stu-id="72675-146">For example, you can use these configuration options for applications deployed in public locations, or to use an encrypted SQL Server Compact database as the local data cache.</span></span>  
  
#### <a name="to-configure-advanced-settings-for-client-application-services"></a><span data-ttu-id="72675-147">設定用戶端應用程式服務的進階設定</span><span class="sxs-lookup"><span data-stu-id="72675-147">To configure advanced settings for client application services</span></span>  
  
1.  <span data-ttu-id="72675-148">在 [專案設計工具] 的 [服務] 頁面上，按一下 [進階]。</span><span class="sxs-lookup"><span data-stu-id="72675-148">On the **Services** page of the **Project Designer**, click **Advanced**.</span></span>  
  
     <span data-ttu-id="72675-149">[服務的進階設定] 對話方塊會隨即顯示 (如下圖所示)。</span><span class="sxs-lookup"><span data-stu-id="72675-149">The **Advanced Settings for Services** dialog box appears, as shown in the following illustration.</span></span> <span data-ttu-id="72675-150">如需這個對話方塊的詳細資訊，請參閱[服務對話方塊的進階設定](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box)。</span><span class="sxs-lookup"><span data-stu-id="72675-150">For more information about this dialog box, see [Advanced Settings for Services Dialog Box](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box).</span></span>  
  
     <span data-ttu-id="72675-151">![服務對話方塊的進階設定](../../../docs/framework/common-client-technologies/media/casdialog.png "casdialog")</span><span class="sxs-lookup"><span data-stu-id="72675-151">![Advanced Settings for Services dialog box](../../../docs/framework/common-client-technologies/media/casdialog.png "casdialog")</span></span>  
  
2.  <span data-ttu-id="72675-152">選取或清除 [在本機儲存密碼雜湊以啟用離線登入]。</span><span class="sxs-lookup"><span data-stu-id="72675-152">Select or clear **Save password hash locally to enable offline login**.</span></span> <span data-ttu-id="72675-153">當您選取這個選項時，即會在本機以加密格式快取使用者的密碼。</span><span class="sxs-lookup"><span data-stu-id="72675-153">When you select this option, an encrypted form of the user's password will be cached locally.</span></span> <span data-ttu-id="72675-154">如果您實作應用程式的離線模式，這個選項會很有用。</span><span class="sxs-lookup"><span data-stu-id="72675-154">This is useful if you implement offline mode for your application.</span></span> <span data-ttu-id="72675-155">選取這個選項時，即使 <xref:System.Web.ClientServices.ConnectivityStatus.IsOffline%2A> 屬性已設定為 `true`，也可以驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="72675-155">With this option selected, you can validate users even when the <xref:System.Web.ClientServices.ConnectivityStatus.IsOffline%2A> property has been set to `true`.</span></span>  
  
3.  <span data-ttu-id="72675-156">選取或清除 [要求使用者在伺服器 Cookie 過期時必須再次登入]。</span><span class="sxs-lookup"><span data-stu-id="72675-156">Select or clear **Require users to log on again whenever the server cookie expires**.</span></span> <span data-ttu-id="72675-157">驗證 Cookie 會在遠端服務上設定，表示使用者登入保持使用中的時間長度。</span><span class="sxs-lookup"><span data-stu-id="72675-157">The authentication cookie is configured on the remote service, and indicates how long a user's login will remain active.</span></span> <span data-ttu-id="72675-158">如需如何設定 Cookie 的詳細資訊，請參閱[驗證的 forms 項目 (ASP.NET 設定結構描述)](http://msdn.microsoft.com/library/8163b8b5-ea6c-46c8-b5a9-c4c3de31c0b3) 中的 `timeout` 屬性。</span><span class="sxs-lookup"><span data-stu-id="72675-158">For more information about how to configure the cookie, see the `timeout` attribute in [forms Element for authentication (ASP.NET Settings Schema)](http://msdn.microsoft.com/library/8163b8b5-ea6c-46c8-b5a9-c4c3de31c0b3).</span></span>  
  
     <span data-ttu-id="72675-159">如果您選取這個選項，在驗證 Cookie 過期後嘗試存取遠端角色或 Web 設定服務，將會擲回 <xref:System.Net.WebException>。</span><span class="sxs-lookup"><span data-stu-id="72675-159">If you select this option, attempting to access the remote roles or Web settings services after the authentication cookie has expired will throw a <xref:System.Net.WebException>.</span></span> <span data-ttu-id="72675-160">您可以處理這個例外狀況，然後顯示登入對話方塊以重新驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="72675-160">You can handle this exception and display a login dialog box to revalidate users.</span></span> <span data-ttu-id="72675-161">如需這個行為的範例，請參閱[逐步解說：使用用戶端應用程式服務](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)。</span><span class="sxs-lookup"><span data-stu-id="72675-161">For an example of this behavior, see [Walkthrough: Using Client Application Services](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md).</span></span> <span data-ttu-id="72675-162">您可以針對部署在公用位置的應用程式，使用這個選項來確保使用應用程式後讓應用程式繼續執行的使用者，不會無限期地保持已驗證的狀態。</span><span class="sxs-lookup"><span data-stu-id="72675-162">This option is useful for applications deployed in public locations to make sure that users who leave the application running after use will not remain authenticated indefinitely.</span></span>  
  
     <span data-ttu-id="72675-163">如果您清除這個選項，然後在驗證 Cookie 過期後嘗試存取遠端服務，則會自動重新驗證使用者。</span><span class="sxs-lookup"><span data-stu-id="72675-163">If you clear this option and attempt to access the remote services after the authentication cookie has expired, users will be revalidated automatically.</span></span>  
  
4.  <span data-ttu-id="72675-164">指定 [角色服務快取逾時] 的值。</span><span class="sxs-lookup"><span data-stu-id="72675-164">Specify a value for **Role service cache timeout**.</span></span> <span data-ttu-id="72675-165">請在角色經常更新時，將這個時間間隔設定為較小的值，並在角色不常更新時，將其設定為較大的值。</span><span class="sxs-lookup"><span data-stu-id="72675-165">Set this time interval to a small value when roles are updated frequently or to a larger value when roles are updated infrequently.</span></span> <span data-ttu-id="72675-166">如果您實作離線模式，請將時間間隔設定為較大的值，以避免角色資訊在應用程式離線時過期。</span><span class="sxs-lookup"><span data-stu-id="72675-166">If you implement offline mode, set the time interval to a large value to prevent the role information from expiring while the application is offline.</span></span>  
  
     <span data-ttu-id="72675-167">當您呼叫 <xref:System.Web.Security.RolePrincipal.IsInRole%2A> 方法時，角色提供者會存取已快取的角色值或角色服務。</span><span class="sxs-lookup"><span data-stu-id="72675-167">The role provider accesses the cached role values or the roles service when you call the <xref:System.Web.Security.RolePrincipal.IsInRole%2A> method.</span></span> <span data-ttu-id="72675-168">若要以程式設計方式重設快取，並強制執行這個方法以存取遠端服務，請呼叫 <xref:System.Web.ClientServices.Providers.ClientRoleProvider.ResetCache%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="72675-168">To programmatically reset the cache and force this method to access the remote service, call the <xref:System.Web.ClientServices.Providers.ClientRoleProvider.ResetCache%2A> method.</span></span>  
  
5.  <span data-ttu-id="72675-169">選取或清除 [使用自訂連接字串]。</span><span class="sxs-lookup"><span data-stu-id="72675-169">Select or clear **Use custom connection string**.</span></span> <span data-ttu-id="72675-170">如需詳細資訊，請參閱下一個程序。</span><span class="sxs-lookup"><span data-stu-id="72675-170">For more information, see the next procedure.</span></span>  
  
#### <a name="to-configure-client-application-services-to-use-a-database-for-the-local-cache"></a><span data-ttu-id="72675-171">設定用戶端應用程式服務使用資料庫做為本機快取</span><span class="sxs-lookup"><span data-stu-id="72675-171">To configure client application services to use a database for the local cache</span></span>  
  
1.  <span data-ttu-id="72675-172">在 [專案設計工具] 的 [服務] 頁面上，按一下 [進階]。</span><span class="sxs-lookup"><span data-stu-id="72675-172">On the **Services** page of the **Project Designer**, click **Advanced**.</span></span>  
  
     <span data-ttu-id="72675-173">[服務的進階設定] 對話方塊會隨即顯示。</span><span class="sxs-lookup"><span data-stu-id="72675-173">The **Advanced Settings for Services** dialog box appears.</span></span>  
  
2.  <span data-ttu-id="72675-174">選取 [使用自訂連接字串]。</span><span class="sxs-lookup"><span data-stu-id="72675-174">Select **Use custom connection string**.</span></span>  
  
     <span data-ttu-id="72675-175">`Data Source = |SQL/CE|` 的預設值會顯示在文字方塊中。</span><span class="sxs-lookup"><span data-stu-id="72675-175">The default value of `Data Source = |SQL/CE|` appears in the text box.</span></span>  
  
3.  <span data-ttu-id="72675-176">若要產生並使用 SQL Server Compact 資料庫，請保留預設連接字串值。</span><span class="sxs-lookup"><span data-stu-id="72675-176">To generate and use a SQL Server Compact database, keep the default connection string value.</span></span> <span data-ttu-id="72675-177">Visual Studio 會產生資料庫檔案，並放入 <xref:System.Windows.Forms.Application.UserAppDataPath%2A?displayProperty=nameWithType> 屬性指示的目錄中。</span><span class="sxs-lookup"><span data-stu-id="72675-177">Visual Studio will generate a database file and put it in the directory indicated by the <xref:System.Windows.Forms.Application.UserAppDataPath%2A?displayProperty=nameWithType> property.</span></span>  
  
4.  <span data-ttu-id="72675-178">若要產生並使用加密的 [!INCLUDE[ssEW](../../../includes/ssew-md.md)] 資料庫，請將 `password` 和 `encrypt database` 值加入至連接字串，如下列範例所示。</span><span class="sxs-lookup"><span data-stu-id="72675-178">To generate and use an encrypted [!INCLUDE[ssEW](../../../includes/ssew-md.md)] database, add `password` and `encrypt database` values to the connection string as shown in the following example.</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="72675-179">請務必指定強式密碼。</span><span class="sxs-lookup"><span data-stu-id="72675-179">Be sure to specify a strong password.</span></span> <span data-ttu-id="72675-180">產生資料庫之後，便無法變更密碼。</span><span class="sxs-lookup"><span data-stu-id="72675-180">You cannot change the password after the database is generated.</span></span>  
  
    ```  
    Data Source = |SQL/CE|;password=<password>;encrypt database=true  
    ```  
  
5.  <span data-ttu-id="72675-181">若要使用您自己的 SQL Server 資料庫，請指定您自己的連接字串。</span><span class="sxs-lookup"><span data-stu-id="72675-181">To use your own SQL Server database, specify your own connection string.</span></span> <span data-ttu-id="72675-182">如需有效連接字串格式的資訊，請參閱 SQL Server 文件。</span><span class="sxs-lookup"><span data-stu-id="72675-182">For information about valid connection string formats, see the SQL Server documentation.</span></span> <span data-ttu-id="72675-183">這個資料庫不是自動產生的。</span><span class="sxs-lookup"><span data-stu-id="72675-183">This database is not generated automatically.</span></span> <span data-ttu-id="72675-184">連接字串必須參考現有資料庫，您可以使用下列 SQL 陳述式建立這個資料庫。</span><span class="sxs-lookup"><span data-stu-id="72675-184">The connection string must refer to an existing database that you can create using the following SQL statements.</span></span>  
  
    ```  
    CREATE TABLE ApplicationProperties (PropertyName nvarchar(256),  
        PropertyValue nvarchar(256))  
    CREATE TABLE UserProperties (PropertyName nvarchar(256),  
        PropertyValue nvarchar(256))  
    CREATE TABLE Roles (UserName nvarchar(256),   
        RoleName nvarchar(256))  
    CREATE TABLE Settings (PropertyName nvarchar(256),   
        PropertyStoredAs nvarchar(1), PropertyValue nvarchar(2048))  
    ```  
  
## <a name="using-custom-providers"></a><span data-ttu-id="72675-185">使用自訂提供者</span><span class="sxs-lookup"><span data-stu-id="72675-185">Using Custom Providers</span></span>  
 <span data-ttu-id="72675-186">根據預設，用戶端應用程式服務功能會使用 <xref:System.Web.ClientServices.Providers?displayProperty=nameWithType> 命名空間中的提供者。</span><span class="sxs-lookup"><span data-stu-id="72675-186">By default, the client application services feature uses the providers in the <xref:System.Web.ClientServices.Providers?displayProperty=nameWithType> namespace.</span></span> <span data-ttu-id="72675-187">當您使用 [專案設計工具] 的 [服務] 頁面設定應用程式時，會將這些提供者的參考新增至您的 App.config 檔。</span><span class="sxs-lookup"><span data-stu-id="72675-187">When you configure your application by using the **Services** page of the **Project Designer**, references to these providers are added to your App.config file.</span></span> <span data-ttu-id="72675-188">這些預設提供者會存取伺服器上的對應提供者。</span><span class="sxs-lookup"><span data-stu-id="72675-188">These default providers access corresponding providers on the server.</span></span> <span data-ttu-id="72675-189">Web 服務通常會設定為透過 <xref:System.Web.Security.SqlMembershipProvider> 和 <xref:System.Web.Security.SqlRoleProvider> 等提供者存取使用者資料。</span><span class="sxs-lookup"><span data-stu-id="72675-189">Web services are often configured to access user data through providers such as <xref:System.Web.Security.SqlMembershipProvider> and <xref:System.Web.Security.SqlRoleProvider>.</span></span>  
  
 <span data-ttu-id="72675-190">如果您想要使用自訂服務提供者，通常會在伺服器端變更提供者，以便影響存取該伺服器的所有用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="72675-190">If you want to use custom service providers, you will typically change the providers on the server side so that they affect all client applications that access the server.</span></span> <span data-ttu-id="72675-191">但是，您也可以選擇在用戶端使用非預設的提供者。</span><span class="sxs-lookup"><span data-stu-id="72675-191">However, you do have the option of using non-default providers on the client side.</span></span> <span data-ttu-id="72675-192">您可以在專案的 App.config 檔中指定自訂驗證或角色提供者，如下列程序所示。</span><span class="sxs-lookup"><span data-stu-id="72675-192">You can specify custom authentication or roles providers in your project's App.config file, as shown in the following procedure.</span></span> <span data-ttu-id="72675-193">如需如何建立自訂驗證和角色提供者的相關資訊，請參閱[實作成員資格提供者](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582)和[實作角色提供者](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d)。</span><span class="sxs-lookup"><span data-stu-id="72675-193">For information about how to create custom authentication and role providers, see [Implementing a Membership Provider](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582) and [Implementing a Role Provider](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d).</span></span> <span data-ttu-id="72675-194">您也可以修改專案的 `Settings` 類別 (在 C# 中是當作 `Properties.Settings.Default` 存取，而在 Visual Basic 中是當作 `My.Settings` 存取)，來使用自訂設定提供者。</span><span class="sxs-lookup"><span data-stu-id="72675-194">You can also use a custom settings provider by modifying your project's `Settings` class (accessed as `Properties.Settings.Default` in C# and `My.Settings` in Visual Basic).</span></span> <span data-ttu-id="72675-195">如需詳細資訊，請參閱[應用程式設定架構](../../../docs/framework/winforms/advanced/application-settings-architecture.md)。</span><span class="sxs-lookup"><span data-stu-id="72675-195">For more information, see [Application Settings Architecture](../../../docs/framework/winforms/advanced/application-settings-architecture.md).</span></span>  
  
#### <a name="to-configure-client-application-services-to-use-non-default-providers"></a><span data-ttu-id="72675-196">設定用戶端應用程式服務使用非預設的提供者</span><span class="sxs-lookup"><span data-stu-id="72675-196">To configure client application services to use non-default providers</span></span>  
  
1.  <span data-ttu-id="72675-197">若要使用非預設的驗證或角色服務提供者，請先使用 [服務] 頁面完成其他所有組態設定。</span><span class="sxs-lookup"><span data-stu-id="72675-197">To use a non-default authentication or roles service provider, first complete all other configuration settings by using the **Services** page.</span></span>  
  
2.  <span data-ttu-id="72675-198">關閉 [專案設計工具]。</span><span class="sxs-lookup"><span data-stu-id="72675-198">Close the **Project Designer**.</span></span> <span data-ttu-id="72675-199">由於即使您未修改任何設定，[服務] 頁面也會自動更新您的 App.config 檔，因此這是必要步驟。</span><span class="sxs-lookup"><span data-stu-id="72675-199">This is necessary because the **Services** page will automatically update your App.config file even if you do not modify any settings.</span></span> <span data-ttu-id="72675-200">如果您依照這個程序所述，手動修改 App.config 檔，然後再返回 [服務] 頁面，則會重設您的修改。</span><span class="sxs-lookup"><span data-stu-id="72675-200">If you manually modify your App.config file as described in this procedure and then return to the **Services** page, your modifications will be reset.</span></span>  
  
3.  <span data-ttu-id="72675-201">在 [方案總管] 中，按兩下 App.config。</span><span class="sxs-lookup"><span data-stu-id="72675-201">In **Solution Explorer**, double-click App.config.</span></span>  
  
     <span data-ttu-id="72675-202">應用程式組態檔會隨即在文字編輯器中開啟。</span><span class="sxs-lookup"><span data-stu-id="72675-202">The application configuration file opens in the text editor.</span></span>  
  
4.  <span data-ttu-id="72675-203">在 `<providers>` 或 `<membership>` 項目中尋找 `<roleManager>` 項目。</span><span class="sxs-lookup"><span data-stu-id="72675-203">Find the `<providers>` element within the `<membership>` or `<roleManager>` element.</span></span> <span data-ttu-id="72675-204">這些項目是 `<system.web>` 項目的子項。</span><span class="sxs-lookup"><span data-stu-id="72675-204">These elements are children of the `<system.web>` element.</span></span> <span data-ttu-id="72675-205">`<membership>` 項目可用來指定驗證提供者，而 `<roleManager>` 項目可用來指定角色提供者。</span><span class="sxs-lookup"><span data-stu-id="72675-205">The `<membership>` element is used to specify authentication providers, and the `<roleManager>` element is used to specify role providers.</span></span>  
  
5.  <span data-ttu-id="72675-206">加入 `<add>` 項目以做為 `<providers>` 項目的子項。</span><span class="sxs-lookup"><span data-stu-id="72675-206">Add an `<add>` element as a child of the `<providers>` element.</span></span> <span data-ttu-id="72675-207">您必須指定 `name` 和 `type` 屬性，如下列範例所示。</span><span class="sxs-lookup"><span data-stu-id="72675-207">You must specify `name` and `type` attributes as shown in the following example.</span></span> <span data-ttu-id="72675-208">`type` 屬性值必須是組件限定的類型名稱。</span><span class="sxs-lookup"><span data-stu-id="72675-208">The `type` attribute value must be an assembly-qualified type name.</span></span> <span data-ttu-id="72675-209">如需詳細資訊，請參閱 <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=nameWithType> 和[組件名稱](../../../docs/framework/app-domains/assembly-names.md)。</span><span class="sxs-lookup"><span data-stu-id="72675-209">For more information, see <xref:System.Type.AssemblyQualifiedName%2A?displayProperty=nameWithType> and [Assembly Names](../../../docs/framework/app-domains/assembly-names.md).</span></span>  
  
    ```xml  
    <add name="MyCustomRoleProvider" type="MyNamespace.MyRoleProvider, MyAssembly" />  
    ```  
  
6.  <span data-ttu-id="72675-210">修改 `defaultProvider` 或 `<membership>` 項目的 `<roleManager>` 屬性，指定您在上一個步驟中加入之 `<add>` 項目的名稱值。</span><span class="sxs-lookup"><span data-stu-id="72675-210">Modify the `defaultProvider` attribute of the `<membership>` or `<roleManager>` element to specify the name value from the `<add>` element that you added in the previous step.</span></span>  
  
    ```xml  
    <roleManager enabled="true" defaultProvider="MyCustomRoleProvider">  
    ```  
  
## <a name="see-also"></a><span data-ttu-id="72675-211">請參閱</span><span class="sxs-lookup"><span data-stu-id="72675-211">See Also</span></span>  
 [<span data-ttu-id="72675-212">用戶端應用程式服務</span><span class="sxs-lookup"><span data-stu-id="72675-212">Client Application Services</span></span>](../../../docs/framework/common-client-technologies/client-application-services.md)  
 [<span data-ttu-id="72675-213">用戶端應用程式服務概觀</span><span class="sxs-lookup"><span data-stu-id="72675-213">Client Application Services Overview</span></span>](../../../docs/framework/common-client-technologies/client-application-services-overview.md)  
 [<span data-ttu-id="72675-214">專案設計工具、服務頁面</span><span class="sxs-lookup"><span data-stu-id="72675-214">Services Page, Project Designer</span></span>](https://msdn.microsoft.com/library/bb398109)  
 [<span data-ttu-id="72675-215">服務對話方塊的進階設定</span><span class="sxs-lookup"><span data-stu-id="72675-215">Advanced Settings for Services Dialog Box</span></span>](/visualstudio/ide/reference/advanced-settings-for-services-dialog-box)  
 [<span data-ttu-id="72675-216">如何：使用用戶端應用程式服務實作使用者登入</span><span class="sxs-lookup"><span data-stu-id="72675-216">How to: Implement User Login with Client Application Services</span></span>](../../../docs/framework/common-client-technologies/how-to-implement-user-login-with-client-application-services.md)  
 [<span data-ttu-id="72675-217">逐步解說：使用用戶端應用程式服務</span><span class="sxs-lookup"><span data-stu-id="72675-217">Walkthrough: Using Client Application Services</span></span>](../../../docs/framework/common-client-technologies/walkthrough-using-client-application-services.md)  
 [<span data-ttu-id="72675-218">實作成員資格提供者</span><span class="sxs-lookup"><span data-stu-id="72675-218">Implementing a Membership Provider</span></span>](http://msdn.microsoft.com/library/d8658b8e-c962-4f64-95e1-4acce35e4582)  
 [<span data-ttu-id="72675-219">實作角色提供者</span><span class="sxs-lookup"><span data-stu-id="72675-219">Implementing a Role Provider</span></span>](http://msdn.microsoft.com/library/851671ce-bf9b-43f2-aba4-bc9d28b11c7d)  
 [<span data-ttu-id="72675-220">應用程式設定架構</span><span class="sxs-lookup"><span data-stu-id="72675-220">Application Settings Architecture</span></span>](../../../docs/framework/winforms/advanced/application-settings-architecture.md)  
 [<span data-ttu-id="72675-221">建立及設定 SQL Server 的應用程式服務資料庫</span><span class="sxs-lookup"><span data-stu-id="72675-221">Creating and Configuring the Application Services Database for SQL Server</span></span>](http://msdn.microsoft.com/library/ab894e83-7e2f-4af8-a116-b1bff8f815b2)
