---
title: "識別每個微服務的網域模型界限"
description: "容器化的.NET 應用程式的.NET Microservices 架構 |識別每個微服務的網域模型界限"
keywords: "Docker, 微服務, ASP.NET, 容器"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/26/2017
ms.prod: .net-core
ms.technology: dotnet-docker
ms.topic: article
ms.openlocfilehash: 6fef11e5718706701abb29149c4c4a23ba39bde0
ms.sourcegitcommit: c2e216692ef7576a213ae16af2377cd98d1a67fa
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/22/2017
---
# <a name="identify-domain-model-boundaries-for-each-microservice"></a>識別每個微服務的網域模型界限

目標識別模型界限和每個微服務的大小不是要取得最細微的分隔，雖然應該向小 microservices 傾向的話。 相反地，您的目標應該是取得最有意義的區隔的定義域知識。 重點不是大小，而是商務功能。 此外，如果沒有清除凝聚力所需的相依性數目為基礎的應用程式的特定區域，則表示單一的微服務，需要太。 一致性是找出如何打散這些路徑或群組在一起 microservices 的方法。 最後，同時取得更多有關定義域的知識，您應該反覆地調整您的微服務，大小。 尋找正確的大小，不是單次的程序。

[Sam Newman](http://samnewman.io/)，可辨識的升級程式 microservices 及書籍作者[建置 Microservices](http://samnewman.io/books/building_microservices/)，會反白顯示，您應該設計您 microservices 根據繫結的內容 (BC) 模式 （屬於網域導向設計），如稍早導入。 有時候，BC 無法撰寫的數個實體的服務，但不是反之亦然。

特定網域實體的網域模型適用於具象 BC 內或微服務。 BC 分隔網域模型的適用性，並可讓開發人員小組成員必須凝聚力和項目可以獨立開發清楚且共用了解。 這些是 microservices 的相同目標。

會通知您的設計選擇的另一個工具是[Conway 定律](https://en.wikipedia.org/wiki/Conway%27s_law)，其狀態的應用程式會反映社交組織產生它的界限。 但有時候的情況則相反，公司的組織由軟體所構成。 您可能需要反向 Conway 定律和您想要組織，公司的方式建立界限傾向向商務程序諮詢。

以找出已繫結的內容，可以用這個 DDD 模式是[內容對應模式](https://www.infoq.com/articles/ddd-contextmapping)。 具有內容的對應，您會識別應用程式和其界限中的各種內容。 通常會有不同的內容和界限，每個小型的子系統執行個體。 內容地圖是以定義使明確這些界限網域之間的方法。 BC 自發而且包含單一網域的詳細資料： 詳細資料的類似網域實體，並定義與其他 BCs 整合合約。 這是類似的微服務定義： 它是自發它實作特定網域的功能，它必須提供介面。 這是為什麼對應內容和繫結內容模式是識別您 microservices 網域模型界限的好方法。

在設計的大型應用程式時，您會看到分散其網域模型的方式，從類別目錄網域的網域專家 」 會命名實體在類別目錄和清查的網域中比傳送網域專家，以不同的方式執行個體。 或 CRM 專家想要儲存每個詳細比的客戶，排序網域專家使用者只需要客戶相關的部分資料在處理時，使用者網域實體可能是不同的大小和數目的屬性。 它是很難區分的大型應用程式相關的所有網域的所有定義域詞彙。 但最重要的一點是，您不應嘗試統一條款;相反地，接受的差異和每個網域所提供的豐富性。 如果您嘗試在有統一整個應用程式資料庫，嘗試在統一的詞彙會造成不便，而且不聽右任何多個網域專家。 因此，會協助您釐清，您可以使用特定的定義域詞彙，而且您必須劃分系統，並使用不同網域中建立其他 BCs BCs （實作為 microservices）。

您將知道所得的右界限和每個 BC 大小，而網域模型，如果您有幾個不同的網域模型的強式關聯性，而且您通常不需要執行一般的應用程式時，合併來自多個網域模型的資訊作業。

每個微服務的網域模型應該有多大的問題的最佳答案可能如下所示： 應有自發的 BC 越好，可讓您處理而不需要不斷切換到其他內容 （其他為隔離微服務的模型）。 您可以查看圖 4-10 多個 microservices (多個 BCs) 每個有自己的模型和其實體可以定義方式，根據每個應用程式中的識別網域的特定需求的方式。

![](./media/image10.png)

**圖 4-10**。 識別的實體和微服務模型界限

圖 4-10 說明相關的線上會議管理系統的範例案例。 您已識別可能會實作為 microservices，按照您定義網域專家的網域的數個 BCs。 如您所見，有只在單一的微服務模型中，例如付款付款微服務中出現的實體。 這些就很容易實作。

不過，您也可能會有不同的形狀，但跨多個網域模型從多個 microservices 共用相同的身分識別的實體。 例如，「 使用者 」 實體中所做的心得管理微服務識別。 該相同的使用者，具有相同的識別，是一個購買者命名訂購微服務或一個付費者中付款微服務，即使一個具名的客戶在客戶服務微服務。 這是因為取決於[通用語言](https://martinfowler.com/bliki/UbiquitousLanguage.html)，使用每個網域專家，使用者可能會有不同的觀點來看，即使使用不同的屬性。 名為所做的心得管理的微服務模型中的使用者實體可能有大部分的個人資料屬性。 不過，該相同的使用者付費者的圖形，在微服務付款或客戶的微服務客戶服務的圖形中可能不需要相同的屬性清單。

類似的方法說明圖 4-11。

![](./media/image11.png)

**圖 4-11**。 將傳統的資料模型分解成多個網域模型

您可以查看如何使用者當做使用者實體所做的心得管理微服務模型中，並且也會出現在 [買方] 實體中定價微服務，以替代屬性或使用者時，它實際上買方詳細表單。 每個微服務 」 或 「 BC 可能不需要與使用者的實體，為部分，根據以解決問題或內容相關的所有資料。 比方說，在價格微服務模型中，您不需要的位址或使用者，只要 （身分識別） 的識別碼和狀態，將會影響的折扣價格每買方的座位時的識別碼。

基座實體有相同名稱但不同的屬性，每個網域模型中。 不過，基座共用相同的識別碼，為基礎的身分識別與使用者和買方發生，因此。

基本上，是使用者的存在於多個服務 （網域），這些全都共用該使用者的身分識別共用的概念。 但是，每個網域模型中可能有其他或不同的使用者實體的詳細資料。 因此，需要具備以便對應到另一個網域 （微服務） 的使用者實體。

有幾個好處不在跨網域的相同數目的屬性與共用相同的使用者實體。 其中一個優點是減少重複，因此微服務模型不會有任何不需要的資料。 另一項優點有主要的微服務擁有特定類型的每個實體的資料，以便更新和查詢，該類型的資料驅動型只能由該微服務。


>[!div class="step-by-step"]
[上一個](分散式的資料-management.md) [下一步] (direct-client-to-microservice-communication-versus-the-api-gateway-pattern.md)
