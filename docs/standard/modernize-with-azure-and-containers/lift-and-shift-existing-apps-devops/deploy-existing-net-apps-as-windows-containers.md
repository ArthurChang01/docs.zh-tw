---
title: "將現有的.NET 應用程式部署為 Windows 容器"
description: "容器化的.NET 應用程式的.NET Microservices 架構 |將現有的.NET 應用程式部署為 Windows 容器"
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 10/26/2017
ms.prod: .net
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: bab6e275c93d2cedddf010ab20f98cb8392fa9fa
ms.sourcegitcommit: d3cfda0943364aaf6ccd574f55f584576c8a4fee
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/08/2018
---
# <a name="deploy-existing-net-apps-as-windows-containers"></a><span data-ttu-id="59a2a-103">將現有的.NET 應用程式部署為 Windows 容器</span><span class="sxs-lookup"><span data-stu-id="59a2a-103">Deploy existing .NET apps as Windows containers</span></span>

<span data-ttu-id="59a2a-104">Windows 容器為基礎的部署都適用於雲端最佳化應用程式、 雲端原生應用程式和 DevOps 雲端應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-104">Deployments that are based on Windows Containers are applicable to Cloud-Optimized applications, cloud-native applications, and Cloud DevOps-Ready applications.</span></span>

<span data-ttu-id="59a2a-105">本指南中，下列各節的重點是在使用 Windows 容器的*DevOps 雲端*應用程式，當您提起並移動現有的.NET 應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-105">The focus in this guide and in the following sections is on using Windows Containers for *Cloud DevOps-Ready* applications, when you lift and shift existing .NET applications.</span></span>

## <a name="what-are-containers-linux-or-windows"></a><span data-ttu-id="59a2a-106">什麼是容器？</span><span class="sxs-lookup"><span data-stu-id="59a2a-106">What are containers?</span></span> <span data-ttu-id="59a2a-107">（Linux 或 Windows）</span><span class="sxs-lookup"><span data-stu-id="59a2a-107">(Linux or Windows)</span></span>

<span data-ttu-id="59a2a-108">容器是來包裝其本身的隔離套件將應用程式的方式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-108">Containers are a way to wrap up an application into its own isolated package.</span></span> <span data-ttu-id="59a2a-109">在其容器中，應用程式不會受到應用程式或存在容器之外的處理程序。</span><span class="sxs-lookup"><span data-stu-id="59a2a-109">In its container, the application is not affected by applications or processes that exist outside of the container.</span></span> <span data-ttu-id="59a2a-110">所有應用程式依存執行已成功為處理序是在容器內。</span><span class="sxs-lookup"><span data-stu-id="59a2a-110">Everything the application depends on to run successfully as a process is inside the container.</span></span> <span data-ttu-id="59a2a-111">無論在何處容器可能會移動，應用程式會永遠符合需求，方面直接相依性，因為它套件組合，它必須執行 （程式庫相依性、 執行階段，等等） 的所有項目。</span><span class="sxs-lookup"><span data-stu-id="59a2a-111">Wherever the container might move, the requirements of the application will always be met, in terms of direct dependencies, because it is bundled with everything that it needs to run (library dependencies, runtimes, and so on).</span></span>

<span data-ttu-id="59a2a-112">容器的主要特性是，它會使環境相同跨不同的部署由於容器本身隨附它需要的所有相依性。</span><span class="sxs-lookup"><span data-stu-id="59a2a-112">The main characteristic of a container is that it makes the environment the same across different deployments because the container itself comes with all the dependencies it needs.</span></span> <span data-ttu-id="59a2a-113">這表示您可以在您的電腦上偵錯應用程式，再部署到另一部電腦，以保證在相同的環境。</span><span class="sxs-lookup"><span data-stu-id="59a2a-113">This means that you can debug the application on your machine, and then deploy it to another machine, with the same environment guaranteed.</span></span>

<span data-ttu-id="59a2a-114">容器是容器映像的執行個體。</span><span class="sxs-lookup"><span data-stu-id="59a2a-114">A container is an instance of a container image.</span></span> <span data-ttu-id="59a2a-115">容器映像是封裝的應用程式或服務 （例如快照集），然後再可靠且可重現的方式部署它的方法。</span><span class="sxs-lookup"><span data-stu-id="59a2a-115">A container image is a way to package an app or service (like a snapshot), and then deploy it in a reliable and reproducible way.</span></span> <span data-ttu-id="59a2a-116">您可以說，Docker 不只技術它也的基本概念和程序。</span><span class="sxs-lookup"><span data-stu-id="59a2a-116">You could say that Docker is not only a technology-it's also a philosophy and a process.</span></span>

<span data-ttu-id="59a2a-117">由於容器每天變得更為常見，它們會變得業界 「 部署單位 」。</span><span class="sxs-lookup"><span data-stu-id="59a2a-117">As containers daily become more common, they are becoming an industry-wide "unit of deployment."</span></span>

## <a name="benefits-of-containers-docker-engine-on-linux-or-windows"></a><span data-ttu-id="59a2a-118">容器 （在 Linux 或 Windows 上的 Docker 引擎） 的優點</span><span class="sxs-lookup"><span data-stu-id="59a2a-118">Benefits of containers (Docker Engine on Linux or Windows)</span></span>

<span data-ttu-id="59a2a-119">使用容器來建置應用程式，可能也會定義為輕量型的建置組塊優惠大幅提高靈活度來建立、 傳送、 及執行任何應用程式中，於任何基礎結構中。</span><span class="sxs-lookup"><span data-stu-id="59a2a-119">Building applications by using containers-which also might be defined as lightweight building blocks-offers a significant increase in agility for building, shipping, and running any application, across any infrastructure.</span></span>

<span data-ttu-id="59a2a-120">透過容器，您可以採取任何應用程式從開發到生產環境與少量或沒有程式碼變更，這點受惠 Microsoft 開發人員工具、 作業系統和雲端間的 Docker 整合。</span><span class="sxs-lookup"><span data-stu-id="59a2a-120">With containers, you can take any app from development to production with little or no code change, thanks to Docker integration across Microsoft developer tools, operating systems, and cloud.</span></span>

<span data-ttu-id="59a2a-121">當您部署到純文字的 Vm 時，您可能已經有方法可供部署 ASP.NET 應用程式到您的 Vm。</span><span class="sxs-lookup"><span data-stu-id="59a2a-121">When you deploy to plain VMs, you probably already have a method in place for deploying ASP.NET apps to your VMs.</span></span> <span data-ttu-id="59a2a-122">可能是，不過，您的方法牽涉到多個手動步驟或複雜的自動化程序使用 Puppet，這類部署工具或類似的工具。</span><span class="sxs-lookup"><span data-stu-id="59a2a-122">It's likely, though, that your method involves multiple manual steps or complex automated processes by using a deployment tool like Puppet, or a similar tool.</span></span> <span data-ttu-id="59a2a-123">您可能需要執行工作，例如修改設定項目、 複製，在伺服器之間的應用程式內容和執行.msi 安裝，後面接著測試為基礎的互動式安裝程式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-123">You might need to perform tasks like modifying configuration items, copying application content between servers, and running interactive setup programs based on .msi setups, followed by testing.</span></span> <span data-ttu-id="59a2a-124">在部署中的所有這些步驟加入部署時間和風險。</span><span class="sxs-lookup"><span data-stu-id="59a2a-124">All those steps in the deployment add time and risk to deployments.</span></span> <span data-ttu-id="59a2a-125">相依性不存在於目標環境時，將會發生失敗。</span><span class="sxs-lookup"><span data-stu-id="59a2a-125">You will get failures whenever a dependency is not present in the target environment.</span></span>

<span data-ttu-id="59a2a-126">在 Windows 容器中，已完全自動化封裝應用程式的程序。</span><span class="sxs-lookup"><span data-stu-id="59a2a-126">In Windows Containers, the process of packaging applications is fully automated.</span></span> <span data-ttu-id="59a2a-127">Windows 容器根據 Docker 平台，提供自動更新與回復容器部署。</span><span class="sxs-lookup"><span data-stu-id="59a2a-127">Windows Containers is based on the Docker platform, which offers automatic updates and rollbacks for container deployments.</span></span> <span data-ttu-id="59a2a-128">使用 Docker 引擎而獲得的主要改善就是您建立映像，就像是您的應用程式的快照集，所有相依性。</span><span class="sxs-lookup"><span data-stu-id="59a2a-128">The main improvement you get from using the Docker engine is that you create images, which are like snapshots of your application, with all its dependencies.</span></span> <span data-ttu-id="59a2a-129">映像是指 Docker 映像 （Windows 容器映像，在此情況下）。</span><span class="sxs-lookup"><span data-stu-id="59a2a-129">The images are Docker images (a Windows container image, in this case).</span></span> <span data-ttu-id="59a2a-130">在容器中，執行 ASP.NET 應用程式，不需回到原始碼映像。</span><span class="sxs-lookup"><span data-stu-id="59a2a-130">The images run ASP.NET apps in containers, without going back to source code.</span></span> <span data-ttu-id="59a2a-131">容器的快照集變得的部署單位。</span><span class="sxs-lookup"><span data-stu-id="59a2a-131">The container snapshot becomes the unit of deployment.</span></span>

<span data-ttu-id="59a2a-132">大量的組織 containerizing 整合的現有應用程式，原因如下：</span><span class="sxs-lookup"><span data-stu-id="59a2a-132">A large number of organizations are containerizing existing monolithic applications for the following reasons:</span></span>

-   <span data-ttu-id="59a2a-133">**釋放透過提升部署的靈活度**。</span><span class="sxs-lookup"><span data-stu-id="59a2a-133">**Release agility through improved deployment**.</span></span> <span data-ttu-id="59a2a-134">容器可提供一致的部署之間的合約開發和作業。</span><span class="sxs-lookup"><span data-stu-id="59a2a-134">Containers offer a consistent deployment contract between development and operations.</span></span> <span data-ttu-id="59a2a-135">當您使用容器時，您將聽到說出的開發人員、"﹐ 我的電腦，為何不在生產環境中？ 」</span><span class="sxs-lookup"><span data-stu-id="59a2a-135">When you use containers, you won't hear developers say, "It works on my machine, why not in production?"</span></span> <span data-ttu-id="59a2a-136">他們可以只需說，「 執行當做容器時，其會在生產環境中執行。 」</span><span class="sxs-lookup"><span data-stu-id="59a2a-136">They can simply say, "It runs as a container, so it will run in production."</span></span> <span data-ttu-id="59a2a-137">已封裝應用程式，其相依性，可以在任何支援的容器型環境中執行。</span><span class="sxs-lookup"><span data-stu-id="59a2a-137">The packaged application, with all its dependencies, can be executed in any supported container-based environment.</span></span> <span data-ttu-id="59a2a-138">它會執行它要設定所有的部署目標 （開發、 品管暫存、 生產環境） 中執行的方式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-138">It will run the way it was intended to run in all deployment targets (dev, QA, staging, production).</span></span> <span data-ttu-id="59a2a-139">容器會消除大部分 frictions 當他們從一個階段移到下一步，可大幅提升部署，您可以更快速及提供。</span><span class="sxs-lookup"><span data-stu-id="59a2a-139">Containers eliminate most frictions when they move from one stage to the next, which greatly improves deployment, and you can ship faster.</span></span>

-   <span data-ttu-id="59a2a-140">**成本大幅降低**。</span><span class="sxs-lookup"><span data-stu-id="59a2a-140">**Cost reductions**.</span></span> <span data-ttu-id="59a2a-141">容器會導致較低的成本，藉由移除現有的硬體，或是從執行的應用程式在更高的密度，每個單位的硬體與彙總。</span><span class="sxs-lookup"><span data-stu-id="59a2a-141">Containers lead to lower costs, either by the consolidation and removal of existing hardware, or from running applications at a higher density per unit of hardware.</span></span>

-   <span data-ttu-id="59a2a-142">**可攜性**。</span><span class="sxs-lookup"><span data-stu-id="59a2a-142">**Portability**.</span></span> <span data-ttu-id="59a2a-143">容器是模組化和可移植。</span><span class="sxs-lookup"><span data-stu-id="59a2a-143">Containers are modular and portable.</span></span> <span data-ttu-id="59a2a-144">Docker 容器支援的任何伺服器作業系統 （Linux 和 Windows） 中任何主要公用雲端 （Microsoft Azure、 AWS Amazon、 Google、 IBM） 中的內部和私用或混合式雲端環境。</span><span class="sxs-lookup"><span data-stu-id="59a2a-144">Docker containers are supported on any server operating system (Linux and Windows), in any major public cloud (Microsoft Azure, Amazon AWS, Google, IBM), and in on-premises and private or hybrid cloud environments.</span></span>

-   <span data-ttu-id="59a2a-145">**控制**。</span><span class="sxs-lookup"><span data-stu-id="59a2a-145">**Control**.</span></span> <span data-ttu-id="59a2a-146">容器可提供彈性且安全的環境控制容器層級。</span><span class="sxs-lookup"><span data-stu-id="59a2a-146">Containers offer a flexible and secure environment that's controlled at the container level.</span></span> <span data-ttu-id="59a2a-147">容器可以保護、 隔離，和即使受限於在容器上設定執行原則的條件約束。</span><span class="sxs-lookup"><span data-stu-id="59a2a-147">A container can be secured, isolated, and even limited by setting execution constraint policies on the container.</span></span> <span data-ttu-id="59a2a-148">關於 Windows 容器 > 一節中有詳細說明，Windows Server 2016 和 HYPER-V 容器可提供額外的企業支援選項。</span><span class="sxs-lookup"><span data-stu-id="59a2a-148">As detailed in the section about Windows Containers, Windows Server 2016 and Hyper-V containers offer additional enterprise support options.</span></span>

<span data-ttu-id="59a2a-149">靈活度、 可攜性和控制項中的重大改良最終會導致顯著的成本大幅降低當您使用容器來開發和維護應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-149">Significant improvements in agility, portability, and control ultimately lead to significant cost reductions when you use containers to develop and maintain applications.</span></span>

## <a name="what-is-docker"></a><span data-ttu-id="59a2a-150">什麼是 Docker？</span><span class="sxs-lookup"><span data-stu-id="59a2a-150">What is Docker?</span></span>

<span data-ttu-id="59a2a-151">[Docker](https://www.docker.com/)是[開放原始碼專案](https://github.com/docker/docker)，自動化應用程式的部署，做為可攜式且足可雲端或內部部署中執行的容器。</span><span class="sxs-lookup"><span data-stu-id="59a2a-151">[Docker](https://www.docker.com/) is an [open-source project](https://github.com/docker/docker) that automates the deployment of applications as portable, self-sufficient containers that can run in the cloud or on-premises.</span></span> <span data-ttu-id="59a2a-152">Docker 也有[公司](https://www.docker.com/)會升級，而且這項技術的發展。</span><span class="sxs-lookup"><span data-stu-id="59a2a-152">Docker also is a [company](https://www.docker.com/) that promotes and evolves this technology.</span></span> <span data-ttu-id="59a2a-153">公司中共同作業與雲端，Linux 和 Windows 廠商，包括 Microsoft 的運作方式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-153">The company works in collaboration with cloud, Linux, and Windows vendors, including Microsoft.</span></span>

![](./media/image6.png)

> <span data-ttu-id="59a2a-154">**圖 4-6。**</span><span class="sxs-lookup"><span data-stu-id="59a2a-154">**Figure 4-6.**</span></span> <span data-ttu-id="59a2a-155">Docker 將容器部署在混合式雲端的所有圖層</span><span class="sxs-lookup"><span data-stu-id="59a2a-155">Docker deploys containers at all layers of the hybrid cloud</span></span>

<span data-ttu-id="59a2a-156">給其他人熟悉的虛擬機器，容器可能會出現非常類似。</span><span class="sxs-lookup"><span data-stu-id="59a2a-156">To someone familiar with virtual machines, containers might appear to be remarkably similar.</span></span> <span data-ttu-id="59a2a-157">容器執行作業系統、 具有檔案系統，而且可以存取網路，就像實體或虛擬電腦系統上。</span><span class="sxs-lookup"><span data-stu-id="59a2a-157">A container runs an operating system, has a file system, and can be accessed over a network, just like a physical or virtual computer system.</span></span> <span data-ttu-id="59a2a-158">不過，在容器的基本概念與技術是從虛擬機器非常不同。</span><span class="sxs-lookup"><span data-stu-id="59a2a-158">However, the technology and concepts behind containers are vastly different from virtual machines.</span></span> <span data-ttu-id="59a2a-159">從開發人員觀點來看，容器必須被視為一個單一處理程序。</span><span class="sxs-lookup"><span data-stu-id="59a2a-159">From a developer point of view, a container must be treated more like a single process.</span></span> <span data-ttu-id="59a2a-160">事實上，容器會有一個處理序的單一進入點。</span><span class="sxs-lookup"><span data-stu-id="59a2a-160">In fact, a container has a single entry point for one process.</span></span>

<span data-ttu-id="59a2a-161">Docker 容器 (為了簡單起見，*容器*) 可以原生 Linux 及 Windows 上執行。</span><span class="sxs-lookup"><span data-stu-id="59a2a-161">Docker containers (for simplicity, *containers*) can run natively on Linux and Windows.</span></span> <span data-ttu-id="59a2a-162">僅限於 Windows 主機 （主機伺服器或 VM） 上執行時一般容器，可以執行 Windows 容器和 Linux 容器可以只在 Linux 主機上執行。</span><span class="sxs-lookup"><span data-stu-id="59a2a-162">When running regular containers, Windows containers can run only on Windows hosts (a host server or a VM), and Linux containers can run only on Linux hosts.</span></span> <span data-ttu-id="59a2a-163">不過，在最新版 Windows Server 和 HYPER-V 容器的詳細資訊，Linux 容器也可以執行原生 Windows Server 上使用 HYPER-V 隔離技術，目前僅適用於 Windows Server 容器。</span><span class="sxs-lookup"><span data-stu-id="59a2a-163">However, in recent versions of Windows Server and Hyper-V containers, a Linux container also can run natively on Windows Server by using the Hyper-V isolation technology that currently is available only in Windows Server Containers.</span></span>

<span data-ttu-id="59a2a-164">在不久的將來，可能發生而且甚至一般，將會包含 Linux 和 Windows 容器的混合式的環境。</span><span class="sxs-lookup"><span data-stu-id="59a2a-164">In the near future, mixed environments that have both Linux and Windows containers will be possible and even common.</span></span>

## <a name="benefits-of-windows-containers-for-your-existing-net-applications"></a><span data-ttu-id="59a2a-165">對於現有的.NET 應用程式的 Windows 容器的優點</span><span class="sxs-lookup"><span data-stu-id="59a2a-165">Benefits of Windows Containers for your existing .NET applications</span></span>

<span data-ttu-id="59a2a-166">使用 Windows 容器的優點基本上都是相同的優點，您通常從容器取得。</span><span class="sxs-lookup"><span data-stu-id="59a2a-166">The benefits of using Windows Containers are fundamentally the same benefits you get from containers in general.</span></span> <span data-ttu-id="59a2a-167">使用 Windows 容器是關於大幅改善靈活度、 可攜性，以及控制項。</span><span class="sxs-lookup"><span data-stu-id="59a2a-167">Using Windows Containers is about greatly improving agility, portability, and control.</span></span>

<span data-ttu-id="59a2a-168">當我們談論現有的.NET 應用程式時，通常是指可使用.NET Framework 所建立的傳統應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-168">When we talk about existing .NET applications, we mostly mean traditional applications that were created by using the .NET Framework.</span></span> <span data-ttu-id="59a2a-169">例如，它們可能是傳統的 ASP.NET web 應用程式-不使用.NET 核心的較新，並可執行跨平台上 Linux、 Windows 和 MacOS。</span><span class="sxs-lookup"><span data-stu-id="59a2a-169">For example, they might be traditional ASP.NET web applications-they don't use .NET Core, which is newer and runs cross-platform on Linux, Windows, and MacOS.</span></span>

<span data-ttu-id="59a2a-170">.NET Framework 中主要的相依性是 Windows。</span><span class="sxs-lookup"><span data-stu-id="59a2a-170">The main dependency in the .NET Framework is Windows.</span></span> <span data-ttu-id="59a2a-171">它也會有次要相依性，例如 IIS 和 System.Web 在傳統的 ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="59a2a-171">It also has secondary dependencies, like IIS, and System.Web in traditional ASP.NET.</span></span>

<span data-ttu-id="59a2a-172">.NET Framework 應用程式必須在 Windows 中，期間執行。</span><span class="sxs-lookup"><span data-stu-id="59a2a-172">A .NET Framework application must run on Windows, period.</span></span> <span data-ttu-id="59a2a-173">如果您想要化現有的.NET Framework 應用程式，您無法或不想要投資移轉至.NET Core （「 如果能夠正常運作，不移轉 」），您有容器的唯一選擇是使用 Windows 容器。</span><span class="sxs-lookup"><span data-stu-id="59a2a-173">If you want to containerize existing .NET Framework applications and you can't or don't want to invest in a migration to .NET Core ("If it works properly, don't migrate it"), the only choice you have for containers is to use Windows Containers.</span></span>

<span data-ttu-id="59a2a-174">因此，Windows 容器的主要優點是，它們提供您的方式，來現代化現有的.NET Framework 應用程式上 Windows 透過得以執行。</span><span class="sxs-lookup"><span data-stu-id="59a2a-174">So, one of the main benefits of Windows Containers is that they offer you a way to modernize your existing .NET Framework applications that are running on Windows-through containerization.</span></span> <span data-ttu-id="59a2a-175">最後，Windows 容器獲得您想要使用容器靈活度、 可攜性和更佳控制的優點。</span><span class="sxs-lookup"><span data-stu-id="59a2a-175">Ultimately, Windows Containers gets you the benefits that you are looking for by using containers-agility, portability, and better control.</span></span>

## <a name="choose-an-os-to-target-with-net-based-containers"></a><span data-ttu-id="59a2a-176">選擇要鎖定的作業系統。以網路為基礎的容器</span><span class="sxs-lookup"><span data-stu-id="59a2a-176">Choose an OS to target with .NET-based containers</span></span>

<span data-ttu-id="59a2a-177">提供多樣化的 Docker，以及.NET Framework 和.NET Core 之間的差異所支援的作業系統，您應將目標設特定作業系統和您使用的架構為基礎的特定版本。</span><span class="sxs-lookup"><span data-stu-id="59a2a-177">Given the diversity of operating systems that are supported by Docker, as well as the differences between .NET Framework and .NET Core, you should target a specific OS and specific versions based on the framework you are using.</span></span>

<span data-ttu-id="59a2a-178">針對 Windows，您可以使用 Windows Server Core 或 Windows Nano Server。</span><span class="sxs-lookup"><span data-stu-id="59a2a-178">For Windows, you can use Windows Server Core or Windows Nano Server.</span></span> <span data-ttu-id="59a2a-179">這些 Windows 版本提供不同的特性 （例如與自我裝載的 web 伺服器 Kestrel 例如 IIS) 可能需要.NET Framework 或.NET Core 應用程式。</span><span class="sxs-lookup"><span data-stu-id="59a2a-179">These Windows versions provide different characteristics (like IIS versus a self-hosted web server like Kestrel) that might be needed by .NET Framework or .NET Core applications.</span></span>

<span data-ttu-id="59a2a-180">針對 Linux，有多個發佈可供使用，且受到正式 .NET Docker 映像的支援 (例如 Debian)。</span><span class="sxs-lookup"><span data-stu-id="59a2a-180">For Linux, multiple distros are available and supported in official .NET Docker images (like Debian).</span></span>

<span data-ttu-id="59a2a-181">圖 4-7 顯示您可以為目標，根據應用程式的.NET Framework 版本的作業系統版本。</span><span class="sxs-lookup"><span data-stu-id="59a2a-181">Figure 4-7 shows OS versions that you can target, depending on the app's version of the .NET Framework.</span></span>

![](./media/image7.png)

> <span data-ttu-id="59a2a-182">**圖 4-7。**</span><span class="sxs-lookup"><span data-stu-id="59a2a-182">**Figure 4-7.**</span></span> <span data-ttu-id="59a2a-183">目標.NET Framework 版本為基礎的作業系統</span><span class="sxs-lookup"><span data-stu-id="59a2a-183">Operating systems to target based on .NET Framework version</span></span>

<span data-ttu-id="59a2a-184">在現有或舊版.NET Framework 應用程式為基礎的應用程式的移轉案例，主要的相依性是在 Windows 和 IIS 上。</span><span class="sxs-lookup"><span data-stu-id="59a2a-184">In migration scenarios for existing or legacy applications that are based on .NET Framework applications, the main dependencies are on Windows and IIS.</span></span> <span data-ttu-id="59a2a-185">唯一的選擇是使用 Windows Server Core 和.NET Framework 為基礎的 Docker 映像。</span><span class="sxs-lookup"><span data-stu-id="59a2a-185">Your only option is to use Docker images based on Windows Server Core and the .NET Framework.</span></span>

<span data-ttu-id="59a2a-186">當您將映像名稱加入您 Dockerfile 的檔案時，您可以選取使用的標記，如下列範例針對以.NET Framework 為基礎的 Windows 容器映像的作業系統和版本：</span><span class="sxs-lookup"><span data-stu-id="59a2a-186">When you add the image name to your Dockerfile file, you can select the operating system and version by using a tag, as in the following examples for .NET Framework-based Windows container images:</span></span>

> | <span data-ttu-id="59a2a-187">**標記**</span><span class="sxs-lookup"><span data-stu-id="59a2a-187">**Tag**</span></span> | <span data-ttu-id="59a2a-188">**系統與版本**</span><span class="sxs-lookup"><span data-stu-id="59a2a-188">**System and version**</span></span> |
> |---|---|
> | <span data-ttu-id="59a2a-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="59a2a-189">**microsoft/dotnet-framework:4.x-windowsservercore**</span></span> | <span data-ttu-id="59a2a-190">.NET framework 4.x 在 Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="59a2a-190">.NET Framework 4.x on Windows Server Core</span></span> |
> | <span data-ttu-id="59a2a-191">**microsoft/aspnet:4.x-windowsservercore**</span><span class="sxs-lookup"><span data-stu-id="59a2a-191">**microsoft/aspnet:4.x-windowsservercore**</span></span> | <span data-ttu-id="59a2a-192">.NET framework 4.x 與其他 ASP.NET 自訂程序，在 Windows Server Core</span><span class="sxs-lookup"><span data-stu-id="59a2a-192">.NET Framework 4.x with additional ASP.NET customization, on Windows Server Core</span></span> |

<span data-ttu-id="59a2a-193">適用於.NET Core （跨平台適用於 Linux 和 Windows），標記看起來會像這樣：</span><span class="sxs-lookup"><span data-stu-id="59a2a-193">For .NET Core (cross-platform for Linux and Windows), the tags would look like this:</span></span>

> | <span data-ttu-id="59a2a-194">**標記**</span><span class="sxs-lookup"><span data-stu-id="59a2a-194">**Tag**</span></span> | <span data-ttu-id="59a2a-195">**系統與版本**</span><span class="sxs-lookup"><span data-stu-id="59a2a-195">**System and version**</span></span>
> |---|---|
> | <span data-ttu-id="59a2a-196">**microsoft/dotnet:2.0.0-runtime**</span><span class="sxs-lookup"><span data-stu-id="59a2a-196">**microsoft/dotnet:2.0.0-runtime**</span></span> | <span data-ttu-id="59a2a-197">.NET core 2.0 執行階段僅 on Linux</span><span class="sxs-lookup"><span data-stu-id="59a2a-197">.NET Core 2.0 runtime-only on Linux</span></span> |
> | <span data-ttu-id="59a2a-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span><span class="sxs-lookup"><span data-stu-id="59a2a-198">**microsoft/dotnet:2.0.0-runtime-nanoserver**</span></span> | <span data-ttu-id="59a2a-199">.NET core 2.0 執行階段僅限 Windows Nano Server 上</span><span class="sxs-lookup"><span data-stu-id="59a2a-199">.NET Core 2.0 runtime-only on Windows Nano Server</span></span> |

### <a name="multi-arch-images"></a><span data-ttu-id="59a2a-200">多重 arch 映像</span><span class="sxs-lookup"><span data-stu-id="59a2a-200">Multi-arch images</span></span>

<span data-ttu-id="59a2a-201">自 mid 2017 起，您也可以使用的新功能中呼叫的 Docker[多 arch](https://github.com/moby/moby/issues/15866)映像。</span><span class="sxs-lookup"><span data-stu-id="59a2a-201">Beginning in mid-2017, you also can use a new feature in Docker called [multi-arch](https://github.com/moby/moby/issues/15866) images.</span></span> <span data-ttu-id="59a2a-202">.NET core Docker 映像可以使用多 arch 標記。</span><span class="sxs-lookup"><span data-stu-id="59a2a-202">.NET Core Docker images can use multi-arch tags.</span></span> <span data-ttu-id="59a2a-203">Dockerfile 的檔案不再需要定義您的目標的作業系統。</span><span class="sxs-lookup"><span data-stu-id="59a2a-203">Your Dockerfile files no longer need to define the operating system that you are targeting.</span></span> <span data-ttu-id="59a2a-204">多重 arch 的功能可讓單一標記使用於跨多個電腦組態。</span><span class="sxs-lookup"><span data-stu-id="59a2a-204">The multi-arch feature allows a single tag to be used across multiple machine configurations.</span></span> <span data-ttu-id="59a2a-205">比方說，多重架構，您可以使用一個通用的標記： **microsoft/dotnet:2.0.0-runtime**。</span><span class="sxs-lookup"><span data-stu-id="59a2a-205">For instance, with multi-arch, you can use one common tag: **microsoft/dotnet:2.0.0-runtime**.</span></span> <span data-ttu-id="59a2a-206">如果提取該標記從 Linux 容器環境時，您會取得 Debian 基礎映像。</span><span class="sxs-lookup"><span data-stu-id="59a2a-206">If you pull that tag from a Linux container environment, you get the Debian-based image.</span></span> <span data-ttu-id="59a2a-207">如果提取該標籤，從 Windows 容器環境時，您會取得 Nano Server 基礎映像。</span><span class="sxs-lookup"><span data-stu-id="59a2a-207">If you pull that tag from a Windows container environment, you get the Nano Server-based image.</span></span>

<span data-ttu-id="59a2a-208">.NET Framework 映像，因為傳統的.NET Framework 支援只有 Windows，您無法使用多重 arch 功能。</span><span class="sxs-lookup"><span data-stu-id="59a2a-208">For .NET Framework images, because the traditional .NET Framework supports only Windows, you cannot use the multi-arch feature.</span></span>

## <a name="windows-container-types"></a><span data-ttu-id="59a2a-209">Windows 容器類型</span><span class="sxs-lookup"><span data-stu-id="59a2a-209">Windows container types</span></span>

<span data-ttu-id="59a2a-210">類似 Linux 容器使用 Docker 引擎會管理 Windows Server 容器。</span><span class="sxs-lookup"><span data-stu-id="59a2a-210">Like Linux containers, Windows Server containers are managed by using Docker Engine.</span></span> <span data-ttu-id="59a2a-211">不同於 Linux 容器，Windows 容器包含兩種不同的容器類型，或執行時間-Windows Server 容器和 HYPER-V 隔離。</span><span class="sxs-lookup"><span data-stu-id="59a2a-211">Unlike Linux containers, Windows containers include two different container types, or run times-Windows Server containers and Hyper-V isolation.</span></span>

<span data-ttu-id="59a2a-212">**Windows Server 容器**： 提供透過程序和命名空間隔離技術的應用程式隔離。</span><span class="sxs-lookup"><span data-stu-id="59a2a-212">**Windows Server containers**: Provides application isolation through process and namespace isolation technology.</span></span> <span data-ttu-id="59a2a-213">Windows Server 容器與容器主機和主機執行的所有容器共用核心。</span><span class="sxs-lookup"><span data-stu-id="59a2a-213">A Windows Server container shares a kernel with the container host and all containers that are running on the host.</span></span> <span data-ttu-id="59a2a-214">這些容器不提供惡意的安全性界限，而且不應該用來找出不受信任的程式碼。</span><span class="sxs-lookup"><span data-stu-id="59a2a-214">These containers do not provide a hostile security boundary and should not be used to isolate untrusted code.</span></span> <span data-ttu-id="59a2a-215">因為共用的核心空間，而這些容器需要相同的核心版本和組態。</span><span class="sxs-lookup"><span data-stu-id="59a2a-215">Because of the shared kernel space, these containers require the same kernel version and configuration.</span></span>

<span data-ttu-id="59a2a-216">**HYPER-V 隔離**： 擴充了 Windows Server 容器提供高度最佳化的 VM 上執行每個容器的隔離。</span><span class="sxs-lookup"><span data-stu-id="59a2a-216">**Hyper-V isolation**: Expands on the isolation provided by Windows Server Containers by running each container on a highly optimized VM.</span></span> <span data-ttu-id="59a2a-217">在此組態中，容器主機的核心不會與相同的主機上的其他容器共用。</span><span class="sxs-lookup"><span data-stu-id="59a2a-217">In this configuration, the kernel of the container host is not shared with other containers on the same host.</span></span> <span data-ttu-id="59a2a-218">這些容器專為惡意多租用戶，使用裝載於虛擬機器的相同安全性保證。</span><span class="sxs-lookup"><span data-stu-id="59a2a-218">These containers are designed for hostile multitenant hosting, with the same security assurances of a VM.</span></span> <span data-ttu-id="59a2a-219">因為這些容器不與主機或主機上的其他容器共用核心，可以執行核心與不同的版本和設定 （但有支援的版本）。</span><span class="sxs-lookup"><span data-stu-id="59a2a-219">Because these containers don't share the kernel with the host or other containers on the host, they can run kernels with different versions and configurations (with supported versions).</span></span> <span data-ttu-id="59a2a-220">例如，在 Windows 10 上的所有 Windows 容器會都使用 HYPER-V 隔離以便利用 Windows Server 核心版本和組態。</span><span class="sxs-lookup"><span data-stu-id="59a2a-220">For example, all Windows containers on Windows 10 use Hyper-V isolation to utilize the Windows Server kernel version and configuration.</span></span>

<span data-ttu-id="59a2a-221">在 Windows 上執行的容器或 HYPER-V 隔離不是執行階段決定。</span><span class="sxs-lookup"><span data-stu-id="59a2a-221">Running a container on Windows with or without Hyper-V isolation is a run-time decision.</span></span> <span data-ttu-id="59a2a-222">您可能會選擇一開始，HYPER-V 隔離建立容器，並在執行階段，請選擇執行做為 Windows Server 容器。</span><span class="sxs-lookup"><span data-stu-id="59a2a-222">You might choose to create the container with Hyper-V isolation initially, and at run time, choose to run it as a Windows Server container instead.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="59a2a-223">其他資源</span><span class="sxs-lookup"><span data-stu-id="59a2a-223">Additional resources</span></span>

-   <span data-ttu-id="59a2a-224">**Windows 容器文件**</span><span class="sxs-lookup"><span data-stu-id="59a2a-224">**Windows Containers documentation**</span></span>

    [<span data-ttu-id="59a2a-225">https://docs.microsoft.com/virtualization/windowscontainers/</span><span class="sxs-lookup"><span data-stu-id="59a2a-225">https://docs.microsoft.com/virtualization/windowscontainers/</span></span>](https://docs.microsoft.com/virtualization/windowscontainers/)

-   <span data-ttu-id="59a2a-226">**Windows 容器的基本概念**</span><span class="sxs-lookup"><span data-stu-id="59a2a-226">**Windows Containers fundamentals**</span></span>

    [<span data-ttu-id="59a2a-227">https://docs.microsoft.com/virtualization/windowscontainers/about/</span><span class="sxs-lookup"><span data-stu-id="59a2a-227">https://docs.microsoft.com/virtualization/windowscontainers/about/</span></span>](https://docs.microsoft.com/virtualization/windowscontainers/about/)

-   <span data-ttu-id="59a2a-228">**資訊圖： Microsoft 和容器**</span><span class="sxs-lookup"><span data-stu-id="59a2a-228">**Infographic: Microsoft and containers**</span></span>

    [<span data-ttu-id="59a2a-229">https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf</span><span class="sxs-lookup"><span data-stu-id="59a2a-229">https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf</span></span>](https://info.microsoft.com/rs/157-GQE-382/images/Container%20infographic%201.4.17.pdf)

>[!div class="step-by-step"]
<span data-ttu-id="59a2a-230">[上一頁](how-to-deploy-existing-net-apps-to-azure-app-service.md)
[下一頁](when-not-to-deploy-to-windows-containers.md)</span><span class="sxs-lookup"><span data-stu-id="59a2a-230">[Previous](how-to-deploy-existing-net-apps-to-azure-app-service.md)
[Next](when-not-to-deploy-to-windows-containers.md)</span></span>
