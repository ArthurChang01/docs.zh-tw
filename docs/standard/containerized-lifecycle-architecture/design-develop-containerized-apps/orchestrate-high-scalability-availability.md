---
title: 協調 microservices 及 multicontainer 應用程式的高延展性和可用性
description: Microsoft 平台和工具的容器化 Docker 應用程式生命週期
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/19/2017
ms.openlocfilehash: 5c7016fa8b731170a63f5d0f9d9bed3b72090be4
ms.sourcegitcommit: 979597cd8055534b63d2c6ee8322938a27d0c87b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/29/2018
ms.locfileid: "37106375"
---
# <a name="orchestrating-microservices-and-multicontainer-applications-for-high-scalability-and-availability"></a><span data-ttu-id="61575-103">協調 microservices 及 multicontainer 應用程式的高延展性和可用性</span><span class="sxs-lookup"><span data-stu-id="61575-103">Orchestrating microservices and multicontainer applications for high scalability and availability</span></span>

<span data-ttu-id="61575-104">如果您的應用程式是以微服務為基礎或分散於多個容器，您就必須為適用於生產環境的應用程式使用協調器。</span><span class="sxs-lookup"><span data-stu-id="61575-104">Using orchestrators for production-ready applications is essential if your application is based on microservices or simply split across multiple containers.</span></span> <span data-ttu-id="61575-105">如之前所介紹，以微服務為基礎的方法中，每個微服務都擁有自己的模型和資料，因此從開發和部署的角度來看，它是非常自主的。</span><span class="sxs-lookup"><span data-stu-id="61575-105">As introduced previously, in a microservice-based approach, each microservice owns its model and data so that it will be autonomous from a development and deployment point of view.</span></span> <span data-ttu-id="61575-106">但是，即使您擁有更傳統的應用程式所組成的多個服務 （例如 SOA)，您也會有多個容器或組成單一商務應用程式中需要部署為分散式系統的服務。</span><span class="sxs-lookup"><span data-stu-id="61575-106">But even if you have a more traditional application that is composed of multiple services (like SOA), you also will have multiple containers or services comprising a single business application that need to be deployed as a distributed system.</span></span> <span data-ttu-id="61575-107">這類系統很複雜向外擴充和管理。因此，您一定需要 orchestrator 如果您想要已備妥且可延展 multicontainer 應用程式。</span><span class="sxs-lookup"><span data-stu-id="61575-107">These kinds of systems are complex to scale out and manage; therefore, you absolutely need an orchestrator if you want to have a production-ready and scalable multicontainer application.</span></span>

<span data-ttu-id="61575-108">圖 4-6 說明到叢集中的多個 microservices （容器） 所組成的應用程式的部署。</span><span class="sxs-lookup"><span data-stu-id="61575-108">Figure 4-6 illustrates deployment into a cluster of an application composed of multiple microservices (containers).</span></span>

![](./media/image6.png)

<span data-ttu-id="61575-109">圖 4-6： 在叢集的容器</span><span class="sxs-lookup"><span data-stu-id="61575-109">Figure 4-6: A cluster of containers</span></span>

<span data-ttu-id="61575-110">看起來像邏輯方法。</span><span class="sxs-lookup"><span data-stu-id="61575-110">It looks like a logical approach.</span></span> <span data-ttu-id="61575-111">不過，如何為您處理負載平衡、 路由及協調這些組成的應用程式嗎？</span><span class="sxs-lookup"><span data-stu-id="61575-111">But how are you handling load balancing, routing, and orchestrating these composed applications?</span></span>

<span data-ttu-id="61575-112">Docker 命令列介面 (CLI) 符合管理一部的主機上的一個容器的需求，但它會管理更複雜的分散式應用程式的多個主機上部署的多個容器時落簡短。</span><span class="sxs-lookup"><span data-stu-id="61575-112">The Docker command-line interface (CLI) meets the needs of managing one container on one host, but it falls short when it comes to managing multiple containers deployed on multiple hosts for more complex distributed applications.</span></span> <span data-ttu-id="61575-113">在大部分情況下，您需要的管理平台會自動啟動容器、 暫止，或關閉它們需要時，並在理想情況下也控制存取資源，例如網路及儲存資料的方式。</span><span class="sxs-lookup"><span data-stu-id="61575-113">In most cases, you need a management platform that will automatically start containers, suspend them, or shut them down when needed, and ideally also control how they access resources like the network and data storage.</span></span>

<span data-ttu-id="61575-114">如果您不只要管理個別容器或組成非常簡單的應用程式，而是要進展到含有微服務的大型企業應用程式，就必須採用協調流程和叢集平台。</span><span class="sxs-lookup"><span data-stu-id="61575-114">To go beyond the management of individual containers or very simple composed apps and move toward larger enterprise applications with microservices, you must turn to orchestration and clustering platforms.</span></span>

<span data-ttu-id="61575-115">從架構和開發觀點來看，如果您建置大型的企業，microservices 為基礎的應用程式，很一定要了解下列平台和產品可支援進階的案例：</span><span class="sxs-lookup"><span data-stu-id="61575-115">From an architecture and development point of view, if you are building large, enterprise, microservices-based, applications, it is important to understand the following platforms and products that support advanced scenarios:</span></span>

-   <span data-ttu-id="61575-116">**叢集和 orchestrators** 當您需要調整-out 跨 Docker 主機數目太多的應用程式，例如大型 microservices 型應用程式，以相當重要，能夠與由單一叢集管理所有的主機抽象化基礎平台的複雜性。</span><span class="sxs-lookup"><span data-stu-id="61575-116">**Clusters and orchestrators** When you need to scale-out applications across many Docker hosts, such as with a large microservices-based application, it is critical to be able to manage all of those hosts as a single cluster by abstracting the complexity of the underlying platform.</span></span> <span data-ttu-id="61575-117">而這正是容器叢集和協調器所提供的功能。</span><span class="sxs-lookup"><span data-stu-id="61575-117">That is what the container clusters and orchestrators provide.</span></span> <span data-ttu-id="61575-118">Orchestrators 範例包括 Docker Swarm、 Mesosphere DC/OS、 Kubernetes （前三個可透過 Azure 容器服務） 和 Azure Service Fabric。</span><span class="sxs-lookup"><span data-stu-id="61575-118">Examples of orchestrators are Docker Swarm, Mesosphere DC/OS, Kubernetes (the first three available through Azure Container Service), and Azure Service Fabric.</span></span>

-   <span data-ttu-id="61575-119">**排程器** *排程*表示系統管理員，才能啟動叢集中的容器，讓它們也提供使用者介面的功能。</span><span class="sxs-lookup"><span data-stu-id="61575-119">**Schedulers** *Scheduling* means to have the capability for an administrator to launch containers in a cluster so that they also provide a user interface.</span></span> <span data-ttu-id="61575-120">叢集的排程器有多項責任： 有效率地使用叢集的資源設定使用者，有效率地跨主機或節點負載平衡容器所提供的條件約束，是錯誤的穩固同時提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="61575-120">A cluster scheduler has several responsibilities: to use the cluster's resources efficiently, to set the constraints provided by the user, to efficiently load-balance containers across nodes or hosts, and to be robust against errors while providing high availability.</span></span>

<span data-ttu-id="61575-121">叢集與排程器的概念密切相關，因此不同廠商所提供的產品通常會兩組功能都提供。</span><span class="sxs-lookup"><span data-stu-id="61575-121">The concepts of a cluster and a scheduler are closely related, so the products provided by different vendors often provide both sets of capabilities.</span></span> <span data-ttu-id="61575-122">表 4-1 列出的最重要的平台和軟體選擇您的叢集和排程器。</span><span class="sxs-lookup"><span data-stu-id="61575-122">Table 4-1 lists the most important platform and software choices you have for clusters and schedulers.</span></span> <span data-ttu-id="61575-123">這些叢集通常會提供如 Azure 公用雲端中。</span><span class="sxs-lookup"><span data-stu-id="61575-123">These clusters are generally offered in public clouds like Azure.</span></span>

<span data-ttu-id="61575-124">表 4-1： 群集的容器、 協調流程，和排程的軟體平台</span><span class="sxs-lookup"><span data-stu-id="61575-124">Table 4-1: Software platforms for container clustering, orchestration, and scheduling</span></span>

| <span data-ttu-id="61575-125">平台</span><span class="sxs-lookup"><span data-stu-id="61575-125">Platform</span></span> | <span data-ttu-id="61575-126">描述</span><span class="sxs-lookup"><span data-stu-id="61575-126">Description</span></span> |
|---|---|
| <span data-ttu-id="61575-127">Docker Swarm</span><span class="sxs-lookup"><span data-stu-id="61575-127">Docker Swarm</span></span><br/> ![http://rancher.com/wp-content/themes/rancher-2016/assets/images/swarm.png?v=2016-07-10-am](./media/image7.png) | <span data-ttu-id="61575-128">Docker 群集會提供叢集和排程 Docker 容器的能力。</span><span class="sxs-lookup"><span data-stu-id="61575-128">Docker Swarm gives you the ability to cluster and schedule Docker containers.</span></span> <span data-ttu-id="61575-129">使用 Swarm 時，您可以將 Docker 主機集區轉換成單一的虛擬 Docker 主機。</span><span class="sxs-lookup"><span data-stu-id="61575-129">By using Swarm, you can turn a pool of Docker hosts into a single, virtual Docker host.</span></span> <span data-ttu-id="61575-130">用戶端可以進行相同的方式表示，群集輕鬆的應用程式擴充至多部主機的主機進行應用程式開發介面要求群集。</span><span class="sxs-lookup"><span data-stu-id="61575-130">Clients can make API requests to Swarm in the same way that they do to hosts, meaning that Swarm makes it easy for applications to scale to multiple hosts.</span></span> <br /><br /> <span data-ttu-id="61575-131">Docker Swarm 是 Docker 公司的產品。</span><span class="sxs-lookup"><span data-stu-id="61575-131">Docker Swarm is a product from Docker, the company.</span></span> <br /><br /> <span data-ttu-id="61575-132">Docker v1.12 或更新版本可以執行原生與內建的 Swarm 模式。</span><span class="sxs-lookup"><span data-stu-id="61575-132">Docker v1.12 or later can run native and built-in Swarm Mode.</span></span> |
| <span data-ttu-id="61575-133">Mesosphere DC/OS</span><span class="sxs-lookup"><span data-stu-id="61575-133">Mesosphere DC/OS</span></span><br/>![https://mesosphere.com/wp-content/uploads/2016/04/logo-horizontal-styled.png](./media/image8.png) |  <span data-ttu-id="61575-134">Mesosphere Enterprise DC/OS (以 Apache Mesos 為基礎) 是一種適用於生產環境的平台，可執行容器和分散式應用程式。</span><span class="sxs-lookup"><span data-stu-id="61575-134">Mesosphere Enterprise DC/OS (based on Apache Mesos) is a production-ready platform for running containers and distributed applications.</span></span> <br /><br /> <span data-ttu-id="61575-135">DC/OS 的運作方式是將叢集中可用的資源集合簡化，讓這些資源可供建置其上的元件使用。</span><span class="sxs-lookup"><span data-stu-id="61575-135">DC/OS works by abstracting a collection of the resources available in the cluster and making those resources available to components built on top of it.</span></span> <span data-ttu-id="61575-136">Marathon 通常作為與 DC/OS 整合的排程器。</span><span class="sxs-lookup"><span data-stu-id="61575-136">Marathon is usually used as a scheduler integrated with DC/OS.</span></span> |
| <span data-ttu-id="61575-137">Google Kubernetes</span><span class="sxs-lookup"><span data-stu-id="61575-137">Google Kubernetes</span></span><br />![https://pbs.twimg.com/media/Bt\_pEfqCAAAiVyz.png](./media/image9.png) | <span data-ttu-id="61575-138">Kubernetes 是開放原始碼產品，可提供叢集基礎結構、容器排程到容器協調等功能。</span><span class="sxs-lookup"><span data-stu-id="61575-138">Kubernetes is an open-source product that provides functionality that ranges from cluster infrastructure and container scheduling to orchestrating capabilities.</span></span> <span data-ttu-id="61575-139">有了它，您可以自動化部署、 調整及應用程式容器的作業在叢集中的主機。</span><span class="sxs-lookup"><span data-stu-id="61575-139">With it, you can automate deployment, scaling, and operations of application containers across clusters of hosts.</span></span> <br /><br /> <span data-ttu-id="61575-140">Kubernetes 提供以容器為中心的基礎結構，讓您將應用程式容器分組為邏輯單元，以便於管理及探索。</span><span class="sxs-lookup"><span data-stu-id="61575-140">Kubernetes provides a container-centric infrastructure that groups application containers into logical units for easy management and discovery.</span></span> |
| <span data-ttu-id="61575-141">Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61575-141">Azure Service Fabric</span></span><br />![https://azure.microsoft.com/svghandler/service-fabric?width=600&height=315](./media/image10.png) | <span data-ttu-id="61575-142">[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) 是一種 Microsoft 微服務平台，可用來建置應用程式。</span><span class="sxs-lookup"><span data-stu-id="61575-142">[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) is a Microsoft microservices platform for building applications.</span></span> <span data-ttu-id="61575-143">它是一種服務的[協調器](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-resource-manager-introduction)，並可建立電腦叢集。</span><span class="sxs-lookup"><span data-stu-id="61575-143">It is an [orchestrator](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-resource-manager-introduction) of services and creates clusters of machines.</span></span> <span data-ttu-id="61575-144">根據預設，Service Fabric 部署並啟動服務以處理序，但是 Service Fabric 可以部署在 Docker 容器映像中的服務。</span><span class="sxs-lookup"><span data-stu-id="61575-144">By default, Service Fabric deploys and activates services as processes, but Service Fabric can deploy services in Docker container images.</span></span> <span data-ttu-id="61575-145">更重要的是，您可以與服務相同的應用程式中的容器中混合處理序中的服務。</span><span class="sxs-lookup"><span data-stu-id="61575-145">More important, you can mix services in processes with services in containers in the same application.</span></span> <br /><br /> <span data-ttu-id="61575-146">可能 2017 年 Service Fabric 支援部署服務 」 做為 Docker 容器的功能處於預覽狀態。</span><span class="sxs-lookup"><span data-stu-id="61575-146">As of May 2017, the feature of Service Fabric that supports deploying services as Docker containers is in preview state.</span></span> <br /><br /> <span data-ttu-id="61575-147">您可以開發在許多方面，使用從 Service Fabric 服務[程式設計模型的 Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework)部署[客體可執行檔](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-existing-app)以及容器。</span><span class="sxs-lookup"><span data-stu-id="61575-147">You can develop Service Fabric services in many ways, from using the [Service Fabric programming models](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework) to deploying [guest executables](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-existing-app) as well as containers.</span></span> <span data-ttu-id="61575-148">Service Fabric 支援規定的應用程式模型，像[可設定狀態服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction)和[Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction)。</span><span class="sxs-lookup"><span data-stu-id="61575-148">Service Fabric supports prescriptive application models like [stateful services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction) and [Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction).</span></span>

## <a name="using-container-based-orchestrators-in-azure"></a><span data-ttu-id="61575-149">在 Azure 中使用容器型 orchestrators</span><span class="sxs-lookup"><span data-stu-id="61575-149">Using container-based orchestrators in Azure</span></span>

<span data-ttu-id="61575-150">許多雲端廠商提供 Docker 容器支援加上 Docker 叢集和協調流程的支援，包括 Azure、 Amazon EC2 容器服務和 Google 容器引擎。</span><span class="sxs-lookup"><span data-stu-id="61575-150">Several cloud vendors offer Docker containers support plus Docker clusters and orchestration support, including Azure, Amazon EC2 Container Service, and Google Container Engine.</span></span> <span data-ttu-id="61575-151">Azure 提供的 Docker 叢集和 orchestrator 支援透過 Azure 容器服務下, 一節中所述。</span><span class="sxs-lookup"><span data-stu-id="61575-151">Azure provides Docker cluster and orchestrator support through Azure Container Service, as explained in the next section.</span></span>

<span data-ttu-id="61575-152">另一個選擇是使用 Azure Service Fabric 也支援根據 Linux 與 Windows 容器的 Docker。</span><span class="sxs-lookup"><span data-stu-id="61575-152">Another choice is to use Azure Service Fabric, which also supports Docker based on Linux and Windows Containers.</span></span> <span data-ttu-id="61575-153">Service Fabric 執行 Azure 或任何其他雲端上如[內部](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-anywhere)。</span><span class="sxs-lookup"><span data-stu-id="61575-153">Service Fabric runs on Azure or any other cloud as well as [on-premises](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-anywhere).</span></span>

## <a name="using-azure-container-service"></a><span data-ttu-id="61575-154">使用 Azure Container Service</span><span class="sxs-lookup"><span data-stu-id="61575-154">Using Azure Container Service</span></span>

<span data-ttu-id="61575-155">Docker 叢集裝載了多部 Docker 主機，並將其公開為單一虛擬 Docker 主機，因此您可以部署多個容器到該叢集中。</span><span class="sxs-lookup"><span data-stu-id="61575-155">A Docker cluster pools multiple Docker hosts and exposes them as a single virtual Docker host, so you can deploy multiple containers into the cluster.</span></span> <span data-ttu-id="61575-156">叢集會處理所有複雜的管理配管例如延展性和健全狀況。</span><span class="sxs-lookup"><span data-stu-id="61575-156">The cluster will handle all the complex management plumbing such as scalability and health.</span></span> <span data-ttu-id="61575-157">圖 4-7 代表容器服務組成的應用程式的 Docker 叢集中的對應方式。</span><span class="sxs-lookup"><span data-stu-id="61575-157">Figure 4-7 represents how a Docker cluster for composed applications maps to Container Service.</span></span>

<span data-ttu-id="61575-158">容器服務可用來簡化建立、 設定及管理叢集的執行容器化應用程式已預先設定的 Vm。</span><span class="sxs-lookup"><span data-stu-id="61575-158">Container Service provides a way to simplify the creation, configuration, and management of a cluster of VMs that are preconfigured to run containerized applications.</span></span> <span data-ttu-id="61575-159">使用最佳化的組態的熱門的開放原始碼排程和協調流程工具，容器服務可讓您使用現有的技術或社群專業能力來部署和管理容器基礎大量且不斷主體上繪製Azure 中的應用程式。</span><span class="sxs-lookup"><span data-stu-id="61575-159">Using an optimized configuration of popular open-source scheduling and orchestration tools, Container Service gives you the ability to use your existing skills or draw on a large and growing body of community expertise to deploy and manage container-based applications in Azure.</span></span>

<span data-ttu-id="61575-160">容器服務進行最佳化熱門 Docker 群集的開放原始碼工具和技術的組態，特別針對 Azure。</span><span class="sxs-lookup"><span data-stu-id="61575-160">Container Service optimizes the configuration of popular Docker clustering open-source tools and technologies specifically for Azure.</span></span> <span data-ttu-id="61575-161">這樣的開放解決方案，可賦予您容器和應用程式組態的可攜性。</span><span class="sxs-lookup"><span data-stu-id="61575-161">You get an open solution that offers portability for both your containers and your application configuration.</span></span> <span data-ttu-id="61575-162">您只要選取主機大小和數目，其餘工作全都由協調器工具和 Container Service 處理。</span><span class="sxs-lookup"><span data-stu-id="61575-162">You select the size, the number of hosts, and the orchestrator tools, and Container Service handles everything else.</span></span>

<span data-ttu-id="61575-163">容器服務會確保您的應用程式容器可完整移植使用 Docker 映像。</span><span class="sxs-lookup"><span data-stu-id="61575-163">Container Service uses Docker images to ensure that your application containers are fully portable.</span></span> <span data-ttu-id="61575-164">它支援的開放原始碼的協調流程等 DC/OS、 Kubernetes，和 Docker Swarm 的平台的選擇，以確保這些應用程式可以擴充到數千、 數萬甚至數千張的容器。</span><span class="sxs-lookup"><span data-stu-id="61575-164">It supports your choice of open-source orchestration platforms like DC/OS, Kubernetes, and Docker Swarm to ensure that these applications can scale to thousands or even tens of thousands of containers.</span></span>

<span data-ttu-id="61575-165">Azure 容器服務時，您可以利用 Azure 的企業級功能仍然維持應用程式可攜性，包括協調流程層級。</span><span class="sxs-lookup"><span data-stu-id="61575-165">With Azure Container Service, you can take advantage of the enterprise-grade features of Azure while still maintaining application portability, including at the orchestration layers.</span></span>

![](./media/image11.png)

<span data-ttu-id="61575-166">圖 4-7： 叢集 Azure 容器服務中的選項</span><span class="sxs-lookup"><span data-stu-id="61575-166">Figure 4-7: Clustering choices in Azure Container Service</span></span>

<span data-ttu-id="61575-167">所示圖 4-8，容器服務是只是為了部署 DC/OS、 Kubernetes，或 Docker Swarm，Azure 提供的基礎結構，但未實作任何其他 orchestrator。</span><span class="sxs-lookup"><span data-stu-id="61575-167">As shown in Figure 4-8, Container Service is simply the infrastructure provided by Azure in order to deploy DC/OS, Kubernetes, or Docker Swarm, but it does not implement any additional orchestrator.</span></span> <span data-ttu-id="61575-168">因此，容器服務是不 orchestrator，在這種情況。它是利用現有的開放原始碼 orchestrators 容器的基礎結構。</span><span class="sxs-lookup"><span data-stu-id="61575-168">Therefore, Container Service is not an orchestrator, as such; it is only an infrastructure that takes advantage of existing open-source orchestrators for containers.</span></span>

![](./media/image12.png)

<span data-ttu-id="61575-169">圖 4-8: Orchestrators 中容器服務</span><span class="sxs-lookup"><span data-stu-id="61575-169">Figure 4-8: Orchestrators in Container Service</span></span>

<span data-ttu-id="61575-170">使用方式的觀點而言，容器服務的目標是提供容器的裝載環境使用熱門的開放原始碼工具和技術。</span><span class="sxs-lookup"><span data-stu-id="61575-170">From a usage perspective, the goal of Container Service is to provide a container hosting environment by using popular open-source tools and technologies.</span></span> <span data-ttu-id="61575-171">為此，它會為您所選擇的協調器公開標準的 API 端點。</span><span class="sxs-lookup"><span data-stu-id="61575-171">To this end, it exposes the standard API endpoints for your chosen orchestrator.</span></span> <span data-ttu-id="61575-172">藉由使用這些端點，您可以使用能與這些端點通訊的任何軟體。</span><span class="sxs-lookup"><span data-stu-id="61575-172">By using these endpoints, you can use any software that can communicate to those endpoints.</span></span> <span data-ttu-id="61575-173">比方說，在 Docker Swarm 結束點的情況下，您可能會選擇使用 Docker CLI。</span><span class="sxs-lookup"><span data-stu-id="61575-173">For example, in the case of the Docker Swarm endpoint, you might choose to use the Docker CLI.</span></span> <span data-ttu-id="61575-174">若是 DC/OS，您可能會選擇使用 DC/OS CLI。</span><span class="sxs-lookup"><span data-stu-id="61575-174">For DC/OS, you might choose to use the DC/OS CLI.</span></span>

### <a name="getting-started-with-container-service"></a><span data-ttu-id="61575-175">開始使用容器服務</span><span class="sxs-lookup"><span data-stu-id="61575-175">Getting started with Container Service</span></span>

<span data-ttu-id="61575-176">若要開始使用容器服務，您部署使用 Azure Resource Manager 範本從 Azure 入口網站的容器服務叢集或[CLI](https://docs.microsoft.com/cli/azure/install-azure-cli)。</span><span class="sxs-lookup"><span data-stu-id="61575-176">To begin using Container Service, you deploy a Container Service cluster from the Azure portal by using an Azure Resource Manager template or the [CLI](https://docs.microsoft.com/cli/azure/install-azure-cli).</span></span> <span data-ttu-id="61575-177">可用的範本包括 [Docker Swarm](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-swarm)、[Kubernetes](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-kubernetes) 和 [DC/OS](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos)。</span><span class="sxs-lookup"><span data-stu-id="61575-177">Available templates include [Docker Swarm](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-swarm), [Kubernetes](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-kubernetes), and [DC/OS](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos).</span></span> <span data-ttu-id="61575-178">您可以修改要包含其他或進階的 Azure 組態的快速入門範本。</span><span class="sxs-lookup"><span data-stu-id="61575-178">You can modify the quickstart templates to include additional or advanced Azure configuration.</span></span>

<span data-ttu-id="61575-179">**進一歩** 若要深入了解部署的容器服務叢集中，Azure 網站上，閱讀[部署 Azure 容器服務叢集](https://docs.microsoft.com/azure/container-service/dcos-swarm/container-service-deployment)。</span><span class="sxs-lookup"><span data-stu-id="61575-179">**More info** To learn more about deploying a Container Service cluster, on the Azure website, read [Deploy an Azure Container Service cluster](https://docs.microsoft.com/azure/container-service/dcos-swarm/container-service-deployment).</span></span>

<span data-ttu-id="61575-180">隨附於 ACS 預設安裝的軟體均不會收取任何費用。</span><span class="sxs-lookup"><span data-stu-id="61575-180">There are no fees for any of the software installed by default as part of ACS.</span></span> <span data-ttu-id="61575-181">所有預設選項都是使用開放原始碼軟體來實作。</span><span class="sxs-lookup"><span data-stu-id="61575-181">All default options are implemented with open-source software.</span></span>

<span data-ttu-id="61575-182">目前使用標準的、 D、 DS、 G 及 GS 系列 Linux Vm 在 Azure 中容器服務。</span><span class="sxs-lookup"><span data-stu-id="61575-182">Container Service is currently available for Standard A, D, DS, G, and GS series Linux VMs in Azure.</span></span> <span data-ttu-id="61575-183">您只支付您選擇其他基礎基礎結構使用的資源，例如儲存體和網路功能以及計算執行個體。</span><span class="sxs-lookup"><span data-stu-id="61575-183">You are charged only for the compute instances you choose as well as the other underlying infrastructure resources consumed, such as storage and networking.</span></span> <span data-ttu-id="61575-184">沒有任何增量費用容器服務本身。</span><span class="sxs-lookup"><span data-stu-id="61575-184">There are no incremental charges for Container Service itself.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="61575-185">其他資源</span><span class="sxs-lookup"><span data-stu-id="61575-185">Additional resources</span></span>

<span data-ttu-id="61575-186">以下是您可以在此找到其他資訊的位置：</span><span class="sxs-lookup"><span data-stu-id="61575-186">Following are locations where you can find additional information:</span></span>

-   <span data-ttu-id="61575-187">裝載容器服務方案的 Docker 容器簡介：</span><span class="sxs-lookup"><span data-stu-id="61575-187">Introduction to Docker container hosting solutions with Container Service:</span></span>  
    https://docs.microsoft.com/azure/container-service/kubernetes/container-service-intro-kubernetes>

-   <span data-ttu-id="61575-188">Docker 群集概觀：</span><span class="sxs-lookup"><span data-stu-id="61575-188">Docker Swarm overview:</span></span>  
    <https://docs.docker.com/swarm/overview/>

-   <span data-ttu-id="61575-189">群集模式概觀：</span><span class="sxs-lookup"><span data-stu-id="61575-189">Swarm mode overview:</span></span>  
    <https://docs.docker.com/engine/swarm/>

-   <span data-ttu-id="61575-190">Mesosphere DC/OS 概觀：</span><span class="sxs-lookup"><span data-stu-id="61575-190">Mesosphere DC/OS Overview:</span></span>    
    <https://docs.mesosphere.com/1.7/overview/>

-   <span data-ttu-id="61575-191">Kubernetes （官方站台）：</span><span class="sxs-lookup"><span data-stu-id="61575-191">Kubernetes (the official site):</span></span>  
    <https://kubernetes.io/>

## <a name="using-service-fabric"></a><span data-ttu-id="61575-192">使用 Service Fabric</span><span class="sxs-lookup"><span data-stu-id="61575-192">Using Service Fabric</span></span>

<span data-ttu-id="61575-193">Service Fabric 會發生從傳遞給傳遞服務的 「 方塊 」 產品，已通常龐大樣式中，從 Microsoft 的轉換。</span><span class="sxs-lookup"><span data-stu-id="61575-193">Service Fabric arose from Microsoft's transition from delivering "box" products, which were typically monolithic in style, to delivering services.</span></span> <span data-ttu-id="61575-194">建立及操作大型小數位數，例如 Azure SQL Database、 Azure 文件 DB、 Azure 服務匯流排、 或 Cortana 的後端中，在服務的經驗形狀 Service Fabric。</span><span class="sxs-lookup"><span data-stu-id="61575-194">The experience of building and operating large services at scale, such as Azure SQL Database, Azure Document DB, Azure Service Bus, or Cortana's Backend, shaped Service Fabric.</span></span> <span data-ttu-id="61575-195">越來越多的服務採用與時俱進的平台。</span><span class="sxs-lookup"><span data-stu-id="61575-195">The platform evolved over time as more and more services adopted it.</span></span> <span data-ttu-id="61575-196">重要的是，Service Fabric 不僅必須能在 Azure 中執行，還必須能在獨立的 Windows 伺服器部署中執行。</span><span class="sxs-lookup"><span data-stu-id="61575-196">Importantly, Service Fabric had to run not only in Azure but also in standalone Windows Server deployments.</span></span>

<span data-ttu-id="61575-197">Service Fabric 的目的是解決建置及執行服務，讓小組可以解決商務問題使用 microservices 的方式，有效率地使用基礎結構資源的困難的問題。</span><span class="sxs-lookup"><span data-stu-id="61575-197">The aim of Service Fabric is to solve the difficult problems of building and running a service and utilizing infrastructure resources efficiently so that teams can solve business problems using a microservices approach.</span></span>

<span data-ttu-id="61575-198">Service Fabric 提供兩大區域，協助您建置使用微服務的應用程式：</span><span class="sxs-lookup"><span data-stu-id="61575-198">Service Fabric provides two broad areas to help you build applications that use a microservices approach:</span></span>

-   <span data-ttu-id="61575-199">平台，提供系統服務以部署、調整、升級、偵測及重新啟動失敗的服務、探索服務位置、管理狀態，以及監視健康狀態。</span><span class="sxs-lookup"><span data-stu-id="61575-199">A platform that provides system services to deploy, scale, upgrade, detect, and restart failed services, discover service location, manage state, and monitor health.</span></span> <span data-ttu-id="61575-200">這些系統服務作用中提供的許多 microservices 先前所述的特性。</span><span class="sxs-lookup"><span data-stu-id="61575-200">These system services in effect provide many of the characteristics of microservices described previously.</span></span>

-   <span data-ttu-id="61575-201">程式設計 API 或架構，可協助您將應用程式建置為微服務：[可靠的執行者與可靠的服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework)。</span><span class="sxs-lookup"><span data-stu-id="61575-201">Programming APIs, or frameworks, to help you build applications as microservices: [reliable actors and reliable services](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework).</span></span> <span data-ttu-id="61575-202">當然，您可以選擇任何程式碼來建置您的微服務，但是這些 API 能讓工作更簡單，與平台深入整合。</span><span class="sxs-lookup"><span data-stu-id="61575-202">Of course, you can choose any code to build your microservice, but these APIs make the job more straightforward, and they integrate with the platform at a deeper level.</span></span> <span data-ttu-id="61575-203">如此一來，您就可以取得健康狀態和診斷資訊，或者可以利用穩定的狀態管理。</span><span class="sxs-lookup"><span data-stu-id="61575-203">This way you can get health and diagnostics information, or you can take advantage of reliable state management.</span></span>

<span data-ttu-id="61575-204">Service Fabric 不在乎您用什麼方法來建置服務，所以您可以使用任何技術。</span><span class="sxs-lookup"><span data-stu-id="61575-204">Service Fabric is agnostic with respect to how you build your service, and you can use any technology.</span></span> <span data-ttu-id="61575-205">不過，它會提供內建的程式設計 API，讓您更輕鬆地建置微服務。</span><span class="sxs-lookup"><span data-stu-id="61575-205">However, it provides built-in programming APIs that make it easier to build microservices.</span></span>

<span data-ttu-id="61575-206">圖 4 至 9 示範如何建立和執行 microservices 服務網狀架構中，以簡單的程序或 Docker 容器。</span><span class="sxs-lookup"><span data-stu-id="61575-206">Figure 4-9 demonstrates how you can create and run microservices in Service Fabric either as simple processes or as Docker containers.</span></span> <span data-ttu-id="61575-207">它也可以將容器型微服務與程序型微服務混合在相同的 Service Fabric 叢集中。</span><span class="sxs-lookup"><span data-stu-id="61575-207">It is also possible to mix container-based microservices with process-based microservices within the same Service Fabric cluster.</span></span>

![](./media/image13.png)

<span data-ttu-id="61575-208">圖 4-9： 部署 microservices，做為處理序，或做為 Azure Service Fabric 中的容器</span><span class="sxs-lookup"><span data-stu-id="61575-208">Figure 4-9: Deploying microservices as processes or as containers in Azure Service Fabric</span></span>

<span data-ttu-id="61575-209">Service Fabric 叢集基礎 Linux 和 Windows 主機上可以執行 Docker Linux 容器和 Windows 容器。</span><span class="sxs-lookup"><span data-stu-id="61575-209">Service Fabric clusters based on Linux and Windows hosts can run Docker Linux containers and Windows Containers.</span></span>

<span data-ttu-id="61575-210">**進一歩** 有關最新 Service Fabric 中的容器支援 Azure 網站上，閱讀[Service Fabric 和容器](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview)。</span><span class="sxs-lookup"><span data-stu-id="61575-210">**More info** For up-to-date information about containers support in Service Fabric, on the Azure website, read [Service Fabric and containers](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview).</span></span>

<span data-ttu-id="61575-211">Service Fabric 是與您可以定義的實體實作於不同邏輯架構 （商務 microservices 或繫結的內容） 的平台的良好範例。</span><span class="sxs-lookup"><span data-stu-id="61575-211">Service Fabric is a good example of a platform with which you can define a different logical architecture (business microservices or Bounded Contexts) than the physical implementation.</span></span> <span data-ttu-id="61575-212">例如，如果您實作[Stateful Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction)中[Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview)下, 一節中引進的 「[無狀態與可設定狀態 microservices](#stateless-versus-stateful-microservices)，「 您有商務微服務概念與多個實體的服務。</span><span class="sxs-lookup"><span data-stu-id="61575-212">For example, if you implement [Stateful Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction) in [Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview), which are introduced in the next section, "[Stateless versus stateful microservices](#stateless-versus-stateful-microservices)," you have a business microservice concept with multiple physical services.</span></span>

<span data-ttu-id="61575-213">圖 4-10 和商務邏輯/微服務的觀點而言，實作服務網狀架構可設定狀態 Reliable Service 時考慮中所示，您通常必須實作兩個服務層。</span><span class="sxs-lookup"><span data-stu-id="61575-213">As shown in Figure 4-10, and thinking from a logical/business microservice perspective, when implementing a Service Fabric Stateful Reliable Service, you usually will need to implement two tiers of services.</span></span> <span data-ttu-id="61575-214">第一個是後端可設定狀態可靠服務，用來處理多個資料分割。</span><span class="sxs-lookup"><span data-stu-id="61575-214">The first is the back-end stateful reliable service, which handles multiple partitions.</span></span> <span data-ttu-id="61575-215">第二項是前端服務，或稱閘道服務，負責跨多個分割或具狀態服務執行個體的路由及資料彙總。</span><span class="sxs-lookup"><span data-stu-id="61575-215">The second is the front-end service, or Gateway service, in charge of routing and data aggregation across multiple partitions or stateful service instances.</span></span> <span data-ttu-id="61575-216">閘道服務也會處理用戶端通訊重試迴圈存取後端服務搭配使用以 Service Fabric[反向 proxy](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy)。</span><span class="sxs-lookup"><span data-stu-id="61575-216">That Gateway service also handles client-side communication with retry loops accessing the back-end service used in conjunction with the Service Fabric [reverse proxy](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy).</span></span>

![](./media/image14.png)

<span data-ttu-id="61575-217">圖 4-10： 商務微服務與 Service Fabric 的數個可設定狀態，而且無狀態服務</span><span class="sxs-lookup"><span data-stu-id="61575-217">Figure 4-10: Business microservice with several stateful and stateless services in Service Fabric</span></span>

<span data-ttu-id="61575-218">在任何情況下，當您使用 Service Fabric 具狀態可靠服務時，您也會有邏輯或商務微服務 (繫結的內容)，它通常是由多項實體服務組成。</span><span class="sxs-lookup"><span data-stu-id="61575-218">In any case, when you use Service Fabric Stateful Reliable Services, you also have a logical or business microservice (Bounded Context) that is usually composed of multiple physical services.</span></span> <span data-ttu-id="61575-219">其中的閘道服務和服務磁碟分割的每個無法實作為 ASP.NET Web API 服務，如圖 4-10 所示。</span><span class="sxs-lookup"><span data-stu-id="61575-219">Each of them, the Gateway service, and Partition service could be implemented as ASP.NET Web API services, as shown in Figure 4-10.</span></span>

<span data-ttu-id="61575-220">在 Service Fabric 中，您可以分組服務，並將這些服務群組部署為 [Service Fabric 應用程式](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-model)，這是協調器或叢集的封裝和部署單位。</span><span class="sxs-lookup"><span data-stu-id="61575-220">In Service Fabric, you can group and deploy groups of services as a [Service Fabric Application](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-model), which is the unit of packaging and deployment for the orchestrator or cluster.</span></span> <span data-ttu-id="61575-221">因此，Service Fabric 應用程式無法對應到此自發的商務和邏輯的微服務界限或繫結的內容，以及。</span><span class="sxs-lookup"><span data-stu-id="61575-221">Therefore, the Service Fabric Application could be mapped to this autonomous business and logical microservice boundary or Bounded Context, as well.</span></span>

### <a name="service-fabric-and-containers"></a><span data-ttu-id="61575-222">Service Fabric 和容器</span><span class="sxs-lookup"><span data-stu-id="61575-222">Service Fabric and containers</span></span>

<span data-ttu-id="61575-223">關於 Service Fabric 中的容器，您也可以部署 Service Fabric 叢集內的容器映像中的服務。</span><span class="sxs-lookup"><span data-stu-id="61575-223">With regard to containers in Service Fabric, you also can deploy services in container images within a Service Fabric cluster.</span></span> <span data-ttu-id="61575-224">圖 4-11 說明，大部分的將只有一個容器，每個服務的時間。</span><span class="sxs-lookup"><span data-stu-id="61575-224">Figure 4-11 illustrates that most of the time there will be only one container per service.</span></span>

![](./media/image15.png)

<span data-ttu-id="61575-225">圖 4-11： 商務微服務與服務的網狀架構中的數個服務 （容器）</span><span class="sxs-lookup"><span data-stu-id="61575-225">Figure 4-11: Business microservice with several services (containers) in Service Fabric</span></span>

<span data-ttu-id="61575-226">不過，也是服務的服務網狀架構中可能有所謂的 「 sidecar"容器 （必須為邏輯的一部分一起部署的兩個容器）。</span><span class="sxs-lookup"><span data-stu-id="61575-226">However, so-called "sidecar" containers (two containers that must be deployed together as part of a logical service) are also possible in Service Fabric.</span></span> <span data-ttu-id="61575-227">重點是商務微服務是圍繞數個緊密結合項目的邏輯界限。</span><span class="sxs-lookup"><span data-stu-id="61575-227">The important thing is that a business microservice is the logical boundary around several cohesive elements.</span></span> <span data-ttu-id="61575-228">在許多情況下，它可能會使用單一資料模型時，單一服務，但在某些情況下，您可能會有實體數個服務，以及。</span><span class="sxs-lookup"><span data-stu-id="61575-228">In many cases, it might be a single service with a single data model, but in some other cases you might have physical several services, as well.</span></span>

<span data-ttu-id="61575-229">為準，此撰寫 (年 4 月 2017)，在 Service Fabric 您無法部署容器 SF 可靠可設定狀態服務，您可以部署客體容器、 無狀態服務或在容器中的動作項目服務。</span><span class="sxs-lookup"><span data-stu-id="61575-229">As of this writing (April 2017), in Service Fabric you cannot deploy SF Reliable Stateful Services on containers—you can deploy only guest containers, stateless services, or actor services in containers.</span></span> <span data-ttu-id="61575-230">但請注意，您可以混合中相同的 Service Fabric 應用程式中的容器處理序中的服務和服務如圖 4-12 版中所示。</span><span class="sxs-lookup"><span data-stu-id="61575-230">But note that you can mix services in processes and services in containers in the same Service Fabric application, as shown in Figure 4-12.</span></span>

![](./media/image16.png)

<span data-ttu-id="61575-231">圖 4-12： 商務微服務對應至容器和可設定狀態服務的 Service Fabric 應用程式</span><span class="sxs-lookup"><span data-stu-id="61575-231">Figure 4-12: Business microservice mapped to a Service Fabric application with containers and stateful services</span></span>

<span data-ttu-id="61575-232">也不同，視您使用的 Docker 容器在 Linux 或 Windows 容器支援。</span><span class="sxs-lookup"><span data-stu-id="61575-232">Support is also different depending on whether you are using Docker containers on Linux or Windows Containers.</span></span> <span data-ttu-id="61575-233">Service Fabric 中容器的支援將擴充在即將發行版本。</span><span class="sxs-lookup"><span data-stu-id="61575-233">Support for containers in Service Fabric will be expanding in upcoming releases.</span></span> <span data-ttu-id="61575-234">如需在 Azure 網站中，Service Fabric 容器支援的最新消息讀取[Service Fabric 和容器](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview)。</span><span class="sxs-lookup"><span data-stu-id="61575-234">For up-to-date news about container support in Service Fabric, on the Azure website, read [Service Fabric and containers](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview).</span></span>

## <a name="stateless-versus-stateful-microservices"></a><span data-ttu-id="61575-235">無狀態微服務與具狀態微服務</span><span class="sxs-lookup"><span data-stu-id="61575-235">Stateless versus stateful microservices</span></span>

<span data-ttu-id="61575-236">如前所述，每項微服務 (邏輯繫結的內容) 都必須擁有其網域模型 (資料和邏輯)。</span><span class="sxs-lookup"><span data-stu-id="61575-236">As mentioned earlier, each microservice (logical Bounded Context) must own its domain model (data and logic).</span></span> <span data-ttu-id="61575-237">在無狀態 microservices，資料庫將會是外部，採用關聯式的選項，例如 SQL Server 或如 MongoDB 或 Azure DocumentDB 的 NoSQL 選項。</span><span class="sxs-lookup"><span data-stu-id="61575-237">In the case of stateless microservices, the databases will be external, employing relational options like SQL Server, or NoSQL options like MongoDB or Azure DocumentDB.</span></span>

<span data-ttu-id="61575-238">但是，服務本身也可以是可設定狀態，這表示資料所在的微服務。</span><span class="sxs-lookup"><span data-stu-id="61575-238">But the services themselves also can be stateful, which means that the data resides within the microservice.</span></span> <span data-ttu-id="61575-239">這項資料可能存在不只是在相同伺服器上，但在微服務處理序，在記憶體中，內保存在磁碟機上和複寫到其他節點。</span><span class="sxs-lookup"><span data-stu-id="61575-239">This data might exist not just on the same server, but within the microservice process, in memory, and persisted on drives and replicated to other nodes.</span></span> <span data-ttu-id="61575-240">圖 4-13 顯示不同的方法。</span><span class="sxs-lookup"><span data-stu-id="61575-240">Figure 4-13 shows the different approaches.</span></span>

![](./media/image17.png)

<span data-ttu-id="61575-241">圖 4-13： 無狀態與可設定狀態的 microservices</span><span class="sxs-lookup"><span data-stu-id="61575-241">Figure 4-13: Stateless versus stateful microservices</span></span>

<span data-ttu-id="61575-242">無狀態的方法是完全有效，而且您更輕鬆地實作可設定狀態的 microservices 比，因為方法是類似於傳統和已知的模式。</span><span class="sxs-lookup"><span data-stu-id="61575-242">A stateless approach is perfectly valid and is easier to implement than stateful microservices because the approach is similar to traditional and well-known patterns.</span></span> <span data-ttu-id="61575-243">但無狀態微服務會強制程序及資料來源之間的延遲。</span><span class="sxs-lookup"><span data-stu-id="61575-243">But stateless microservices impose latency between the process and data sources.</span></span> <span data-ttu-id="61575-244">當您嘗試使用額外的快取和佇列改善效能時，它們也牽涉到更多移動的片段。</span><span class="sxs-lookup"><span data-stu-id="61575-244">They also involve more moving pieces when you are trying to improve performance with additional cache and queues.</span></span> <span data-ttu-id="61575-245">您最後會得到有太多層的複雜架構。</span><span class="sxs-lookup"><span data-stu-id="61575-245">The result is that you can end up with complex architectures that have too many tiers.</span></span>

<span data-ttu-id="61575-246">相反地，[可設定狀態的 microservices](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis)可以進階案例中，excel，因為沒有任何網域邏輯和資料之間的延遲。</span><span class="sxs-lookup"><span data-stu-id="61575-246">In contrast, [stateful microservices](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis) can excel in advanced scenarios because there is no latency between the domain logic and data.</span></span> <span data-ttu-id="61575-247">大量的資料處理，遊戲的後端，資料庫服務，以及其他所有受益於可設定狀態服務，可以提供更快速存取本機狀態的低延遲案例。</span><span class="sxs-lookup"><span data-stu-id="61575-247">Heavy data processing, gaming back-ends, databases as a service, and other low-latency scenarios all benefit from stateful services, which provide local state for faster access.</span></span>

<span data-ttu-id="61575-248">無狀態與具狀態服務是互補的。</span><span class="sxs-lookup"><span data-stu-id="61575-248">Stateless and stateful services are complementary.</span></span> <span data-ttu-id="61575-249">比方說，可設定狀態的服務可能會分割成多個資料分割。</span><span class="sxs-lookup"><span data-stu-id="61575-249">For instance, a stateful service could be split into multiple partitions.</span></span> <span data-ttu-id="61575-250">若要存取這些分割，您可能需要作為閘道服務的無狀態服務，它知道如何根據分割索引鍵處理每個分割。</span><span class="sxs-lookup"><span data-stu-id="61575-250">To access those partitions, you might need a stateless service acting as a gateway service that knows how to address each partition based on partition keys.</span></span>

<span data-ttu-id="61575-251">具狀態服務確實有缺點。</span><span class="sxs-lookup"><span data-stu-id="61575-251">Stateful services do have drawbacks.</span></span> <span data-ttu-id="61575-252">強制複雜性，讓向外延展的層的級。本來通常由外部資料庫系統實作的工作功能，例如跨具狀態微服務和資料分割的資料複寫，必須予以處理。</span><span class="sxs-lookup"><span data-stu-id="61575-252">They impose a level of complexity that allows them to scale out. Functionality that would usually be implemented by external database systems must be addressed for tasks such as data replication across stateful microservices and data partitioning.</span></span> <span data-ttu-id="61575-253">不過，這是其中一個區域 orchestrator 想在哪裡[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-platform-architecture)與其[可設定狀態的可靠服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis)最有助於 — 藉由簡化開發和生命週期的可設定狀態使用 microservices[可靠的服務應用程式開發介面](https://docs.microsoft.com/azure/service-fabric/service-fabric-work-with-reliable-collections)和[Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction)。</span><span class="sxs-lookup"><span data-stu-id="61575-253">However, this is one of the areas where an orchestrator like [Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-platform-architecture) with its [stateful reliable services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis) can help the most—by simplifying the development and lifecycle of stateful microservices using the [Reliable Services API](https://docs.microsoft.com/azure/service-fabric/service-fabric-work-with-reliable-collections) and [Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction).</span></span>

<span data-ttu-id="61575-254">其他允許具狀態服務、支援執行者模式，以及改善商務邏輯和資料間容錯和延遲的微服務架構是 Microsoft [Orleans](https://github.com/dotnet/orleans)，來自 Microsoft 研究，以及 [Akka.NET](https://getakka.net/)。</span><span class="sxs-lookup"><span data-stu-id="61575-254">Other microservice frameworks that allow stateful services, that support the Actor pattern, and that improve fault tolerance and latency between business logic and data are Microsoft [Orleans](https://github.com/dotnet/orleans), from Microsoft Research, and [Akka.NET](https://getakka.net/).</span></span> <span data-ttu-id="61575-255">這兩種架構目前都在改善它們對 Docker 的支援。</span><span class="sxs-lookup"><span data-stu-id="61575-255">Both frameworks are currently improving their support for Docker.</span></span>

<span data-ttu-id="61575-256">請注意，Docker 容器本身無狀態。</span><span class="sxs-lookup"><span data-stu-id="61575-256">Note that Docker containers are themselves stateless.</span></span> <span data-ttu-id="61575-257">如果您想要實作具狀態服務，您需要前述的規範及較高層級架構之一。</span><span class="sxs-lookup"><span data-stu-id="61575-257">If you want to implement a stateful service, you need one of the additional prescriptive and higher-level frameworks noted earlier.</span></span> <span data-ttu-id="61575-258">不過，撰寫本文時，可設定狀態的服務，Service Fabric 中不支援做為容器，只能當做一般 microservices。</span><span class="sxs-lookup"><span data-stu-id="61575-258">However, as of this writing, stateful services in Service Fabric are not supported as containers, only as plain microservices.</span></span> <span data-ttu-id="61575-259">在容器中的可靠的服務支援可在即將推出的 Service Fabric 版本中。</span><span class="sxs-lookup"><span data-stu-id="61575-259">Reliable services support in containers will be available in upcoming versions of Service Fabric.</span></span>


>[!div class="step-by-step"]
<span data-ttu-id="61575-260">[上一頁](soa-applications.md)
[下一頁](docker-apps-development-environment.md)</span><span class="sxs-lookup"><span data-stu-id="61575-260">[Previous](soa-applications.md)
[Next](docker-apps-development-environment.md)</span></span>
