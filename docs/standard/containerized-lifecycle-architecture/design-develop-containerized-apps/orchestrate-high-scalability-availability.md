---
title: 協調微服務和多容器應用程式的高延展性和可用性
description: Microsoft 平台和工具的容器化 Docker 應用程式生命週期
author: CESARDELATORRE
ms.author: wiwagn
ms.date: 05/19/2017
ms.openlocfilehash: fa64562808bba9c9dea5a5eedc367af7decf83b7
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/10/2018
ms.locfileid: "53126896"
---
# <a name="orchestrating-microservices-and-multicontainer-applications-for-high-scalability-and-availability"></a><span data-ttu-id="078ca-103">協調微服務和多容器應用程式的高延展性和可用性</span><span class="sxs-lookup"><span data-stu-id="078ca-103">Orchestrating microservices and multicontainer applications for high scalability and availability</span></span>

<span data-ttu-id="078ca-104">如果您的應用程式是以微服務為基礎或分散於多個容器，您就必須為適用於生產環境的應用程式使用協調器。</span><span class="sxs-lookup"><span data-stu-id="078ca-104">Using orchestrators for production-ready applications is essential if your application is based on microservices or simply split across multiple containers.</span></span> <span data-ttu-id="078ca-105">如之前所介紹，以微服務為基礎的方法中，每個微服務都擁有自己的模型和資料，因此從開發和部署的角度來看，它是非常自主的。</span><span class="sxs-lookup"><span data-stu-id="078ca-105">As introduced previously, in a microservice-based approach, each microservice owns its model and data so that it will be autonomous from a development and deployment point of view.</span></span> <span data-ttu-id="078ca-106">但是，即使您擁有更傳統的應用程式所組成的多個服務 （例如 SOA)，您也會有多個容器或服務來組成單一商務應用程式需要部署為分散式系統。</span><span class="sxs-lookup"><span data-stu-id="078ca-106">But even if you have a more traditional application that is composed of multiple services (like SOA), you also will have multiple containers or services comprising a single business application that need to be deployed as a distributed system.</span></span> <span data-ttu-id="078ca-107">這類系統相當複雜，向外延展和管理;因此，您一定需要協調器如果您想要有一個生產環境且可延展的多容器應用程式。</span><span class="sxs-lookup"><span data-stu-id="078ca-107">These kinds of systems are complex to scale out and manage; therefore, you absolutely need an orchestrator if you want to have a production-ready and scalable multicontainer application.</span></span>

<span data-ttu-id="078ca-108">圖 4-6 說明叢集中的多個微服務 （容器） 所組成的應用程式的部署。</span><span class="sxs-lookup"><span data-stu-id="078ca-108">Figure 4-6 illustrates deployment into a cluster of an application composed of multiple microservices (containers).</span></span>

![](./media/image6.png)

<span data-ttu-id="078ca-109">圖 4-6:容器叢集</span><span class="sxs-lookup"><span data-stu-id="078ca-109">Figure 4-6: A cluster of containers</span></span>

<span data-ttu-id="078ca-110">看起來像邏輯方法。</span><span class="sxs-lookup"><span data-stu-id="078ca-110">It looks like a logical approach.</span></span> <span data-ttu-id="078ca-111">但如何您處理負載平衡、 路由及協調這些組成應用程式嗎？</span><span class="sxs-lookup"><span data-stu-id="078ca-111">But how are you handling load balancing, routing, and orchestrating these composed applications?</span></span>

<span data-ttu-id="078ca-112">Docker 命令列介面 (CLI) 符合的需求管理一部的主機上的一個容器，但管理更複雜的分散式應用程式的多個主機上部署的多個容器時，它是簡短。</span><span class="sxs-lookup"><span data-stu-id="078ca-112">The Docker command-line interface (CLI) meets the needs of managing one container on one host, but it falls short when it comes to managing multiple containers deployed on multiple hosts for more complex distributed applications.</span></span> <span data-ttu-id="078ca-113">在大部分情況下，您需要的管理平台，可自動啟動容器、 暫止，或關閉它們需要時，及最好也能控制其存取資源，像是網路及資料的儲存體的方式。</span><span class="sxs-lookup"><span data-stu-id="078ca-113">In most cases, you need a management platform that will automatically start containers, suspend them, or shut them down when needed, and ideally also control how they access resources like the network and data storage.</span></span>

<span data-ttu-id="078ca-114">如果您不只要管理個別容器或組成非常簡單的應用程式，而是要進展到含有微服務的大型企業應用程式，就必須採用協調流程和叢集平台。</span><span class="sxs-lookup"><span data-stu-id="078ca-114">To go beyond the management of individual containers or very simple composed apps and move toward larger enterprise applications with microservices, you must turn to orchestration and clustering platforms.</span></span>

<span data-ttu-id="078ca-115">從架構設計和開發觀點來看，如果您是建置大型的企業，微服務架構應用程式，務必了解下列平台和產品可支援進階的案例：</span><span class="sxs-lookup"><span data-stu-id="078ca-115">From an architecture and development point of view, if you are building large, enterprise, microservices-based, applications, it is important to understand the following platforms and products that support advanced scenarios:</span></span>

-   <span data-ttu-id="078ca-116">**叢集和協調器** 當您需要調整-out 跨許多 Docker 主機的應用程式，例如大型微服務型應用程式中，務必要能夠管理所有這些主機與由單一叢集抽象化基礎平台的複雜性。</span><span class="sxs-lookup"><span data-stu-id="078ca-116">**Clusters and orchestrators** When you need to scale-out applications across many Docker hosts, such as with a large microservices-based application, it is critical to be able to manage all of those hosts as a single cluster by abstracting the complexity of the underlying platform.</span></span> <span data-ttu-id="078ca-117">這就是容器叢集和協調器提供的內容。</span><span class="sxs-lookup"><span data-stu-id="078ca-117">That is what the container clusters and orchestrators provide.</span></span> <span data-ttu-id="078ca-118">Orchestrator 的例子是 Docker Swarm、 Mesosphere DC/OS、 Kubernetes （前三個可透過 Azure Container Service） 和 Azure Service Fabric。</span><span class="sxs-lookup"><span data-stu-id="078ca-118">Examples of orchestrators are Docker Swarm, Mesosphere DC/OS, Kubernetes (the first three available through Azure Container Service), and Azure Service Fabric.</span></span>

-   <span data-ttu-id="078ca-119">**排程器** *排程*表示要讓系統管理員啟動叢集中的容器，以便它們也提供使用者介面的功能。</span><span class="sxs-lookup"><span data-stu-id="078ca-119">**Schedulers** *Scheduling* means to have the capability for an administrator to launch containers in a cluster so that they also provide a user interface.</span></span> <span data-ttu-id="078ca-120">叢集排程器有下列職責： 有效率地使用叢集的資源、 設定使用者，以有效率地跨節點或主機，進行容器負載平衡所提供的條件約束及具容錯性，同時提供最高可用性。</span><span class="sxs-lookup"><span data-stu-id="078ca-120">A cluster scheduler has several responsibilities: to use the cluster's resources efficiently, to set the constraints provided by the user, to efficiently load-balance containers across nodes or hosts, and to be robust against errors while providing high availability.</span></span>

<span data-ttu-id="078ca-121">叢集與排程器的概念密切相關，因此不同廠商所提供的產品通常會兩組功能都提供。</span><span class="sxs-lookup"><span data-stu-id="078ca-121">The concepts of a cluster and a scheduler are closely related, so the products provided by different vendors often provide both sets of capabilities.</span></span> <span data-ttu-id="078ca-122">表 4-1 列出的最重要的平台和您的叢集和排程器的軟體選項。</span><span class="sxs-lookup"><span data-stu-id="078ca-122">Table 4-1 lists the most important platform and software choices you have for clusters and schedulers.</span></span> <span data-ttu-id="078ca-123">這些叢集通常都有提供這類 Azure 公用雲端。</span><span class="sxs-lookup"><span data-stu-id="078ca-123">These clusters are generally offered in public clouds like Azure.</span></span>

<span data-ttu-id="078ca-124">表 4-1:用於容器叢集、協調流程和排程的軟體平台</span><span class="sxs-lookup"><span data-stu-id="078ca-124">Table 4-1: Software platforms for container clustering, orchestration, and scheduling</span></span>

| <span data-ttu-id="078ca-125">Platform</span><span class="sxs-lookup"><span data-stu-id="078ca-125">Platform</span></span> | <span data-ttu-id="078ca-126">描述</span><span class="sxs-lookup"><span data-stu-id="078ca-126">Description</span></span> |
|---|---|
| <span data-ttu-id="078ca-127">Docker Swarm</span><span class="sxs-lookup"><span data-stu-id="078ca-127">Docker Swarm</span></span><br/> ![Docker Swarm 標誌](./media/image7.png) | <span data-ttu-id="078ca-129">Docker Swarm 可讓您能夠進行叢集與排程的 Docker 容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-129">Docker Swarm gives you the ability to cluster and schedule Docker containers.</span></span> <span data-ttu-id="078ca-130">使用 Swarm 時，您可以將 Docker 主機集區轉換成單一的虛擬 Docker 主機。</span><span class="sxs-lookup"><span data-stu-id="078ca-130">By using Swarm, you can turn a pool of Docker hosts into a single, virtual Docker host.</span></span> <span data-ttu-id="078ca-131">用戶端可以對 Swarm 提出 API 要求向主機，這表示，Swarm 可以輕鬆地針對應用程式擴充到多部主機的相同方式。</span><span class="sxs-lookup"><span data-stu-id="078ca-131">Clients can make API requests to Swarm in the same way that they do to hosts, meaning that Swarm makes it easy for applications to scale to multiple hosts.</span></span> <br /><br /> <span data-ttu-id="078ca-132">Docker Swarm 是 Docker 公司的產品。</span><span class="sxs-lookup"><span data-stu-id="078ca-132">Docker Swarm is a product from Docker, the company.</span></span> <br /><br /> <span data-ttu-id="078ca-133">Docker v1.12 或更新版本可以執行原生與內建的 Swarm 模式。</span><span class="sxs-lookup"><span data-stu-id="078ca-133">Docker v1.12 or later can run native and built-in Swarm Mode.</span></span> |
| <span data-ttu-id="078ca-134">Mesosphere DC/OS</span><span class="sxs-lookup"><span data-stu-id="078ca-134">Mesosphere DC/OS</span></span><br/>![Mesosphere DC/OS 標誌](./media/image8.png) |  <span data-ttu-id="078ca-136">Mesosphere Enterprise DC/OS (以 Apache Mesos 為基礎) 是一種適用於生產環境的平台，可執行容器和分散式應用程式。</span><span class="sxs-lookup"><span data-stu-id="078ca-136">Mesosphere Enterprise DC/OS (based on Apache Mesos) is a production-ready platform for running containers and distributed applications.</span></span> <br /><br /> <span data-ttu-id="078ca-137">DC/OS 的運作方式是將叢集中可用的資源集合簡化，讓這些資源可供建置其上的元件使用。</span><span class="sxs-lookup"><span data-stu-id="078ca-137">DC/OS works by abstracting a collection of the resources available in the cluster and making those resources available to components built on top of it.</span></span> <span data-ttu-id="078ca-138">Marathon 通常作為與 DC/OS 整合的排程器。</span><span class="sxs-lookup"><span data-stu-id="078ca-138">Marathon is usually used as a scheduler integrated with DC/OS.</span></span> |
| <span data-ttu-id="078ca-139">Google Kubernetes</span><span class="sxs-lookup"><span data-stu-id="078ca-139">Google Kubernetes</span></span><br />![Google Kubernetes 標誌](./media/image9.png) | <span data-ttu-id="078ca-141">Kubernetes 是開放原始碼產品，可提供叢集基礎結構、容器排程到容器協調等功能。</span><span class="sxs-lookup"><span data-stu-id="078ca-141">Kubernetes is an open-source product that provides functionality that ranges from cluster infrastructure and container scheduling to orchestrating capabilities.</span></span> <span data-ttu-id="078ca-142">有了它，您可以跨主機叢集自動化部署、 調整及應用程式容器的作業。</span><span class="sxs-lookup"><span data-stu-id="078ca-142">With it, you can automate deployment, scaling, and operations of application containers across clusters of hosts.</span></span> <br /><br /> <span data-ttu-id="078ca-143">Kubernetes 提供以容器為中心的基礎結構，讓您將應用程式容器分組為邏輯單元，以便於管理及探索。</span><span class="sxs-lookup"><span data-stu-id="078ca-143">Kubernetes provides a container-centric infrastructure that groups application containers into logical units for easy management and discovery.</span></span> |
| <span data-ttu-id="078ca-144">Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="078ca-144">Azure Service Fabric</span></span><br />![Azure Service Fabric 標誌](./media/image10.png) | <span data-ttu-id="078ca-146">[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) 是一種 Microsoft 微服務平台，可用來建置應用程式。</span><span class="sxs-lookup"><span data-stu-id="078ca-146">[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) is a Microsoft microservices platform for building applications.</span></span> <span data-ttu-id="078ca-147">它是一種服務的[協調器](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-resource-manager-introduction)，並可建立電腦叢集。</span><span class="sxs-lookup"><span data-stu-id="078ca-147">It is an [orchestrator](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-resource-manager-introduction) of services and creates clusters of machines.</span></span> <span data-ttu-id="078ca-148">根據預設，Service Fabric 部署和啟動這些服務做為處理序，但 Service Fabric 可以部署 Docker 容器映像中的服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-148">By default, Service Fabric deploys and activates services as processes, but Service Fabric can deploy services in Docker container images.</span></span> <span data-ttu-id="078ca-149">更重要的是，您可以在相同的應用程式中的容器中的服務與混合處理序中的服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-149">More important, you can mix services in processes with services in containers in the same application.</span></span> <br /><br /> <span data-ttu-id="078ca-150">截至 2017 年，Service fabric 可支援做為 Docker 容器部署的服務功能處於預覽狀態。</span><span class="sxs-lookup"><span data-stu-id="078ca-150">As of May 2017, the feature of Service Fabric that supports deploying services as Docker containers is in preview state.</span></span> <br /><br /> <span data-ttu-id="078ca-151">您可以開發在許多方面，使用 Service Fabric 服務[Service Fabric 程式設計模型](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework)部署[來賓可執行檔](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-existing-app)以及容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-151">You can develop Service Fabric services in many ways, from using the [Service Fabric programming models](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework) to deploying [guest executables](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-existing-app) as well as containers.</span></span> <span data-ttu-id="078ca-152">Service Fabric 支援之類的規範的應用程式模型[具狀態服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction)並[Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction)。</span><span class="sxs-lookup"><span data-stu-id="078ca-152">Service Fabric supports prescriptive application models like [stateful services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction) and [Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction).</span></span>

## <a name="using-container-based-orchestrators-in-azure"></a><span data-ttu-id="078ca-153">在 Azure 中使用容器協調器</span><span class="sxs-lookup"><span data-stu-id="078ca-153">Using container-based orchestrators in Azure</span></span>

<span data-ttu-id="078ca-154">許多雲端廠商都提供支援 Docker 容器以及 Docker 叢集和協調流程的支援，包括 Azure、 Amazon EC2 Container Service 和 Google Container Engine。</span><span class="sxs-lookup"><span data-stu-id="078ca-154">Several cloud vendors offer Docker containers support plus Docker clusters and orchestration support, including Azure, Amazon EC2 Container Service, and Google Container Engine.</span></span> <span data-ttu-id="078ca-155">下一節中所述，azure 將提供 Docker 叢集和協調器支援透過 Azure Container Service。</span><span class="sxs-lookup"><span data-stu-id="078ca-155">Azure provides Docker cluster and orchestrator support through Azure Container Service, as explained in the next section.</span></span>

<span data-ttu-id="078ca-156">另一個選擇是使用 Azure Service Fabric 也支援 Docker Linux 和 Windows 容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-156">Another choice is to use Azure Service Fabric, which also supports Docker based on Linux and Windows Containers.</span></span> <span data-ttu-id="078ca-157">Service Fabric 會在 Azure 或任何其他雲端上執行，以及[內部](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-anywhere)。</span><span class="sxs-lookup"><span data-stu-id="078ca-157">Service Fabric runs on Azure or any other cloud as well as [on-premises](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-anywhere).</span></span>

## <a name="using-azure-container-service"></a><span data-ttu-id="078ca-158">使用 Azure Container Service</span><span class="sxs-lookup"><span data-stu-id="078ca-158">Using Azure Container Service</span></span>

<span data-ttu-id="078ca-159">Docker 叢集裝載了多部 Docker 主機，並將其公開為單一虛擬 Docker 主機，因此您可以部署多個容器到該叢集中。</span><span class="sxs-lookup"><span data-stu-id="078ca-159">A Docker cluster pools multiple Docker hosts and exposes them as a single virtual Docker host, so you can deploy multiple containers into the cluster.</span></span> <span data-ttu-id="078ca-160">叢集會處理所有複雜的管理連接，像是延展性和健全狀況。</span><span class="sxs-lookup"><span data-stu-id="078ca-160">The cluster will handle all the complex management plumbing such as scalability and health.</span></span> <span data-ttu-id="078ca-161">圖 4-7 表示組成應用程式的 Docker 叢集如何對應到容器服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-161">Figure 4-7 represents how a Docker cluster for composed applications maps to Container Service.</span></span>

<span data-ttu-id="078ca-162">Container Service 提供簡化建立、 設定及管理預先設定為執行容器化應用程式的 Vm 叢集的方法。</span><span class="sxs-lookup"><span data-stu-id="078ca-162">Container Service provides a way to simplify the creation, configuration, and management of a cluster of VMs that are preconfigured to run containerized applications.</span></span> <span data-ttu-id="078ca-163">使用熱門的開放原始碼排程和協調流程工具的最佳化的組態，Container Service 可讓您能夠運用您現有的技能，或運用大量且不斷成長的社群專業知識，來部署和管理容器型主體在 Azure 中的應用程式。</span><span class="sxs-lookup"><span data-stu-id="078ca-163">Using an optimized configuration of popular open-source scheduling and orchestration tools, Container Service gives you the ability to use your existing skills or draw on a large and growing body of community expertise to deploy and manage container-based applications in Azure.</span></span>

<span data-ttu-id="078ca-164">Container Service 最佳化特別適用於 Azure 的熱門 Docker 叢集開放原始碼工具和技術設定。</span><span class="sxs-lookup"><span data-stu-id="078ca-164">Container Service optimizes the configuration of popular Docker clustering open-source tools and technologies specifically for Azure.</span></span> <span data-ttu-id="078ca-165">這樣的開放解決方案，可賦予您容器和應用程式組態的可攜性。</span><span class="sxs-lookup"><span data-stu-id="078ca-165">You get an open solution that offers portability for both your containers and your application configuration.</span></span> <span data-ttu-id="078ca-166">您只要選取主機大小和數目，其餘工作全都由協調器工具和 Container Service 處理。</span><span class="sxs-lookup"><span data-stu-id="078ca-166">You select the size, the number of hosts, and the orchestrator tools, and Container Service handles everything else.</span></span>

<span data-ttu-id="078ca-167">容器服務會使用 Docker 映像，以確保您的應用程式容器具有完全的可攜式特性。</span><span class="sxs-lookup"><span data-stu-id="078ca-167">Container Service uses Docker images to ensure that your application containers are fully portable.</span></span> <span data-ttu-id="078ca-168">它支援的開放原始碼協調流程平台，例如 DC/OS、 Kubernetes 和 Docker Swarm 的選擇，以確保這些應用程式可以擴充至數千或甚至數萬個容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-168">It supports your choice of open-source orchestration platforms like DC/OS, Kubernetes, and Docker Swarm to ensure that these applications can scale to thousands or even tens of thousands of containers.</span></span>

<span data-ttu-id="078ca-169">使用 Azure Container Service，您可以充分利用 Azure 的企業級功能，同時仍可保有應用程式可攜性，包括協調流程層。</span><span class="sxs-lookup"><span data-stu-id="078ca-169">With Azure Container Service, you can take advantage of the enterprise-grade features of Azure while still maintaining application portability, including at the orchestration layers.</span></span>

![](./media/image11.png)

<span data-ttu-id="078ca-170">圖 4-7:Azure Container Service 中的叢集選項</span><span class="sxs-lookup"><span data-stu-id="078ca-170">Figure 4-7: Clustering choices in Azure Container Service</span></span>

<span data-ttu-id="078ca-171">如所示的 圖 4-8，Container Service 是只是為了部署 DC/OS、 Kubernetes 或 Docker Swarm，Azure 所提供的基礎結構，但它不會實作任何其他協調器。</span><span class="sxs-lookup"><span data-stu-id="078ca-171">As shown in Figure 4-8, Container Service is simply the infrastructure provided by Azure in order to deploy DC/OS, Kubernetes, or Docker Swarm, but it does not implement any additional orchestrator.</span></span> <span data-ttu-id="078ca-172">因此，Container Service 是不協調器時，這類;它是利用現有的開放原始碼協調器適用於容器的基礎結構。</span><span class="sxs-lookup"><span data-stu-id="078ca-172">Therefore, Container Service is not an orchestrator, as such; it is only an infrastructure that takes advantage of existing open-source orchestrators for containers.</span></span>

![](./media/image12.png)

<span data-ttu-id="078ca-173">圖 4-8:在 Container Service 中的協調器</span><span class="sxs-lookup"><span data-stu-id="078ca-173">Figure 4-8: Orchestrators in Container Service</span></span>

<span data-ttu-id="078ca-174">使用方式的觀點而言，Container Service 的目標是提供容器裝載環境使用熱門的開放原始碼工具和技術。</span><span class="sxs-lookup"><span data-stu-id="078ca-174">From a usage perspective, the goal of Container Service is to provide a container hosting environment by using popular open-source tools and technologies.</span></span> <span data-ttu-id="078ca-175">為此，它會為您所選擇的協調器公開標準的 API 端點。</span><span class="sxs-lookup"><span data-stu-id="078ca-175">To this end, it exposes the standard API endpoints for your chosen orchestrator.</span></span> <span data-ttu-id="078ca-176">藉由使用這些端點，您可以使用任何軟體，可以與這些端點進行通訊。</span><span class="sxs-lookup"><span data-stu-id="078ca-176">By using these endpoints, you can use any software that can communicate to those endpoints.</span></span> <span data-ttu-id="078ca-177">比方說，在 Docker Swarm 端點的情況下，您可能會選擇使用 Docker CLI。</span><span class="sxs-lookup"><span data-stu-id="078ca-177">For example, in the case of the Docker Swarm endpoint, you might choose to use the Docker CLI.</span></span> <span data-ttu-id="078ca-178">若是 DC/OS，您可能會選擇使用 DC/OS CLI。</span><span class="sxs-lookup"><span data-stu-id="078ca-178">For DC/OS, you might choose to use the DC/OS CLI.</span></span>

### <a name="getting-started-with-container-service"></a><span data-ttu-id="078ca-179">開始使用容器服務</span><span class="sxs-lookup"><span data-stu-id="078ca-179">Getting started with Container Service</span></span>

<span data-ttu-id="078ca-180">若要開始使用 Container Service，您必須部署從 Azure 入口網站的 Container Service 叢集使用 Azure Resource Manager 範本或有[CLI](https://docs.microsoft.com/cli/azure/install-azure-cli)。</span><span class="sxs-lookup"><span data-stu-id="078ca-180">To begin using Container Service, you deploy a Container Service cluster from the Azure portal by using an Azure Resource Manager template or the [CLI](https://docs.microsoft.com/cli/azure/install-azure-cli).</span></span> <span data-ttu-id="078ca-181">可用的範本包括 [Docker Swarm](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-swarm)、[Kubernetes](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-kubernetes) 和 [DC/OS](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos)。</span><span class="sxs-lookup"><span data-stu-id="078ca-181">Available templates include [Docker Swarm](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-swarm), [Kubernetes](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-kubernetes), and [DC/OS](https://github.com/Azure/azure-quickstart-templates/tree/master/101-acs-dcos).</span></span> <span data-ttu-id="078ca-182">您可以修改快速入門範本，以包含其他或進階 Azure 組態。</span><span class="sxs-lookup"><span data-stu-id="078ca-182">You can modify the quickstart templates to include additional or advanced Azure configuration.</span></span>

<span data-ttu-id="078ca-183">**進一歩** 若要深入了解部署容器服務叢集，在 Azure 網站上的閱讀[部署 Azure Container Service 叢集](https://docs.microsoft.com/azure/container-service/dcos-swarm/container-service-deployment)。</span><span class="sxs-lookup"><span data-stu-id="078ca-183">**More info** To learn more about deploying a Container Service cluster, on the Azure website, read [Deploy an Azure Container Service cluster](https://docs.microsoft.com/azure/container-service/dcos-swarm/container-service-deployment).</span></span>

<span data-ttu-id="078ca-184">隨附於 ACS 預設安裝的軟體均不會收取任何費用。</span><span class="sxs-lookup"><span data-stu-id="078ca-184">There are no fees for any of the software installed by default as part of ACS.</span></span> <span data-ttu-id="078ca-185">所有預設選項都是使用開放原始碼軟體來實作。</span><span class="sxs-lookup"><span data-stu-id="078ca-185">All default options are implemented with open-source software.</span></span>

<span data-ttu-id="078ca-186">目前適用於標準 A、 D、 DS、 G 及 GS 系列 Linux Vm，在 Azure 容器服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-186">Container Service is currently available for Standard A, D, DS, G, and GS series Linux VMs in Azure.</span></span> <span data-ttu-id="078ca-187">您只需支付其他基礎結構資源費用，例如儲存體和網路功能以及您選擇的計算執行個體。</span><span class="sxs-lookup"><span data-stu-id="078ca-187">You are charged only for the compute instances you choose as well as the other underlying infrastructure resources consumed, such as storage and networking.</span></span> <span data-ttu-id="078ca-188">沒有累加的費用，容器服務本身。</span><span class="sxs-lookup"><span data-stu-id="078ca-188">There are no incremental charges for Container Service itself.</span></span>

### <a name="additional-resources"></a><span data-ttu-id="078ca-189">其他資源</span><span class="sxs-lookup"><span data-stu-id="078ca-189">Additional resources</span></span>

<span data-ttu-id="078ca-190">以下是您可以在此找到其他資訊的位置：</span><span class="sxs-lookup"><span data-stu-id="078ca-190">Following are locations where you can find additional information:</span></span>

-   <span data-ttu-id="078ca-191">Docker 容器主控解決方案使用 Container Service 簡介：</span><span class="sxs-lookup"><span data-stu-id="078ca-191">Introduction to Docker container hosting solutions with Container Service:</span></span>  
    https://docs.microsoft.com/azure/container-service/kubernetes/container-service-intro-kubernetes>

-   <span data-ttu-id="078ca-192">Docker Swarm 概觀：</span><span class="sxs-lookup"><span data-stu-id="078ca-192">Docker Swarm overview:</span></span>  
    <https://docs.docker.com/swarm/overview/>

-   <span data-ttu-id="078ca-193">Swarm 模式概觀：</span><span class="sxs-lookup"><span data-stu-id="078ca-193">Swarm mode overview:</span></span>  
    <https://docs.docker.com/engine/swarm/>

-   <span data-ttu-id="078ca-194">Mesosphere DC/OS 概觀：</span><span class="sxs-lookup"><span data-stu-id="078ca-194">Mesosphere DC/OS Overview:</span></span>    
    <https://docs.mesosphere.com/1.7/overview/>

-   <span data-ttu-id="078ca-195">Kubernetes （官方的站台）：</span><span class="sxs-lookup"><span data-stu-id="078ca-195">Kubernetes (the official site):</span></span>  
    <https://kubernetes.io/>

## <a name="using-service-fabric"></a><span data-ttu-id="078ca-196">使用 Service Fabric</span><span class="sxs-lookup"><span data-stu-id="078ca-196">Using Service Fabric</span></span>

<span data-ttu-id="078ca-197">Service Fabric 的前身是自傳遞到提供服務的 「 箱型 」 產品，通常是單體樣式，來自 Microsoft 的轉換。</span><span class="sxs-lookup"><span data-stu-id="078ca-197">Service Fabric arose from Microsoft's transition from delivering "box" products, which were typically monolithic in style, to delivering services.</span></span> <span data-ttu-id="078ca-198">建置和操作 Azure SQL Database、 Azure Documentdb、 Azure 服務匯流排或 Cortana 後端，等大規模大型服務的經驗圖形化 Service Fabric。</span><span class="sxs-lookup"><span data-stu-id="078ca-198">The experience of building and operating large services at scale, such as Azure SQL Database, Azure Document DB, Azure Service Bus, or Cortana's Backend, shaped Service Fabric.</span></span> <span data-ttu-id="078ca-199">越來越多的服務採用與時俱進的平台。</span><span class="sxs-lookup"><span data-stu-id="078ca-199">The platform evolved over time as more and more services adopted it.</span></span> <span data-ttu-id="078ca-200">重要的是，Service Fabric 不僅必須能在 Azure 中執行，還必須能在獨立的 Windows 伺服器部署中執行。</span><span class="sxs-lookup"><span data-stu-id="078ca-200">Importantly, Service Fabric had to run not only in Azure but also in standalone Windows Server deployments.</span></span>

<span data-ttu-id="078ca-201">Service Fabric 的目標是解決建置和執行服務以及有效率使用基礎結構資源，以便小組可以解決使用微服務方法的商務問題的困難的問題。</span><span class="sxs-lookup"><span data-stu-id="078ca-201">The aim of Service Fabric is to solve the difficult problems of building and running a service and utilizing infrastructure resources efficiently so that teams can solve business problems using a microservices approach.</span></span>

<span data-ttu-id="078ca-202">Service Fabric 提供兩大區域，協助您建置使用微服務的應用程式：</span><span class="sxs-lookup"><span data-stu-id="078ca-202">Service Fabric provides two broad areas to help you build applications that use a microservices approach:</span></span>

-   <span data-ttu-id="078ca-203">平台，提供系統服務以部署、調整、升級、偵測及重新啟動失敗的服務、探索服務位置、管理狀態，以及監視健康狀態。</span><span class="sxs-lookup"><span data-stu-id="078ca-203">A platform that provides system services to deploy, scale, upgrade, detect, and restart failed services, discover service location, manage state, and monitor health.</span></span> <span data-ttu-id="078ca-204">這些系統服務實際上會提供許多先前所述的微服務的特性。</span><span class="sxs-lookup"><span data-stu-id="078ca-204">These system services in effect provide many of the characteristics of microservices described previously.</span></span>

-   <span data-ttu-id="078ca-205">程式設計 API 或架構，可協助您將應用程式建置為微服務：[可靠的執行者與可靠的服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework)。</span><span class="sxs-lookup"><span data-stu-id="078ca-205">Programming APIs, or frameworks, to help you build applications as microservices: [reliable actors and reliable services](https://docs.microsoft.com/azure/service-fabric/service-fabric-choose-framework).</span></span> <span data-ttu-id="078ca-206">當然，您可以選擇任何程式碼來建置您的微服務，但是這些 API 能讓工作更簡單，與平台深入整合。</span><span class="sxs-lookup"><span data-stu-id="078ca-206">Of course, you can choose any code to build your microservice, but these APIs make the job more straightforward, and they integrate with the platform at a deeper level.</span></span> <span data-ttu-id="078ca-207">如此一來，您就可以取得健康狀態和診斷資訊，或者可以利用穩定的狀態管理。</span><span class="sxs-lookup"><span data-stu-id="078ca-207">This way you can get health and diagnostics information, or you can take advantage of reliable state management.</span></span>

<span data-ttu-id="078ca-208">Service Fabric 不在乎您用什麼方法來建置服務，所以您可以使用任何技術。</span><span class="sxs-lookup"><span data-stu-id="078ca-208">Service Fabric is agnostic with respect to how you build your service, and you can use any technology.</span></span> <span data-ttu-id="078ca-209">不過，它會提供內建的程式設計 API，讓您更輕鬆地建置微服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-209">However, it provides built-in programming APIs that make it easier to build microservices.</span></span>

<span data-ttu-id="078ca-210">圖 4-9 示範如何建立和執行 Service Fabric 中的微服務，以簡單處理序或 Docker 容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-210">Figure 4-9 demonstrates how you can create and run microservices in Service Fabric either as simple processes or as Docker containers.</span></span> <span data-ttu-id="078ca-211">它也可以將容器型微服務與程序型微服務混合在相同的 Service Fabric 叢集中。</span><span class="sxs-lookup"><span data-stu-id="078ca-211">It is also possible to mix container-based microservices with process-based microservices within the same Service Fabric cluster.</span></span>

![](./media/image13.png)

<span data-ttu-id="078ca-212">圖 4 至 9:在 Azure Service Fabric 中將微服務部署為處理序或容器</span><span class="sxs-lookup"><span data-stu-id="078ca-212">Figure 4-9: Deploying microservices as processes or as containers in Azure Service Fabric</span></span>

<span data-ttu-id="078ca-213">Docker Linux 容器和 Windows 容器，可以執行 Linux 和 Windows 主機為基礎的 Service Fabric 叢集。</span><span class="sxs-lookup"><span data-stu-id="078ca-213">Service Fabric clusters based on Linux and Windows hosts can run Docker Linux containers and Windows Containers.</span></span>

<span data-ttu-id="078ca-214">**進一歩** 如 Azure 網站上最新 Service Fabric 中的容器支援相關資訊，請參閱[Service Fabric 和容器](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview)。</span><span class="sxs-lookup"><span data-stu-id="078ca-214">**More info** For up-to-date information about containers support in Service Fabric, on the Azure website, read [Service Fabric and containers](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview).</span></span>

<span data-ttu-id="078ca-215">Service Fabric 是平台與中，您可以定義相同的邏輯架構 （商務微服務或限定內容） 比實體實作的理想範例。</span><span class="sxs-lookup"><span data-stu-id="078ca-215">Service Fabric is a good example of a platform with which you can define a different logical architecture (business microservices or Bounded Contexts) than the physical implementation.</span></span> <span data-ttu-id="078ca-216">比方說，如果您實作[具狀態 Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction)中[Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview)，在下一步 區段中，會介紹 「[無狀態與具狀態微服務](#stateless-versus-stateful-microservices)，「 您有與多個實體服務的商務微服務概念。</span><span class="sxs-lookup"><span data-stu-id="078ca-216">For example, if you implement [Stateful Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction) in [Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview), which are introduced in the next section, "[Stateless versus stateful microservices](#stateless-versus-stateful-microservices)," you have a business microservice concept with multiple physical services.</span></span>

<span data-ttu-id="078ca-217">在 圖 4-10，就邏輯/商務微服務的觀點而言，實作 Service Fabric 具狀態可靠服務時所示，您通常必須實作兩層級的服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-217">As shown in Figure 4-10, and thinking from a logical/business microservice perspective, when implementing a Service Fabric Stateful Reliable Service, you usually will need to implement two tiers of services.</span></span> <span data-ttu-id="078ca-218">第一個是後端具狀態可靠服務，用來處理多個資料分割。</span><span class="sxs-lookup"><span data-stu-id="078ca-218">The first is the back-end stateful reliable service, which handles multiple partitions.</span></span> <span data-ttu-id="078ca-219">第二個是前端服務或閘道服務，負責跨多個資料分割或具狀態服務執行個體的路由及資料彙總。</span><span class="sxs-lookup"><span data-stu-id="078ca-219">The second is the front-end service, or Gateway service, in charge of routing and data aggregation across multiple partitions or stateful service instances.</span></span> <span data-ttu-id="078ca-220">閘道服務也會處理用戶端通訊與存取後端服務與 Service Fabric 搭配使用的重試迴圈[反向 proxy](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy)。</span><span class="sxs-lookup"><span data-stu-id="078ca-220">That Gateway service also handles client-side communication with retry loops accessing the back-end service used in conjunction with the Service Fabric [reverse proxy](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy).</span></span>

![](./media/image14.png)

<span data-ttu-id="078ca-221">圖 4-10:與 Service Fabric 中的數個具狀態與無狀態服務的商務微服務</span><span class="sxs-lookup"><span data-stu-id="078ca-221">Figure 4-10: Business microservice with several stateful and stateless services in Service Fabric</span></span>

<span data-ttu-id="078ca-222">在任何情況下，當您使用 Service Fabric 具狀態可靠服務時，您也會有邏輯或商務微服務 (繫結的內容)，它通常是由多項實體服務組成。</span><span class="sxs-lookup"><span data-stu-id="078ca-222">In any case, when you use Service Fabric Stateful Reliable Services, you also have a logical or business microservice (Bounded Context) that is usually composed of multiple physical services.</span></span> <span data-ttu-id="078ca-223">如所示的 圖 4-10，可能會實作每個這些，閘道服務和資料分割服務為 ASP.NET Web API 服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-223">Each of them, the Gateway service, and Partition service could be implemented as ASP.NET Web API services, as shown in Figure 4-10.</span></span>

<span data-ttu-id="078ca-224">在 Service Fabric 中，您可以分組服務，並將這些服務群組部署為 [Service Fabric 應用程式](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-model)，這是協調器或叢集的封裝和部署單位。</span><span class="sxs-lookup"><span data-stu-id="078ca-224">In Service Fabric, you can group and deploy groups of services as a [Service Fabric Application](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-model), which is the unit of packaging and deployment for the orchestrator or cluster.</span></span> <span data-ttu-id="078ca-225">因此，Service Fabric 應用程式無法對應到此自發商務和邏輯微服務界限或繫結的內容，以及。</span><span class="sxs-lookup"><span data-stu-id="078ca-225">Therefore, the Service Fabric Application could be mapped to this autonomous business and logical microservice boundary or Bounded Context, as well.</span></span>

### <a name="service-fabric-and-containers"></a><span data-ttu-id="078ca-226">Service Fabric 和容器</span><span class="sxs-lookup"><span data-stu-id="078ca-226">Service Fabric and containers</span></span>

<span data-ttu-id="078ca-227">關於 Service Fabric 中的容器，您也可以部署在 Service Fabric 叢集內的容器映像的服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-227">With regard to containers in Service Fabric, you also can deploy services in container images within a Service Fabric cluster.</span></span> <span data-ttu-id="078ca-228">圖 4-11 說明大部分的時間會有每個服務只能有一個容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-228">Figure 4-11 illustrates that most of the time there will be only one container per service.</span></span>

![](./media/image15.png)

<span data-ttu-id="078ca-229">圖 4-11:Service Fabric 中使用數個服務 (容器) 的商務微服務</span><span class="sxs-lookup"><span data-stu-id="078ca-229">Figure 4-11: Business microservice with several services (containers) in Service Fabric</span></span>

<span data-ttu-id="078ca-230">不過，也會在 Service Fabric 中所謂的 「 側車 」 容器 （必須一起作為邏輯的服務一部分部署的兩個容器）。</span><span class="sxs-lookup"><span data-stu-id="078ca-230">However, so-called "sidecar" containers (two containers that must be deployed together as part of a logical service) are also possible in Service Fabric.</span></span> <span data-ttu-id="078ca-231">重點是商務微服務是圍繞數個緊密結合項目的邏輯界限。</span><span class="sxs-lookup"><span data-stu-id="078ca-231">The important thing is that a business microservice is the logical boundary around several cohesive elements.</span></span> <span data-ttu-id="078ca-232">在許多情況下，它可能是一項服務與單一資料模型，但在某些情況下，您可能會有數項實體服務，以及。</span><span class="sxs-lookup"><span data-stu-id="078ca-232">In many cases, it might be a single service with a single data model, but in some other cases you might have physical several services, as well.</span></span>

<span data-ttu-id="078ca-233">截至本文撰寫 (年 4 月 2017) 時，您也無法在 Service Fabric 中部署容器 SF 可靠具狀態服務，您可以部署客體容器、 無狀態服務或在容器中的動作項目服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-233">As of this writing (April 2017), in Service Fabric you cannot deploy SF Reliable Stateful Services on containers—you can deploy only guest containers, stateless services, or actor services in containers.</span></span> <span data-ttu-id="078ca-234">但請注意您可以混合使用處理序中的服務與相同的 Service Fabric 應用程式中的容器中的服務所示在圖 4 到 12 個。</span><span class="sxs-lookup"><span data-stu-id="078ca-234">But note that you can mix services in processes and services in containers in the same Service Fabric application, as shown in Figure 4-12.</span></span>

![](./media/image16.png)

<span data-ttu-id="078ca-235">圖 4 到 12 個：對應至具有容器和具狀態服務之 Service Fabric 應用程式的商務微服務</span><span class="sxs-lookup"><span data-stu-id="078ca-235">Figure 4-12: Business microservice mapped to a Service Fabric application with containers and stateful services</span></span>

<span data-ttu-id="078ca-236">支援也是取決於您使用 Docker 容器在 Linux 或 Windows 容器上的不同。</span><span class="sxs-lookup"><span data-stu-id="078ca-236">Support is also different depending on whether you are using Docker containers on Linux or Windows Containers.</span></span> <span data-ttu-id="078ca-237">在即將發行的版本中，將會擴充支援 Service Fabric 中的容器。</span><span class="sxs-lookup"><span data-stu-id="078ca-237">Support for containers in Service Fabric will be expanding in upcoming releases.</span></span> <span data-ttu-id="078ca-238">如在 Service Fabric 中，在 Azure 網站上的容器支援的最新消息，請參閱[Service Fabric 和容器](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview)。</span><span class="sxs-lookup"><span data-stu-id="078ca-238">For up-to-date news about container support in Service Fabric, on the Azure website, read [Service Fabric and containers](https://docs.microsoft.com/azure/service-fabric/service-fabric-containers-overview).</span></span>

## <a name="stateless-versus-stateful-microservices"></a><span data-ttu-id="078ca-239">無狀態微服務與具狀態微服務</span><span class="sxs-lookup"><span data-stu-id="078ca-239">Stateless versus stateful microservices</span></span>

<span data-ttu-id="078ca-240">如前所述，每項微服務 (邏輯繫結的內容) 都必須擁有其網域模型 (資料和邏輯)。</span><span class="sxs-lookup"><span data-stu-id="078ca-240">As mentioned earlier, each microservice (logical Bounded Context) must own its domain model (data and logic).</span></span> <span data-ttu-id="078ca-241">在使用無狀態的微服務的情況下，為資料庫會是外部，採用關聯式的選項，例如 SQL Server 或如 MongoDB 或 Azure DocumentDB 的 NoSQL 選項。</span><span class="sxs-lookup"><span data-stu-id="078ca-241">In the case of stateless microservices, the databases will be external, employing relational options like SQL Server, or NoSQL options like MongoDB or Azure DocumentDB.</span></span>

<span data-ttu-id="078ca-242">但是，服務本身也可以是具狀態，這表示資料位於微服務中。</span><span class="sxs-lookup"><span data-stu-id="078ca-242">But the services themselves also can be stateful, which means that the data resides within the microservice.</span></span> <span data-ttu-id="078ca-243">這項資料可能會有不只是在相同伺服器上，但在微服務處理序中，在記憶體中，保存在磁碟機上和複寫到其他節點。</span><span class="sxs-lookup"><span data-stu-id="078ca-243">This data might exist not just on the same server, but within the microservice process, in memory, and persisted on drives and replicated to other nodes.</span></span> <span data-ttu-id="078ca-244">圖 4-13 顯示不同的方法。</span><span class="sxs-lookup"><span data-stu-id="078ca-244">Figure 4-13 shows the different approaches.</span></span>

![](./media/image17.png)

<span data-ttu-id="078ca-245">圖 4-13:無狀態微服務與具狀態微服務</span><span class="sxs-lookup"><span data-stu-id="078ca-245">Figure 4-13: Stateless versus stateful microservices</span></span>

<span data-ttu-id="078ca-246">無狀態的方法完全有效，而且您更輕鬆地實作比具狀態微服務，因為方法是類似於傳統和已知的模式。</span><span class="sxs-lookup"><span data-stu-id="078ca-246">A stateless approach is perfectly valid and is easier to implement than stateful microservices because the approach is similar to traditional and well-known patterns.</span></span> <span data-ttu-id="078ca-247">但無狀態微服務會強制程序及資料來源之間的延遲。</span><span class="sxs-lookup"><span data-stu-id="078ca-247">But stateless microservices impose latency between the process and data sources.</span></span> <span data-ttu-id="078ca-248">當您嘗試使用額外的快取和佇列改善效能時，它們也牽涉到更多移動的片段。</span><span class="sxs-lookup"><span data-stu-id="078ca-248">They also involve more moving pieces when you are trying to improve performance with additional cache and queues.</span></span> <span data-ttu-id="078ca-249">您最後會得到有太多層的複雜架構。</span><span class="sxs-lookup"><span data-stu-id="078ca-249">The result is that you can end up with complex architectures that have too many tiers.</span></span>

<span data-ttu-id="078ca-250">相反地，[具狀態微服務](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis)因為沒有任何網域邏輯與資料之間的延遲，所以在進階案例中勝出。</span><span class="sxs-lookup"><span data-stu-id="078ca-250">In contrast, [stateful microservices](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis) can excel in advanced scenarios because there is no latency between the domain logic and data.</span></span> <span data-ttu-id="078ca-251">大量的資料處理，遊戲的後端、 資料庫即服務，與其他所有受惠於具狀態服務，可以提供更快速存取本機狀態的低延遲案例。</span><span class="sxs-lookup"><span data-stu-id="078ca-251">Heavy data processing, gaming back-ends, databases as a service, and other low-latency scenarios all benefit from stateful services, which provide local state for faster access.</span></span>

<span data-ttu-id="078ca-252">無狀態與具狀態服務是互補的。</span><span class="sxs-lookup"><span data-stu-id="078ca-252">Stateless and stateful services are complementary.</span></span> <span data-ttu-id="078ca-253">比方說，具狀態服務，可能會分割成多個資料分割。</span><span class="sxs-lookup"><span data-stu-id="078ca-253">For instance, a stateful service could be split into multiple partitions.</span></span> <span data-ttu-id="078ca-254">若要存取這些分割，您可能需要作為閘道服務的無狀態服務，它知道如何根據分割索引鍵處理每個分割。</span><span class="sxs-lookup"><span data-stu-id="078ca-254">To access those partitions, you might need a stateless service acting as a gateway service that knows how to address each partition based on partition keys.</span></span>

<span data-ttu-id="078ca-255">具狀態服務確實有缺點。</span><span class="sxs-lookup"><span data-stu-id="078ca-255">Stateful services do have drawbacks.</span></span> <span data-ttu-id="078ca-256">它們會造成某種程度的複雜性，讓他們向外擴充。本來通常由外部資料庫系統實作的工作功能，例如跨具狀態微服務和資料分割的資料複寫，必須予以處理。</span><span class="sxs-lookup"><span data-stu-id="078ca-256">They impose a level of complexity that allows them to scale out. Functionality that would usually be implemented by external database systems must be addressed for tasks such as data replication across stateful microservices and data partitioning.</span></span> <span data-ttu-id="078ca-257">不過，這是其中一個區域協調器想在哪裡[Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-platform-architecture)具有其[具狀態 reliable services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis)有助於最 — 藉由簡化開發和具狀態的生命週期使用微服務[Reliable Services API](https://docs.microsoft.com/azure/service-fabric/service-fabric-work-with-reliable-collections)並[Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction)。</span><span class="sxs-lookup"><span data-stu-id="078ca-257">However, this is one of the areas where an orchestrator like [Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-platform-architecture) with its [stateful reliable services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction#when-to-use-reliable-services-apis) can help the most—by simplifying the development and lifecycle of stateful microservices using the [Reliable Services API](https://docs.microsoft.com/azure/service-fabric/service-fabric-work-with-reliable-collections) and [Reliable Actors](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-introduction).</span></span>

<span data-ttu-id="078ca-258">其他允許具狀態服務、支援執行者模式，以及改善商務邏輯和資料間容錯和延遲的微服務架構是 Microsoft [Orleans](https://github.com/dotnet/orleans)，來自 Microsoft 研究，以及 [Akka.NET](https://getakka.net/)。</span><span class="sxs-lookup"><span data-stu-id="078ca-258">Other microservice frameworks that allow stateful services, that support the Actor pattern, and that improve fault tolerance and latency between business logic and data are Microsoft [Orleans](https://github.com/dotnet/orleans), from Microsoft Research, and [Akka.NET](https://getakka.net/).</span></span> <span data-ttu-id="078ca-259">這兩種架構目前都在改善它們對 Docker 的支援。</span><span class="sxs-lookup"><span data-stu-id="078ca-259">Both frameworks are currently improving their support for Docker.</span></span>

<span data-ttu-id="078ca-260">請注意，Docker 容器本身無狀態。</span><span class="sxs-lookup"><span data-stu-id="078ca-260">Note that Docker containers are themselves stateless.</span></span> <span data-ttu-id="078ca-261">如果您想要實作具狀態服務，您需要前述的規範及較高層級架構之一。</span><span class="sxs-lookup"><span data-stu-id="078ca-261">If you want to implement a stateful service, you need one of the additional prescriptive and higher-level frameworks noted earlier.</span></span> <span data-ttu-id="078ca-262">不過，本文撰寫時，Service Fabric 中的具狀態服務不支援做為容器，只能以純文字的微服務。</span><span class="sxs-lookup"><span data-stu-id="078ca-262">However, as of this writing, stateful services in Service Fabric are not supported as containers, only as plain microservices.</span></span> <span data-ttu-id="078ca-263">在容器中的 reliable services 支援可在未來的 Service Fabric 版本。</span><span class="sxs-lookup"><span data-stu-id="078ca-263">Reliable services support in containers will be available in upcoming versions of Service Fabric.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="078ca-264">[上一頁](soa-applications.md)
>[下一頁](docker-apps-development-environment.md)</span><span class="sxs-lookup"><span data-stu-id="078ca-264">[Previous](soa-applications.md)
[Next](docker-apps-development-environment.md)</span></span>