---
title: 無伺服器架構-無伺服器應用程式
description: 探勘的各種架構和支援的無伺服器架構，包括 web 應用程式、 行動和 IoT 應用程式。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 5f22f8b9894a23e5920adb2af3fdf02bce2877d7
ms.sourcegitcommit: ccd8c36b0d74d99291d41aceb14cf98d74dc9d2b
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/10/2018
ms.locfileid: "53150299"
---
# <a name="serverless-architecture"></a><span data-ttu-id="53745-103">無伺服器架構</span><span class="sxs-lookup"><span data-stu-id="53745-103">Serverless architecture</span></span>

<span data-ttu-id="53745-104">有許多方法，可以使用無伺服器架構。</span><span class="sxs-lookup"><span data-stu-id="53745-104">There are many approaches to using serverless architectures.</span></span> <span data-ttu-id="53745-105">本章將探討整合無伺服器的一般架構的範例。</span><span class="sxs-lookup"><span data-stu-id="53745-105">This chapter explores examples of common architectures that integrate serverless.</span></span> <span data-ttu-id="53745-106">其中也涵蓋可能會造成額外的挑戰，或需要額外的考量，實作無伺服器時的考量。</span><span class="sxs-lookup"><span data-stu-id="53745-106">It also covers concerns that may pose additional challenges or require extra consideration when implementing serverless.</span></span> <span data-ttu-id="53745-107">最後，說明不同的無伺服器的使用案例提供了數個設計範例。</span><span class="sxs-lookup"><span data-stu-id="53745-107">Finally, several design examples are provided that illustrate various serverless use cases.</span></span>

<span data-ttu-id="53745-108">無伺服器的主機通常使用現有的容器型或 PaaS 層，用於管理無伺服器執行個體。</span><span class="sxs-lookup"><span data-stu-id="53745-108">Serverless hosts often use an existing container-based or PaaS layer to manage the serverless instances.</span></span> <span data-ttu-id="53745-109">例如，Azure Functions 會根據[Azure App Service](https://docs.microsoft.com/azure/app-service/)。</span><span class="sxs-lookup"><span data-stu-id="53745-109">For example, Azure Functions is based on [Azure App Service](https://docs.microsoft.com/azure/app-service/).</span></span> <span data-ttu-id="53745-110">App Service 用來相應放大執行個體，並管理執行 Azure Functions 程式碼的執行階段。</span><span class="sxs-lookup"><span data-stu-id="53745-110">The App Service is used to scale out instances and manage the runtime that executes Azure Functions code.</span></span> <span data-ttu-id="53745-111">對於以 Windows 為基礎的函式，做為 PaaS 和標尺的主控件執行 out.NET 執行階段。</span><span class="sxs-lookup"><span data-stu-id="53745-111">For Windows-based functions, the host runs as PaaS and scales out the .NET runtime.</span></span> <span data-ttu-id="53745-112">針對以 Linux 為基礎的函式，主機會運用容器。</span><span class="sxs-lookup"><span data-stu-id="53745-112">For Linux-based functions, the host leverages containers.</span></span>

![Azure Functions 架構](./media/azure-functions-architecture.png)

<span data-ttu-id="53745-114">WebJobs 核心提供函式的執行內容。</span><span class="sxs-lookup"><span data-stu-id="53745-114">The WebJobs Core provides an execution context for the function.</span></span> <span data-ttu-id="53745-115">Language Runtime 會執行指令碼、 執行程式庫和裝載目標語言的架構。</span><span class="sxs-lookup"><span data-stu-id="53745-115">The Language Runtime runs scripts, executes libraries and hosts the framework for the target language.</span></span> <span data-ttu-id="53745-116">例如，執行 JavaScript 函式使用 Node.js 和.NET Framework 用來執行 C# 函式。</span><span class="sxs-lookup"><span data-stu-id="53745-116">For example, Node.js is used to run JavaScript functions and the .NET Framework is used to run C# functions.</span></span> <span data-ttu-id="53745-117">您將了解在本章稍後的語言及平台選項的詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="53745-117">You'll learn more about language and platform options later in this chapter.</span></span>

<span data-ttu-id="53745-118">有些專案可能會受益於採取無伺服器的 「 全 」 方法。</span><span class="sxs-lookup"><span data-stu-id="53745-118">Some projects may benefit from taking an "all-in" approach to serverless.</span></span> <span data-ttu-id="53745-119">高度依賴微服務的應用程式可能會實作使用無伺服器技術的所有微服務。</span><span class="sxs-lookup"><span data-stu-id="53745-119">Applications that rely heavily on microservices may implement all microservices using serverless technology.</span></span> <span data-ttu-id="53745-120">遵循多層式架構設計的彙總，並使用無伺服器元件的意義，因為元件是模組化且獨立的可調整混合式，就大部分的應用程式。</span><span class="sxs-lookup"><span data-stu-id="53745-120">The majority of apps are hybrid, following an N-tier design and using serverless for the components that make sense because the components are modular and independently scalable.</span></span> <span data-ttu-id="53745-121">為了協助這些案例的意義，本節逐步解說一些常見的架構範例，使用無伺服器。</span><span class="sxs-lookup"><span data-stu-id="53745-121">To help make sense of these scenarios, this section walks through some common architecture examples that use serverless.</span></span>

## <a name="full-serverless-back-end"></a><span data-ttu-id="53745-122">完整的無伺服器的後端</span><span class="sxs-lookup"><span data-stu-id="53745-122">Full serverless back end</span></span>

<span data-ttu-id="53745-123">完整的無伺服器的後端是適用於數種類型的情況下，尤其是當新的建置或 「 綠色欄位 」 應用程式。</span><span class="sxs-lookup"><span data-stu-id="53745-123">The full serverless back end is ideal for several types of scenarios, especially when building new or "green field" applications.</span></span> <span data-ttu-id="53745-124">介面區較大型的 Api 的應用程式可能會受益於實作無伺服器函式的每個 API。</span><span class="sxs-lookup"><span data-stu-id="53745-124">An application with a large surface area of APIs may benefit from implementing each API as a serverless function.</span></span> <span data-ttu-id="53745-125">微服務架構為基礎的應用程式是可能會實作為完整的無伺服器的後端的另一個範例。</span><span class="sxs-lookup"><span data-stu-id="53745-125">Apps that are based on microservices architecture are another example that could be implemented as a full serverless back end.</span></span> <span data-ttu-id="53745-126">微服務會透過各種不同的通訊協定彼此通訊。</span><span class="sxs-lookup"><span data-stu-id="53745-126">The microservices communicate over various protocols with each other.</span></span> <span data-ttu-id="53745-127">特定的案例包括：</span><span class="sxs-lookup"><span data-stu-id="53745-127">Specific scenarios include:</span></span>

* <span data-ttu-id="53745-128">以 API 為基礎的 SaaS 產品 (範例： 財務付款處理器)。</span><span class="sxs-lookup"><span data-stu-id="53745-128">API-based SaaS products (example: financial payments processor).</span></span>
* <span data-ttu-id="53745-129">訊息驅動的應用程式 (範例： 監視解決方案的裝置)。</span><span class="sxs-lookup"><span data-stu-id="53745-129">Message-driven applications (example: device monitoring solution).</span></span>
* <span data-ttu-id="53745-130">應用程式著重在服務之間的整合 (範例： 航空公司預約應用程式)。</span><span class="sxs-lookup"><span data-stu-id="53745-130">Apps focused on integration between services (example: airline booking application).</span></span>
* <span data-ttu-id="53745-131">定期執行的處理序 (範例： 以計時器為基礎的資料庫清除工作)。</span><span class="sxs-lookup"><span data-stu-id="53745-131">Processes that run periodically (example: timer-based database clean-up).</span></span>
* <span data-ttu-id="53745-132">應用程式著重在資料轉換 (範例： 檔案上傳所觸發的匯入)。</span><span class="sxs-lookup"><span data-stu-id="53745-132">Apps focused on data transformation (example: import triggered by file upload).</span></span>
* <span data-ttu-id="53745-133">擷取轉換和載入 (ETL) 程序。</span><span class="sxs-lookup"><span data-stu-id="53745-133">Extract Transform and Load (ETL) processes.</span></span>

<span data-ttu-id="53745-134">有本文件稍後所述的其他更明確的使用案例。</span><span class="sxs-lookup"><span data-stu-id="53745-134">There are other, more specific use cases that are covered later in this document.</span></span>

## <a name="monoliths-and-starving-the-beast"></a><span data-ttu-id="53745-135">單一的體系並 「 佔用野獸"</span><span class="sxs-lookup"><span data-stu-id="53745-135">Monoliths and "starving the beast"</span></span>

<span data-ttu-id="53745-136">常見的挑戰移轉現有的單體式應用程式到雲端。</span><span class="sxs-lookup"><span data-stu-id="53745-136">A common challenge is migrating an existing monolithic application to the cloud.</span></span> <span data-ttu-id="53745-137">至少風險的方法是 「 隨即轉移 」 到虛擬機器完全。</span><span class="sxs-lookup"><span data-stu-id="53745-137">The least risky approach is to "lift and shift" entirely onto virtual machines.</span></span> <span data-ttu-id="53745-138">許多公司偏好使用移轉的機會，要現代化其程式碼基底。</span><span class="sxs-lookup"><span data-stu-id="53745-138">Many shops prefer to use the migration as an opportunity to modernize their code base.</span></span> <span data-ttu-id="53745-139">實用的方法，移轉至稱為"匱乏野獸"。</span><span class="sxs-lookup"><span data-stu-id="53745-139">A practical approach to migration is called "starving the beast."</span></span> <span data-ttu-id="53745-140">在此案例中，「 現狀 」，移轉單體開始。</span><span class="sxs-lookup"><span data-stu-id="53745-140">In this scenario, the monolith is migrated "as is" to start with.</span></span> <span data-ttu-id="53745-141">然後，選取的服務被現代化。</span><span class="sxs-lookup"><span data-stu-id="53745-141">Then, selected services are modernized.</span></span> <span data-ttu-id="53745-142">在某些情況下，服務的簽章是等同原始： 它只裝載為函式。</span><span class="sxs-lookup"><span data-stu-id="53745-142">In some cases, the signature of the service is identical to the original: it simply is hosted as a function.</span></span> <span data-ttu-id="53745-143">用戶端已更新為使用新的服務，而不是單體端點。</span><span class="sxs-lookup"><span data-stu-id="53745-143">Clients are updated to use the new service rather than the monolith endpoint.</span></span> <span data-ttu-id="53745-144">在過渡時期，例如資料庫複寫的步驟，讓微服務來裝載他們自己的儲存體，即使交易仍會由單體。</span><span class="sxs-lookup"><span data-stu-id="53745-144">In the interim, steps such as database replication enable microservices to host their own storage even when transactions are still handled by the monolith.</span></span> <span data-ttu-id="53745-145">最後，所有用戶端會移轉到新的服務。</span><span class="sxs-lookup"><span data-stu-id="53745-145">Eventually, all clients are migrated onto the new services.</span></span> <span data-ttu-id="53745-146">單體會 「 耗盡"（其不會再呼叫服務） 之前的所有功能已被都取代。</span><span class="sxs-lookup"><span data-stu-id="53745-146">The monolith is "starved" (its services no longer called) until all functionality has been replaced.</span></span> <span data-ttu-id="53745-147">組合無伺服器和 proxy 能便利在大部分的這項移轉。</span><span class="sxs-lookup"><span data-stu-id="53745-147">The combination of serverless and proxies can facilitate much of this migration.</span></span>

![無伺服器的單體移轉](./media/serverless-monolith-migration.png)

<span data-ttu-id="53745-149">若要深入了解此方法，觀看影片：[將應用程式帶至雲端，無伺服器 Azure Functions](https://channel9.msdn.com/Events/Connect/2017/E102)。</span><span class="sxs-lookup"><span data-stu-id="53745-149">To learn more about this approach, watch the video: [Bring your app to the cloud with serverless Azure Functions](https://channel9.msdn.com/Events/Connect/2017/E102).</span></span>

## <a name="web-apps"></a><span data-ttu-id="53745-150">Web 應用程式</span><span class="sxs-lookup"><span data-stu-id="53745-150">Web apps</span></span>

<span data-ttu-id="53745-151">Web 應用程式是無伺服器應用程式的最佳候選項目。</span><span class="sxs-lookup"><span data-stu-id="53745-151">Web apps are great candidates for serverless applications.</span></span> <span data-ttu-id="53745-152">有兩種常見的方法，web 應用程式的立即： 伺服器驅動和用戶端導向 （例如單一頁面應用程式或 SPA）。</span><span class="sxs-lookup"><span data-stu-id="53745-152">There are two common approaches to web apps today: server-driven, and client-driven (such as Single Page Application or SPA).</span></span> <span data-ttu-id="53745-153">伺服器導向的 web 應用程式通常會使用發出 API 呼叫來呈現的 web UI 的中介軟體層。</span><span class="sxs-lookup"><span data-stu-id="53745-153">Server-driven web apps typically use a middleware layer to issue API calls to render the web UI.</span></span> <span data-ttu-id="53745-154">SPA 應用程式進行 REST API 呼叫，直接從瀏覽器。</span><span class="sxs-lookup"><span data-stu-id="53745-154">SPA applications make REST API calls directly from the browser.</span></span> <span data-ttu-id="53745-155">在這兩種情況下，無伺服器可容納的中介軟體或 REST API 要求藉由提供所需的商務邏輯。</span><span class="sxs-lookup"><span data-stu-id="53745-155">In both scenarios, serverless can accommodate the middleware or REST API request by providing the necessary business logic.</span></span> <span data-ttu-id="53745-156">常見的架構是輕量型的靜態網頁伺服器，就能。</span><span class="sxs-lookup"><span data-stu-id="53745-156">A common architecture is to stand up a lightweight static web server.</span></span> <span data-ttu-id="53745-157">單一頁面應用程式 (SPA) 是 HTML、 CSS、 JavaScript 和其他瀏覽器的資產。</span><span class="sxs-lookup"><span data-stu-id="53745-157">The Single Page Application (SPA) serves HTML, CSS, JavaScript, and other browser assets.</span></span> <span data-ttu-id="53745-158">Web 應用程式接著連接到微服務的後端。</span><span class="sxs-lookup"><span data-stu-id="53745-158">The web app then connects to a microservices back end.</span></span>

## <a name="mobile-back-ends"></a><span data-ttu-id="53745-159">行動後端</span><span class="sxs-lookup"><span data-stu-id="53745-159">Mobile back ends</span></span>

<span data-ttu-id="53745-160">事件驅動架構的無伺服器應用程式使其適合行動後端。</span><span class="sxs-lookup"><span data-stu-id="53745-160">The event-driven paradigm of serverless apps makes them ideal as mobile back ends.</span></span> <span data-ttu-id="53745-161">行動裝置就會觸發事件並無伺服器程式碼執行來滿足要求。</span><span class="sxs-lookup"><span data-stu-id="53745-161">The mobile device triggers the events and the serverless code executes to satisfy requests.</span></span> <span data-ttu-id="53745-162">利用無伺服器的模型，可讓開發人員增強商務邏輯，而不需部署完整的應用程式更新。</span><span class="sxs-lookup"><span data-stu-id="53745-162">Taking advantage of a serverless model enables developers to enhance business logic without having to deploy a full application update.</span></span> <span data-ttu-id="53745-163">無伺服器的方法也可讓小組共用端點，並以平行方式運作。</span><span class="sxs-lookup"><span data-stu-id="53745-163">The serverless approach also enables teams to share endpoints and work in parallel.</span></span>

<span data-ttu-id="53745-164">行動裝置開發人員可以建置商務邏輯，而不成為在伺服器端的專家。</span><span class="sxs-lookup"><span data-stu-id="53745-164">Mobile developers can build business logic without becoming experts on the server side.</span></span> <span data-ttu-id="53745-165">傳統上，行動裝置應用程式連接至內部部署服務。</span><span class="sxs-lookup"><span data-stu-id="53745-165">Traditionally, mobile apps connected to on-premises services.</span></span> <span data-ttu-id="53745-166">建置服務層時，需要了解伺服器平台和程式設計架構。</span><span class="sxs-lookup"><span data-stu-id="53745-166">Building the service layer required understanding the server platform and programming paradigm.</span></span> <span data-ttu-id="53745-167">開發人員已經盡力佈建伺服器，並適當地設定它們的作業。</span><span class="sxs-lookup"><span data-stu-id="53745-167">Developers worked with operations to provision servers and configure them appropriately.</span></span> <span data-ttu-id="53745-168">有時候天或甚至數週花費在建置部署管線。</span><span class="sxs-lookup"><span data-stu-id="53745-168">Sometimes days or even weeks were spent on building a deployment pipeline.</span></span> <span data-ttu-id="53745-169">透過無伺服器，所有這些挑戰都能迎刃而解。</span><span class="sxs-lookup"><span data-stu-id="53745-169">All of these challenges are addressed by serverless.</span></span>

<span data-ttu-id="53745-170">無伺服器會提取伺服器端相依性，並可讓開發人員專注於商務邏輯。</span><span class="sxs-lookup"><span data-stu-id="53745-170">Serverless abstracts the server-side dependencies and enables the developer to focus on business logic.</span></span> <span data-ttu-id="53745-171">例如，行動裝置的開發人員使用 JavaScript 架構的應用程式可以建置無伺服器函式使用 JavaScript。</span><span class="sxs-lookup"><span data-stu-id="53745-171">For example, a mobile developer who builds apps using a JavaScript framework can build serverless functions with JavaScript as well.</span></span> <span data-ttu-id="53745-172">無伺服器的主機管理作業系統來裝載程式碼、 封裝相依性，以及更多的 Node.js 執行個體。</span><span class="sxs-lookup"><span data-stu-id="53745-172">The serverless host manages the operating system, a Node.js instance to host the code, package dependencies, and more.</span></span> <span data-ttu-id="53745-173">開發人員提供一組簡單的輸入和標準範本的輸出。</span><span class="sxs-lookup"><span data-stu-id="53745-173">The developer is provided a simple set of inputs and a standard template for outputs.</span></span> <span data-ttu-id="53745-174">他們接著可以專注於建置和測試商務邏輯。</span><span class="sxs-lookup"><span data-stu-id="53745-174">They then can focus on building and testing the business logic.</span></span> <span data-ttu-id="53745-175">它們是因此能夠使用現有的技能來建置行動應用程式的後端邏輯，而不需要了解新的平台，或成為 「 伺服器端開發人員 」。</span><span class="sxs-lookup"><span data-stu-id="53745-175">They're therefore able to use existing skills to build the back-end logic for the mobile app without having to learn new platforms or become a "server-side developer."</span></span>

![無伺服器行動後端](./media/serverless-mobile-backend.png)

<span data-ttu-id="53745-177">大部分雲端提供者會提供以行動為基礎的無伺服器產品，以簡化整個行動裝置開發生命週期。</span><span class="sxs-lookup"><span data-stu-id="53745-177">Most cloud providers offer mobile-based serverless products that simplify the entire mobile development lifecycle.</span></span> <span data-ttu-id="53745-178">產品可以自動化佈建的資料庫來保存資料、 處理 DevOps 考量、 提供雲端式建置和測試架構和指令碼使用開發人員的商務程序的能力的慣用語言。</span><span class="sxs-lookup"><span data-stu-id="53745-178">The products may automate the provisioning of databases to persist data, handle DevOps concerns, provide cloud-based builds and testing frameworks and the ability to script business processes using the developer's preferred language.</span></span> <span data-ttu-id="53745-179">遵循行動中心的無伺服器方法可以簡化程序。</span><span class="sxs-lookup"><span data-stu-id="53745-179">Following a mobile-centric serverless approach can streamline the process.</span></span> <span data-ttu-id="53745-180">無伺服器移除佈建、 設定和維護伺服器行動後端的巨大額外負荷。</span><span class="sxs-lookup"><span data-stu-id="53745-180">Serverless removes the tremendous overhead of provisioning, configuring, and maintaining servers for the mobile back end.</span></span>

## <a name="internet-of-things-iot"></a><span data-ttu-id="53745-181">物聯網 (IoT)</span><span class="sxs-lookup"><span data-stu-id="53745-181">Internet of Things (IoT)</span></span>

<span data-ttu-id="53745-182">IoT 是指透過網路連接在一起的實體物件。</span><span class="sxs-lookup"><span data-stu-id="53745-182">IoT refers to physical objects that are networked together.</span></span> <span data-ttu-id="53745-183">它們是有時稱為 「 已連線的裝置 」 或 「 智慧型裝置 」。</span><span class="sxs-lookup"><span data-stu-id="53745-183">They're sometimes referred to as "connected devices" or "smart devices."</span></span> <span data-ttu-id="53745-184">從汽車和販賣的所有項目可能有連線，並將資訊從清查範圍，例如溫度和溼度感應器資料傳送。</span><span class="sxs-lookup"><span data-stu-id="53745-184">Everything from cars and vending machines may be connected and send information ranging from inventory to sensor data such as temperature and humidity.</span></span> <span data-ttu-id="53745-185">在企業中，IoT 會提供透過監視和自動化商務程序改進。</span><span class="sxs-lookup"><span data-stu-id="53745-185">In the enterprise, IoT provides business process improvements through monitoring and automation.</span></span> <span data-ttu-id="53745-186">可用來管理大型資料倉儲中的氣候或追蹤庫存透過供應鏈設定了 IoT 資料。</span><span class="sxs-lookup"><span data-stu-id="53745-186">IoT data may be used to regulate the climate in a large warehouse or track inventory through the supply chain.</span></span> <span data-ttu-id="53745-187">IoT 可以感測化學溢出和煙霧偵測到時呼叫的消防部門。</span><span class="sxs-lookup"><span data-stu-id="53745-187">IoT can sense chemical spills and call the fire department when smoke is detected.</span></span>

<span data-ttu-id="53745-188">大量裝置與資訊通常會指出事件驅動架構路由和處理程序的訊息。</span><span class="sxs-lookup"><span data-stu-id="53745-188">The sheer volume of devices and information often dictates an event-driven architecture to route and process messages.</span></span> <span data-ttu-id="53745-189">無伺服器有幾個原因是一個理想的解決方案：</span><span class="sxs-lookup"><span data-stu-id="53745-189">Serverless is an ideal solution for several reasons:</span></span>

* <span data-ttu-id="53745-190">可調整的磁碟區的裝置和資料增加而增加。</span><span class="sxs-lookup"><span data-stu-id="53745-190">Enables scale as the volume of devices and data increases.</span></span>
* <span data-ttu-id="53745-191">適用於加入新的端點，以支援新的裝置與感應器。</span><span class="sxs-lookup"><span data-stu-id="53745-191">Accommodates adding new endpoints to support new devices and sensors.</span></span>
* <span data-ttu-id="53745-192">讓開發人員可以更新特定裝置的商務邏輯，而不需部署整個系統，可協助獨立的版本設定。</span><span class="sxs-lookup"><span data-stu-id="53745-192">Facilitates independent versioning so developers can update the business logic for a specific device without having to deploy the entire system.</span></span>
* <span data-ttu-id="53745-193">恢復功能並減少停機時間。</span><span class="sxs-lookup"><span data-stu-id="53745-193">Resiliency and less downtime.</span></span>

<span data-ttu-id="53745-194">IoT 普遍性導致數個無伺服器的產品，將特別著重在 IoT 考量，這類[Azure IoT 中樞](https://docs.microsoft.com/azure/iot-hub)。</span><span class="sxs-lookup"><span data-stu-id="53745-194">The pervasiveness of IoT has resulted in several serverless products that focus specifically on IoT concerns, such as [Azure IoT Hub](https://docs.microsoft.com/azure/iot-hub).</span></span> <span data-ttu-id="53745-195">無伺服器會自動執行工作，例如裝置註冊、 原則強制執行、 追蹤和甚至是部署到在裝置的程式碼*邊緣*。</span><span class="sxs-lookup"><span data-stu-id="53745-195">Serverless automates tasks such as device registration, policy enforcement, tracking, and even deployment of code to devices at *the edge*.</span></span> <span data-ttu-id="53745-196">邊緣是指例如感應器和傳動器要連線，但非作用中的一部分，網際網路的裝置。</span><span class="sxs-lookup"><span data-stu-id="53745-196">The edge refers to devices like sensors and actuators that are connected to, but not an active part of, the Internet.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="53745-197">[上一頁](architecture-approaches.md)
>[下一頁](serverless-architecture-considerations.md)</span><span class="sxs-lookup"><span data-stu-id="53745-197">[Previous](architecture-approaches.md)
[Next](serverless-architecture-considerations.md)</span></span>