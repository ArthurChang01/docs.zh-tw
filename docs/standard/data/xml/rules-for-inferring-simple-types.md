---
title: "推斷簡單型別的規則"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 394624d6-4da0-430a-8a88-46efe40f14de
caps.latest.revision: "3"
author: mairaw
ms.author: mairaw
manager: wpickett
ms.openlocfilehash: 9a74d111720eb9436f0cd71fd5acef7ea10939c0
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/21/2017
---
# <a name="rules-for-inferring-simple-types"></a><span data-ttu-id="5e92d-102">推斷簡單型別的規則</span><span class="sxs-lookup"><span data-stu-id="5e92d-102">Rules for Inferring Simple Types</span></span>
<span data-ttu-id="5e92d-103">說明 <xref:System.Xml.Schema.XmlSchemaInference> 類別如何推斷屬性和項目的資料型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-103">Describes how the <xref:System.Xml.Schema.XmlSchemaInference> class infers the data type for attributes and elements.</span></span>  
  
 <span data-ttu-id="5e92d-104"><xref:System.Xml.Schema.XmlSchemaInference> 類別會將屬性和項目的資料型別推斷為簡單型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-104">The <xref:System.Xml.Schema.XmlSchemaInference> class infers the data type for attributes and elements as simple types.</span></span> <span data-ttu-id="5e92d-105">本節將說明可能的推斷型別、多種不同的值如何調節為單一型別，以及如何處理結構描述定義的 `xsi` 屬性。</span><span class="sxs-lookup"><span data-stu-id="5e92d-105">This section describes the potential inferred types, how multiple differing values are reconciled to a single type, and how schema-defining `xsi` attributes are handled.</span></span>  
  
## <a name="inferred-types"></a><span data-ttu-id="5e92d-106">推斷的型別</span><span class="sxs-lookup"><span data-stu-id="5e92d-106">Inferred Types</span></span>  
 <span data-ttu-id="5e92d-107"><xref:System.Xml.Schema.XmlSchemaInference> 類別會將項目和屬性值推斷為簡單型別，並在產生的結構描述內包含型別屬性。</span><span class="sxs-lookup"><span data-stu-id="5e92d-107">The <xref:System.Xml.Schema.XmlSchemaInference> class infers element and attribute values as simple types and includes a type attribute in the resulting schema.</span></span> <span data-ttu-id="5e92d-108">所有推斷的型別皆為簡單型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-108">All inferred types are simple types.</span></span> <span data-ttu-id="5e92d-109">基底型別或 Facet 都不會納入結果結構描述中。</span><span class="sxs-lookup"><span data-stu-id="5e92d-109">No base types or facets are included as part of the resulting schema.</span></span>  
  
 <span data-ttu-id="5e92d-110">在 XML 文件中發現的值會個別進行檢查。</span><span class="sxs-lookup"><span data-stu-id="5e92d-110">Values are examined individually as they are encountered in the XML document.</span></span> <span data-ttu-id="5e92d-111">對某個值進行檢查時，即會推斷其型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-111">The type is inferred for a value at the time it is examined.</span></span> <span data-ttu-id="5e92d-112">若在推斷屬性或項目的型別後，發現該屬性或項目的值不符合目前推斷的型別，<xref:System.Xml.Schema.XmlSchemaInference> 類別就會針對每組規則提升型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-112">If a type has been inferred for an attribute or element, and a value for the attribute or element is encountered that does not match the currently inferred type, the <xref:System.Xml.Schema.XmlSchemaInference> class promotes the type for each of a set of rules.</span></span> <span data-ttu-id="5e92d-113">這些規則將在本主題稍後的＜型別提升＞一節中討論。</span><span class="sxs-lookup"><span data-stu-id="5e92d-113">These rules are discussed in the Type Promotion section, later in this topic.</span></span>  
  
 <span data-ttu-id="5e92d-114">下列表格列出可能出現在結果結構描述中的推斷型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-114">The following table lists the possible inferred types for the resulting schema.</span></span>  
  
|<span data-ttu-id="5e92d-115">簡單型別</span><span class="sxs-lookup"><span data-stu-id="5e92d-115">Simple Type</span></span>|<span data-ttu-id="5e92d-116">描述</span><span class="sxs-lookup"><span data-stu-id="5e92d-116">Description</span></span>|  
|-----------------|-----------------|  
|<span data-ttu-id="5e92d-117">boolean</span><span class="sxs-lookup"><span data-stu-id="5e92d-117">boolean</span></span>|<span data-ttu-id="5e92d-118">True、False、0、1。</span><span class="sxs-lookup"><span data-stu-id="5e92d-118">True, false, 0, 1.</span></span>|  
|<span data-ttu-id="5e92d-119">byte</span><span class="sxs-lookup"><span data-stu-id="5e92d-119">byte</span></span>|<span data-ttu-id="5e92d-120">介於 -128 與 127 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-120">Integers in the range of –128 to 127.</span></span>|  
|<span data-ttu-id="5e92d-121">unsignedByte</span><span class="sxs-lookup"><span data-stu-id="5e92d-121">unsignedByte</span></span>|<span data-ttu-id="5e92d-122">介於 0 與 255 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-122">Integers in the range of 0 to 255.</span></span>|  
|<span data-ttu-id="5e92d-123">short</span><span class="sxs-lookup"><span data-stu-id="5e92d-123">short</span></span>|<span data-ttu-id="5e92d-124">介於 -32768 與 32767 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-124">Integers in the range of –32768 to 32767.</span></span>|  
|<span data-ttu-id="5e92d-125">unsignedShort</span><span class="sxs-lookup"><span data-stu-id="5e92d-125">unsignedShort</span></span>|<span data-ttu-id="5e92d-126">介於 0 與 65535 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-126">Integers in the range of 0 to 65535.</span></span>|  
|<span data-ttu-id="5e92d-127">int</span><span class="sxs-lookup"><span data-stu-id="5e92d-127">int</span></span>|<span data-ttu-id="5e92d-128">介於 -2147483648 與 2147483647 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-128">Integers in the range of –2147483648 to 2147483647.</span></span>|  
|<span data-ttu-id="5e92d-129">unsignedInt</span><span class="sxs-lookup"><span data-stu-id="5e92d-129">unsignedInt</span></span>|<span data-ttu-id="5e92d-130">介於 0 與 4294967295 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-130">Integers in the range of 0 to 4294967295.</span></span>|  
|<span data-ttu-id="5e92d-131">long</span><span class="sxs-lookup"><span data-stu-id="5e92d-131">long</span></span>|<span data-ttu-id="5e92d-132">介於 -9223372036854775808 與 9223372036854775807 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-132">Integers in the range of –9223372036854775808 to 9223372036854775807.</span></span>|  
|<span data-ttu-id="5e92d-133">unsignedLong</span><span class="sxs-lookup"><span data-stu-id="5e92d-133">unsignedLong</span></span>|<span data-ttu-id="5e92d-134">介於 0 與 18446744073709551615 之間的整數。</span><span class="sxs-lookup"><span data-stu-id="5e92d-134">Integers in the range of 0 to 18446744073709551615.</span></span>|  
|<span data-ttu-id="5e92d-135">整數</span><span class="sxs-lookup"><span data-stu-id="5e92d-135">integer</span></span>|<span data-ttu-id="5e92d-136">可能會以 "-" 開頭的有限數值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-136">A finite number of digits possibly prefixed with "-".</span></span>|  
|<span data-ttu-id="5e92d-137">decimal</span><span class="sxs-lookup"><span data-stu-id="5e92d-137">decimal</span></span>|<span data-ttu-id="5e92d-138">含有 0 至 28 位精準度的數值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-138">Numerical values that contain from 0 to 28 digits of precision.</span></span>|  
|<span data-ttu-id="5e92d-139">float</span><span class="sxs-lookup"><span data-stu-id="5e92d-139">float</span></span>|<span data-ttu-id="5e92d-140">其後可以為 "E" 或 "e" 的十進位數，最後再接上代表指數的整數值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-140">Decimals optionally followed by "E" or "e" followed by an integer value representing the exponent.</span></span> <span data-ttu-id="5e92d-141">十進位值可介於 -16777216 與 16777216 之間。</span><span class="sxs-lookup"><span data-stu-id="5e92d-141">Decimal values can be in the range of -16777216 to 16777216.</span></span> <span data-ttu-id="5e92d-142">指數值可介於 –149 與 104 之間。</span><span class="sxs-lookup"><span data-stu-id="5e92d-142">Exponent values can be in the range of –149 to 104.</span></span><br /><br /> <span data-ttu-id="5e92d-143">浮點數允許用特殊的值代表無限值與非數字值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-143">Float allows for special values to represent infinity and non-numeric values.</span></span> <span data-ttu-id="5e92d-144">浮點數的特殊值包括：0, -0, INF, -INF, NaN。</span><span class="sxs-lookup"><span data-stu-id="5e92d-144">Special values for float are: 0, -0, INF, -INF, NaN.</span></span>|  
|<span data-ttu-id="5e92d-145">double</span><span class="sxs-lookup"><span data-stu-id="5e92d-145">double</span></span>|<span data-ttu-id="5e92d-146">與浮點數相同，不同之處在於十進位值可介於 -9007199254740992 與 9007199254740992 之間，而指數值可介於 –1075 與 970 之間。</span><span class="sxs-lookup"><span data-stu-id="5e92d-146">The same as float except decimal values can be in the range of -9007199254740992 to 9007199254740992, and exponent values can be in the range of –1075 to 970.</span></span><br /><br /> <span data-ttu-id="5e92d-147">雙精度浮點數允許用特殊的值代表無限值與非數字值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-147">Double allows for special values to represent infinity and non-numeric values.</span></span> <span data-ttu-id="5e92d-148">浮點數的特殊值包括：0, -0, INF, -INF, NaN。</span><span class="sxs-lookup"><span data-stu-id="5e92d-148">Special values for float are: 0, -0, INF, -INF, NaN.</span></span>|  
|<span data-ttu-id="5e92d-149">持續期間</span><span class="sxs-lookup"><span data-stu-id="5e92d-149">duration</span></span>|<span data-ttu-id="5e92d-150">W3C 期間格式。</span><span class="sxs-lookup"><span data-stu-id="5e92d-150">The W3C duration format.</span></span>|  
|<span data-ttu-id="5e92d-151">dateTime</span><span class="sxs-lookup"><span data-stu-id="5e92d-151">dateTime</span></span>|<span data-ttu-id="5e92d-152">W3C 日期時間格式。</span><span class="sxs-lookup"><span data-stu-id="5e92d-152">The W3C dateTime format.</span></span>|  
|<span data-ttu-id="5e92d-153">時間</span><span class="sxs-lookup"><span data-stu-id="5e92d-153">time</span></span>|<span data-ttu-id="5e92d-154">W3C 時間格式。</span><span class="sxs-lookup"><span data-stu-id="5e92d-154">The W3C time format.</span></span>|  
|<span data-ttu-id="5e92d-155">date</span><span class="sxs-lookup"><span data-stu-id="5e92d-155">date</span></span>|<span data-ttu-id="5e92d-156">年份值限定於 0001 與 9999 之間。</span><span class="sxs-lookup"><span data-stu-id="5e92d-156">Year values are restricted from 0001 to 9999.</span></span>|  
|<span data-ttu-id="5e92d-157">gYearMonth</span><span class="sxs-lookup"><span data-stu-id="5e92d-157">gYearMonth</span></span>|<span data-ttu-id="5e92d-158">W3C 的西曆月份與年份格式。</span><span class="sxs-lookup"><span data-stu-id="5e92d-158">The W3C Gregorian month and year format.</span></span>|  
|<span data-ttu-id="5e92d-159">string</span><span class="sxs-lookup"><span data-stu-id="5e92d-159">string</span></span>|<span data-ttu-id="5e92d-160">一或多個 Unicode 字元。</span><span class="sxs-lookup"><span data-stu-id="5e92d-160">One or more Unicode characters.</span></span>|  
  
## <a name="type-promotion"></a><span data-ttu-id="5e92d-161">類型提升</span><span class="sxs-lookup"><span data-stu-id="5e92d-161">Type Promotion</span></span>  
 <span data-ttu-id="5e92d-162"><xref:System.Xml.Schema.XmlSchemaInference> 類別會逐一檢查屬性與項目的值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-162">The <xref:System.Xml.Schema.XmlSchemaInference> class examines attribute and element values one at a time.</span></span> <span data-ttu-id="5e92d-163">若發現任何值，就會推斷最嚴格且不帶正負號的型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-163">As values are encountered, the most restrictive, unsigned type is inferred.</span></span> <span data-ttu-id="5e92d-164">若在推斷屬性或項目的型別後，發現新的值不符合目前推斷的型別，則推斷的型別會提升為目前推斷型別與新值均適用的新型別。</span><span class="sxs-lookup"><span data-stu-id="5e92d-164">If a type has been inferred for an attribute or element, and a new value is encountered that does not match the currently inferred type, the inferred type is promoted to a new type that applies to both the currently inferred type and the new value.</span></span> <span data-ttu-id="5e92d-165"><xref:System.Xml.Schema.XmlSchemaInference> 類別在提升推斷的型別時，會考量先前的值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-165">The <xref:System.Xml.Schema.XmlSchemaInference> class does consider previous values when promoting the inferred type.</span></span>  
  
 <span data-ttu-id="5e92d-166">例如，請考量下列兩份 XML 文件中的 XML 片段：</span><span class="sxs-lookup"><span data-stu-id="5e92d-166">For example, consider the following XML fragments from two XML documents:</span></span>  
  
 `<MyElement1 attr1="12" />`  
  
 `<MyElement1 attr1="52344" />`  
  
 <span data-ttu-id="5e92d-167">當發現第一個 `attr1` 值時，會根據 `attr1` 的值將 `unsignedByte` 的型別推斷為 `12`。</span><span class="sxs-lookup"><span data-stu-id="5e92d-167">When the first `attr1` value is encountered, the type of `attr1` is inferred as `unsignedByte` based on the value `12`.</span></span> <span data-ttu-id="5e92d-168">當發現第二個 `attr1` 時，其型別會根據目前推斷型別 `unsignedShort` 與目前的 `unsignedByte` 值被提升為 `52344`。</span><span class="sxs-lookup"><span data-stu-id="5e92d-168">When the second `attr1` is encountered, the type is promoted to `unsignedShort` based on the currently inferred type of `unsignedByte` and the current value `52344`.</span></span>  
  
 <span data-ttu-id="5e92d-169">此時，請考量下列兩份 XML 文件中的 XML：</span><span class="sxs-lookup"><span data-stu-id="5e92d-169">Now, consider the following XML from two XML documents:</span></span>  
  
 `<MyElement2 attr2="0" />`  
  
 `<MyElement2 attr2="true" />`  
  
 <span data-ttu-id="5e92d-170">當發現第一個 `attr2` 值時，會根據 `attr2` 的值將 `unsignedByte` 的型別推斷為 `0`。</span><span class="sxs-lookup"><span data-stu-id="5e92d-170">When the first `attr2` value is encountered, the type of `attr2` is inferred as `unsignedByte` based on the value `0`.</span></span> <span data-ttu-id="5e92d-171">當發現第二個 `attr2` 時，此型別會根據目前推斷型別 `string` 和目前的 `unsignedByte` 值提升為 `true`，因為在提升推斷型別時，<xref:System.Xml.Schema.XmlSchemaInference> 類別會考量之前的值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-171">When the second `attr2` is encountered, the type is promoted to `string` based on the currently inferred type of `unsignedByte` and the current value `true` because the <xref:System.Xml.Schema.XmlSchemaInference> class does consider previous values when promoting the inferred type.</span></span> <span data-ttu-id="5e92d-172">然而，若不是像上述範例一樣在兩個不同的 XML 文件中發現兩個 `attr2`，而是在相同的 XML 文件中發現時，`attr2` 將會被推斷為 `boolean`。</span><span class="sxs-lookup"><span data-stu-id="5e92d-172">However, if both instances of `attr2` were encountered in the same XML document and not in two different XML documents as illustrated above, `attr2` would have been inferred as `boolean`.</span></span>  
  
### <a name="ignored-attributes-from-the-httpwwww3org2001xmlschema-instance-namespace"></a><span data-ttu-id="5e92d-173">http://www.w3.org/2001/XMLSchema-instance 命名空間中會忽略的屬性</span><span class="sxs-lookup"><span data-stu-id="5e92d-173">Ignored Attributes from the http://www.w3.org/2001/XMLSchema-instance Namespace</span></span>  
 <span data-ttu-id="5e92d-174">下列結構描述定義的屬性會在結構描述推斷期間遭到忽略。</span><span class="sxs-lookup"><span data-stu-id="5e92d-174">The following are schema-defining attributes that are ignored during schema inference.</span></span>  
  
|<span data-ttu-id="5e92d-175">屬性</span><span class="sxs-lookup"><span data-stu-id="5e92d-175">Attribute</span></span>|<span data-ttu-id="5e92d-176">描述</span><span class="sxs-lookup"><span data-stu-id="5e92d-176">Description</span></span>|  
|---------------|-----------------|  
|`xsi:type`|<span data-ttu-id="5e92d-177">若發現項目指定了 `xsi:type`，則 `xsi:type` 將被忽略。</span><span class="sxs-lookup"><span data-stu-id="5e92d-177">If an element is encountered with `xsi:type` specified, the `xsi:type` is ignored.</span></span>|  
|`xsi:nil`|<span data-ttu-id="5e92d-178">若發現項目具有 `xsi:nil` 屬性，表示其推斷結構描述中的項目宣告具有 `nillable="true"` 值。</span><span class="sxs-lookup"><span data-stu-id="5e92d-178">If an element with an `xsi:nil` attribute is encountered, its element declaration in the inferred schema has the value of `nillable="true"`.</span></span> <span data-ttu-id="5e92d-179">將 `xsi:nil` 屬性設為 `true` 的項目不能有子項目。</span><span class="sxs-lookup"><span data-stu-id="5e92d-179">An element with an `xsi:nil` attribute set to `true` cannot have child elements.</span></span>|  
|`xsi:schemaLocation`|<span data-ttu-id="5e92d-180">如果發現 `xsi:schemaLocation`，則會加以忽略。</span><span class="sxs-lookup"><span data-stu-id="5e92d-180">If `xsi:schemaLocation` is encountered, it is ignored.</span></span>|  
|`xsi:noNamespaceSchemaLocation`|<span data-ttu-id="5e92d-181">如果發現 `xsi:noNamespaceSchemaLocation`，則會加以忽略。</span><span class="sxs-lookup"><span data-stu-id="5e92d-181">If `xsi:noNamespaceSchemaLocation` is encountered, it is ignored.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="5e92d-182">另請參閱</span><span class="sxs-lookup"><span data-stu-id="5e92d-182">See Also</span></span>  
 [<span data-ttu-id="5e92d-183">XML 結構描述物件模型 (SOM)</span><span class="sxs-lookup"><span data-stu-id="5e92d-183">XML Schema Object Model (SOM)</span></span>](../../../../docs/standard/data/xml/xml-schema-object-model-som.md)  
 [<span data-ttu-id="5e92d-184">從 XML 文件推斷結構描述</span><span class="sxs-lookup"><span data-stu-id="5e92d-184">Inferring Schemas from XML Documents</span></span>](../../../../docs/standard/data/xml/inferring-schemas-from-xml-documents.md)  
 [<span data-ttu-id="5e92d-185">推斷結構描述節點型別與結構的規則</span><span class="sxs-lookup"><span data-stu-id="5e92d-185">Rules for Inferring Schema Node Types and Structure</span></span>](../../../../docs/standard/data/xml/rules-for-inferring-schema-node-types-and-structure.md)
