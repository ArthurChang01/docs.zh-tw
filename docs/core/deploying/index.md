---
title: 應用程式發佈
description: 瞭解發佈 .NET Core 應用程式的方法。 .NET Core 可以發佈特定於平臺的應用或跨平臺應用。 您可以將應用發佈為自包含或與運行時相關。 每種模式都會影響使用者如何運行你的應用。
ms.date: 04/01/2020
ms.openlocfilehash: a4e5f9fe048d40c751f582bd49732cb903202db4
ms.sourcegitcommit: 45cced471d59d5dac3f0c92abc9d4849716098a2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/04/2020
ms.locfileid: "80665544"
---
# <a name="net-core-application-publishing-overview"></a><span data-ttu-id="a20cd-106">.NET 核心應用程式發佈概述</span><span class="sxs-lookup"><span data-stu-id="a20cd-106">.NET Core application publishing overview</span></span>

<span data-ttu-id="a20cd-107">使用 .NET Core 創建的應用程式可以在兩種不同的模式下發佈,該模式會影響使用者運行應用的方式。</span><span class="sxs-lookup"><span data-stu-id="a20cd-107">Applications you create with .NET Core can be published in two different modes, and the mode affects how a user runs your app.</span></span>

<span data-ttu-id="a20cd-108">將應用發佈為*自包含*將生成一個應用程式,其中包含 .NET Core 運行時和庫以及應用程式及其依賴項。</span><span class="sxs-lookup"><span data-stu-id="a20cd-108">Publishing your app as *self-contained* produces an application that includes the .NET Core runtime and libraries, and your application and its dependencies.</span></span> <span data-ttu-id="a20cd-109">應用程式的用戶可以在未安裝 .NET Core 運行時的電腦上運行它。</span><span class="sxs-lookup"><span data-stu-id="a20cd-109">Users of the application can run it on a machine that doesn't have the .NET Core runtime installed.</span></span>

<span data-ttu-id="a20cd-110">將應用發佈為*依賴於運行時*(以前稱為*依賴於框架*)將生成僅包含應用程式本身及其依賴項的應用程式。</span><span class="sxs-lookup"><span data-stu-id="a20cd-110">Publishing your app as *runtime-dependent* (previously known as *framework-dependent*) produces an application that includes only your application itself and its dependencies.</span></span> <span data-ttu-id="a20cd-111">應用程式的用戶必須單獨安裝 .NET Core 運行時。</span><span class="sxs-lookup"><span data-stu-id="a20cd-111">Users of the application have to separately install the .NET Core runtime.</span></span>

<span data-ttu-id="a20cd-112">默認情況下,這兩種發佈模式都會生成特定於平臺的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-112">Both publishing modes produce a platform-specific executable by default.</span></span> <span data-ttu-id="a20cd-113">無需可執行檔即可創建與運行時相關的應用程式,並且這些應用程式是跨平臺的。</span><span class="sxs-lookup"><span data-stu-id="a20cd-113">Runtime-dependent applications can be created without an executable, and these applications are cross-platform.</span></span>

<span data-ttu-id="a20cd-114">生成可執行檔時,可以使用運行時識別碼 (RID) 指定目標平臺。</span><span class="sxs-lookup"><span data-stu-id="a20cd-114">When an executable is produced, you can specify the target platform with a runtime identifier (RID).</span></span> <span data-ttu-id="a20cd-115">有關 RID 的詳細資訊,請參閱[.NET 核心 RID 目錄](../rid-catalog.md)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-115">For more information about RIDs, see [.NET Core RID Catalog](../rid-catalog.md).</span></span>

<span data-ttu-id="a20cd-116">下表概述了用於發佈應用為執行時或自包含的應用程式的指令,每個 SDK 版本:</span><span class="sxs-lookup"><span data-stu-id="a20cd-116">The following table outlines the commands used to publish an app as runtime-dependent or self-contained, per SDK version:</span></span>

| <span data-ttu-id="a20cd-117">類型</span><span class="sxs-lookup"><span data-stu-id="a20cd-117">Type</span></span>                                                                                 | <span data-ttu-id="a20cd-118">SDK 2.1</span><span class="sxs-lookup"><span data-stu-id="a20cd-118">SDK 2.1</span></span> | <span data-ttu-id="a20cd-119">SDK 3.x</span><span class="sxs-lookup"><span data-stu-id="a20cd-119">SDK 3.x</span></span> | <span data-ttu-id="a20cd-120">Command</span><span class="sxs-lookup"><span data-stu-id="a20cd-120">Command</span></span> |
| -----------------------------------------------------------------------------------  | ------- | ------- | ------- |
| <span data-ttu-id="a20cd-121">目前平台[的執行時相關執行檔](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-121">[runtime-dependent executable](#publish-runtime-dependent) for the current platform.</span></span> |         | <span data-ttu-id="a20cd-122">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-122">✔️</span></span>      | [`dotnet publish`](../tools/dotnet-publish.md) |
| <span data-ttu-id="a20cd-123">特定平台[的執行時相關的執行檔](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-123">[runtime-dependent executable](#publish-runtime-dependent) for a specific platform.</span></span>  |         | <span data-ttu-id="a20cd-124">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-124">✔️</span></span>      | [`dotnet publish -r <RID> --self-contained false`](../tools/dotnet-publish.md) |
| <span data-ttu-id="a20cd-125">[與執行時相關的跨平台二進位檔案](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-125">[runtime-dependent cross-platform binary](#publish-runtime-dependent).</span></span>               | <span data-ttu-id="a20cd-126">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-126">✔️</span></span>      | <span data-ttu-id="a20cd-127">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-127">✔️</span></span>      | [`dotnet publish`](../tools/dotnet-publish.md) |
| <span data-ttu-id="a20cd-128">[自包含執行檔](#publish-self-contained)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-128">[self-contained executable](#publish-self-contained).</span></span>                                | <span data-ttu-id="a20cd-129">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-129">✔️</span></span>      | <span data-ttu-id="a20cd-130">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-130">✔️</span></span>      | [`dotnet publish -r <RID>`](../tools/dotnet-publish.md) |

<span data-ttu-id="a20cd-131">有關詳細資訊,請參閱[.NET 核心點網發布命令](../tools/dotnet-publish.md)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-131">For more information, see [.NET Core dotnet publish command](../tools/dotnet-publish.md).</span></span>

## <a name="produce-an-executable"></a><span data-ttu-id="a20cd-132">組建執行檔</span><span class="sxs-lookup"><span data-stu-id="a20cd-132">Produce an executable</span></span>

<span data-ttu-id="a20cd-133">可執行檔不是跨平臺的。</span><span class="sxs-lookup"><span data-stu-id="a20cd-133">Executables aren't cross-platform.</span></span> <span data-ttu-id="a20cd-134">它們特定於作業系統和 CPU 體系結構。</span><span class="sxs-lookup"><span data-stu-id="a20cd-134">They're specific to an operating system and CPU architecture.</span></span> <span data-ttu-id="a20cd-135">在應用程式上執行應用程式並建立執行檔時,可以將應用發行為[自包含](#publish-self-contained)或[相依執行時](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-135">When publishing your app and creating an executable, you can publish the app as [self-contained](#publish-self-contained) or [runtime-dependent](#publish-runtime-dependent).</span></span> <span data-ttu-id="a20cd-136">將應用發佈為自包含包括帶有應用的 .NET Core 運行時,應用使用者在運行應用之前不必擔心安裝 .NET Core。</span><span class="sxs-lookup"><span data-stu-id="a20cd-136">Publishing an app as self-contained includes the .NET Core runtime with the app, and users of the app don't have to worry about installing .NET Core before running the app.</span></span> <span data-ttu-id="a20cd-137">發布為與運行時相關的應用不包括 .NET Core 運行時和庫;因此,應用將包含 .NET Core 運行時和庫。僅包括應用和第三方依賴項。</span><span class="sxs-lookup"><span data-stu-id="a20cd-137">Apps published as runtime-dependent don't include the .NET Core runtime and libraries; only the app and 3rd-party dependencies are included.</span></span>

<span data-ttu-id="a20cd-138">以下指令產生執行檔:</span><span class="sxs-lookup"><span data-stu-id="a20cd-138">The following commands produce an executable:</span></span>

| <span data-ttu-id="a20cd-139">類型</span><span class="sxs-lookup"><span data-stu-id="a20cd-139">Type</span></span>                                                                                 | <span data-ttu-id="a20cd-140">SDK 2.1</span><span class="sxs-lookup"><span data-stu-id="a20cd-140">SDK 2.1</span></span> | <span data-ttu-id="a20cd-141">SDK 3.x</span><span class="sxs-lookup"><span data-stu-id="a20cd-141">SDK 3.x</span></span> | <span data-ttu-id="a20cd-142">Command</span><span class="sxs-lookup"><span data-stu-id="a20cd-142">Command</span></span> |
| ------------------------------------------------------------------------------------ | ------- | ------- | ------- |
| <span data-ttu-id="a20cd-143">目前平台[的執行時相關執行檔](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-143">[runtime-dependent executable](#publish-runtime-dependent) for the current platform.</span></span> |         | <span data-ttu-id="a20cd-144">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-144">✔️</span></span>      | [`dotnet publish`](../tools/dotnet-publish.md) |
| <span data-ttu-id="a20cd-145">特定平台[的執行時相關的執行檔](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-145">[runtime-dependent executable](#publish-runtime-dependent) for a specific platform.</span></span>  |         | <span data-ttu-id="a20cd-146">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-146">✔️</span></span>      | [`dotnet publish -r <RID> --self-contained false`](../tools/dotnet-publish.md) |
| <span data-ttu-id="a20cd-147">[自包含執行檔](#publish-self-contained)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-147">[self-contained executable](#publish-self-contained).</span></span>                                | <span data-ttu-id="a20cd-148">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-148">✔️</span></span>      | <span data-ttu-id="a20cd-149">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-149">✔️</span></span>      | [`dotnet publish -r <RID>`](../tools/dotnet-publish.md) |

## <a name="produce-a-cross-platform-binary"></a><span data-ttu-id="a20cd-150">組建跨平台二進位</span><span class="sxs-lookup"><span data-stu-id="a20cd-150">Produce a cross-platform binary</span></span>

<span data-ttu-id="a20cd-151">當您以*dll*檔的形式將應用發佈為[依賴於運行時](#publish-runtime-dependent)的時,將創建跨平臺二進位檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-151">Cross-platform binaries are created when you publish your app as [runtime-dependent](#publish-runtime-dependent), in the form of a *dll* file.</span></span> <span data-ttu-id="a20cd-152">*dll*檔案以專案命名。</span><span class="sxs-lookup"><span data-stu-id="a20cd-152">The *dll* file is named after your project.</span></span> <span data-ttu-id="a20cd-153">例如,如果您有一個名為**word_reader**的應用,則將創建名為*word_reader.dll*的檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-153">For example, if you have an app named **word_reader**, a file named *word_reader.dll* is created.</span></span> <span data-ttu-id="a20cd-154">以這種方式發布的應用程式使用 命令`dotnet <filename.dll>`執行, 可以在任何平台上運行。</span><span class="sxs-lookup"><span data-stu-id="a20cd-154">Apps published in this way are run with the `dotnet <filename.dll>` command and can be run on any platform.</span></span>

<span data-ttu-id="a20cd-155">只要已安裝目標 .NET Core 運行時,就可以在任何作業系統上運行跨平臺二進位檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-155">Cross-platform binaries can be run on any operating system as long as the targeted .NET Core runtime is already installed.</span></span> <span data-ttu-id="a20cd-156">如果未安裝目標 .NET Core 運行時,則如果應用配置為向前滾動,則應用可能會使用較新的運行時運行。</span><span class="sxs-lookup"><span data-stu-id="a20cd-156">If the targeted .NET Core runtime isn't installed, the app may run using a newer runtime if the app is configured to roll-forward.</span></span> <span data-ttu-id="a20cd-157">有關詳細資訊,請參閱[與執行時相關的應用向前捲動](../versions/selection.md#framework-dependent-apps-roll-forward)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-157">For more information, see [runtime-dependent apps roll forward](../versions/selection.md#framework-dependent-apps-roll-forward).</span></span>

<span data-ttu-id="a20cd-158">以下指令產生跨平台二進位檔案:</span><span class="sxs-lookup"><span data-stu-id="a20cd-158">The following command produces a cross-platform binary:</span></span>

| <span data-ttu-id="a20cd-159">類型</span><span class="sxs-lookup"><span data-stu-id="a20cd-159">Type</span></span>                                                                                 | <span data-ttu-id="a20cd-160">SDK 2.1</span><span class="sxs-lookup"><span data-stu-id="a20cd-160">SDK 2.1</span></span> | <span data-ttu-id="a20cd-161">SDK 3.x</span><span class="sxs-lookup"><span data-stu-id="a20cd-161">SDK 3.x</span></span> | <span data-ttu-id="a20cd-162">Command</span><span class="sxs-lookup"><span data-stu-id="a20cd-162">Command</span></span> |
| -----------------------------------------------------------------------------------  | ------- | ------- | ------- |
| <span data-ttu-id="a20cd-163">[與執行時相關的跨平台二進位檔案](#publish-runtime-dependent)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-163">[runtime-dependent cross-platform binary](#publish-runtime-dependent).</span></span>               | <span data-ttu-id="a20cd-164">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-164">✔️</span></span>      | <span data-ttu-id="a20cd-165">✔️</span><span class="sxs-lookup"><span data-stu-id="a20cd-165">✔️</span></span>      | [`dotnet publish`](../tools/dotnet-publish.md) |

## <a name="publish-runtime-dependent"></a><span data-ttu-id="a20cd-166">發佈與執行時相關的發佈</span><span class="sxs-lookup"><span data-stu-id="a20cd-166">Publish runtime-dependent</span></span>

<span data-ttu-id="a20cd-167">發佈為依賴於運行時的應用是跨平臺的,不包括 .NET Core 運行時。</span><span class="sxs-lookup"><span data-stu-id="a20cd-167">Apps published as runtime-dependent are cross-platform and don't include the .NET Core runtime.</span></span> <span data-ttu-id="a20cd-168">應用的使用者需要安裝 .NET Core 運行時。</span><span class="sxs-lookup"><span data-stu-id="a20cd-168">The user of your app is required to install the .NET Core runtime.</span></span>

<span data-ttu-id="a20cd-169">將套用於執行時相關的應用程式將產生[跨平臺二進位檔案](#produce-a-cross-platform-binary)作為*dll*檔,以及針對目前的平台[的平臺特定執行檔](#produce-an-executable)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-169">Publishing an app as runtime-dependent produces a [cross-platform binary](#produce-a-cross-platform-binary) as a *dll* file, and a [platform-specific executable](#produce-an-executable) that targets your current platform.</span></span> <span data-ttu-id="a20cd-170">*dll*是跨平臺的,而可執行檔不是。</span><span class="sxs-lookup"><span data-stu-id="a20cd-170">The *dll* is cross-platform while the executable isn't.</span></span> <span data-ttu-id="a20cd-171">例如,如果發表名為**word_reader**和目標 Windows 的應用,則將建立*word_reader.exe*可執行檔以及*word_reader.dll*。</span><span class="sxs-lookup"><span data-stu-id="a20cd-171">For example, if you publish an app named **word_reader** and target Windows, a *word_reader.exe* executable is created along with *word_reader.dll*.</span></span> <span data-ttu-id="a20cd-172">當目標 Linux 或 macOS 時,將*word_reader.dll*一起創建*word_reader*可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-172">When targeting Linux or macOS, a *word_reader* executable is created along with *word_reader.dll*.</span></span> <span data-ttu-id="a20cd-173">有關 RID 的詳細資訊,請參閱[.NET 核心 RID 目錄](../rid-catalog.md)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-173">For more information about RIDs, see [.NET Core RID Catalog](../rid-catalog.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a20cd-174">.NET Core SDK 2.1 在發佈依賴於應用運行時時不會生成特定於平臺的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-174">.NET Core SDK 2.1 doesn't produce platform-specific executables when you publish an app runtime-dependent.</span></span>

<span data-ttu-id="a20cd-175">應用的跨平臺二進位檔可以使用`dotnet <filename.dll>`命令 運行,並且可以在任何平臺上運行。</span><span class="sxs-lookup"><span data-stu-id="a20cd-175">The cross-platform binary of your app can be run with the `dotnet <filename.dll>` command, and can be run on any platform.</span></span> <span data-ttu-id="a20cd-176">如果應用使用的 NuGet 包具有特定於平臺的實現,則所有平台的依賴項都將隨應用一起複製到發佈資料夾。</span><span class="sxs-lookup"><span data-stu-id="a20cd-176">If the app uses a NuGet package that has platform-specific implementations, all platforms' dependencies are copied to the publish folder along with the app.</span></span>

<span data-ttu-id="a20cd-177">通過將參數傳遞給`-r <RID> --self-contained false`[`dotnet publish`](../tools/dotnet-publish.md)命令,可以為特定平台創建可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-177">You can create an executable for a specific platform by passing the `-r <RID> --self-contained false` parameters to the [`dotnet publish`](../tools/dotnet-publish.md) command.</span></span> <span data-ttu-id="a20cd-178">省略參數`-r`時,將為您的當前平台創建一個可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-178">When the `-r` parameter is omitted, an executable is created for your current platform.</span></span> <span data-ttu-id="a20cd-179">任何具有目標平臺特定於平台的依賴項的任何 NuGet 包都將複製到發佈資料夾。</span><span class="sxs-lookup"><span data-stu-id="a20cd-179">Any NuGet packages that have platform-specific dependencies for the targeted platform are copied to the publish folder.</span></span>

### <a name="advantages"></a><span data-ttu-id="a20cd-180">優點</span><span class="sxs-lookup"><span data-stu-id="a20cd-180">Advantages</span></span>

- <span data-ttu-id="a20cd-181">**小型部署**</span><span class="sxs-lookup"><span data-stu-id="a20cd-181">**Small deployment**</span></span>\
<span data-ttu-id="a20cd-182">僅分發你的應用及其依賴項。</span><span class="sxs-lookup"><span data-stu-id="a20cd-182">Only your app and its dependencies are distributed.</span></span> <span data-ttu-id="a20cd-183">.NET Core 運行時和庫由使用者安裝,所有應用共用運行時。</span><span class="sxs-lookup"><span data-stu-id="a20cd-183">The .NET Core runtime and libraries are installed by the user and all apps share the runtime.</span></span>

- <span data-ttu-id="a20cd-184">**跨平臺**</span><span class="sxs-lookup"><span data-stu-id="a20cd-184">**Cross-platform**</span></span>\
<span data-ttu-id="a20cd-185">您的應用程式和任何 。基於 NET 的庫在其他作業系統上運行。</span><span class="sxs-lookup"><span data-stu-id="a20cd-185">Your app and any .NET-based library runs on other operating systems.</span></span> <span data-ttu-id="a20cd-186">您無需為應用定義目標平臺。</span><span class="sxs-lookup"><span data-stu-id="a20cd-186">You don't need to define a target platform for your app.</span></span> <span data-ttu-id="a20cd-187">關於 .NET 檔案格式的資訊,請參考[.NET 程式集檔案格式](../../standard/assembly/file-format.md)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-187">For information about the .NET file format, see [.NET Assembly File Format](../../standard/assembly/file-format.md).</span></span>

- <span data-ttu-id="a20cd-188">**使用最新的修補執行時**</span><span class="sxs-lookup"><span data-stu-id="a20cd-188">**Uses the latest patched runtime**</span></span>\
<span data-ttu-id="a20cd-189">該應用程式使用目標系統上安裝的最新運行時(在目標系統上安裝的目標主要次要類型 .NET Core)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-189">The app uses the latest runtime (within the targeted major-minor family of .NET Core) installed on the target system.</span></span> <span data-ttu-id="a20cd-190">這意味著你的應用會自動使用 .NET Core 運行時的最新修補版本。</span><span class="sxs-lookup"><span data-stu-id="a20cd-190">This means your app automatically uses the latest patched version of the .NET Core runtime.</span></span> <span data-ttu-id="a20cd-191">可以重寫此默認行為。</span><span class="sxs-lookup"><span data-stu-id="a20cd-191">This default behavior can be overridden.</span></span> <span data-ttu-id="a20cd-192">有關詳細資訊,請參閱[與執行時相關的應用向前捲動](../versions/selection.md#framework-dependent-apps-roll-forward)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-192">For more information, see [runtime-dependent apps roll forward](../versions/selection.md#framework-dependent-apps-roll-forward).</span></span>

### <a name="disadvantages"></a><span data-ttu-id="a20cd-193">缺點</span><span class="sxs-lookup"><span data-stu-id="a20cd-193">Disadvantages</span></span>

- <span data-ttu-id="a20cd-194">**需要預先安裝執行時**</span><span class="sxs-lookup"><span data-stu-id="a20cd-194">**Requires pre-installing the runtime**</span></span>\
<span data-ttu-id="a20cd-195">僅當應用目標 .NET Core 的版本已在主機系統上安裝時,你的應用才能運行。</span><span class="sxs-lookup"><span data-stu-id="a20cd-195">Your app can run only if the version of .NET Core your app targets is already installed on the host system.</span></span> <span data-ttu-id="a20cd-196">您可以為應用配置滾向行為,以需要 .NET Core 的特定版本或允許較新版本的 .NET Core。</span><span class="sxs-lookup"><span data-stu-id="a20cd-196">You can configure roll-forward behavior for the app to either require a specific version of .NET Core or allow a newer version of .NET Core.</span></span> <span data-ttu-id="a20cd-197">有關詳細資訊,請參閱[與執行時相關的應用向前捲動](../versions/selection.md#framework-dependent-apps-roll-forward)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-197">For more information, see [runtime-dependent apps roll forward](../versions/selection.md#framework-dependent-apps-roll-forward).</span></span>

- <span data-ttu-id="a20cd-198">**.NET 核心可能更改**</span><span class="sxs-lookup"><span data-stu-id="a20cd-198">**.NET Core may change**</span></span>\
<span data-ttu-id="a20cd-199">.NET Core 運行時和庫可以在運行應用的電腦上更新。</span><span class="sxs-lookup"><span data-stu-id="a20cd-199">It's possible for the .NET Core runtime and libraries to be updated on the machine where the app is run.</span></span> <span data-ttu-id="a20cd-200">在極少數情況下,如果您使用 .NET Core 庫,這可能會更改應用的行為,大多數應用都這樣做。</span><span class="sxs-lookup"><span data-stu-id="a20cd-200">In rare cases, this may change the behavior of your app if you use the .NET Core libraries, which most apps do.</span></span> <span data-ttu-id="a20cd-201">您可以配置應用如何使用較新版本的 .NET Core。</span><span class="sxs-lookup"><span data-stu-id="a20cd-201">You can configure how your app uses newer versions of .NET Core.</span></span> <span data-ttu-id="a20cd-202">有關詳細資訊,請參閱[與執行時相關的應用向前捲動](../versions/selection.md#framework-dependent-apps-roll-forward)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-202">For more information, see [runtime-dependent apps roll forward](../versions/selection.md#framework-dependent-apps-roll-forward).</span></span>

<span data-ttu-id="a20cd-203">以下缺點僅適用於 .NET 核心 2.1 SDK。</span><span class="sxs-lookup"><span data-stu-id="a20cd-203">The following disadvantage only applies to .NET Core 2.1 SDK.</span></span>

- <span data-ttu-id="a20cd-204">**使用`dotnet`指令啟動應用程式**</span><span class="sxs-lookup"><span data-stu-id="a20cd-204">**Use the `dotnet` command to start the app**</span></span>\
<span data-ttu-id="a20cd-205">用戶必須運行該`dotnet <filename.dll>`命令才能啟動應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-205">Users must run the `dotnet <filename.dll>` command to start your app.</span></span> <span data-ttu-id="a20cd-206">.NET Core 2.1 SDK 不會為發布的依賴於運行時的應用生成特定於平臺的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-206">.NET Core 2.1 SDK doesn't produce platform-specific executables for apps published runtime-dependent.</span></span>

### <a name="examples"></a><span data-ttu-id="a20cd-207">範例</span><span class="sxs-lookup"><span data-stu-id="a20cd-207">Examples</span></span>

<span data-ttu-id="a20cd-208">發佈與應用跨平台運行時相關的應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-208">Publish an app cross-platform runtime-dependent.</span></span> <span data-ttu-id="a20cd-209">與*dll*檔一起創建針對當前平臺的執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-209">An executable that targets your current platform is created along with the *dll* file.</span></span>

```dotnet
dotnet publish
```

<span data-ttu-id="a20cd-210">發佈與應用跨平台運行時相關的應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-210">Publish an app cross-platform runtime-dependent.</span></span> <span data-ttu-id="a20cd-211">與*dll*檔一起創建 Linux 64 位元可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-211">A Linux 64-bit executable is created along with the *dll* file.</span></span> <span data-ttu-id="a20cd-212">此命令與 .NET 核心 SDK 2.1 不起作用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-212">This command doesn't work with .NET Core SDK 2.1.</span></span>

```dotnet
dotnet publish -r linux-x64 --self-contained false
```

## <a name="publish-self-contained"></a><span data-ttu-id="a20cd-213">發佈自包含</span><span class="sxs-lookup"><span data-stu-id="a20cd-213">Publish self-contained</span></span>

<span data-ttu-id="a20cd-214">將應用發佈為自包含將會產生特定於平臺的可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-214">Publishing your app as self-contained produces a platform-specific executable.</span></span> <span data-ttu-id="a20cd-215">輸出發佈資料夾包含應用的所有元件,包括 .NET Core 庫和目標運行時。</span><span class="sxs-lookup"><span data-stu-id="a20cd-215">The output publishing folder contains all components of the app, including the .NET Core libraries and target runtime.</span></span> <span data-ttu-id="a20cd-216">該應用與其他 .NET Core 應用隔離,不使用本地安裝的共用運行時。</span><span class="sxs-lookup"><span data-stu-id="a20cd-216">The app is isolated from other .NET Core apps and doesn't use a locally installed shared runtime.</span></span> <span data-ttu-id="a20cd-217">不需要應用的使用者下載和安裝 .NET Core。</span><span class="sxs-lookup"><span data-stu-id="a20cd-217">The user of your app isn't required to download and install .NET Core.</span></span>

<span data-ttu-id="a20cd-218">可執行二進位檔是為指定的目標平臺生成的。</span><span class="sxs-lookup"><span data-stu-id="a20cd-218">The executable binary is produced for the specified target platform.</span></span> <span data-ttu-id="a20cd-219">例如,如果您有名為**word_reader**的應用,並且為 Windows 發佈了自包含可執行檔,則將創建*word_reader.exe*檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-219">For example, if you have an app named **word_reader**, and you publish a self-contained executable for Windows, a *word_reader.exe* file is created.</span></span> <span data-ttu-id="a20cd-220">為 Linux 或 macOS 發表,將創建*word_reader*檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-220">Publishing for Linux or macOS, a *word_reader* file is created.</span></span> <span data-ttu-id="a20cd-221">目標平臺和體系結構使用`-r <RID>`[`dotnet publish`](../tools/dotnet-publish.md)命令的參數指定。</span><span class="sxs-lookup"><span data-stu-id="a20cd-221">The target platform and architecture is specified with the `-r <RID>` parameter for the [`dotnet publish`](../tools/dotnet-publish.md) command.</span></span> <span data-ttu-id="a20cd-222">有關 RID 的詳細資訊,請參閱[.NET 核心 RID 目錄](../rid-catalog.md)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-222">For more information about RIDs, see [.NET Core RID Catalog](../rid-catalog.md).</span></span>

<span data-ttu-id="a20cd-223">如果應用具有特定於平台的依賴項(如包含特定於平臺的依賴項的 NuGet 包),則這些依賴項將與應用一起複製到發佈資料夾。</span><span class="sxs-lookup"><span data-stu-id="a20cd-223">If the app has platform-specific dependencies, such as a NuGet package containing platform-specific dependencies, these are copied to the publish folder along with the app.</span></span>

### <a name="advantages"></a><span data-ttu-id="a20cd-224">優點</span><span class="sxs-lookup"><span data-stu-id="a20cd-224">Advantages</span></span>

- <span data-ttu-id="a20cd-225">**控制 .NET 核心版本**</span><span class="sxs-lookup"><span data-stu-id="a20cd-225">**Control .NET Core version**</span></span>\
<span data-ttu-id="a20cd-226">您可以控制隨應用一起部署 .NET Core 的哪個版本。</span><span class="sxs-lookup"><span data-stu-id="a20cd-226">You control which version of .NET Core is deployed with your app.</span></span>

- <span data-ttu-id="a20cd-227">**特定於平台的目標**</span><span class="sxs-lookup"><span data-stu-id="a20cd-227">**Platform-specific targeting**</span></span>\
<span data-ttu-id="a20cd-228">由於您必須為每個平台發佈應用,因此知道應用將運行在何處。</span><span class="sxs-lookup"><span data-stu-id="a20cd-228">Because you have to publish your app for each platform, you know where your app will run.</span></span> <span data-ttu-id="a20cd-229">如果 .NET Core 引入了一個新平臺,則在發佈面向該平臺的版本之前,用戶無法在該平臺上運行你的應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-229">If .NET Core introduces a new platform, users can't run your app on that platform until you release a version targeting that platform.</span></span> <span data-ttu-id="a20cd-230">您可以在使用者在新平臺上運行應用之前測試應用的相容性問題。</span><span class="sxs-lookup"><span data-stu-id="a20cd-230">You can test your app for compatibility problems before your users run your app on the new platform.</span></span>

### <a name="disadvantages"></a><span data-ttu-id="a20cd-231">缺點</span><span class="sxs-lookup"><span data-stu-id="a20cd-231">Disadvantages</span></span>

- <span data-ttu-id="a20cd-232">**更大的部署**</span><span class="sxs-lookup"><span data-stu-id="a20cd-232">**Larger deployments**</span></span>\
<span data-ttu-id="a20cd-233">由於你的應用包括 .NET Core 運行時和所有應用依賴項,因此所需的下載大小和硬碟空間大於[與運行時相關的](#publish-runtime-dependent)版本。</span><span class="sxs-lookup"><span data-stu-id="a20cd-233">Because your app includes the .NET Core runtime and all of your app dependencies, the download size and hard drive space required is greater than a [runtime-dependent](#publish-runtime-dependent) version.</span></span>

  > [!TIP]
  > <span data-ttu-id="a20cd-234">通過使用 .NET Core[*全球化不變模式*](https://github.com/dotnet/runtime/blob/master/docs/design/features/globalization-invariant-mode.md),您可以將在 Linux 系統上的部署大小減小了大約 28 MB。</span><span class="sxs-lookup"><span data-stu-id="a20cd-234">You can reduce the size of your deployment on Linux systems by approximately 28 MB by using .NET Core [*globalization invariant mode*](https://github.com/dotnet/runtime/blob/master/docs/design/features/globalization-invariant-mode.md).</span></span> <span data-ttu-id="a20cd-235">這強制你的應用程式對待所有區域性,如[不變文化](xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType)。</span><span class="sxs-lookup"><span data-stu-id="a20cd-235">This forces your app to treat all cultures like the [invariant culture](xref:System.Globalization.CultureInfo.InvariantCulture?displayProperty=nameWithType).</span></span>

- <span data-ttu-id="a20cd-236">**更難更新 .NET 核心版本**</span><span class="sxs-lookup"><span data-stu-id="a20cd-236">**Harder to update the .NET Core version**</span></span>\
<span data-ttu-id="a20cd-237">.NET 核心運行時(隨應用一起分發)只能通過發佈應用的新版本進行升級。</span><span class="sxs-lookup"><span data-stu-id="a20cd-237">.NET Core Runtime (distributed with your app) can only be upgraded by releasing a new version of your app.</span></span> <span data-ttu-id="a20cd-238">您負責向 .NET 核心執行時提供應用程式的安全修補程式的更新版本。</span><span class="sxs-lookup"><span data-stu-id="a20cd-238">You're responsible for supplying an updated version of your application for security patches to the .NET Core Runtime.</span></span>

### <a name="examples"></a><span data-ttu-id="a20cd-239">範例</span><span class="sxs-lookup"><span data-stu-id="a20cd-239">Examples</span></span>

<span data-ttu-id="a20cd-240">發佈自包含的應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-240">Publish an app self-contained.</span></span> <span data-ttu-id="a20cd-241">將創建 macOS 64 位元可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-241">A macOS 64-bit executable is created.</span></span>

```dotnet
dotnet publish -r osx-x64
```

<span data-ttu-id="a20cd-242">發佈自包含的應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-242">Publish an app self-contained.</span></span> <span data-ttu-id="a20cd-243">將創建 Windows 64 位元可執行檔。</span><span class="sxs-lookup"><span data-stu-id="a20cd-243">A Windows 64-bit executable is created.</span></span>

```dotnet
dotnet publish -r win-x64
```

## <a name="see-also"></a><span data-ttu-id="a20cd-244">另請參閱</span><span class="sxs-lookup"><span data-stu-id="a20cd-244">See also</span></span>

- [<span data-ttu-id="a20cd-245">使用 .NET 核心 CLI 部署 .NET 核心應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-245">Deploying .NET Core Apps with .NET Core CLI.</span></span>](deploy-with-cli.md)
- [<span data-ttu-id="a20cd-246">使用可視化工作室部署 .NET 核心應用。</span><span class="sxs-lookup"><span data-stu-id="a20cd-246">Deploying .NET Core Apps with Visual Studio.</span></span>](deploy-with-vs.md)
- [<span data-ttu-id="a20cd-247">包、元包和框架。</span><span class="sxs-lookup"><span data-stu-id="a20cd-247">Packages, Metapackages, and Frameworks.</span></span>](../packages.md)
- [<span data-ttu-id="a20cd-248">.NET 核心運行時識別器 (RID) 目錄。</span><span class="sxs-lookup"><span data-stu-id="a20cd-248">.NET Core Runtime IDentifier (RID) catalog.</span></span>](../rid-catalog.md)
- [<span data-ttu-id="a20cd-249">選擇要使用的 .NET 核心版本。</span><span class="sxs-lookup"><span data-stu-id="a20cd-249">Select the .NET Core version to use.</span></span>](../versions/selection.md)
