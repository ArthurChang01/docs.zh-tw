---
title: 無伺服器架構-無伺服器應用程式
description: 探索無伺服器架構支援的各種架構和應用程式，包括 web 應用程式、行動裝置和 IoT。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 838dcd7b41df0d8297e1ae10f9c04a8d5b83b332
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 11/08/2019
ms.locfileid: "72522402"
---
# <a name="serverless-architecture"></a>無伺服器架構

使用[無伺服器](https://azure.com/serverless)架構的方法有很多種。 本章會探索整合無伺服器的常見架構範例。 它也涵蓋在執行無伺服器時可能會造成額外挑戰或需要額外考慮的顧慮。 最後會提供幾個說明各種無伺服器使用案例的設計範例。

無伺服器主機通常會使用現有的容器型或 PaaS 層來管理無伺服器實例。 例如，Azure Functions 是以[Azure App Service](https://docs.microsoft.com/azure/app-service/)為基礎。 App Service 可用來向外延展實例，以及管理執行 Azure Functions 程式碼的執行時間。 對於以 Windows 為基礎的函式，主機會以 PaaS 的形式執行，並相應放大 .NET 執行時間。 對於以 Linux 為基礎的函式，主機會利用容器。

![Azure Functions 架構](./media/azure-functions-architecture.png)

Webjob 核心會提供函數的執行內容。 語言執行時間會執行腳本、執行程式庫，並裝載目的語言的架構。 例如，node.js 是用來執行 JavaScript 函式，而 .NET Framework 則是用來執行C#函數。 您將會在本章稍後進一步瞭解語言和平臺選項。

有些專案可能受益于對無伺服器採取「全功能」的方法。 依賴微服務的應用程式可能會使用無伺服器技術來執行所有微服務。 大部分的應用程式都是混合式，遵循多層式設計，並針對有意義的元件使用無伺服器，因為元件是模組化且可獨立擴充。 為了説明您瞭解這些案例，本節將逐步解說一些使用無伺服器的常見架構範例。

## <a name="full-serverless-back-end"></a>完整無伺服器後端

完整無伺服器後端適用于數種類型的案例，特別是在建立新的或「環保欄位」應用程式時。 具有大型 Api 介面區的應用程式，可能會受益于將每個 API 實作為無伺服器功能。 以微服務架構為基礎的應用程式是另一個可實作為完整無伺服器後端的範例。 微服務會透過各種不同的通訊協定彼此溝通。 特定案例包括：

- 以 API 為基礎的 SaaS 產品（例如：財務付款處理器）。
- 訊息驅動的應用程式（例如：裝置監視解決方案）。
- 著重于服務間整合的應用程式（例如：航空公司預約應用程式）。
- 定期執行的進程（例如：以計時器為基礎的資料庫清理）。
- 著重于資料轉換的應用程式（例如：檔案上傳所觸發的匯入）。
- 解壓縮轉換和載入（ETL）進程。

本檔稍後會涵蓋其他更具體的使用案例。

## <a name="monoliths-and-starving-the-beast"></a>是開化「和 "starvation the beast"

常見的挑戰是將現有的整合型應用程式遷移至雲端。 最具風險的方法是將「隨即轉移」完全放在虛擬機器上。 許多商店偏好使用遷移來將其程式碼基底現代化。 實際的遷移方法稱為「starvation beast」。 在此案例中，單體會以「原樣」進行遷移，以開始使用。 然後，會現代化選取的服務。 在某些情況下，服務的簽章等同于原始的：它只會裝載為函式。 用戶端會更新為使用新的服務，而不是單體端點。 在過渡期間，諸如資料庫複寫之類的步驟可讓微服務裝載自己的儲存體，即使單體仍在處理交易時也一樣。 最後，所有用戶端都會遷移到新的服務。 單體是 "耗盡" （其服務不再被呼叫），直到所有功能都已被取代為止。 無伺服器和 proxy 的組合可加速此項遷移。

![無伺服器單體遷移](./media/serverless-monolith-migration.png)

若要深入瞭解此方法，請觀看影片：[使用無伺服器 Azure Functions 將您的應用程式帶入雲端](https://channel9.msdn.com/Events/Connect/2017/E102)。

## <a name="web-apps"></a>Web 應用程式

Web apps 是無伺服器應用程式的絕佳候選項目。 現在 web 應用程式有兩種常見的方法：伺服器驅動和用戶端驅動（例如單一頁面應用程式或 SPA）。 伺服器導向的 web 應用程式通常會使用中介軟體層來發出 API 呼叫來呈現 web UI。 SPA 應用程式會直接從瀏覽器進行 REST API 呼叫。 在這兩種情況下，無伺服器可以提供必要的商務邏輯來容納中介軟體或 REST API 要求。 常見的架構是建立輕量靜態 web 伺服器。 單一頁面應用程式（SPA）可提供 HTML、CSS、JavaScript 和其他瀏覽器資產。 然後，web 應用程式會連線到微服務後端。

## <a name="mobile-back-ends"></a>行動後端

無伺服器應用程式的事件驅動架構，使其成為行動後端的理想選擇。 行動裝置會觸發事件，並執行無伺服器程式碼以滿足要求。 利用無伺服器模型可讓開發人員增強商務邏輯，而不需要部署完整的應用程式更新。 無伺服器方法也可讓小組同時共用端點和工作。

行動開發人員可以建立商務邏輯，而不需要成為伺服器端的專家。 傳統上，連接到內部部署服務的 mobile apps。 建立服務層需要瞭解伺服器平臺和程式設計範例。 開發人員使用作業來布建伺服器並適當地進行設定。 有時候在建立部署管線時，會花費數天或甚至數周的時間。 所有這些挑戰都是由無伺服器來解決。

無伺服器會將伺服器端相依性抽象化，並可讓開發人員專注于商務邏輯。 例如，使用 JavaScript 架構來建立應用程式的行動開發人員，也可以使用 JavaScript 建立無伺服器功能。 無伺服器主機會管理作業系統、裝載程式碼的 node.js 實例、封裝相依性等等。 開發人員會提供一組簡單的輸入和標準的輸出範本。 然後他們可以專注于建立和測試商務邏輯。 因此，他們可以使用現有的技能來建立行動應用程式的後端邏輯，而不需要學習新的平臺或成為「伺服器端開發人員」。

![無伺服器行動後端](./media/serverless-mobile-backend.png)

大部分的雲端提供者都提供以行動為基礎的無伺服器產品，可簡化整個行動開發生命週期。 這些產品可以自動布建資料庫以保存資料、處理 DevOps 考慮、提供雲端式組建和測試架構，以及使用開發人員慣用的語言撰寫商務程式腳本的能力。 遵循以行動為中心的無伺服器方法，可以簡化程式。 無伺服器會移除布建、設定和維護行動後端伺服器的巨大負擔。

## <a name="internet-of-things-iot"></a>物聯網 (IoT)

IoT 指的是與網路在一起的實體物件。 它們有時稱為「已連線的裝置」或「智慧型裝置」。 來自車輛和自動販賣機器的所有內容都可以連接，並將資訊從清查範圍傳送到感應器資料，例如溫度和濕度。 在企業中，IoT 透過監控和自動化來供應商務程式改善。 IoT 資料可用來調節大型倉儲中的氣候，或透過供應鏈來追蹤清查。 IoT 可以在偵測到冒煙時，有意義的潑濺並呼叫火災部門。

大量的裝置和資訊通常會指示事件驅動架構來路由傳送和處理訊息。 無伺服器是理想的解決方案，原因如下：

- 可在裝置和資料量增加時進行調整。
- 配合新增端點，以支援新的裝置和感應器。
- 有助於獨立的版本控制，讓開發人員可以更新特定裝置的商務邏輯，而不需要部署整個系統。
- 復原能力和較少的停機時間。

IoT 的普及率產生了數個無伺服器產品，特別著重于 IoT 考慮，例如[Azure IoT 中樞](https://docs.microsoft.com/azure/iot-hub)。 無伺服器會自動化工作，例如裝置註冊、原則強制執行、追蹤，甚至是將程式碼部署到*邊緣*裝置。 邊緣是指連線到網際網路的感應器和傳動器等裝置，而不是作用中的部分。

>[!div class="step-by-step"]
>[上一頁](architecture-approaches.md)
>[下一頁](serverless-architecture-considerations.md)
