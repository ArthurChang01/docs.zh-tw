---
title: 簡介-WCF 開發人員的 gRPC
description: 簡介
ms.date: 09/02/2019
ms.openlocfilehash: 2f36d6294e2c76309b051fb3af21157cbfc1087a
ms.sourcegitcommit: 5fb5b6520b06d7f5e6131ec2ad854da302a28f2e
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/03/2019
ms.locfileid: "74711240"
---
# <a name="introduction"></a><span data-ttu-id="3f52d-103">簡介</span><span class="sxs-lookup"><span data-stu-id="3f52d-103">Introduction</span></span>

<span data-ttu-id="3f52d-104">協助機器彼此通訊的方式，是數位年齡的主要 preoccupations 之一。</span><span class="sxs-lookup"><span data-stu-id="3f52d-104">Helping machines communicate with each other has been one of the primary preoccupations of the digital age.</span></span> <span data-ttu-id="3f52d-105">特別是，有一個持續的工作需要決定最佳的遠端通訊機制，以符合目前基礎結構的互通性需求。</span><span class="sxs-lookup"><span data-stu-id="3f52d-105">In particular, there's an ongoing effort to determine the optimal remote communication mechanism that will suit the interoperability demands of the current infrastructure.</span></span> <span data-ttu-id="3f52d-106">您可以想像，這項機制會隨著需求或基礎結構的發展而改變。</span><span class="sxs-lookup"><span data-stu-id="3f52d-106">As you can imagine, that mechanism changes as either the demands or the infrastructure evolves.</span></span>

<span data-ttu-id="3f52d-107">.NET Core 3.0 的推出會在 Microsoft 為想要跨多種平臺提供服務的開發人員提供遠端通訊解決方案的方式。</span><span class="sxs-lookup"><span data-stu-id="3f52d-107">The release of .NET Core 3.0 marks a shift in the way that Microsoft delivers remote communication solutions to developers who want to deliver services across a range of platforms.</span></span> <span data-ttu-id="3f52d-108">.NET Core 不提供現成的 Windows Communication Foundation （WCF），但隨著 ASP.NET Core 3.0 的發行，它提供內建的 gRPC 功能。</span><span class="sxs-lookup"><span data-stu-id="3f52d-108">.NET Core doesn't offer Windows Communication Foundation (WCF) out of the box but, with the release of ASP.NET Core 3.0, it does provide built-in gRPC functionality.</span></span>

<span data-ttu-id="3f52d-109">gRPC 是較廣泛軟體社區中的熱門架構。</span><span class="sxs-lookup"><span data-stu-id="3f52d-109">gRPC is a popular framework in the wider software community.</span></span> <span data-ttu-id="3f52d-110">在許多程式設計語言中，適用于新式 RPC 案例的開發人員會使用它。</span><span class="sxs-lookup"><span data-stu-id="3f52d-110">It's used by developers across many programming languages for modern RPC scenarios.</span></span> <span data-ttu-id="3f52d-111">該社區和生態系統既活躍又活躍。</span><span class="sxs-lookup"><span data-stu-id="3f52d-111">The community and the ecosystem are vibrant and active.</span></span> <span data-ttu-id="3f52d-112">GRPC 通訊協定的支援已新增至基礎結構元件，例如 Kubernetes、服務網格、負載平衡器等等。</span><span class="sxs-lookup"><span data-stu-id="3f52d-112">Support for the gRPC protocol is being added to infrastructure components like Kubernetes, service meshes, load balancers, and more.</span></span> <span data-ttu-id="3f52d-113">這些因素連同效能、效率和跨平臺的相容性，讓 gRPC 成為新應用程式的自然選擇，以及移至 .NET Core 的 WCF 應用程式。</span><span class="sxs-lookup"><span data-stu-id="3f52d-113">These factors, together with its performance, efficiency, and cross-platform compatibility, make gRPC a natural choice for new apps and WCF apps moving to .NET Core.</span></span>

## <a name="history"></a><span data-ttu-id="3f52d-114">歷程</span><span class="sxs-lookup"><span data-stu-id="3f52d-114">History</span></span>

<span data-ttu-id="3f52d-115">電腦網路的基本原則，只是一組電腦彼此交換資料，以達成一系列相互關聯的工作，而不會在其開始後變更。</span><span class="sxs-lookup"><span data-stu-id="3f52d-115">The fundamental principle of a computer network as nothing more than a group of computers exchanging data with each other to achieve a set of interrelated tasks hasn't changed since its inception.</span></span> <span data-ttu-id="3f52d-116">但是複雜度、規模和期望已以指數方式成長。</span><span class="sxs-lookup"><span data-stu-id="3f52d-116">But the complexity, scale, and expectations have grown exponentially.</span></span>  

<span data-ttu-id="3f52d-117">在二十世紀，重點在於改善使用相同語言和平臺的內部網路。</span><span class="sxs-lookup"><span data-stu-id="3f52d-117">During the 1990s, the emphasis was mainly on improving internal networks that used the same language and platforms.</span></span> <span data-ttu-id="3f52d-118">TCP/IP 已成為這種通訊類型的黃金標準。</span><span class="sxs-lookup"><span data-stu-id="3f52d-118">TCP/IP became the gold standard for this type of communication.</span></span>

<span data-ttu-id="3f52d-119">重點在於提升與語言無關的方法，讓您更有效地將跨多個平臺的通訊優化。</span><span class="sxs-lookup"><span data-stu-id="3f52d-119">The focus soon shifted to how best to optimize communication across multiple platforms by promoting a language-agnostic approach.</span></span> <span data-ttu-id="3f52d-120">服務導向架構（SOA）提供了一種結構，可讓您將廣泛的服務集合提供給應用程式。</span><span class="sxs-lookup"><span data-stu-id="3f52d-120">Service-oriented architecture (SOA) provided a structure for loosely coupling a broad collection of services that could be provided to an application.</span></span>

<span data-ttu-id="3f52d-121">當所有主要平臺都能存取網際網路，但仍無法彼此互動時，就會發生*web 服務*的開發。</span><span class="sxs-lookup"><span data-stu-id="3f52d-121">The development of *web services* occurred when all major platforms could access the internet, but they still couldn’t interact with each other.</span></span> <span data-ttu-id="3f52d-122">Web 服務具有開放式標準和通訊協定，包括：</span><span class="sxs-lookup"><span data-stu-id="3f52d-122">Web services have open standards and protocols, including:</span></span>

- <span data-ttu-id="3f52d-123">XML 來標記和程式碼資料。</span><span class="sxs-lookup"><span data-stu-id="3f52d-123">XML to tag and code data.</span></span>
- <span data-ttu-id="3f52d-124">簡單的物件存取通訊協定（SOAP），用來傳送資料。</span><span class="sxs-lookup"><span data-stu-id="3f52d-124">Simple Object Access Protocol (SOAP) to transfer data.</span></span>
- <span data-ttu-id="3f52d-125">Web 服務定義語言（WSDL），用以描述 web 服務並將其連接到用戶端應用程式。</span><span class="sxs-lookup"><span data-stu-id="3f52d-125">Web Services Definition Language (WSDL) to describe and connect web services to client applications.</span></span>
- <span data-ttu-id="3f52d-126">通用描述、探索與整合（UDDI）讓其他服務可探索 web 服務。</span><span class="sxs-lookup"><span data-stu-id="3f52d-126">Universal Description, Discovery, and Integration (UDDI) to make web services discoverable by other services.</span></span>

<span data-ttu-id="3f52d-127">SOAP 會定義應用程式的分散式元素可以彼此通訊的規則，即使它們在不同的平臺上也一樣。</span><span class="sxs-lookup"><span data-stu-id="3f52d-127">SOAP defines the rules by which distributed elements of an application can communicate with each other, even if they're on different platforms.</span></span> <span data-ttu-id="3f52d-128">SOAP 是以 XML 為基礎，因此是人類看得懂的。</span><span class="sxs-lookup"><span data-stu-id="3f52d-128">SOAP is based on XML, so it's human-readable.</span></span> <span data-ttu-id="3f52d-129">讓 SOAP 易於瞭解的犧牲是大小;SOAP 訊息大於可比較通訊協定中的訊息。</span><span class="sxs-lookup"><span data-stu-id="3f52d-129">The sacrifice for making SOAP easily understood is size; SOAP messages are larger than messages in comparable protocols.</span></span> <span data-ttu-id="3f52d-130">SOAP 的設計目的是要將整合型應用程式分解成 multicomponent 形式，而不會失去安全性或控制。</span><span class="sxs-lookup"><span data-stu-id="3f52d-130">SOAP was designed to break monolithic applications into multicomponent form without losing security or control.</span></span> <span data-ttu-id="3f52d-131">因此，WCF 是設計用來處理這種類型的系統，不同的是，gRPC 是以分散式系統的形式開始。</span><span class="sxs-lookup"><span data-stu-id="3f52d-131">So WCF was designed to work with that kind of system, unlike gRPC, which began as a distributed system.</span></span> <span data-ttu-id="3f52d-132">WCF 藉由開發和記載 SOAP 堆疊的專屬延伸模組通訊協定來解決其中一些限制，但代價是不支援其他平臺。</span><span class="sxs-lookup"><span data-stu-id="3f52d-132">WCF addressed some of these limitations by developing and documenting proprietary extension protocols for the SOAP stack, but at the cost of a lack of support from other platforms.</span></span>

<span data-ttu-id="3f52d-133">Windows Communication Foundation 是用來建立服務的架構。</span><span class="sxs-lookup"><span data-stu-id="3f52d-133">Windows Communication Foundation is a framework for building services.</span></span> <span data-ttu-id="3f52d-134">其設計在早期的2000s 中，可協助開發人員使用舊版 SOA 來管理與 SOAP 搭配運作的複雜性。</span><span class="sxs-lookup"><span data-stu-id="3f52d-134">It was designed in the early 2000s to help developers using early SOA to manage the complexities of working with SOAP.</span></span> <span data-ttu-id="3f52d-135">雖然它會移除開發人員撰寫自己的 SOAP 通訊協定的需求，但是 WCF 仍會使用 SOAP 來啟用與其他系統的互通性。</span><span class="sxs-lookup"><span data-stu-id="3f52d-135">Although it removes the requirement for the developers to write their own SOAP protocols, WCF still uses SOAP to enable interoperability with other systems.</span></span> <span data-ttu-id="3f52d-136">WCF 也是設計來提供跨多個通訊協定（HTTP/1.1、Net.tcp 等等）的解決方案。</span><span class="sxs-lookup"><span data-stu-id="3f52d-136">WCF was also designed to deliver solutions across multiple protocols (HTTP/1.1, Net.TCP, and so on).</span></span>

## <a name="microservices"></a><span data-ttu-id="3f52d-137">微服務</span><span class="sxs-lookup"><span data-stu-id="3f52d-137">Microservices</span></span>

<span data-ttu-id="3f52d-138">在微服務架構中，大型應用程式是以較小的模組化服務集合來建立。</span><span class="sxs-lookup"><span data-stu-id="3f52d-138">In microservice architectures, large applications are built as a collection of smaller modular services.</span></span> <span data-ttu-id="3f52d-139">每個元件都會執行特定的工作或程式，而元件則是設計成可運作 interoperably，但可以視需要加以隔離。</span><span class="sxs-lookup"><span data-stu-id="3f52d-139">Each component does a specific task or process, and components are designed to work interoperably but can be isolated as necessary.</span></span>

<span data-ttu-id="3f52d-140">微服務的優點包括：</span><span class="sxs-lookup"><span data-stu-id="3f52d-140">Advantages to microservices include:</span></span>

- <span data-ttu-id="3f52d-141">變更和升級可以獨立處理。</span><span class="sxs-lookup"><span data-stu-id="3f52d-141">Changes and upgrades can be handled independently.</span></span>
- <span data-ttu-id="3f52d-142">錯誤處理會變得更有效率，因為可以追蹤特定服務的問題，然後獨立于其他服務之外隔離、重建、測試和重新部署。</span><span class="sxs-lookup"><span data-stu-id="3f52d-142">Error handling becomes more efficient because problems can be traced to specific services that are then isolated, rebuilt, tested, and redeployed independently of the other services.</span></span>
- <span data-ttu-id="3f52d-143">擴充性可以限制為特定的實例或服務，而不是整個應用程式。</span><span class="sxs-lookup"><span data-stu-id="3f52d-143">Scalability can be confined to specific instances or services rather than the whole application.</span></span>
- <span data-ttu-id="3f52d-144">開發可以跨多個小組進行，相較于許多小組在單一程式碼基底上工作，會有更少的摩擦。</span><span class="sxs-lookup"><span data-stu-id="3f52d-144">Development can happen across multiple teams, with less friction than occurs when many teams work on a single codebase.</span></span>

<span data-ttu-id="3f52d-145">隨著日益增加的虛擬化、雲端運算、容器和物聯網的發展，已貢獻微服務的持續成長。</span><span class="sxs-lookup"><span data-stu-id="3f52d-145">The move towards increasing virtualization, cloud computing, containers, and the Internet of Things has contributed to the ongoing rise of microservices.</span></span> <span data-ttu-id="3f52d-146">但微服務並不會有其挑戰。</span><span class="sxs-lookup"><span data-stu-id="3f52d-146">But microservices aren't without their challenges.</span></span> <span data-ttu-id="3f52d-147">分散/非集中式基礎結構著重于在服務之間進行通訊時的簡單性和速度需求。</span><span class="sxs-lookup"><span data-stu-id="3f52d-147">The fragmented/decentralized infrastructure put more emphasis on the need for simplicity and speed when communicating between services.</span></span> <span data-ttu-id="3f52d-148">這又會特別注意 SOAP 的偶爾費力和 contorted 本質。</span><span class="sxs-lookup"><span data-stu-id="3f52d-148">This in turn drew attention to the sometimes laborious and contorted nature of SOAP.</span></span>

<span data-ttu-id="3f52d-149">在此環境中，gRPC 已啟動，Microsoft 第一次發行 WCF 之後10年。</span><span class="sxs-lookup"><span data-stu-id="3f52d-149">It was into this environment that gRPC was launched, 10 years after Microsoft first released WCF.</span></span> <span data-ttu-id="3f52d-150">直接從 Google 的內部基礎結構 RPC （Stubby）演變，gRPC 從未以已通知許多舊版 Rpc 參數的相同標準和通訊協定為基礎。</span><span class="sxs-lookup"><span data-stu-id="3f52d-150">Evolved directly from Google’s internal infrastructure RPC (Stubby), gRPC was never based on the same standards and protocols that had informed the parameters of many earlier RPCs.</span></span> <span data-ttu-id="3f52d-151">而 gRPC 只是以 HTTP/2 為基礎。</span><span class="sxs-lookup"><span data-stu-id="3f52d-151">And gRPC was only ever based on HTTP/2.</span></span> <span data-ttu-id="3f52d-152">這就是為什麼它可以繪製先進的傳輸通訊協定所提供的新功能。</span><span class="sxs-lookup"><span data-stu-id="3f52d-152">That's why it could draw on the new capabilities that advanced transport protocol provided.</span></span> <span data-ttu-id="3f52d-153">特別是雙向串流、二進位訊息和多工。</span><span class="sxs-lookup"><span data-stu-id="3f52d-153">In particular, bidirectional streaming, binary messaging, and multiplexing.</span></span>

## <a name="about-this-guide"></a><span data-ttu-id="3f52d-154">關於本指南</span><span class="sxs-lookup"><span data-stu-id="3f52d-154">About this guide</span></span>

<span data-ttu-id="3f52d-155">本指南涵蓋 gRPC 的主要功能。</span><span class="sxs-lookup"><span data-stu-id="3f52d-155">This guide covers the key features of gRPC.</span></span> <span data-ttu-id="3f52d-156">早期章節會深入探討 WCF 的主要功能，並將它們與 gRPC 的功能做比較。</span><span class="sxs-lookup"><span data-stu-id="3f52d-156">The early chapters take a high-level look at the main features of WCF and compare them to those of gRPC.</span></span> <span data-ttu-id="3f52d-157">它會識別 WCF 和 gRPC 之間的直接相互關聯，以及 gRPC 提供優勢的位置。</span><span class="sxs-lookup"><span data-stu-id="3f52d-157">It identifies where there are direct correlations between WCF and gRPC and also where gRPC offers an advantage.</span></span> <span data-ttu-id="3f52d-158">當 WCF 和 gRPC 之間沒有相互關聯，或當 gRPC 無法提供對 WCF 的對等解決方案時，本指南將會建議因應措施或位置以取得詳細資訊。</span><span class="sxs-lookup"><span data-stu-id="3f52d-158">When there's no correlation between WCF and gRPC, or when gRPC isn't able to offer an equivalent solution to WCF, this guide will suggest workarounds or where to go for more information.</span></span>

<span data-ttu-id="3f52d-159">第5章使用一組範例 WCF 應用程式，深入探討如何將 WCF 服務的主要類型（簡單的要求-回復、單向和串流）轉換為其在 gRPC 中的對等專案。</span><span class="sxs-lookup"><span data-stu-id="3f52d-159">Using a set of sample WCF applications, Chapter 5 is a deep-dive look at converting the main types of WCF service (simple request-reply, one-way, and streaming) to their equivalents in gRPC.</span></span>

<span data-ttu-id="3f52d-160">本書的最後一節探討如何從 gRPC 中取得最佳的作法。</span><span class="sxs-lookup"><span data-stu-id="3f52d-160">The final section of the book looks at how to get the best from gRPC in practice.</span></span> <span data-ttu-id="3f52d-161">本節包含使用其他工具（例如 Docker 容器或 Kubernetes）的相關資訊，以利用 gRPC 的效率。</span><span class="sxs-lookup"><span data-stu-id="3f52d-161">This section includes information on using additional tools, like Docker containers or Kubernetes, to take advantage of the efficiency of gRPC.</span></span> <span data-ttu-id="3f52d-162">其中也包含使用記錄、計量和分散式追蹤進行監視的詳細探討。</span><span class="sxs-lookup"><span data-stu-id="3f52d-162">It also includes a detailed look at monitoring with logging, metrics, and distributed tracing.</span></span>

## <a name="who-this-guide-is-for"></a><span data-ttu-id="3f52d-163">本指南的適用對象</span><span class="sxs-lookup"><span data-stu-id="3f52d-163">Who this guide is for</span></span>

<span data-ttu-id="3f52d-164">本指南是針對使用 WCF 的開發人員，以及想要將應用程式遷移至 .NET Core 3.0 和更新版本之新式 RPC 環境的 .NET Framework 或 .NET Core 所撰寫。</span><span class="sxs-lookup"><span data-stu-id="3f52d-164">This guide was written for developers working in .NET Framework or .NET Core who have used WCF and who are seeking to migrate their applications to a modern RPC environment for .NET Core 3.0 and later versions.</span></span> <span data-ttu-id="3f52d-165">本指南也可能更適用于升級或考慮升級至 .NET Core 3.0 的開發人員，以及想要使用內建 gRPC 工具的人員。</span><span class="sxs-lookup"><span data-stu-id="3f52d-165">The guide might also be useful more generally for developers upgrading or considering upgrading to .NET Core 3.0 and who want to use the built-in gRPC tools.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="3f52d-166">[上一頁](index.md)
>[下一頁](grpc-overview.md)</span><span class="sxs-lookup"><span data-stu-id="3f52d-166">[Previous](index.md)
[Next](grpc-overview.md)</span></span>
