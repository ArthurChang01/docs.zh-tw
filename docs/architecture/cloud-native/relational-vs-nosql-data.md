---
title: 關係與 NoSQL 資料
description: 瞭解雲原生應用程式中的關係資料和 NoSQL 資料
author: robvet
ms.date: 01/22/2020
ms.openlocfilehash: 04693e30ba3848f1e51f1c69a75be5f18ead4cf1
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/12/2020
ms.locfileid: "79141415"
---
# <a name="relational-vs-nosql-data"></a><span data-ttu-id="5922c-103">關係與 NoSQL 資料</span><span class="sxs-lookup"><span data-stu-id="5922c-103">Relational vs. NoSQL data</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="5922c-104">關係和 NoSQL 是兩種類型的資料庫系統，通常在雲本機應用程式中實現。</span><span class="sxs-lookup"><span data-stu-id="5922c-104">Relational and NoSQL are two types of database systems commonly implemented in cloud-native apps.</span></span> <span data-ttu-id="5922c-105">它們構建方式不同，存儲資料不同，訪問方式也不同。</span><span class="sxs-lookup"><span data-stu-id="5922c-105">They're built differently, store data differently, and accessed differently.</span></span> <span data-ttu-id="5922c-106">在本節中，我們將介紹這兩個。</span><span class="sxs-lookup"><span data-stu-id="5922c-106">In this section, we'll look at both.</span></span> <span data-ttu-id="5922c-107">在本章的後面部分，我們將介紹一種名為*NewSQL*的新興資料庫技術。</span><span class="sxs-lookup"><span data-stu-id="5922c-107">Later in this chapter, we'll look at an emerging database technology called *NewSQL*.</span></span>

<span data-ttu-id="5922c-108">*幾十年來，關係資料庫*一直是一種流行的技術。</span><span class="sxs-lookup"><span data-stu-id="5922c-108">*Relational databases* have been a prevalent technology for decades.</span></span> <span data-ttu-id="5922c-109">它們成熟、成熟且廣泛實施。</span><span class="sxs-lookup"><span data-stu-id="5922c-109">They're mature, proven, and widely implemented.</span></span> <span data-ttu-id="5922c-110">競爭的資料庫產品、工具和專業知識比比皆是。</span><span class="sxs-lookup"><span data-stu-id="5922c-110">Competing database products, tooling, and expertise abound.</span></span> <span data-ttu-id="5922c-111">關係資料庫提供相關資料表的存儲。</span><span class="sxs-lookup"><span data-stu-id="5922c-111">Relational databases provide a store of related data tables.</span></span> <span data-ttu-id="5922c-112">這些表具有固定的架構，使用 SQL（結構化查詢語言）來管理資料，並支援 ACID 保證。</span><span class="sxs-lookup"><span data-stu-id="5922c-112">These tables have a fixed schema, use SQL (Structured Query Language) to manage data, and support ACID guarantees.</span></span>

<span data-ttu-id="5922c-113">*無 SQL 資料庫*是指高性能、非關係資料存儲。</span><span class="sxs-lookup"><span data-stu-id="5922c-113">*No-SQL databases* refer to high-performance, non-relational data stores.</span></span> <span data-ttu-id="5922c-114">他們在易用性、可擴充性、彈性和可用性特性方面表現卓越。</span><span class="sxs-lookup"><span data-stu-id="5922c-114">They excel in their ease-of-use, scalability, resilience, and availability characteristics.</span></span> <span data-ttu-id="5922c-115">NoSQL 不是聯接正常化資料的表，而是存儲非結構化或半結構化資料，通常存儲在鍵值對或 JSON 文檔中。</span><span class="sxs-lookup"><span data-stu-id="5922c-115">Instead of joining tables of normalized data, NoSQL stores unstructured or semi-structured data, often in key-value pairs or JSON documents.</span></span> <span data-ttu-id="5922c-116">無 SQL 資料庫通常不提供超出單個資料庫分區範圍的 ACID 保證。</span><span class="sxs-lookup"><span data-stu-id="5922c-116">No-SQL databases typically don't provide ACID guarantees beyond the scope of a single database partition.</span></span> <span data-ttu-id="5922c-117">需要次秒回應時間的高容量服務有利於 NoSQL 資料存儲。</span><span class="sxs-lookup"><span data-stu-id="5922c-117">High volume services that require sub second response time favor NoSQL datastores.</span></span>

<span data-ttu-id="5922c-118">[NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/)技術對分散式雲本機系統的影響怎麼強調也不為過。</span><span class="sxs-lookup"><span data-stu-id="5922c-118">The impact of [NoSQL](https://www.geeksforgeeks.org/introduction-to-nosql/) technologies for distributed cloud-native systems can't be overstated.</span></span> <span data-ttu-id="5922c-119">這一領域的新資料技術的激增打亂了曾經完全依賴關係資料庫的解決方案。</span><span class="sxs-lookup"><span data-stu-id="5922c-119">The proliferation of new data technologies in this space has disrupted solutions that once exclusively relied on relational databases.</span></span>

<span data-ttu-id="5922c-120">NoSQL 資料庫包括幾個用於訪問和管理資料的不同模型，每個模型都適合特定的用例。</span><span class="sxs-lookup"><span data-stu-id="5922c-120">NoSQL databases include several different models for accessing and managing data, each suited to specific use cases.</span></span> <span data-ttu-id="5922c-121">圖 5-9 顯示了四種常見模型。</span><span class="sxs-lookup"><span data-stu-id="5922c-121">Figure 5-9 presents four common models.</span></span>

![無SQL資料模型](./media/types-of-nosql-datastores.png)

<span data-ttu-id="5922c-123">**圖 5-9**： NoSQL 資料庫的資料模型</span><span class="sxs-lookup"><span data-stu-id="5922c-123">**Figure 5-9**: Data models for NoSQL databases</span></span>

| <span data-ttu-id="5922c-124">模型</span><span class="sxs-lookup"><span data-stu-id="5922c-124">Model</span></span> | <span data-ttu-id="5922c-125">特性</span><span class="sxs-lookup"><span data-stu-id="5922c-125">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="5922c-126">文檔存儲</span><span class="sxs-lookup"><span data-stu-id="5922c-126">Document Store</span></span> | <span data-ttu-id="5922c-127">資料和中繼資料在資料庫中基於 JSON 的文檔中分層存儲。</span><span class="sxs-lookup"><span data-stu-id="5922c-127">Data and metadata are stored hierarchically in JSON-based documents inside the database.</span></span> |
| <span data-ttu-id="5922c-128">關鍵價值存儲</span><span class="sxs-lookup"><span data-stu-id="5922c-128">Key Value Store</span></span> | <span data-ttu-id="5922c-129">作為 NoSQL 資料庫中最簡單的資料，資料表示為鍵值對的集合。</span><span class="sxs-lookup"><span data-stu-id="5922c-129">The simplest of the NoSQL databases, data is represented as a collection of key-value pairs.</span></span> |
| <span data-ttu-id="5922c-130">寬柱商店</span><span class="sxs-lookup"><span data-stu-id="5922c-130">Wide-Column Store</span></span> | <span data-ttu-id="5922c-131">相關資料存儲在單個列中的一組嵌套鍵/值對中。</span><span class="sxs-lookup"><span data-stu-id="5922c-131">Related data is stored as a set of nested-key/value pairs within a single column.</span></span> |
| <span data-ttu-id="5922c-132">圖形存儲</span><span class="sxs-lookup"><span data-stu-id="5922c-132">Graph Store</span></span> | <span data-ttu-id="5922c-133">資料存儲在圖形結構中作為節點、邊和資料屬性。</span><span class="sxs-lookup"><span data-stu-id="5922c-133">Data is stored in a graph structure as node, edge, and data properties.</span></span> |

## <a name="the-cap-theorem"></a><span data-ttu-id="5922c-134">CAP 定理</span><span class="sxs-lookup"><span data-stu-id="5922c-134">The CAP theorem</span></span>

<span data-ttu-id="5922c-135">為了瞭解這些類型的資料庫之間的差異，請考慮 CAP 定理，這是一組應用於存儲狀態的分散式系統的原則。</span><span class="sxs-lookup"><span data-stu-id="5922c-135">As a way to understand the differences between these types of databases, consider the CAP theorem, a set of principles applied to distributed systems that store state.</span></span> <span data-ttu-id="5922c-136">圖 5-10 顯示了 CAP 定理的三個屬性。</span><span class="sxs-lookup"><span data-stu-id="5922c-136">Figure 5-10 shows the three properties of the CAP theorem.</span></span>

![CAP 定理](./media/cap-theorem.png)

<span data-ttu-id="5922c-138">**圖 5-10**。</span><span class="sxs-lookup"><span data-stu-id="5922c-138">**Figure 5-10**.</span></span> <span data-ttu-id="5922c-139">CAP 定理</span><span class="sxs-lookup"><span data-stu-id="5922c-139">The CAP theorem</span></span>

<span data-ttu-id="5922c-140">該定理指出，分散式資料系統將在一致性、可用性和分區容差之間進行權衡。</span><span class="sxs-lookup"><span data-stu-id="5922c-140">The theorem states that distributed data systems will offer a trade-off between consistency, availability, and partition tolerance.</span></span> <span data-ttu-id="5922c-141">而且，任何資料庫只能保證三個屬性中的*兩*個：</span><span class="sxs-lookup"><span data-stu-id="5922c-141">And, that any database can only guarantee *two* of the three properties:</span></span>

- <span data-ttu-id="5922c-142">*一致性。*</span><span class="sxs-lookup"><span data-stu-id="5922c-142">*Consistency.*</span></span> <span data-ttu-id="5922c-143">群集中的每個節點都回應最新的資料，即使系統必須阻止請求，直到所有副本更新。</span><span class="sxs-lookup"><span data-stu-id="5922c-143">Every node in the cluster responds with the most recent data, even if the system must block the request until all replicas update.</span></span> <span data-ttu-id="5922c-144">如果查詢當前正在更新的專案的"一致系統"，則將等待該回應，直到所有副本成功更新。</span><span class="sxs-lookup"><span data-stu-id="5922c-144">If you query a "consistent system" for an item that is currently updating, you'll wait for that response until all replicas successfully update.</span></span> <span data-ttu-id="5922c-145">但是，您將收到最新的資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-145">However, you'll receive the most current data.</span></span>

- <span data-ttu-id="5922c-146">*可用 性。*</span><span class="sxs-lookup"><span data-stu-id="5922c-146">*Availability.*</span></span> <span data-ttu-id="5922c-147">每個節點都會返回即時回應，即使該回應不是最新的資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-147">Every node returns an immediate response, even if that response isn't the most recent data.</span></span> <span data-ttu-id="5922c-148">如果查詢正在更新的專案的"可用系統"，您將獲得該服務此時可以提供的最佳答案。</span><span class="sxs-lookup"><span data-stu-id="5922c-148">If you query an "available system" for an item that is updating, you'll get the best possible answer the service can provide at that moment.</span></span>

- <span data-ttu-id="5922c-149">*分區容差。*</span><span class="sxs-lookup"><span data-stu-id="5922c-149">*Partition Tolerance.*</span></span> <span data-ttu-id="5922c-150">保證即使複製的資料節點發生故障或失去與其他複製資料節點的連接，系統也能繼續運行。</span><span class="sxs-lookup"><span data-stu-id="5922c-150">Guarantees the system continues to operate even if a replicated data node fails or loses connectivity with other replicated data nodes.</span></span>

<span data-ttu-id="5922c-151">關係資料庫通常提供一致性和可用性，但不提供分區容差。</span><span class="sxs-lookup"><span data-stu-id="5922c-151">Relational databases typically provide consistency and availability, but not partition tolerance.</span></span> <span data-ttu-id="5922c-152">它們通常預配到單個伺服器，並通過向電腦添加更多資源來垂直擴展。</span><span class="sxs-lookup"><span data-stu-id="5922c-152">They're typically provisioned to a single server and scale vertically by adding more resources to the machine.</span></span>

<span data-ttu-id="5922c-153">許多關係資料庫系統都支援內置複製功能，其中主資料庫的副本可以製作到其他次要伺服器實例。</span><span class="sxs-lookup"><span data-stu-id="5922c-153">Many relational database systems support built-in replication features where copies of the primary database can be made to other secondary server instances.</span></span> <span data-ttu-id="5922c-154">寫入操作對主實例執行，並複製到每個輔助實例。</span><span class="sxs-lookup"><span data-stu-id="5922c-154">Write operations are made to the primary instance and replicated to each of the secondaries.</span></span> <span data-ttu-id="5922c-155">發生故障時，主實例可能會容錯移轉到輔助實例以提供高可用性。</span><span class="sxs-lookup"><span data-stu-id="5922c-155">Upon a failure, the primary instance can fail over to a secondary to provide high availability.</span></span> <span data-ttu-id="5922c-156">次要資料庫還可用於分發讀取操作。</span><span class="sxs-lookup"><span data-stu-id="5922c-156">Secondaries can also be used to distribute read operations.</span></span> <span data-ttu-id="5922c-157">雖然寫入操作始終針對主副本，但讀取操作可以路由到任何輔助副本，以減少系統負載。</span><span class="sxs-lookup"><span data-stu-id="5922c-157">While writes operations always go against the primary replica, read operations can be routed to any of the secondaries to reduce system load.</span></span>

<span data-ttu-id="5922c-158">資料也可以跨多個節點水準分區，例如分[片](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-introduction)。</span><span class="sxs-lookup"><span data-stu-id="5922c-158">Data can also be horizontally partitioned across multiple nodes, such as with [sharding](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-introduction).</span></span> <span data-ttu-id="5922c-159">但是，分片化通過將資料吐出許多不易通信的片段，大大增加了操作開銷。</span><span class="sxs-lookup"><span data-stu-id="5922c-159">But, sharding dramatically increases operational overhead by spitting data across many pieces that cannot easily communicate.</span></span> <span data-ttu-id="5922c-160">管理可能既昂貴又耗時。</span><span class="sxs-lookup"><span data-stu-id="5922c-160">It can be costly and time consuming to manage.</span></span> <span data-ttu-id="5922c-161">它最終可能會影響性能、表聯接和參考完整性。</span><span class="sxs-lookup"><span data-stu-id="5922c-161">It can end up impacting performance, table joins, and referential integrity.</span></span>

<span data-ttu-id="5922c-162">如果資料副本在"高度一致"的關係資料庫群集中失去網路連接，您將無法寫入資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-162">If data replicas were to lose network connectivity in a "highly consistent" relational database cluster, you wouldn't be able to write to the database.</span></span> <span data-ttu-id="5922c-163">系統將拒絕寫入操作，因為它無法將該更改複製到其他資料副本。</span><span class="sxs-lookup"><span data-stu-id="5922c-163">The system would reject the write operation as it can't replicate that change to the other data replica.</span></span> <span data-ttu-id="5922c-164">每個資料副本都必須在事務完成之前進行更新。</span><span class="sxs-lookup"><span data-stu-id="5922c-164">Every data replica has to update before the transaction can complete.</span></span>

<span data-ttu-id="5922c-165">NoSQL 資料庫通常支援高可用性和分區容差。</span><span class="sxs-lookup"><span data-stu-id="5922c-165">NoSQL databases typically support high availability and partition tolerance.</span></span> <span data-ttu-id="5922c-166">它們橫向擴展，通常跨商品伺服器擴展。</span><span class="sxs-lookup"><span data-stu-id="5922c-166">They scale out horizontally, often across commodity servers.</span></span> <span data-ttu-id="5922c-167">這種方法在地理區域內和跨地理區域之間提供巨大的可用性，成本降低。</span><span class="sxs-lookup"><span data-stu-id="5922c-167">This approach provides tremendous availability, both within and across geographical regions at a reduced cost.</span></span> <span data-ttu-id="5922c-168">跨這些電腦或節點對資料進行分區和複製，從而提供冗余和容錯能力。</span><span class="sxs-lookup"><span data-stu-id="5922c-168">You partition and replicate data across these machines, or nodes, providing redundancy and fault tolerance.</span></span> <span data-ttu-id="5922c-169">缺點是一致性。</span><span class="sxs-lookup"><span data-stu-id="5922c-169">The downside is consistency.</span></span> <span data-ttu-id="5922c-170">更改一個 NoSQL 節點上的資料可能需要一些時間才能傳播到其他節點。</span><span class="sxs-lookup"><span data-stu-id="5922c-170">A change to data on one NoSQL node can take some time to propagate to other nodes.</span></span> <span data-ttu-id="5922c-171">通常，NoSQL 資料庫節點會立即回應查詢 - 即使顯示的資料已過時且尚未更新。</span><span class="sxs-lookup"><span data-stu-id="5922c-171">Typically, a NoSQL database node will provide an immediate response to a query - even if the data that is presented is stale and hasn't updated yet.</span></span>

<span data-ttu-id="5922c-172">如果資料副本在"高度可用"的 NoSQL 資料庫群集中失去連接，您仍然可以完成對資料庫的寫入操作。</span><span class="sxs-lookup"><span data-stu-id="5922c-172">If data replicas were to lose connectivity in a "highly available" NoSQL database cluster, you could still complete a write operation to the database.</span></span> <span data-ttu-id="5922c-173">資料庫群集將允許寫入操作，並在每個資料副本可用時更新它。</span><span class="sxs-lookup"><span data-stu-id="5922c-173">The database cluster would allow the write operation and update each data replica as it becomes available.</span></span>

<span data-ttu-id="5922c-174">這種結果稱為最終一致性，這是不支援 ACID 事務的分散式資料系統的一個特徵。</span><span class="sxs-lookup"><span data-stu-id="5922c-174">This kind of result is known as eventual consistency, a characteristic of distributed data systems where ACID transactions aren't supported.</span></span> <span data-ttu-id="5922c-175">在資料項目的更新與將該更新傳播到每個副本節點所需的時間之間，這是短暫的延遲。</span><span class="sxs-lookup"><span data-stu-id="5922c-175">It's a brief delay between the update of a data item and time that it takes to propagate that update to each of the replica nodes.</span></span> <span data-ttu-id="5922c-176">在正常情況下，滯後通常是短的，但當出現問題時可能會增加。</span><span class="sxs-lookup"><span data-stu-id="5922c-176">Under normal conditions, the lag is typically short, but can increase when problems arise.</span></span> <span data-ttu-id="5922c-177">例如，如果要更新美國 NoSQL 資料庫中的產品項並從歐洲的副本節點查詢同一資料項目，會發生什麼情況？</span><span class="sxs-lookup"><span data-stu-id="5922c-177">For example, what would happen if you were to update a product item in a NoSQL database in the United States and query that same data item from a replica node in Europe?</span></span> <span data-ttu-id="5922c-178">您將收到較早的產品資訊，直到群集更新帶有產品更改的歐洲節點。</span><span class="sxs-lookup"><span data-stu-id="5922c-178">You would receive the earlier product information, until the cluster updates the European node with the product change.</span></span> <span data-ttu-id="5922c-179">通過立即返回查詢結果，而不是等待所有副本節點更新，您可以獲得巨大的規模和卷，但可以呈現較舊的資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-179">By immediately returning a query result and not waiting for all replica nodes to update, you gain enormous scale and volume, but with the possibility of presenting older data.</span></span>

<span data-ttu-id="5922c-180">高可用性和大規模可擴充性通常比強一致性對業務更關鍵。</span><span class="sxs-lookup"><span data-stu-id="5922c-180">High availability and massive scalability are often more critical to the business than strong consistency.</span></span> <span data-ttu-id="5922c-181">開發人員可以實施像 Sagas、CQRS 和非同步消息傳遞這樣的技術和模式，以擁抱最終的一致性。</span><span class="sxs-lookup"><span data-stu-id="5922c-181">Developers can implement techniques and patterns such as Sagas, CQRS, and asynchronous messaging to embrace eventual consistency.</span></span>

> <span data-ttu-id="5922c-182">如今，在約束 CAP 定理約束時必須小心謹慎。</span><span class="sxs-lookup"><span data-stu-id="5922c-182">Nowadays, care must be taken when conidering the CAP theorem constraints.</span></span> <span data-ttu-id="5922c-183">一種稱為NewSQL的新型資料庫已經擴展了關係資料庫引擎，以支援NoSQL系統的橫向可擴充性和可擴充性能。</span><span class="sxs-lookup"><span data-stu-id="5922c-183">A new type of database, called NewSQL, has emerged which extends the relational database engine to support both horizontal scalability and the scalable performance of NoSQL systems.</span></span>

## <a name="considerations-for-relational-vs-nosql-systems"></a><span data-ttu-id="5922c-184">關係與 NoSQL 系統的注意事項</span><span class="sxs-lookup"><span data-stu-id="5922c-184">Considerations for relational vs. NoSQL systems</span></span>

<span data-ttu-id="5922c-185">根據特定資料要求，基於雲的微服務可以實現關係、NoSQL 資料存儲或兩者。</span><span class="sxs-lookup"><span data-stu-id="5922c-185">Based upon specific data requirements, a cloud-native-based microservice can implement a relational, NoSQL datastore or both.</span></span>

|  <span data-ttu-id="5922c-186">在以下時間考慮 NoSQL 資料存儲：</span><span class="sxs-lookup"><span data-stu-id="5922c-186">Consider a NoSQL datastore when:</span></span> | <span data-ttu-id="5922c-187">在以下時間考慮關係資料庫：</span><span class="sxs-lookup"><span data-stu-id="5922c-187">Consider a relational database when:</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="5922c-188">您擁有需要大規模的高容量工作負載</span><span class="sxs-lookup"><span data-stu-id="5922c-188">You have high volume workloads that require large scale</span></span> | <span data-ttu-id="5922c-189">您的工作負載量是一致的，需要大中型</span><span class="sxs-lookup"><span data-stu-id="5922c-189">Your workload volume is consistent and requires medium to large scale</span></span> |
| <span data-ttu-id="5922c-190">您的工作負載不需要 ACID 保證</span><span class="sxs-lookup"><span data-stu-id="5922c-190">Your workloads don't require ACID guarantees</span></span> |  <span data-ttu-id="5922c-191">需要 ACID 保證</span><span class="sxs-lookup"><span data-stu-id="5922c-191">ACID guarantees are required</span></span> |
| <span data-ttu-id="5922c-192">您的資料是動態的，並且經常更改</span><span class="sxs-lookup"><span data-stu-id="5922c-192">Your data is dynamic and frequently changes</span></span> | <span data-ttu-id="5922c-193">您的資料是可預測的，並且結構高度</span><span class="sxs-lookup"><span data-stu-id="5922c-193">Your data is predictable and highly structured</span></span> |
| <span data-ttu-id="5922c-194">資料可以在沒有關系的情況下表達</span><span class="sxs-lookup"><span data-stu-id="5922c-194">Data can be expressed without relationships</span></span> | <span data-ttu-id="5922c-195">資料最好以關係表示</span><span class="sxs-lookup"><span data-stu-id="5922c-195">Data is best expressed relationally</span></span> |  
| <span data-ttu-id="5922c-196">您需要快速寫入，寫入安全性不重要</span><span class="sxs-lookup"><span data-stu-id="5922c-196">You need fast writes and write safety isn't critical</span></span> | <span data-ttu-id="5922c-197">寫入安全是一項要求</span><span class="sxs-lookup"><span data-stu-id="5922c-197">Write safety is a requirement</span></span> |  
| <span data-ttu-id="5922c-198">資料檢索簡單，趨於平面</span><span class="sxs-lookup"><span data-stu-id="5922c-198">Data retrieval is simple and tends to be flat</span></span> | <span data-ttu-id="5922c-199">您處理複雜的查詢和報表</span><span class="sxs-lookup"><span data-stu-id="5922c-199">You work with complex queries and reports</span></span>|
| <span data-ttu-id="5922c-200">您的資料需要廣泛的地理分佈</span><span class="sxs-lookup"><span data-stu-id="5922c-200">Your data requires a wide geographic distribution</span></span> | <span data-ttu-id="5922c-201">您的使用者更集中</span><span class="sxs-lookup"><span data-stu-id="5922c-201">Your users are more centralized</span></span> |
| <span data-ttu-id="5922c-202">您的應用程式將部署到商用硬體，例如使用公共雲</span><span class="sxs-lookup"><span data-stu-id="5922c-202">Your application will be deployed to commodity hardware, such as with public clouds</span></span> | <span data-ttu-id="5922c-203">您的應用程式將部署到大型高端硬體</span><span class="sxs-lookup"><span data-stu-id="5922c-203">Your application will be deployed to large, high-end hardware</span></span> |
|||

<span data-ttu-id="5922c-204">在下一節中，我們將探討 Azure 雲中可用於存儲和管理雲原生資料的選項。</span><span class="sxs-lookup"><span data-stu-id="5922c-204">In the next sections, we'll explore the options available in the Azure cloud for storing and managing your cloud-native data.</span></span>

## <a name="database-as-a-service"></a><span data-ttu-id="5922c-205">資料庫為服務</span><span class="sxs-lookup"><span data-stu-id="5922c-205">Database as a Service</span></span>

<span data-ttu-id="5922c-206">首先，您可以預配 Azure 虛擬機器，並為每個服務安裝您選擇的資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-206">To start, you could provision an Azure virtual machine and install your database of choice for each service.</span></span> <span data-ttu-id="5922c-207">雖然您可以完全控制環境，但您會放棄雲平臺的許多內置功能。</span><span class="sxs-lookup"><span data-stu-id="5922c-207">While you'd have full control over the environment, you'd forgo many built-in features of the cloud platform.</span></span> <span data-ttu-id="5922c-208">您還將負責管理每個服務的虛擬機器和資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-208">You'd also be responsible for managing the virtual machine and database for each service.</span></span> <span data-ttu-id="5922c-209">這種方法可能很快變得耗時且成本高昂。</span><span class="sxs-lookup"><span data-stu-id="5922c-209">This approach could quickly become time-consuming and expensive.</span></span>

<span data-ttu-id="5922c-210">相反，雲原生應用程式傾向于作為[資料庫作為服務 （DBaaS）](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/)公開的資料服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-210">Instead, cloud-native applications favor data services exposed as a [Database as a Service (DBaaS)](https://www.stratoscale.com/blog/dbaas/what-is-database-as-a-service/).</span></span> <span data-ttu-id="5922c-211">這些服務完全由雲供應商管理，可提供內置的安全性、可擴充性和監視。</span><span class="sxs-lookup"><span data-stu-id="5922c-211">Fully managed by a cloud vendor, these services provide built-in security, scalability, and monitoring.</span></span> <span data-ttu-id="5922c-212">您只需將其用作[支援服務](./definition.md#backing-services)，而不是擁有該服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-212">Instead of owning the service, you simply consume it as a [backing service](./definition.md#backing-services).</span></span> <span data-ttu-id="5922c-213">供應商大規模運營資源，並負責性能和維護。</span><span class="sxs-lookup"><span data-stu-id="5922c-213">The provider operates the resource at scale and bears the responsibility for performance and maintenance.</span></span>

<span data-ttu-id="5922c-214">它們可以跨雲可用性區域和區域進行配置，以實現高可用性。</span><span class="sxs-lookup"><span data-stu-id="5922c-214">They can be configured across cloud availability zones and regions to achieve high availability.</span></span> <span data-ttu-id="5922c-215">他們都支援準時的容量和即用即付模式。</span><span class="sxs-lookup"><span data-stu-id="5922c-215">They all support just-in-time capacity and a pay-as-you-go model.</span></span> <span data-ttu-id="5922c-216">Azure 具有不同類型的託管資料服務選項，每個選項都有特定的優勢。</span><span class="sxs-lookup"><span data-stu-id="5922c-216">Azure features different kinds of managed data service options, each with specific benefits.</span></span>

<span data-ttu-id="5922c-217">我們首先將瞭解 Azure 中提供的關係 DBaaS 服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-217">We'll first look at relational DBaaS services available in Azure.</span></span> <span data-ttu-id="5922c-218">您將看到 Microsoft 的旗艦 SQL Server 資料庫以及幾個開源選項都可用。</span><span class="sxs-lookup"><span data-stu-id="5922c-218">You'll see that Microsoft's flagship SQL Server database is available along with several open-source options.</span></span> <span data-ttu-id="5922c-219">然後，我們將討論 Azure 中的 NoSQL 資料服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-219">Then, we'll talk about the NoSQL data services in Azure.</span></span>

## <a name="azure-relational-databases"></a><span data-ttu-id="5922c-220">Azure 關係資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-220">Azure relational databases</span></span>

<span data-ttu-id="5922c-221">對於需要關係資料的雲原生微服務，Azure 提供四個託管關係資料庫作為服務 （DBaaS） 產品，如圖 5-11 所示。</span><span class="sxs-lookup"><span data-stu-id="5922c-221">For cloud-native microservices that require relational data, Azure offers four managed relational databases as a service (DBaaS) offerings, shown in Figure 5-11.</span></span>

![Azure 中的託管關係資料庫](./media/azure-managed-databases.png)

<span data-ttu-id="5922c-223">**圖 5-11**。</span><span class="sxs-lookup"><span data-stu-id="5922c-223">**Figure 5-11**.</span></span> <span data-ttu-id="5922c-224">Azure 中提供的託管關係資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-224">Managed relational databases available in Azure</span></span>

<span data-ttu-id="5922c-225">在上圖中，請注意每個基礎設施如何位於通用 DBaaS 基礎結構上，該基礎結構具有關鍵功能，無需額外費用。</span><span class="sxs-lookup"><span data-stu-id="5922c-225">In the previous figure, note how each sits upon a common DBaaS infrastructure which features key capabilities at no additional cost.</span></span>

<span data-ttu-id="5922c-226">這些功能對於提供大量資料庫但管理這些資料庫的資源有限的組織尤其重要。</span><span class="sxs-lookup"><span data-stu-id="5922c-226">These features are especially important to organizations who provision large numbers of databases, but have limited resources to administer them.</span></span>
<span data-ttu-id="5922c-227">通過選擇處理核心、記憶體和基礎存儲的數量，可以在幾分鐘內預配 Azure 資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-227">You can provision an Azure database in minutes by selecting the amount of processing cores, memory, and underlying storage.</span></span> <span data-ttu-id="5922c-228">您可以動態擴展資料庫並動態調整資源，但停機時間很少或沒有停機時間。</span><span class="sxs-lookup"><span data-stu-id="5922c-228">You can scale the database on-the-fly and dynamically adjust resources with little to no downtime.</span></span>

## <a name="azure-sql-database"></a><span data-ttu-id="5922c-229">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="5922c-229">Azure SQL Database</span></span>

<span data-ttu-id="5922c-230">具有 Microsoft SQL Server 專業知識的開發團隊應考慮[Azure SQL 資料庫](https://docs.microsoft.com/azure/sql-database/)。</span><span class="sxs-lookup"><span data-stu-id="5922c-230">Development teams with expertise in Microsoft SQL Server should consider [Azure SQL Database](https://docs.microsoft.com/azure/sql-database/).</span></span> <span data-ttu-id="5922c-231">它是基於 Microsoft SQL Server 資料庫引擎的完全託管關係資料庫即服務 （DBaaS）。</span><span class="sxs-lookup"><span data-stu-id="5922c-231">It's a fully managed relational database-as-a-service (DBaaS) based on the Microsoft SQL Server Database Engine.</span></span> <span data-ttu-id="5922c-232">該服務共用 SQL Server 的本地版本中的許多功能，並運行 SQL Server 資料庫引擎的最新穩定版本。</span><span class="sxs-lookup"><span data-stu-id="5922c-232">The service shares many features found in the on-premises version of SQL Server and runs the latest stable version of the SQL Server Database Engine.</span></span>

<span data-ttu-id="5922c-233">對於與雲原生微服務一起使用，Azure SQL 資料庫提供三個部署選項：</span><span class="sxs-lookup"><span data-stu-id="5922c-233">For use with a cloud-native microservice, Azure SQL Database is available with three deployment options:</span></span>

- <span data-ttu-id="5922c-234">單個資料庫表示在 Azure 雲中的 Azure [SQL 資料庫伺服器上](https://docs.microsoft.com/azure/sql-database/sql-database-servers)運行的完全託管 SQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-234">A Single Database represents a fully managed SQL Database running on an [Azure SQL Database server](https://docs.microsoft.com/azure/sql-database/sql-database-servers) in the Azure cloud.</span></span> <span data-ttu-id="5922c-235">資料庫被視為[*包含*](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases)，因為它對基礎資料庫伺服器上沒有配置依賴項。</span><span class="sxs-lookup"><span data-stu-id="5922c-235">The database is considered [*contained*](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases) as it has no configuration dependencies on the underlying database server.</span></span>
  
- <span data-ttu-id="5922c-236">[託管實例](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance)是 Microsoft SQL Server 資料庫引擎的完全託管實例，它提供與本地 SQL Server 的近 100% 相容性。</span><span class="sxs-lookup"><span data-stu-id="5922c-236">A [Managed Instance](https://docs.microsoft.com/azure/sql-database/sql-database-managed-instance) is a fully managed instance of the Microsoft SQL Server Database Engine that provides near-100% compatibility with an on-premises SQL Server.</span></span> <span data-ttu-id="5922c-237">此選項支援更大的資料庫（最多 35 TB）並放置在[Azure 虛擬網路中](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview)以更好的隔離。</span><span class="sxs-lookup"><span data-stu-id="5922c-237">This option supports larger databases, up to 35 TB and is placed in an [Azure Virtual Network](https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview) for better isolation.</span></span>

- <span data-ttu-id="5922c-238">[Azure SQL 資料庫無伺服器](https://docs.microsoft.com/azure/sql-database/sql-database-serverless)是單個資料庫的計算層，該資料庫根據工作負載需求自動擴展。</span><span class="sxs-lookup"><span data-stu-id="5922c-238">[Azure SQL Database serverless](https://docs.microsoft.com/azure/sql-database/sql-database-serverless) is a compute tier for a single database that automatically scales based on workload demand.</span></span> <span data-ttu-id="5922c-239">它只對每秒使用的計算量進行帳單。</span><span class="sxs-lookup"><span data-stu-id="5922c-239">It bills only for the amount of compute used per second.</span></span> <span data-ttu-id="5922c-240">該服務非常適合間歇性、不可預知的使用模式的工作負載，這些工作負載穿插于不活動期。</span><span class="sxs-lookup"><span data-stu-id="5922c-240">The service is well suited for workloads with intermittent, unpredictable usage patterns, interspersed with periods of inactivity.</span></span> <span data-ttu-id="5922c-241">無伺服器計算層還會在非活動期間自動暫停資料庫，以便只收取存儲費用。</span><span class="sxs-lookup"><span data-stu-id="5922c-241">The serverless compute tier also automatically pauses databases during inactive periods so that only storage charges are billed.</span></span> <span data-ttu-id="5922c-242">當活動返回時，它會自動復原。</span><span class="sxs-lookup"><span data-stu-id="5922c-242">It automatically resumes when activity returns.</span></span>

<span data-ttu-id="5922c-243">除了傳統的 Microsoft SQL Server 堆疊之外，Azure 還具有三個常用開源資料庫的託管版本。</span><span class="sxs-lookup"><span data-stu-id="5922c-243">Beyond the traditional Microsoft SQL Server stack, Azure also features managed versions of three popular open-source databases.</span></span>

## <a name="open-source-databases-in-azure"></a><span data-ttu-id="5922c-244">Azure 中的開源資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-244">Open-source databases in Azure</span></span>

<span data-ttu-id="5922c-245">開源關係資料庫已成為雲原生應用程式的熱門選擇。</span><span class="sxs-lookup"><span data-stu-id="5922c-245">Open-source relational databases have become a popular choice for cloud-native applications.</span></span> <span data-ttu-id="5922c-246">許多企業比商務資料庫產品更青睞它們，尤其是為了節省成本。</span><span class="sxs-lookup"><span data-stu-id="5922c-246">Many enterprises favor them over commercial database products, especially for cost savings.</span></span> <span data-ttu-id="5922c-247">許多開發團隊都享有靈活性、社區支援的開發以及工具和擴展的生態系統。</span><span class="sxs-lookup"><span data-stu-id="5922c-247">Many development teams enjoy their flexibility, community-backed development, and ecosystem of tools and extensions.</span></span> <span data-ttu-id="5922c-248">開源資料庫可以跨多個雲供應商部署，有助於最大限度地減少"供應商鎖定"的問題。</span><span class="sxs-lookup"><span data-stu-id="5922c-248">Open-source databases can be deployed across multiple cloud providers, helping minimize the concern of "vendor lock-in."</span></span>

<span data-ttu-id="5922c-249">開發人員可以輕鬆地在 Azure VM 上自承載任何開源資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-249">Developers can easily self-host any open-source database on an Azure VM.</span></span> <span data-ttu-id="5922c-250">在提供完全控制的同時，此方法使您能夠對資料庫和 VM 的管理、監視和維護。</span><span class="sxs-lookup"><span data-stu-id="5922c-250">While providing full control, this approach puts you on the hook for the management, monitoring, and maintenance of the database and VM.</span></span>

<span data-ttu-id="5922c-251">但是，Microsoft 繼續致力於將 Azure 作為*完全託管*的 DBaaS 服務提供幾個流行的開源資料庫，從而保持 Azure 的"開放平臺"。</span><span class="sxs-lookup"><span data-stu-id="5922c-251">However, Microsoft continues its commitment to keeping Azure an “open platform” by offering several popular open-source databases as *fully managed* DBaaS services.</span></span>

### <a name="azure-database-for-mysql"></a><span data-ttu-id="5922c-252">適用於 MySQL 的 Azure 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-252">Azure Database for MySQL</span></span>

<span data-ttu-id="5922c-253">[MySQL](https://en.wikipedia.org/wiki/MySQL) 是一個開源關係資料庫，是[建立在LAMP軟體堆疊](https://en.wikipedia.org/wiki/LAMP_(software_bundle))上的應用程式的支柱。</span><span class="sxs-lookup"><span data-stu-id="5922c-253">[MySQL](https://en.wikipedia.org/wiki/MySQL) is an open-source relational database and a pillar for applications built on the [LAMP software stack](https://en.wikipedia.org/wiki/LAMP_(software_bundle)).</span></span> <span data-ttu-id="5922c-254">廣泛選擇*閱讀繁重的*工作量，它被許多大型組織使用，包括Facebook，Twitter和YouTube。</span><span class="sxs-lookup"><span data-stu-id="5922c-254">Widely chosen for *read heavy* workloads, it's used by many large organizations, including Facebook, Twitter, and YouTube.</span></span> <span data-ttu-id="5922c-255">社區版免費提供，而企業版需要購買許可證。</span><span class="sxs-lookup"><span data-stu-id="5922c-255">The community edition is available for free, while the enterprise edition requires a license purchase.</span></span> <span data-ttu-id="5922c-256">該產品最初創建于1995年，于2008年被Sun微系統公司購買。</span><span class="sxs-lookup"><span data-stu-id="5922c-256">Originally created in 1995, the product was purchased by Sun Microsystems in 2008.</span></span> <span data-ttu-id="5922c-257">甲骨文于2010年收購了Sun和MySQL。</span><span class="sxs-lookup"><span data-stu-id="5922c-257">Oracle acquired Sun and MySQL in 2010.</span></span>

<span data-ttu-id="5922c-258">[MySQL 的 Azure 資料庫](https://azure.microsoft.com/services/mysql/)是基於開源 MySQL Server 引擎的託管關係資料庫服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-258">[Azure Database for MySQL](https://azure.microsoft.com/services/mysql/) is a managed relational database service based on the open-source MySQL Server engine.</span></span> <span data-ttu-id="5922c-259">它使用 MySQL 社區版本。</span><span class="sxs-lookup"><span data-stu-id="5922c-259">It uses the MySQL Community edition.</span></span> <span data-ttu-id="5922c-260">Azure MySQL 伺服器是服務的管理點。</span><span class="sxs-lookup"><span data-stu-id="5922c-260">The Azure MySQL server is the administrative point for the service.</span></span> <span data-ttu-id="5922c-261">它與用於本地部署的 MySQL 伺服器引擎相同。</span><span class="sxs-lookup"><span data-stu-id="5922c-261">It's the same MySQL server engine used for on-premises deployments.</span></span> <span data-ttu-id="5922c-262">引擎可以創建每個伺服器的單個資料庫，也可以創建每個共用資源的伺服器的多個資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-262">The engine can create a single database per server or multiple databases per server that share resources.</span></span> <span data-ttu-id="5922c-263">您可以繼續使用相同的開源工具管理資料，而無需學習新技能或管理虛擬機器。</span><span class="sxs-lookup"><span data-stu-id="5922c-263">You can continue to manage data using the same open-source tools without having to learn new skills or manage virtual machines.</span></span>

### <a name="azure-database-for-mariadb"></a><span data-ttu-id="5922c-264">適用於 MariaDB 的 Azure 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-264">Azure Database for MariaDB</span></span>

<span data-ttu-id="5922c-265">[瑪麗亞DB](https://mariadb.com/)伺服器是另一個流行的開源資料庫伺服器。</span><span class="sxs-lookup"><span data-stu-id="5922c-265">[MariaDB](https://mariadb.com/) Server is another popular open-source database server.</span></span> <span data-ttu-id="5922c-266">當甲骨文收購擁有MySQL的太陽微系統公司時，它被創建為MySQL的*分叉*。</span><span class="sxs-lookup"><span data-stu-id="5922c-266">It was created as a *fork* of MySQL when Oracle purchased Sun Microsystems, who owned MySQL.</span></span> <span data-ttu-id="5922c-267">目的是確保MariaDB保持開放源碼。</span><span class="sxs-lookup"><span data-stu-id="5922c-267">The intent was to ensure that MariaDB remained open-source.</span></span> <span data-ttu-id="5922c-268">由於 MariaDB 是 MySQL 的分叉，因此資料和表定義是相容的，並且用戶端協定、結構和 API 是緊密相連的。</span><span class="sxs-lookup"><span data-stu-id="5922c-268">As MariaDB is a fork of MySQL, the data and table definitions are compatible, and the client protocols, structures, and APIs, are close-knit.</span></span>

<span data-ttu-id="5922c-269">MariaDB 擁有強大的社區，被許多大型企業所使用。</span><span class="sxs-lookup"><span data-stu-id="5922c-269">MariaDB has a strong community and is used by many large enterprises.</span></span> <span data-ttu-id="5922c-270">當 Oracle 繼續維護、增強和支援 MySQL 時，MariaDB 基金會管理 MariaDB，允許對產品和文檔進行公共貢獻。</span><span class="sxs-lookup"><span data-stu-id="5922c-270">While Oracle continues to maintain, enhance, and support MySQL, the MariaDB foundation manages MariaDB, allowing public contributions to the product and documentation.</span></span>

<span data-ttu-id="5922c-271">[MariaDB 的 Azure 資料庫](https://azure.microsoft.com/services/mariadb/)是 Azure 雲中完全託管的關係資料庫，即服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-271">[Azure Database for MariaDB](https://azure.microsoft.com/services/mariadb/) is a fully managed relational database as a service in the Azure cloud.</span></span> <span data-ttu-id="5922c-272">該服務基於 MariaDB 社區版伺服器引擎。</span><span class="sxs-lookup"><span data-stu-id="5922c-272">The service is based on the MariaDB community edition server engine.</span></span> <span data-ttu-id="5922c-273">它能夠處理任務關鍵型工作負載，具有可預測的性能和動態可擴充性。</span><span class="sxs-lookup"><span data-stu-id="5922c-273">It can handle mission-critical workloads with predictable performance and dynamic scalability.</span></span>

### <a name="azure-database-for-postgresql"></a><span data-ttu-id="5922c-274">適用於 PostgreSQL 的 Azure 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-274">Azure Database for PostgreSQL</span></span>

<span data-ttu-id="5922c-275">[PostgreSQL](https://www.postgresql.org/)是一個開源關係資料庫，擁有超過 30 年的積極發展。</span><span class="sxs-lookup"><span data-stu-id="5922c-275">[PostgreSQL](https://www.postgresql.org/) is an open-source relational database with over 30 years of active development.</span></span> <span data-ttu-id="5922c-276">PostgresSQL 在可靠性和資料完整性方面享有盛譽。</span><span class="sxs-lookup"><span data-stu-id="5922c-276">PostgresSQL has a strong reputation for reliability and data integrity.</span></span> <span data-ttu-id="5922c-277">它功能豐富、SQL 相容，並且被認為比 MySQL 更具性能- 尤其對於具有複雜查詢和大量寫入的工作負載。</span><span class="sxs-lookup"><span data-stu-id="5922c-277">It’s feature rich, SQL compliant, and considered more performant than MySQL - especially for workloads with complex queries and heavy writes.</span></span> <span data-ttu-id="5922c-278">許多大型企業，包括蘋果，紅帽和富士通已經建立了產品使用PostgreSQL。</span><span class="sxs-lookup"><span data-stu-id="5922c-278">Many large enterprises including Apple, Red Hat, and Fujitsu have built products using PostgreSQL.</span></span>

<span data-ttu-id="5922c-279">[基於開源 Postgres 資料庫引擎的 PostgreSQL Azure 資料庫](https://azure.microsoft.com/services/postgresql/)是一個完全託管的關係資料庫服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-279">[Azure Database for PostgreSQL](https://azure.microsoft.com/services/postgresql/) is a fully managed relational database service, based on the open-source Postgres database engine.</span></span> <span data-ttu-id="5922c-280">該服務支援許多開發平臺，包括C++、JAVA、Python、Node、C\#和 PHP。</span><span class="sxs-lookup"><span data-stu-id="5922c-280">The service supports many development platforms, including C++, Java, Python, Node, C\#, and PHP.</span></span> <span data-ttu-id="5922c-281">您可以使用[命令列介面](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1)工具或 Azure 資料移轉服務將 PostgreSQL 資料庫遷移到該資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-281">You can migrate PostgreSQL databases to it using the [command-line interface](https://datamigration.microsoft.com/scenario/postgresql-to-azurepostgresql?step=1) tool or Azure Data Migration Service.</span></span>

<span data-ttu-id="5922c-282">用於 PostgreSQL 的 Azure 資料庫提供兩個部署選項：</span><span class="sxs-lookup"><span data-stu-id="5922c-282">Azure Database for PostgreSQL is available with two deployment options:</span></span>

- <span data-ttu-id="5922c-283">[單伺服器](https://docs.microsoft.com/azure/postgresql/concepts-servers)部署選項是多個資料庫的中心管理點，您可以向其部署多個資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-283">The [Single Server](https://docs.microsoft.com/azure/postgresql/concepts-servers) deployment option is a central administrative point for multiple databases to which you can deploy many databases.</span></span> <span data-ttu-id="5922c-284">定價基於內核和存儲，按伺服器進行結構化。</span><span class="sxs-lookup"><span data-stu-id="5922c-284">The pricing is structured per-server based upon cores and storage.</span></span>

- <span data-ttu-id="5922c-285">[超大規模 （Citus） 選項](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/)由 Citus 資料技術提供支援。</span><span class="sxs-lookup"><span data-stu-id="5922c-285">The [Hyperscale (Citus) option](https://azure.microsoft.com/blog/get-high-performance-scaling-for-your-azure-database-workloads-with-hyperscale/) is powered by Citus Data technology.</span></span> <span data-ttu-id="5922c-286">通過跨數百個節點*水準擴展*單個資料庫，實現高性能，從而提供快速性能和擴展。</span><span class="sxs-lookup"><span data-stu-id="5922c-286">It enables high performance by *horizontally scaling* a single database across hundreds of nodes to deliver fast performance and scale.</span></span> <span data-ttu-id="5922c-287">此選項允許引擎在記憶體中容納更多資料，跨數百個節點並行化查詢，並更快地索引資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-287">This option allows the engine to fit more data in memory, parallelize queries across hundreds of nodes, and index data faster.</span></span>

## <a name="nosql-data-in-azure"></a><span data-ttu-id="5922c-288">Azure 中的無 SQL 資料</span><span class="sxs-lookup"><span data-stu-id="5922c-288">NoSQL data in Azure</span></span>

<span data-ttu-id="5922c-289">Cosmos DB 是 Azure 雲中完全託管的全域分佈的 NoSQL 資料庫服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-289">Cosmos DB is a fully managed, globally distributed NoSQL database service in the Azure cloud.</span></span> <span data-ttu-id="5922c-290">它已被世界各地的許多大公司採用，包括可口可樂、Skype、埃克森美孚和自由互助。</span><span class="sxs-lookup"><span data-stu-id="5922c-290">It has been adopted by many large companies across the world,  including Coca-Cola, Skype, ExxonMobil, and Liberty Mutual.</span></span>

<span data-ttu-id="5922c-291">如果您的服務需要來自世界任何地方的快速回應、高可用性或彈性可擴充性，Cosmos DB 是一個很好的選擇。</span><span class="sxs-lookup"><span data-stu-id="5922c-291">If your services require fast response from anywhere in the world, high availability, or elastic scalability, Cosmos DB is a great choice.</span></span> <span data-ttu-id="5922c-292">圖 5-12 顯示了宇宙 DB。</span><span class="sxs-lookup"><span data-stu-id="5922c-292">Figure 5-12 shows Cosmos DB.</span></span>

![宇宙 DB 概述](./media/cosmos-db-overview.png)

<span data-ttu-id="5922c-294">**圖5-12**：宇宙DB概述</span><span class="sxs-lookup"><span data-stu-id="5922c-294">**Figure 5-12**: Overview of Cosmos DB</span></span>

<span data-ttu-id="5922c-295">上圖顯示了 Cosmos DB 中可用的許多內置雲原生功能。</span><span class="sxs-lookup"><span data-stu-id="5922c-295">The previous figure presents many of the built-in cloud-native capabilities available in Cosmos DB.</span></span> <span data-ttu-id="5922c-296">在本節中，我們將仔細研究它們。</span><span class="sxs-lookup"><span data-stu-id="5922c-296">In this section, we’ll take a closer look at them.</span></span>

### <a name="global-support"></a><span data-ttu-id="5922c-297">全球支援</span><span class="sxs-lookup"><span data-stu-id="5922c-297">Global support</span></span>

<span data-ttu-id="5922c-298">雲原生應用程式通常具有全球受眾，需要全球擴展。</span><span class="sxs-lookup"><span data-stu-id="5922c-298">Cloud-native applications often have a global audience and require global scale.</span></span>

<span data-ttu-id="5922c-299">您可以跨地區或在世界各地分發 Cosmos 資料庫，將資料放在使用者附近，縮短回應時間並減少延遲。</span><span class="sxs-lookup"><span data-stu-id="5922c-299">You can distribute Cosmos databases across regions or around the world, placing data close to your users, improving response time, and reducing latency.</span></span> <span data-ttu-id="5922c-300">您可以在不暫停或重新部署服務的情況下從區域添加或刪除資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-300">You can add or remove a database from a region without pausing or redeploying your services.</span></span> <span data-ttu-id="5922c-301">在後臺，Cosmos DB 透明地將資料複製到每個配置的區域。</span><span class="sxs-lookup"><span data-stu-id="5922c-301">In the background, Cosmos DB transparently replicates the data to each of the configured regions.</span></span>

<span data-ttu-id="5922c-302">Cosmos DB 支援全域級別的[活動/主動](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/)群集，使您能夠配置任何資料庫區域以支援*寫入和讀取*。</span><span class="sxs-lookup"><span data-stu-id="5922c-302">Cosmos DB supports [active/active](https://kemptechnologies.com/white-papers/unfog-confusion-active-passive-activeactive-load-balancing/) clustering at the global level, enabling you to configure any of your database regions to support *both writes and reads*.</span></span>

<span data-ttu-id="5922c-303">[多主協定](https://docs.microsoft.com/azure/cosmos-db/multi-master-benefits)是 Cosmos DB 中的一個重要功能，可實現以下功能：</span><span class="sxs-lookup"><span data-stu-id="5922c-303">The [Multi-Master](https://docs.microsoft.com/azure/cosmos-db/multi-master-benefits) protocol is an important feature in Cosmos DB that enables the following functionality:</span></span>

- <span data-ttu-id="5922c-304">無限的彈性寫入和讀取可擴充性。</span><span class="sxs-lookup"><span data-stu-id="5922c-304">Unlimited elastic write and read scalability.</span></span>

- <span data-ttu-id="5922c-305">在世界各地具有 99.999% 的讀取和寫入可用性。</span><span class="sxs-lookup"><span data-stu-id="5922c-305">99.999% read and write availability all around the world.</span></span>

- <span data-ttu-id="5922c-306">保證讀取和寫入會以第 99 百分位數且小於 10 毫秒的方式提供服務。</span><span class="sxs-lookup"><span data-stu-id="5922c-306">Guaranteed reads and writes served in less than 10 milliseconds at the 99th percentile.</span></span>

<span data-ttu-id="5922c-307">使用 Cosmos DB[多宿主 API，](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally)微服務會自動知道最近的 Azure 區域並向其發送請求。</span><span class="sxs-lookup"><span data-stu-id="5922c-307">With the Cosmos DB [Multi-Homing APIs](https://docs.microsoft.com/azure/cosmos-db/distribute-data-globally), your microservice is automatically aware of the nearest Azure region and sends requests to it.</span></span> <span data-ttu-id="5922c-308">最近的區域由 Cosmos DB 標識，無需進行任何配置更改。</span><span class="sxs-lookup"><span data-stu-id="5922c-308">The nearest region is identified by Cosmos DB without any configuration changes.</span></span> <span data-ttu-id="5922c-309">如果區域不可用，多宿主功能將自動將請求路由到下一個最近的可用區域。</span><span class="sxs-lookup"><span data-stu-id="5922c-309">Should a region become unavailable, the Multi-Homing feature will automatically route requests to the next nearest available region.</span></span>

### <a name="multi-model-support"></a><span data-ttu-id="5922c-310">多型號支援</span><span class="sxs-lookup"><span data-stu-id="5922c-310">Multi-model support</span></span>

<span data-ttu-id="5922c-311">將單片應用程式重新程式設計到雲原生體系結構時，開發團隊有時必須遷移開源 NoSQL 資料存儲。</span><span class="sxs-lookup"><span data-stu-id="5922c-311">When replatforming monolithic applications to a cloud-native architecture, development teams sometimes have to migrate open-source, NoSQL data stores.</span></span> <span data-ttu-id="5922c-312">Cosmos DB 可説明您通過其*多模型*資料平臺在這些 NoSQL 資料存儲中保留投資。</span><span class="sxs-lookup"><span data-stu-id="5922c-312">Cosmos DB can help you preserve your investment in these NoSQL datastores with its *multi-model* data platform.</span></span> <span data-ttu-id="5922c-313">圖 5-13 顯示了支援的 NoSQL[相容性 API](https://www.wikiwand.com/en/Cosmos_DB)。</span><span class="sxs-lookup"><span data-stu-id="5922c-313">Figure 5-13 shows the supported NoSQL [compatibility APIs](https://www.wikiwand.com/en/Cosmos_DB).</span></span>

![宇宙資料庫提供程式](./media/cosmos-db-providers.png)

<span data-ttu-id="5922c-315">**圖 5-13**： 宇宙資料庫提供程式</span><span class="sxs-lookup"><span data-stu-id="5922c-315">**Figure 5-13**: Cosmos DB providers</span></span>

<span data-ttu-id="5922c-316">開發團隊可以將現有的蒙戈、格雷姆林或卡珊多拉資料庫移轉到 Cosmos DB，只需對資料或代碼進行最少的更改。</span><span class="sxs-lookup"><span data-stu-id="5922c-316">Development teams can migrate existing Mongo, Gremlin, or Cassandra databases into Cosmos DB with minimal changes to data or code.</span></span> <span data-ttu-id="5922c-317">對於新應用，開發團隊可以選擇開源選項或內置 SQL API 模型。</span><span class="sxs-lookup"><span data-stu-id="5922c-317">For new apps, development teams can choose among open-source options or the built-in SQL API model.</span></span>

> <span data-ttu-id="5922c-318">在內部，Cosmos 以由原始資料類型組成的簡單結構格式存儲資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-318">Internally, Cosmos stores the data in a simple struct format made up of primitive data types.</span></span> <span data-ttu-id="5922c-319">對於每個請求，資料庫引擎都會將原始資料轉換為您選擇的模型表示形式。</span><span class="sxs-lookup"><span data-stu-id="5922c-319">For each request, the database engine translates the primitive data into the model representation you've selected.</span></span>

<span data-ttu-id="5922c-320">在上圖 5-13 中，請注意[表 API](https://docs.microsoft.com/azure/cosmos-db/table-introduction)選項。</span><span class="sxs-lookup"><span data-stu-id="5922c-320">In the previous figure, 5-13, note the [Table API](https://docs.microsoft.com/azure/cosmos-db/table-introduction) option.</span></span> <span data-ttu-id="5922c-321">此 API 是 Azure 表存儲的演變。</span><span class="sxs-lookup"><span data-stu-id="5922c-321">This API is an evolution of Azure Table Storage.</span></span> <span data-ttu-id="5922c-322">兩者共用相同的基礎資料表模型，但 Cosmos DB 表 API 添加了 Azure 存儲 API 中不可用的高級增強功能。</span><span class="sxs-lookup"><span data-stu-id="5922c-322">Both share the same underlying table model, but the Cosmos DB Table API adds premium enhancements not available in the Azure Storage API.</span></span> <span data-ttu-id="5922c-323">這些功能在圖 5-4 中進行了對比。</span><span class="sxs-lookup"><span data-stu-id="5922c-323">These features are contrasted in Figure 5-4.</span></span>

![Azure 資料表 API](media/azure-table-api.png)

<span data-ttu-id="5922c-325">**圖 5-14**： Azure 表 API 提供程式</span><span class="sxs-lookup"><span data-stu-id="5922c-325">**Figure 5-14**: Azure Table API Providers</span></span>

<span data-ttu-id="5922c-326">使用 Azure 表存儲的微服務可以輕鬆地遷移到 Cosmos DB 表 API。</span><span class="sxs-lookup"><span data-stu-id="5922c-326">Microservices that consume Azure Table storage can easily migrate to the Cosmos DB Table API.</span></span> <span data-ttu-id="5922c-327">不需要變更程式碼。</span><span class="sxs-lookup"><span data-stu-id="5922c-327">No code changes are required.</span></span>

### <a name="tunable-consistency"></a><span data-ttu-id="5922c-328">可調一致性</span><span class="sxs-lookup"><span data-stu-id="5922c-328">Tunable consistency</span></span>

<span data-ttu-id="5922c-329">在 *"關係與NoSQL"* 部分的早些時候，我們討論了*資料一致性*的主題。</span><span class="sxs-lookup"><span data-stu-id="5922c-329">Earlier in the *Relational vs. NoSQL* section, we discussed the subject of *data consistency*.</span></span> <span data-ttu-id="5922c-330">資料一致性是指資料*的完整性*。</span><span class="sxs-lookup"><span data-stu-id="5922c-330">Data consistency refers to the *integrity* of your data.</span></span> <span data-ttu-id="5922c-331">具有分散式資料的雲原生服務依賴于複製，必須在讀取一致性、可用性和延遲之間做出根本性的權衡。</span><span class="sxs-lookup"><span data-stu-id="5922c-331">Cloud-native services with distributed data rely on replication and must make a fundamental tradeoff between read consistency, availability, and latency.</span></span>

<span data-ttu-id="5922c-332">大多數分散式資料庫允許開發人員在兩種一致性模型之間進行選擇：強一致性和最終一致性。</span><span class="sxs-lookup"><span data-stu-id="5922c-332">Most distributed databases allow developers to choose between two consistency models: strong consistency and eventual consistency.</span></span> <span data-ttu-id="5922c-333">*強一致性*是資料可程式設計性的黃金標準。</span><span class="sxs-lookup"><span data-stu-id="5922c-333">*Strong consistency* is the gold standard of data programmability.</span></span> <span data-ttu-id="5922c-334">它保證查詢將始終返回最新的資料 - 即使系統必須產生延遲等待更新在所有資料庫副本之間複製。</span><span class="sxs-lookup"><span data-stu-id="5922c-334">It guarantees that a query will always return the most current data - even if the system must incur latency waiting for an update to replicate across all database copies.</span></span> <span data-ttu-id="5922c-335">雖然為*最終一致性*配置的資料庫將立即返回資料，即使該資料不是最新的副本。</span><span class="sxs-lookup"><span data-stu-id="5922c-335">While a database configured for *eventual consistency* will return data immediately, even if that data isn't the most current copy.</span></span> <span data-ttu-id="5922c-336">後一個選項可實現更高的可用性、更大的規模和更高的性能。</span><span class="sxs-lookup"><span data-stu-id="5922c-336">The latter option enables higher availability, greater scale, and increased performance.</span></span>

<span data-ttu-id="5922c-337">Azure Cosmos DB 提供了圖 5-15 所示的五個定義良好的[一致性模型](https://docs.microsoft.com/azure/cosmos-db/consistency-levels)。</span><span class="sxs-lookup"><span data-stu-id="5922c-337">Azure Cosmos DB offers five well-defined [consistency models](https://docs.microsoft.com/azure/cosmos-db/consistency-levels) shown in Figure 5-15.</span></span>

![宇宙 DB 一致性圖](./media/cosmos-consistency-level-graph.png)

<span data-ttu-id="5922c-339">**圖 5-15**： 宇宙 DB 一致性級別</span><span class="sxs-lookup"><span data-stu-id="5922c-339">**Figure 5-15**: Cosmos DB Consistency Levels</span></span>

 <span data-ttu-id="5922c-340">這些選項使您能夠對資料的一致性、可用性和性能做出精確的選擇和精細權衡。</span><span class="sxs-lookup"><span data-stu-id="5922c-340">These options enable you to make precise choices and granular tradeoffs for consistency, availability, and the performance for your data.</span></span> <span data-ttu-id="5922c-341">圖 5-16 描述了每個級別。</span><span class="sxs-lookup"><span data-stu-id="5922c-341">Figure 5-16 describes each level.</span></span>

![宇宙資料庫一致性級別](./media/cosmos-db-consistency-levels.png)

<span data-ttu-id="5922c-343">**圖 5-16**： 宇宙 DB 一致性級別描述</span><span class="sxs-lookup"><span data-stu-id="5922c-343">**Figure 5-16**: Cosmos DB Consistency Level Description</span></span>

<span data-ttu-id="5922c-344">在["9球背後：宇宙DB一致性水準解釋"](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/)一文中，微軟雲開發者宣導者Jeremy Likeness對五種模型給出了極好的解釋。</span><span class="sxs-lookup"><span data-stu-id="5922c-344">In the article [Getting Behind the 9-Ball: Cosmos DB Consistency Levels Explained](https://blog.jeremylikness.com/blog/2018-03-23_getting-behind-the-9ball-cosmosdb-consistency-levels/), Microsoft Cloud Developer Advocate Jeremy Likeness provides an excellent explanation of the five models.</span></span>

### <a name="partitioning"></a><span data-ttu-id="5922c-345">資料分割</span><span class="sxs-lookup"><span data-stu-id="5922c-345">Partitioning</span></span>

<span data-ttu-id="5922c-346">Azure Cosmos DB 採用自動[分區](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview)來擴展資料庫以滿足雲原生服務的性能需求。</span><span class="sxs-lookup"><span data-stu-id="5922c-346">Azure Cosmos DB embraces automatic [partitioning](https://docs.microsoft.com/azure/cosmos-db/partitioning-overview) to scale a database to meet the performance needs of your cloud-native services.</span></span>

<span data-ttu-id="5922c-347">通過創建資料庫、容器和項來管理 Cosmos DB 資料中的資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-347">You manage data in Cosmos DB data by creating databases, containers, and items.</span></span>

<span data-ttu-id="5922c-348">容器位於 Cosmos DB 資料庫中，表示與架構無關的專案分組。</span><span class="sxs-lookup"><span data-stu-id="5922c-348">Containers live in a Cosmos DB database and represent a schema-agnostic grouping of items.</span></span> <span data-ttu-id="5922c-349">項是添加到容器中的資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-349">Items are the data that you add to the container.</span></span> <span data-ttu-id="5922c-350">它們表示為文檔、行、節點或邊。</span><span class="sxs-lookup"><span data-stu-id="5922c-350">They're represented as documents, rows, nodes, or edges.</span></span> <span data-ttu-id="5922c-351">添加到容器的所有專案都將自動編制索引。</span><span class="sxs-lookup"><span data-stu-id="5922c-351">All items added to a container are automatically indexed.</span></span>

<span data-ttu-id="5922c-352">要對容器進行分區，項被劃分為稱為邏輯分區的不同子集。</span><span class="sxs-lookup"><span data-stu-id="5922c-352">To partition the container, items are divided into distinct subsets called logical partitions.</span></span> <span data-ttu-id="5922c-353">邏輯分區是根據與容器中的每個項關聯的分區鍵的值填充的。</span><span class="sxs-lookup"><span data-stu-id="5922c-353">Logical partitions are populated based on the value of a partition key that is associated with each item in a container.</span></span> <span data-ttu-id="5922c-354">圖 5-18 顯示了兩個容器，每個容器都有一個基於分區鍵值的邏輯分區。</span><span class="sxs-lookup"><span data-stu-id="5922c-354">Figure 5-18 shows two containers each with a logical partition based on a partition key value.</span></span>

![宇宙資料庫分區機制](./media/cosmos-db-partitioning.png)

<span data-ttu-id="5922c-356">**圖 5-18**： 宇宙 DB 分區機制</span><span class="sxs-lookup"><span data-stu-id="5922c-356">**Figure 5-18**: Cosmos DB partitioning mechanics</span></span>

<span data-ttu-id="5922c-357">請注意，在上圖中，每個專案如何包含"城市"或"機場"的分區鍵。</span><span class="sxs-lookup"><span data-stu-id="5922c-357">Note in the  previous figure how each item includes a partition key of either ‘city’ or ‘airport’.</span></span> <span data-ttu-id="5922c-358">鍵確定項的邏輯分區。</span><span class="sxs-lookup"><span data-stu-id="5922c-358">The key determines the item’s logical partition.</span></span> <span data-ttu-id="5922c-359">帶有城市代碼的專案將分配給左側的容器，以及帶有機場代碼的專案分配給右側的容器。</span><span class="sxs-lookup"><span data-stu-id="5922c-359">Items with a city code are assigned to the container on the left, and items with an airport code, to the container on the right.</span></span> <span data-ttu-id="5922c-360">將分區鍵值與 ID 值合併將創建項的索引，該索引唯一地標識項。</span><span class="sxs-lookup"><span data-stu-id="5922c-360">Combining the partition key value with the ID value creates an item's index, which uniquely identifies the item.</span></span>

<span data-ttu-id="5922c-361">在內部，Cosmos DB 自動管理[物理分區上的邏輯分區](https://docs.microsoft.com/azure/cosmos-db/partition-data)放置，以滿足容器的可伸縮性和性能需求。</span><span class="sxs-lookup"><span data-stu-id="5922c-361">Internally, Cosmos DB automatically manages the placement of [logical partitions](https://docs.microsoft.com/azure/cosmos-db/partition-data) on physical partitions to satisfy the scalability and performance needs of the container.</span></span> <span data-ttu-id="5922c-362">隨著應用程式輸送量和存儲要求的提高，Azure Cosmos DB 會跨更多伺服器重新分發邏輯分區。</span><span class="sxs-lookup"><span data-stu-id="5922c-362">As application throughput and storage requirements  increase, Azure Cosmos DB redistributes logical partitions across a greater number of servers.</span></span> <span data-ttu-id="5922c-363">重新分發操作由 Cosmos DB 管理，並在不中斷或停機的情況下調用。</span><span class="sxs-lookup"><span data-stu-id="5922c-363">Redistribution operations are managed by Cosmos DB and invoked without interruption or downtime.</span></span>

## <a name="newsql-databases"></a><span data-ttu-id="5922c-364">新建 SQL 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-364">NewSQL databases</span></span>

<span data-ttu-id="5922c-365">*NewSQL* 是一種新興的資料庫技術，它將 NoSQL 的分散式可擴充性與關係資料庫的 ACID 保證相結合。</span><span class="sxs-lookup"><span data-stu-id="5922c-365">*NewSQL* is an emerging database technology that combines the distributed scalability of NoSQL with the ACID guarantees of a relational database.</span></span> <span data-ttu-id="5922c-366">NewSQL 資料庫對於必須在分散式環境中處理大量資料的業務系統非常重要，這些系統具有完全的事務支援和 ACID 合規性。</span><span class="sxs-lookup"><span data-stu-id="5922c-366">NewSQL databases are important for business systems that must process high-volumes of data, across distributed environments, with full transactional support and ACID compliance.</span></span> <span data-ttu-id="5922c-367">雖然 NoSQL 資料庫可以提供海量可伸縮性，但它不能保證資料一致性。</span><span class="sxs-lookup"><span data-stu-id="5922c-367">While a NoSQL database can provide massive scalability, it does not guarantee data consistency.</span></span> <span data-ttu-id="5922c-368">資料不一致的間歇性問題可能會給開發團隊帶來負擔。</span><span class="sxs-lookup"><span data-stu-id="5922c-368">Intermittent problems from inconsistent data can place a burden on the development team.</span></span> <span data-ttu-id="5922c-369">開發人員必須在微服務代碼中構造安全措施，以管理由不一致資料引起的問題。</span><span class="sxs-lookup"><span data-stu-id="5922c-369">Developers must construct safeguards into their microservice code to manage problems caused by inconsistent data.</span></span>

<span data-ttu-id="5922c-370">雲原生計算基礎 （CNCF） 具有多個新 SQL 資料庫專案。</span><span class="sxs-lookup"><span data-stu-id="5922c-370">The Cloud Native Computing Foundation (CNCF) features several NewSQL database projects.</span></span>

| <span data-ttu-id="5922c-371">隨附此逐步解說的專案</span><span class="sxs-lookup"><span data-stu-id="5922c-371">Project</span></span> | <span data-ttu-id="5922c-372">特性</span><span class="sxs-lookup"><span data-stu-id="5922c-372">Characteristics</span></span> |
| :-------- | :-------- |
| <span data-ttu-id="5922c-373">蟑螂 DB</span><span class="sxs-lookup"><span data-stu-id="5922c-373">Cockroach DB</span></span> |<span data-ttu-id="5922c-374">符合 ACID 的、全域擴展的關係資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-374">An ACID compliant, relational database that scales globally.</span></span> <span data-ttu-id="5922c-375">向群集添加新節點，而 CockroachDB 負責平衡跨實例和地理位置的資料。</span><span class="sxs-lookup"><span data-stu-id="5922c-375">Add a new node to a cluster and CockroachDB takes care of balancing the data across instances and geographies.</span></span> <span data-ttu-id="5922c-376">它創建、管理和分發副本以確保可靠性。</span><span class="sxs-lookup"><span data-stu-id="5922c-376">It creates, manages and distributes replicas to ensure reliability.</span></span> <span data-ttu-id="5922c-377">它是開源的，免費提供。</span><span class="sxs-lookup"><span data-stu-id="5922c-377">It’s open source and freely available.</span></span>  |
| <span data-ttu-id="5922c-378">提亞布</span><span class="sxs-lookup"><span data-stu-id="5922c-378">TiDB</span></span> | <span data-ttu-id="5922c-379">支援混合事務和分析處理 （HTAP） 工作負載的開源資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-379">An open-source database that supports Hybrid Transactional and Analytical Processing (HTAP) workloads.</span></span> <span data-ttu-id="5922c-380">它與 MySQL 相容，具有水準可擴充性、強一致性和高可用性。</span><span class="sxs-lookup"><span data-stu-id="5922c-380">It is MySQL-compatible and features horizontal scalability, strong consistency, and high availability.</span></span>  <span data-ttu-id="5922c-381">TiDB 充當 MySQL 伺服器。</span><span class="sxs-lookup"><span data-stu-id="5922c-381">TiDB acts like a MySQL server.</span></span> <span data-ttu-id="5922c-382">您可以繼續使用現有的 MySQL 用戶端庫，而無需對應用程式進行大量代碼更改。</span><span class="sxs-lookup"><span data-stu-id="5922c-382">You can continue to use existing MySQL client libraries, without requiring extensive code changes to your application.</span></span> |
| <span data-ttu-id="5922c-383">尤加位元組開發銀行</span><span class="sxs-lookup"><span data-stu-id="5922c-383">YugabyteDB</span></span> | <span data-ttu-id="5922c-384">開源、高性能、分散式 SQL 資料庫。</span><span class="sxs-lookup"><span data-stu-id="5922c-384">An open source, high-performance, distributed SQL database.</span></span> <span data-ttu-id="5922c-385">它支援低查詢延遲、抵禦故障的彈性和全域資料分發。</span><span class="sxs-lookup"><span data-stu-id="5922c-385">It supports low query latency, resilience against failures, and global data distribution.</span></span> <span data-ttu-id="5922c-386">YugabyDB 與後回歸 SQL 相容，可處理橫向擴展 RDBMS 和 Internet 規模 OLTP 工作負載。</span><span class="sxs-lookup"><span data-stu-id="5922c-386">YugabyteDB is PostgressSQL-compatible and handles scale-out RDBMS and internet-scale OLTP workloads.</span></span> <span data-ttu-id="5922c-387">該產品還支援NoSQL，並與卡珊多拉相容。</span><span class="sxs-lookup"><span data-stu-id="5922c-387">The product also support NoSQL and is compatible with Cassandra.</span></span> |
|<span data-ttu-id="5922c-388">維特斯</span><span class="sxs-lookup"><span data-stu-id="5922c-388">Vitess</span></span> | <span data-ttu-id="5922c-389">ViTES 是一種資料庫解決方案，用於部署、縮放和管理大型 MySQL 實例群集。</span><span class="sxs-lookup"><span data-stu-id="5922c-389">Vitess is a database solution for deploying, scaling and managing large clusters of MySQL instances.</span></span> <span data-ttu-id="5922c-390">它可以在公共或私有雲體系結構中運行。</span><span class="sxs-lookup"><span data-stu-id="5922c-390">It’s can run in a public or private cloud architecture.</span></span> <span data-ttu-id="5922c-391">它結合了並擴展了許多重要的 MySQL 功能，並具有垂直和水準分片支援功能。</span><span class="sxs-lookup"><span data-stu-id="5922c-391">It combines and extends many important MySQL features and features both vertical and horizontal sharding support.</span></span> <span data-ttu-id="5922c-392">Vites源自YouTube，自2011年以來一直提供所有YouTube資料庫流量。</span><span class="sxs-lookup"><span data-stu-id="5922c-392">Originated by YouTube, Vitess has been serving all YouTube database traffic since 2011 .</span></span> |

<span data-ttu-id="5922c-393">上圖中的開源專案可從雲原生計算基金會獲得。</span><span class="sxs-lookup"><span data-stu-id="5922c-393">The open-source projects in the previous figure are available from the Cloud Native Computing Foundation.</span></span> <span data-ttu-id="5922c-394">其中三種產品是完整的資料庫產品，其中包括 .NET Core 支援。</span><span class="sxs-lookup"><span data-stu-id="5922c-394">Three of the offerings are full database products, which include .NET Core support.</span></span> <span data-ttu-id="5922c-395">另一個 Vites 是一個資料庫群集系統，它水準縮放 MySQL 實例的大型群集。</span><span class="sxs-lookup"><span data-stu-id="5922c-395">The other, Vitess, is a database clustering system that horizontally scales large clusters of MySQL instances.</span></span>

<span data-ttu-id="5922c-396">NewSQL 資料庫的關鍵設計目標是利用平臺的彈性和可擴充性，在 Kubernetes 中本機工作。</span><span class="sxs-lookup"><span data-stu-id="5922c-396">A key design goal for NewSQL databases is to work natively in Kubernetes, taking advantage of the platform's resiliency and scalability.</span></span>

<span data-ttu-id="5922c-397">NewSQL 資料庫旨在在短暫的雲環境中蓬勃發展，在臨時雲環境中，基礎虛擬機器可在接到通知後立即重新開機或重新安排。</span><span class="sxs-lookup"><span data-stu-id="5922c-397">NewSQL databases are designed to thrive in ephemeral cloud environments where underlying virtual machines can be restarted or rescheduled at a moment’s notice.</span></span> <span data-ttu-id="5922c-398">資料庫旨在抵禦節點故障，而不會遺失資料或停機。</span><span class="sxs-lookup"><span data-stu-id="5922c-398">The databases are designed to survive node failures without data loss nor downtime.</span></span> <span data-ttu-id="5922c-399">例如，CockroachDB 通過在群集中的節點上維護任何資料的三個一致副本，能夠經受住電腦損失。</span><span class="sxs-lookup"><span data-stu-id="5922c-399">CockroachDB, for example, is able to survive a machine loss by maintaining three consistent replicas of any data across the nodes in a cluster.</span></span>

<span data-ttu-id="5922c-400">Kubernetes 使用*服務構造*允許用戶端從單個 DNS 條目處理一組相同的 NewSQL 資料庫進程。</span><span class="sxs-lookup"><span data-stu-id="5922c-400">Kubernetes uses a *Services construct* to allow a client to address a group of identical NewSQL databases processes from a single DNS entry.</span></span> <span data-ttu-id="5922c-401">通過將資料庫實例與與其關聯的服務位址分離，我們可以在不中斷現有應用程式實例的情況下進行擴展。</span><span class="sxs-lookup"><span data-stu-id="5922c-401">By decoupling the database instances from the address of the service with which it's associated, we can scale without disrupting existing application instances.</span></span> <span data-ttu-id="5922c-402">在給定時間向任何服務發送請求將始終產生相同的結果。</span><span class="sxs-lookup"><span data-stu-id="5922c-402">Sending a request to any service at a given time will always yield the same result.</span></span>

<span data-ttu-id="5922c-403">在這種情況下，所有資料庫實例都是相等的。</span><span class="sxs-lookup"><span data-stu-id="5922c-403">In this scenario, all database instances are equal.</span></span> <span data-ttu-id="5922c-404">沒有主關係或次要關係。</span><span class="sxs-lookup"><span data-stu-id="5922c-404">There are no primary or secondary relationships.</span></span> <span data-ttu-id="5922c-405">在 CockroachDB 中找到*的協商一致複製*等技術允許任何資料庫節點處理任何請求。</span><span class="sxs-lookup"><span data-stu-id="5922c-405">Techniques like *consensus replication* found in CockroachDB allow any database node to handle any request.</span></span> <span data-ttu-id="5922c-406">如果接收負載平衡請求的節點具有本地所需的資料，它將立即回應。</span><span class="sxs-lookup"><span data-stu-id="5922c-406">If the node that receives a load-balanced request has the data it needs locally, it responds immediately.</span></span> <span data-ttu-id="5922c-407">如果沒有，節點將成為閘道，並將請求轉發到相應的節點以獲得正確答案。</span><span class="sxs-lookup"><span data-stu-id="5922c-407">If not, the node becomes a gateway and forwards the request to the appropriate nodes to get the correct answer.</span></span> <span data-ttu-id="5922c-408">從用戶端的角度來看，每個資料庫節點都是一樣的：它們顯示為單個*邏輯*資料庫，具有單機系統的一致性保證，儘管有數十個甚至數百個節點在幕後工作。</span><span class="sxs-lookup"><span data-stu-id="5922c-408">From the client's perspective, every database node is the same: They appear as a single *logical* database with the consistency guarantees of a single-machine system, despite having dozens or even hundreds of nodes that are working behind the scenes.</span></span>

<span data-ttu-id="5922c-409">有關 NewSQL 資料庫背後的機制的詳細資訊，請參閱[DASH：庫伯內斯-本機資料庫的四個屬性](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/)一文。</span><span class="sxs-lookup"><span data-stu-id="5922c-409">For a detailed look at the mechanics behind NewSQL databases, see the [DASH: Four Properties of Kubernetes-Native Databases](https://thenewstack.io/dash-four-properties-of-kubernetes-native-databases/) article.</span></span>

## <a name="data-migration-to-the-cloud"></a><span data-ttu-id="5922c-410">資料移轉到雲</span><span class="sxs-lookup"><span data-stu-id="5922c-410">Data migration to the cloud</span></span>

<span data-ttu-id="5922c-411">更耗時的任務之一是從一個資料平臺將資料移轉到另一個資料平臺。</span><span class="sxs-lookup"><span data-stu-id="5922c-411">One of the more time-consuming tasks is migrating data from one data platform to another.</span></span> <span data-ttu-id="5922c-412">[Azure 資料移轉服務](https://azure.microsoft.com/services/database-migration/)可説明加快此類工作。</span><span class="sxs-lookup"><span data-stu-id="5922c-412">The [Azure Data Migration Service](https://azure.microsoft.com/services/database-migration/) can help expedite such efforts.</span></span> <span data-ttu-id="5922c-413">它可以將資料從多個外部資料庫源遷移到 Azure 資料平臺，但停機時間最少。</span><span class="sxs-lookup"><span data-stu-id="5922c-413">It can migrate data from several external database sources into Azure Data platforms with minimal downtime.</span></span> <span data-ttu-id="5922c-414">目標平臺包括以下服務：</span><span class="sxs-lookup"><span data-stu-id="5922c-414">Target platforms include the following services:</span></span>

- <span data-ttu-id="5922c-415">Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="5922c-415">Azure SQL Database</span></span>
- <span data-ttu-id="5922c-416">適用於 MySQL 的 Azure 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-416">Azure Database for MySQL</span></span>
- <span data-ttu-id="5922c-417">適用於 MariaDB 的 Azure 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-417">Azure Database for MariaDB</span></span>
- <span data-ttu-id="5922c-418">適用於 PostgreSQL 的 Azure 資料庫</span><span class="sxs-lookup"><span data-stu-id="5922c-418">Azure Database for PostgreSQL</span></span>
- <span data-ttu-id="5922c-419">CosmosDB</span><span class="sxs-lookup"><span data-stu-id="5922c-419">CosmosDB</span></span>
  
<span data-ttu-id="5922c-420">該服務提供建議，指導您完成執行遷移所需的更改，無論是小還是大。</span><span class="sxs-lookup"><span data-stu-id="5922c-420">The service provides recommendations to guide you through the changes required to execute a migration, both small or large.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="5922c-421">[上一個](Database-per-microservice.md)
>[下一個](azure-caching.md)</span><span class="sxs-lookup"><span data-stu-id="5922c-421">[Previous](Database-per-microservice.md)
[Next](azure-caching.md)</span></span>
